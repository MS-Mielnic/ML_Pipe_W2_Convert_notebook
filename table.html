<!DOCTYPE html>
<html>
<head>
  <style>
    #vis.vega-embed {
      width: 100%;
      display: flex;
    }

    #vis.vega-embed details,
    #vis.vega-embed details summary {
      position: relative;
    }
  </style>
  <script type="text/javascript">
    // vega-embed.js bundle with Vega-Lite version v5.16.3
    var Q=function(){var e=function(r,t){return e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(n,f){n.__proto__=f;}||function(n,f){for(var i in f)f.hasOwnProperty(i)&&(n[i]=f[i]);},e(r,t);};return function(r,t){e(r,t);function n(){this.constructor=r;}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n);};}(),z=Object.prototype.hasOwnProperty;function P(e,r){return z.call(e,r);}function R(e){if(Array.isArray(e)){for(var r=new Array(e.length),t=0;t<r.length;t++)r[t]=""+t;return r;}if(Object.keys)return Object.keys(e);var n=[];for(var f in e)P(e,f)&&n.push(f);return n;}function h(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e;}}function I(e){for(var r=0,t=e.length,n;r<t;){if(n=e.charCodeAt(r),n>=48&&n<=57){r++;continue;}return!1;}return!0;}function w(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1");}function D(e){return e.replace(/~1/g,"/").replace(/~0/g,"~");}function L(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var r=0,t=e.length;r<t;r++)if(L(e[r]))return!0;}else if(typeof e=="object"){for(var n=R(e),f=n.length,i=0;i<f;i++)if(L(e[n[i]]))return!0;}}return!1;}function J(e,r){var t=[e];for(var n in r){var f=typeof r[n]=="object"?JSON.stringify(r[n],null,2):r[n];typeof f!="undefined"&&t.push(n+": "+f);}return t.join(`
`);}var m=function(e){Q(r,e);function r(t,n,f,i,s){var o=this.constructor,v=e.call(this,J(t,{name:n,index:f,operation:i,tree:s}))||this;return v.name=n,v.index=f,v.operation=i,v.tree=s,Object.setPrototypeOf(v,o.prototype),v.message=J(t,{name:n,index:f,operation:i,tree:s}),v;}return r;}(Error),u=m,Y=h,O={add:function(e,r,t){return e[r]=this.value,{newDocument:t};},remove:function(e,r,t){var n=e[r];return delete e[r],{newDocument:t,removed:n};},replace:function(e,r,t){var n=e[r];return e[r]=this.value,{newDocument:t,removed:n};},move:function(e,r,t){var n=E(t,this.path);n&&(n=h(n));var f=_(t,{op:"remove",path:this.from}).removed;return _(t,{op:"add",path:this.path,value:f}),{newDocument:t,removed:n};},copy:function(e,r,t){var n=E(t,this.from);return _(t,{op:"add",path:this.path,value:h(n)}),{newDocument:t};},test:function(e,r,t){return{newDocument:t,test:A(e[r],this.value)};},_get:function(e,r,t){return this.value=e[r],{newDocument:t};}},K={add:function(e,r,t){return I(r)?e.splice(r,0,this.value):e[r]=this.value,{newDocument:t,index:r};},remove:function(e,r,t){var n=e.splice(r,1);return{newDocument:t,removed:n[0]};},replace:function(e,r,t){var n=e[r];return e[r]=this.value,{newDocument:t,removed:n};},move:O.move,copy:O.copy,test:O.test,_get:O._get};function E(e,r){if(r=="")return e;var t={op:"_get",path:r};return _(e,t),t.value;}function _(e,r,t,n,f,i){if(t===void 0&&(t=!1),n===void 0&&(n=!0),f===void 0&&(f=!0),i===void 0&&(i=0),t&&(typeof t=="function"?t(r,0,e,r.path):y(r,0)),r.path===""){var s={newDocument:e};if(r.op==="add")return s.newDocument=r.value,s;if(r.op==="replace")return s.newDocument=r.value,s.removed=e,s;if(r.op==="move"||r.op==="copy")return s.newDocument=E(e,r.from),r.op==="move"&&(s.removed=e),s;if(r.op==="test"){if(s.test=A(e,r.value),s.test===!1)throw new u("Test operation failed","TEST_OPERATION_FAILED",i,r,e);return s.newDocument=e,s;}else{if(r.op==="remove")return s.removed=e,s.newDocument=null,s;if(r.op==="_get")return r.value=e,s;if(t)throw new u("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,r,e);return s;}}else{n||(e=h(e));var o=r.path||"",v=o.split("/"),a=e,p=1,c=v.length,d=void 0,l=void 0,g=void 0;for(typeof t=="function"?g=t:g=y;;){if(l=v[p],l&&l.indexOf("~")!=-1&&(l=D(l)),f&&(l=="__proto__"||l=="prototype"&&p>0&&v[p-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(t&&d===void 0&&(a[l]===void 0?d=v.slice(0,p).join("/"):p==c-1&&(d=r.path),d!==void 0&&g(r,0,e,d)),p++,Array.isArray(a)){if(l==="-")l=a.length;else{if(t&&!I(l))throw new u("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,r,e);I(l)&&(l=~~l);}if(p>=c){if(t&&r.op==="add"&&l>a.length)throw new u("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,r,e);var s=K[r.op].call(r,a,l,e);if(s.test===!1)throw new u("Test operation failed","TEST_OPERATION_FAILED",i,r,e);return s;}}else if(p>=c){var s=O[r.op].call(r,a,l,e);if(s.test===!1)throw new u("Test operation failed","TEST_OPERATION_FAILED",i,r,e);return s;}if(a=a[l],t&&p<c&&(!a||typeof a!="object"))throw new u("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,r,e);}}}function T(e,r,t,n,f){if(n===void 0&&(n=!0),f===void 0&&(f=!0),t&&!Array.isArray(r))throw new u("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(e=h(e));for(var i=new Array(r.length),s=0,o=r.length;s<o;s++)i[s]=_(e,r[s],t,!0,f,s),e=i[s].newDocument;return i.newDocument=e,i;}function M(e,r,t){var n=_(e,r);if(n.test===!1)throw new u("Test operation failed","TEST_OPERATION_FAILED",t,r,e);return n.newDocument;}function y(e,r,t,n){if(typeof e!="object"||e===null||Array.isArray(e))throw new u("Operation is not an object","OPERATION_NOT_AN_OBJECT",r,e,t);if(O[e.op]){if(typeof e.path!="string")throw new u("Operation `path` property is not a string","OPERATION_PATH_INVALID",r,e,t);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new u('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",r,e,t);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new u("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",r,e,t);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new u("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",r,e,t);if((e.op==="add"||e.op==="replace"||e.op==="test")&&L(e.value))throw new u("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",r,e,t);if(t){if(e.op=="add"){var f=e.path.split("/").length,i=n.split("/").length;if(f!==i+1&&f!==i)throw new u("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",r,e,t);}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==n)throw new u("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",r,e,t);}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},o=S([s],t);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new u("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",r,e,t);}}}else throw new u("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",r,e,t);}function S(e,r,t){try{if(!Array.isArray(e))throw new u("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(r)T(h(r),h(e),t||!0);else{t=t||y;for(var n=0;n<e.length;n++)t(e[n],n,r,void 0);}}catch(f){if(f instanceof u)return f;throw f;}}function A(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){var t=Array.isArray(e),n=Array.isArray(r),f,i,s;if(t&&n){if(i=e.length,i!=r.length)return!1;for(f=i;f--!==0;)if(!A(e[f],r[f]))return!1;return!0;}if(t!=n)return!1;var o=Object.keys(e);if(i=o.length,i!==Object.keys(r).length)return!1;for(f=i;f--!==0;)if(!r.hasOwnProperty(o[f]))return!1;for(f=i;f--!==0;)if(s=o[f],!A(e[s],r[s]))return!1;return!0;}return e!==e&&r!==r;}var q=Object.freeze({__proto__:null,JsonPatchError:u,deepClone:Y,getValueByPointer:E,applyOperation:_,applyPatch:T,applyReducer:M,validator:y,validate:S,_areEquals:A});var U=new WeakMap,G=function(){function e(r){this.observers=new Map,this.obj=r;}return e;}(),W=function(){function e(r,t){this.callback=r,this.observer=t;}return e;}();function X(e){return U.get(e);}function Z(e,r){return e.observers.get(r);}function $(e,r){e.observers.delete(r.callback);}function B(e,r){r.unobserve();}function H(e,r){var t=[],n,f=X(e);if(!f)f=new G(e),U.set(e,f);else{var i=Z(f,r);n=i&&i.observer;}if(n)return n;if(n={},f.value=h(e),r){n.callback=r,n.next=null;var s=function(){N(n);},o=function(){clearTimeout(n.next),n.next=setTimeout(s);};typeof window!="undefined"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o));}return n.patches=t,n.object=e,n.unobserve=function(){N(n),clearTimeout(n.next),$(f,n),typeof window!="undefined"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o));},f.observers.set(r,new W(r,n)),n;}function N(e,r){r===void 0&&(r=!1);var t=U.get(e.object);C(t.value,e.object,e.patches,"",r),e.patches.length&&T(t.value,e.patches);var n=e.patches;return n.length>0&&(e.patches=[],e.callback&&e.callback(n)),n;}function C(e,r,t,n,f){if(r===e)return;typeof r.toJSON=="function"&&(r=r.toJSON());for(var i=R(r),s=R(e),o=!1,v=s.length-1;v>=0;v--){var a=s[v],p=e[a];if(P(r,a)&&!(r[a]===void 0&&p!==void 0&&Array.isArray(r)===!1)){var c=r[a];typeof p=="object"&&p!=null&&typeof c=="object"&&c!=null&&Array.isArray(p)===Array.isArray(c)?C(p,c,t,n+"/"+w(a),f):p!==c&&(f&&t.push({op:"test",path:n+"/"+w(a),value:h(p)}),t.push({op:"replace",path:n+"/"+w(a),value:h(c)}));}else Array.isArray(e)===Array.isArray(r)?(f&&t.push({op:"test",path:n+"/"+w(a),value:h(p)}),t.push({op:"remove",path:n+"/"+w(a)}),o=!0):(f&&t.push({op:"test",path:n,value:e}),t.push({op:"replace",path:n,value:r}));}if(!o&&i.length==s.length)return;for(var v=0;v<i.length;v++){var a=i[v];!P(e,a)&&r[a]!==void 0&&t.push({op:"add",path:n+"/"+w(a),value:h(r[a])});}}function F(e,r,t){t===void 0&&(t=!1);var n=[];return C(e,r,n,"",t),n;}var x=Object.freeze({__proto__:null,unobserve:B,observe:H,generate:N,compare:F}),j=Object.assign({},q,x,{JsonPatchError:m,deepClone:h,escapePathComponent:w,unescapePathComponent:D});var k=/("(?:[^\\"]|\\.)*")|[:,]/g,L1=function(N,i){var l,x,u;return i=i||{},l=JSON.stringify([1],void 0,i.indent===void 0?2:i.indent).slice(2,-3),x=l===""?Infinity:i.maxLength===void 0?80:i.maxLength,u=i.replacer,function J(e,a,m){var d,n,f,y,h,s,t,g,c,O,r,S;if(e&&typeof e.toJSON=="function"&&(e=e.toJSON()),r=JSON.stringify(e,u),r===void 0)return r;if(t=x-a.length-m,r.length<=t&&(c=r.replace(k,function(p,v){return v||p+" ";}),c.length<=t))return c;if(u!=null&&(e=JSON.parse(r),u=void 0),typeof e=="object"&&e!==null){if(g=a+l,f=[],n=0,Array.isArray(e))for(O="[",d="]",t=e.length;n<t;n++)f.push(J(e[n],g,n===t-1?0:1)||"null");else for(O="{",d="}",s=Object.keys(e),t=s.length;n<t;n++)y=s[n],h=JSON.stringify(y)+": ",S=J(e[y],g,h.length+(n===t-1?0:1)),S!==void 0&&f.push(h+S);if(f.length>0)return[O,l+f.join(`,
`+g),d].join(`
`+a);}return r;}(N,"",0);};function f(n,t,e){return n.fields=t||[],n.fname=e,n;}function H1(n){return n==null?null:n.fname;}function R1(n){return n==null?null:n.fields;}function I1(n){return n.length===1?Q1(n[0]):Y1(n);}const Q1=n=>function(t){return t[n];},Y1=n=>{const t=n.length;return function(e){for(let r=0;r<t;++r)e=e[n[r]];return e;};};function b(n){throw Error(n);}function N1(n){const t=[],e=n.length;let r=null,o=0,u="",i,c,s;n=n+"";function l(){t.push(u+n.substring(i,c)),u="",i=c+1;}for(i=c=0;c<e;++c)if(s=n[c],s==="\\")u+=n.substring(i,c++),i=c;else if(s===r)l(),r=null,o=-1;else{if(r)continue;i===o&&s==='"'||i===o&&s==="'"?(i=c+1,r=s):s==="."&&!o?c>i?l():i=c+1:s==="["?(c>i&&l(),o=i=c+1):s==="]"&&(o||b("Access path missing open bracket: "+n),o>0&&l(),o=0,i=c+1);}return o&&b("Access path missing closing bracket: "+n),r&&b("Access path missing closing quote: "+n),c>i&&(c++,l()),t;}function z1(n,t,e){const r=N1(n);return n=r.length===1?r[0]:n,f((e&&e.get||I1)(r),[n],t||n);}const k1=z1("id"),A1=f(n=>n,[],"identity"),y1=f(()=>0,[],"zero"),v=f(()=>1,[],"one"),_1=f(()=>!0,[],"true"),nn=f(()=>!1,[],"false");function tn(n,t,e){const r=[t].concat([].slice.call(e));console[n].apply(console,r);}function en(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:tn,r=n||0;return{level(o){return arguments.length?(r=+o,this):r;},error(){return r>=1&&e(t||"error","ERROR",arguments),this;},warn(){return r>=2&&e(t||"warn","WARN",arguments),this;},info(){return r>=3&&e(t||"log","INFO",arguments),this;},debug(){return r>=4&&e(t||"log","DEBUG",arguments),this;}};}var w1=Array.isArray;function M1(n){return n===Object(n);}const U1=n=>n!=="__proto__";function rn(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return t.reduce((r,o)=>{for(const u in o)if(u==="signals")r.signals=on(r.signals,o.signals);else{const i=u==="legend"?{layout:1}:u==="style"?!0:null;S1(r,u,o[u],i);}return r;},{});}function S1(n,t,e,r){if(!U1(t))return;let o,u;if(M1(e)&&!w1(e)){u=M1(n[t])?n[t]:n[t]={};for(o in e)r&&(r===!0||r[o])?S1(u,o,e[o]):U1(o)&&(u[o]=e[o]);}else n[t]=e;}function on(n,t){if(n==null)return t;const e={},r=[];function o(u){e[u.name]||(e[u.name]=1,r.push(u));}return t.forEach(o),n.forEach(o),r;}function a(n){return n[n.length-1];}function L2(n){return n==null||n===""?null:+n;}const B1=n=>t=>n*Math.exp(t),G1=n=>t=>Math.log(n*t),W1=n=>t=>Math.sign(t)*Math.log1p(Math.abs(t/n)),x1=n=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*n,E1=n=>t=>t<0?-Math.pow(-t,n):Math.pow(t,n);function d(n,t,e,r){const o=e(n[0]),u=e(a(n)),i=(u-o)*t;return[r(o-i),r(u-i)];}function un(n,t){return d(n,t,L2,A1);}function cn(n,t){var e=Math.sign(n[0]);return d(n,t,G1(e),B1(e));}function sn(n,t,e){return d(n,t,E1(e),E1(1/e));}function ln(n,t,e){return d(n,t,W1(e),x1(e));}function j1(n,t,e,r,o){const u=r(n[0]),i=r(a(n)),c=t!=null?r(t):(u+i)/2;return[o(c+(u-c)*e),o(c+(i-c)*e)];}function fn(n,t,e){return j1(n,t,e,L2,A1);}function gn(n,t,e){const r=Math.sign(n[0]);return j1(n,t,e,G1(r),B1(r));}function an(n,t,e,r){return j1(n,t,e,E1(r),E1(1/r));}function hn(n,t,e,r){return j1(n,t,e,W1(r),x1(r));}function pn(n){return 1+~~(new Date(n).getMonth()/3);}function mn(n){return 1+~~(new Date(n).getUTCMonth()/3);}function p(n){return n!=null?w1(n)?n:[n]:[];}function bn(n,t,e){let r=n[0],o=n[1],u;return o<r&&(u=o,o=r,r=u),u=o-r,u>=e-t?[t,e]:[r=Math.min(Math.max(r,t),e-u),r+u];}function O1(n){return typeof n=="function";}const wn="descending";function Mn(n,t,e){e=e||{},t=p(t)||[];const r=[],o=[],u={},i=e.comparator||En;return p(n).forEach((c,s)=>{if(c==null)return;r.push(t[s]===wn?-1:1),o.push(c=O1(c)?c:z1(c,null,e)),(R1(c)||[]).forEach(l=>u[l]=1);}),o.length===0?null:f(i(o,r),Object.keys(u));}const P1=(n,t)=>(n<t||n==null)&&t!=null?-1:(n>t||t==null)&&n!=null?1:(t=t instanceof Date?+t:t,n=n instanceof Date?+n:n)!==n&&t===t?-1:t!==t&&n===n?1:0,En=(n,t)=>n.length===1?dn(n[0],t[0]):jn(n,t,n.length),dn=(n,t)=>function(e,r){return P1(n(e),n(r))*t;},jn=(n,t,e)=>(t.push(0),function(r,o){let u,i=0,c=-1;for(;i===0&&++c<e;)u=n[c],i=P1(u(r),u(o));return i*t[c];});function On(n){return O1(n)?n:()=>n;}function Dn(n,t){let e;return r=>{e&&clearTimeout(e),e=setTimeout(()=>(t(r),e=null),n);};}function J1(n){for(let t,e,r=1,o=arguments.length;r<o;++r){t=arguments[r];for(e in t)n[e]=t[e];}return n;}function Nn(n,t){let e=0,r,o,u,i;if(n&&(r=n.length))if(t==null){for(o=n[e];e<r&&(o==null||o!==o);o=n[++e]);for(u=i=o;e<r;++e)o=n[e],o!=null&&(o<u&&(u=o),o>i&&(i=o));}else{for(o=t(n[e]);e<r&&(o==null||o!==o);o=t(n[++e]));for(u=i=o;e<r;++e)o=t(n[e]),o!=null&&(o<u&&(u=o),o>i&&(i=o));}return[u,i];}function zn(n,t){const e=n.length;let r=-1,o,u,i,c,s;if(t==null){for(;++r<e;)if(u=n[r],u!=null&&u>=u){o=i=u;break;}if(r===e)return[-1,-1];for(c=s=r;++r<e;)u=n[r],u!=null&&(o>u&&(o=u,c=r),i<u&&(i=u,s=r));}else{for(;++r<e;)if(u=t(n[r],r,n),u!=null&&u>=u){o=i=u;break;}if(r===e)return[-1,-1];for(c=s=r;++r<e;)u=t(n[r],r,n),u!=null&&(o>u&&(o=u,c=r),i<u&&(i=u,s=r));}return[c,s];}const An=Object.prototype.hasOwnProperty;function g(n,t){return An.call(n,t);}const D1={};function Sn(n){let t={},e;function r(u){return g(t,u)&&t[u]!==D1;}const o={size:0,empty:0,object:t,has:r,get(u){return r(u)?t[u]:void 0;},set(u,i){return r(u)||(++o.size,t[u]===D1&&--o.empty),t[u]=i,this;},delete(u){return r(u)&&(--o.size,++o.empty,t[u]=D1),this;},clear(){o.size=o.empty=0,o.object=t={};},test(u){return arguments.length?(e=u,o):e;},clean(){const u={};let i=0;for(const c in t){const s=t[c];s!==D1&&(!e||!e(s))&&(u[c]=s,++i);}o.size=i,o.empty=0,o.object=t=u;}};return n&&Object.keys(n).forEach(u=>{o.set(u,n[u]);}),o;}function Ln(n,t,e,r,o,u){if(!e&&e!==0)return u;const i=+e;let c=n[0],s=a(n),l;s<c&&(l=c,c=s,s=l),l=Math.abs(t-c);const h=Math.abs(s-t);return l<h&&l<=i?r:h<=i?o:u;}function Pn(n,t,e){const r=n.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:n,writable:!0,enumerable:!0,configurable:!0}),J1(r,e);}function Rn(n,t,e,r){let o=t[0],u=t[t.length-1],i;return o>u&&(i=o,o=u,u=i),e=e===void 0||e,r=r===void 0||r,(e?o<=n:o<n)&&(r?n<=u:n<u);}function In(n){return typeof n=="boolean";}function K1(n){return Object.prototype.toString.call(n)==="[object Date]";}function Cn(n){return n&&O1(n[Symbol.iterator]);}function V(n){return typeof n=="number";}function $n(n){return Object.prototype.toString.call(n)==="[object RegExp]";}function X1(n){return typeof n=="string";}function qn(n,t,e){n&&(n=t?p(n).map(c=>c.replace(/\\(.)/g,"$1")):p(n));const r=n&&n.length,o=e&&e.get||I1,u=c=>o(t?[c]:N1(c));let i;if(!r)i=function(){return"";};else if(r===1){const c=u(n[0]);i=function(s){return""+c(s);};}else{const c=n.map(u);i=function(s){let l=""+c[0](s),h=0;for(;++h<r;)l+="|"+c[h](s);return l;};}return f(i,n,"key");}function Fn(n,t){const e=n[0],r=a(n),o=+t;return o?o===1?r:e+o*(r-e):e;}const Tn=1e4;function Un(n){n=+n||Tn;let t,e,r;const o=()=>{t={},e={},r=0;},u=(i,c)=>(++r>n&&(e=t,t={},r=1),t[i]=c);return o(),{clear:o,has:i=>g(t,i)||g(e,i),get:i=>g(t,i)?t[i]:g(e,i)?u(i,e[i]):void 0,set:(i,c)=>g(t,i)?t[i]=c:u(i,c)};}function Bn(n,t,e,r){const o=t.length,u=e.length;if(!u)return t;if(!o)return e;const i=r||new t.constructor(o+u);let c=0,s=0,l=0;for(;c<o&&s<u;++l)i[l]=n(t[c],e[s])>0?e[s++]:t[c++];for(;c<o;++c,++l)i[l]=t[c];for(;s<u;++s,++l)i[l]=e[s];return i;}function m1(n,t){let e="";for(;--t>=0;)e+=n;return e;}function Gn(n,t,e,r){const o=e||" ",u=n+"",i=t-u.length;return i<=0?u:r==="left"?m1(o,i)+u:r==="center"?m1(o,~~(i/2))+u+m1(o,Math.ceil(i/2)):u+m1(o,i);}function Wn(n){return n&&a(n)-n[0]||0;}function Z1(n){return w1(n)?"["+n.map(Z1)+"]":M1(n)||X1(n)?JSON.stringify(n).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):n;}function xn(n){return n==null||n===""?null:!n||n==="false"||n==="0"?!1:!!n;}const Jn=n=>V(n)||K1(n)?n:Date.parse(n);function Kn(n,t){return t=t||Jn,n==null||n===""?null:t(n);}function Vn(n){return n==null||n===""?null:n+"";}function Xn(n){const t={},e=n.length;for(let r=0;r<e;++r)t[n[r]]=!0;return t;}function Zn(n,t,e,r){const o=r??"…",u=n+"",i=u.length,c=Math.max(0,t-o.length);return i<=t?u:e==="left"?o+u.slice(i-c):e==="center"?u.slice(0,Math.ceil(c/2))+o+u.slice(i-~~(c/2)):u.slice(0,c)+o;}function Hn(n,t,e){if(n)if(t){const r=n.length;for(let o=0;o<r;++o){const u=t(n[o]);u&&e(u,o,n);}}else n.forEach(e);}var V1={},N2={},A2=34,R2=10,E2=13;function y2(r){return new Function("d","return {"+r.map(function(o,n){return JSON.stringify(o)+": d["+n+'] || ""';}).join(",")+"}");}function Z2(r,o){var n=y2(r);return function(a,f){return o(n(a),f,r);};}function I2(r){var o=Object.create(null),n=[];return r.forEach(function(a){for(var f in a)f in o||n.push(o[f]=f);}),n;}function u1(r,o){var n=r+"",a=n.length;return a<o?new Array(o-a+1).join(0)+n:n;}function H2(r){return r<0?"-"+u1(-r,6):r>9999?"+"+u1(r,6):u1(r,4);}function L3(r){var o=r.getUTCHours(),n=r.getUTCMinutes(),a=r.getUTCSeconds(),f=r.getUTCMilliseconds();return isNaN(r)?"Invalid Date":H2(r.getUTCFullYear())+"-"+u1(r.getUTCMonth()+1,2)+"-"+u1(r.getUTCDate(),2)+(f?"T"+u1(o,2)+":"+u1(n,2)+":"+u1(a,2)+"."+u1(f,3)+"Z":a?"T"+u1(o,2)+":"+u1(n,2)+":"+u1(a,2)+"Z":n||o?"T"+u1(o,2)+":"+u1(n,2)+"Z":"");}function j2(r){var o=new RegExp('["'+r+`
\r]`),n=r.charCodeAt(0);function a(t,e){var c,i,s=f(t,function(p,m){if(c)return c(p,m-1);i=p,c=e?Z2(p,e):y2(p);});return s.columns=i||[],s;}function f(t,e){var c=[],i=t.length,s=0,p=0,m,F=i<=0,d=!1;t.charCodeAt(i-1)===R2&&--i,t.charCodeAt(i-1)===E2&&--i;function B(){if(F)return N2;if(d)return d=!1,V1;var T,g=s,h;if(t.charCodeAt(g)===A2){for(;s++<i&&t.charCodeAt(s)!==A2||t.charCodeAt(++s)===A2;);return(T=s)>=i?F=!0:(h=t.charCodeAt(s++))===R2?d=!0:h===E2&&(d=!0,t.charCodeAt(s)===R2&&++s),t.slice(g+1,T-1).replace(/""/g,'"');}for(;s<i;){if((h=t.charCodeAt(T=s++))===R2)d=!0;else if(h===E2)d=!0,t.charCodeAt(s)===R2&&++s;else if(h!==n)continue;return t.slice(g,T);}return F=!0,t.slice(g,i);}for(;(m=B())!==N2;){for(var C=[];m!==V1&&m!==N2;)C.push(m),m=B();if(e&&(C=e(C,p++))==null)continue;c.push(C);}return c;}function U(t,e){return t.map(function(c){return e.map(function(i){return w(c[i]);}).join(r);});}function O(t,e){return e==null&&(e=I2(t)),[e.map(w).join(r)].concat(U(t,e)).join(`
`);}function M(t,e){return e==null&&(e=I2(t)),U(t,e).join(`
`);}function P(t){return t.map(D).join(`
`);}function D(t){return t.map(w).join(r);}function w(t){return t==null?"":t instanceof Date?L3(t):o.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t;}return{parse:a,parseRows:f,format:O,formatBody:M,formatRows:P,formatRow:D,formatValue:w};}var v1=j2(","),S2=v1.parse,Y2=v1.parseRows,z2=v1.format,J2=v1.formatBody,Q2=v1.formatRows,W2=v1.formatRow,$1=v1.formatValue,l=j2("	"),k2=l.parse,q1=l.parseRows,G2=l.format,K2=l.formatBody,X2=l.formatRows,_2=l.formatRow,b1=l.formatValue;new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function P2(n){return n;}function w2(n){if(n==null)return P2;var u,s,c=n.scale[0],i=n.scale[1],l=n.translate[0],y=n.translate[1];return function(b,f){f||(u=s=0);var t=2,r=b.length,e=new Array(r);for(e[0]=(u+=b[0])*c+l,e[1]=(s+=b[1])*i+y;t<r;)e[t]=b[t],++t;return e;};}function q2(n,u){for(var s,c=n.length,i=c-u;i<--c;)s=n[i],n[i++]=n[c],n[c]=s;}function z3(n,u){return typeof u=="string"&&(u=n.objects[u]),u.type==="GeometryCollection"?{type:"FeatureCollection",features:u.geometries.map(function(s){return k3(n,s);})}:k3(n,u);}function k3(n,u){var s=u.id,c=u.bbox,i=u.properties==null?{}:u.properties,l=E3(n,u);return s==null&&c==null?{type:"Feature",properties:i,geometry:l}:c==null?{type:"Feature",id:s,properties:i,geometry:l}:{type:"Feature",id:s,bbox:c,properties:i,geometry:l};}function E3(n,u){var s=w2(n.transform),c=n.arcs;function i(r,e){e.length&&e.pop();for(var a=c[r<0?~r:r],o=0,p=a.length;o<p;++o)e.push(s(a[o],o));r<0&&q2(e,p);}function l(r){return s(r);}function y(r){for(var e=[],a=0,o=r.length;a<o;++a)i(r[a],e);return e.length<2&&e.push(e[0]),e;}function b(r){for(var e=y(r);e.length<4;)e.push(e[0]);return e;}function f(r){return r.map(b);}function t(r){var e=r.type,a;switch(e){case"GeometryCollection":return{type:e,geometries:r.geometries.map(t)};case"Point":a=l(r.coordinates);break;case"MultiPoint":a=r.coordinates.map(l);break;case"LineString":a=y(r.arcs);break;case"MultiLineString":a=r.arcs.map(y);break;case"Polygon":a=f(r.arcs);break;case"MultiPolygon":a=r.arcs.map(f);break;default:return null;}return{type:e,coordinates:a};}return t(u);}function A3(n,u){var s={},c={},i={},l=[],y=-1;u.forEach(function(t,r){var e=n.arcs[t<0?~t:t],a;e.length<3&&!e[1][0]&&!e[1][1]&&(a=u[++y],u[y]=t,u[r]=a);}),u.forEach(function(t){var r=b(t),e=r[0],a=r[1],o,p;if(o=i[e])if(delete i[o.end],o.push(t),o.end=a,p=c[a]){delete c[p.start];var h=p===o?o:o.concat(p);c[h.start=o.start]=i[h.end=p.end]=h;}else c[o.start]=i[o.end]=o;else if(o=c[a])if(delete c[o.start],o.unshift(t),o.start=e,p=i[e]){delete i[p.end];var d=p===o?o:p.concat(o);c[d.start=p.start]=i[d.end=o.end]=d;}else c[o.start]=i[o.end]=o;else o=[t],c[o.start=e]=i[o.end=a]=o;});function b(t){var r=n.arcs[t<0?~t:t],e=r[0],a;return n.transform?(a=[0,0],r.forEach(function(o){a[0]+=o[0],a[1]+=o[1];})):a=r[r.length-1],t<0?[a,e]:[e,a];}function f(t,r){for(var e in t){var a=t[e];delete r[a.start],delete a.start,delete a.end,a.forEach(function(o){s[o<0?~o:o]=1;}),l.push(a);}}return f(i,c),f(c,i),u.forEach(function(t){s[t<0?~t:t]||l.push([t]);}),l;}function _3(n){return E3(n,G3.apply(this,arguments));}function G3(n,u,s){var c,i,l;if(arguments.length>1)c=j3(n,u,s);else for(i=0,c=new Array(l=n.arcs.length);i<l;++i)c[i]=i;return{type:"MultiLineString",arcs:A3(n,c)};}function j3(n,u,s){var c=[],i=[],l;function y(e){var a=e<0?~e:e;(i[a]||(i[a]=[])).push({i:e,g:l});}function b(e){e.forEach(y);}function f(e){e.forEach(b);}function t(e){e.forEach(f);}function r(e){switch(l=e,e.type){case"GeometryCollection":e.geometries.forEach(r);break;case"LineString":b(e.arcs);break;case"MultiLineString":case"Polygon":f(e.arcs);break;case"MultiPolygon":t(e.arcs);break;}}return r(u),i.forEach(s==null?function(e){c.push(e[0].i);}:function(e){s(e[0].g,e[e.length-1].g)&&c.push(e[0].i);}),c;}class f1 extends Map{constructor(e,r=i){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[s,c]of e)this.set(s,c);}get(e){return super.get(n(this,e));}has(e){return super.has(n(this,e));}set(e,r){return super.set(u2(this,e),r);}delete(e){return super.delete(o(this,e));}}class h1 extends Set{constructor(e,r=i){super();if(Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const s of e)this.add(s);}has(e){return super.has(n(this,e));}add(e){return super.add(u2(this,e));}delete(e){return super.delete(o(this,e));}}function n({_intern:t,_key:e},r){const s=e(r);return t.has(s)?t.get(s):r;}function u2({_intern:t,_key:e},r){const s=e(r);return t.has(s)?t.get(s):(t.set(s,r),r);}function o({_intern:t,_key:e},r){const s=e(r);return t.has(s)&&(r=t.get(s),t.delete(s)),r;}function i(t){return t!==null&&typeof t=="object"?t.valueOf():t;}function a1(n,e){return n==null||e==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN;}function K3(n,e){return n==null||e==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN;}function G4(n){let e,t,i;n.length!==2?(e=a1,t=(u,c)=>a1(n(u),c),i=(u,c)=>n(u)-c):(e=n===a1||n===K3?n:xn1,t=n,i=n);function r(u,c,l=0,s=u.length){if(l<s){if(e(c,c)!==0)return s;do{const d=l+s>>>1;t(u[d],c)<0?l=d+1:s=d;}while(l<s)}return l;}function f(u,c,l=0,s=u.length){if(l<s){if(e(c,c)!==0)return s;do{const d=l+s>>>1;t(u[d],c)<=0?l=d+1:s=d;}while(l<s)}return l;}function o(u,c,l=0,s=u.length){const d=r(u,c,l,s-1);return d>l&&i(u[d-1],c)>-i(u[d],c)?d-1:d;}return{left:r,center:o,right:f};}function xn1(){return 0;}function z4(n){return n===null?NaN:+n;}function*bn1(n,e){if(e===void 0)for(let t of n)t!=null&&(t=+t)>=t&&(yield t);else{let t=-1;for(let i of n)(i=e(i,++t,n))!=null&&(i=+i)>=i&&(yield i);}}const P3=G4(a1),U2=P3.right,An1=P3.left,pn1=G4(z4).center;X3(B2),X3(Rn1);function X3(n){return function(e,t,i=t){if(!((t=+t)>=0))throw new RangeError("invalid rx");if(!((i=+i)>=0))throw new RangeError("invalid ry");let{data:r,width:f,height:o}=e;if(!((f=Math.floor(f))>=0))throw new RangeError("invalid width");if(!((o=Math.floor(o!==void 0?o:r.length/f))>=0))throw new RangeError("invalid height");if(!f||!o||!t&&!i)return e;const u=t&&n(t),c=i&&n(i),l=r.slice();return u&&c?(y3(u,l,r,f,o),y3(u,r,l,f,o),y3(u,l,r,f,o),x2(c,r,l,f,o),x2(c,l,r,f,o),x2(c,r,l,f,o)):u?(y3(u,r,l,f,o),y3(u,l,r,f,o),y3(u,r,l,f,o)):c&&(x2(c,r,l,f,o),x2(c,l,r,f,o),x2(c,r,l,f,o)),e;};}function y3(n,e,t,i,r){for(let f=0,o=i*r;f<o;)n(e,t,f,f+=i,1);}function x2(n,e,t,i,r){for(let f=0,o=i*r;f<i;++f)n(e,t,f,f+o,i);}function Rn1(n){const e=B2(n);return(t,i,r,f,o)=>{r<<=2,f<<=2,o<<=2,e(t,i,r+0,f+0,o),e(t,i,r+1,f+1,o),e(t,i,r+2,f+2,o),e(t,i,r+3,f+3,o);};}function B2(n){const e=Math.floor(n);if(e===n)return qn1(n);const t=n-e,i=2*n+1;return(r,f,o,u,c)=>{if(!((u-=c)>=o))return;let l=e*f[o];const s=c*e,d=s+c;for(let h=o,m=o+s;h<m;h+=c)l+=f[Math.min(u,h)];for(let h=o,m=u;h<=m;h+=c)l+=f[Math.min(u,h+s)],r[h]=(l+t*(f[Math.max(o,h-d)]+f[Math.min(u,h+d)]))/i,l-=f[Math.max(o,h-s)];};}function qn1(n){const e=2*n+1;return(t,i,r,f,o)=>{if(!((f-=o)>=r))return;let u=n*i[r];const c=o*n;for(let l=r,s=r+c;l<s;l+=o)u+=i[Math.min(f,l)];for(let l=r,s=f;l<=s;l+=o)u+=i[Math.min(f,l+c)],t[l]=u/e,u-=i[Math.max(r,l-c)];};}function Y3(n,e){let t=0,i,r=0,f=0;if(e===void 0)for(let o of n)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++t,f+=i*(o-r));else{let o=-1;for(let u of n)(u=e(u,++o,n))!=null&&(u=+u)>=u&&(i=u-r,r+=i/++t,f+=i*(u-r));}if(t>1)return f/(t-1);}function v2(n,e){const t=Y3(n,e);return t&&Math.sqrt(t);}class C1{constructor(){this._partials=new Float64Array(32),this._n=0;}add(e){const t=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const f=t[r],o=e+f,u=Math.abs(e)<Math.abs(f)?e-(o-f):f-(o-e);u&&(t[i++]=u),e=o;}return t[i]=e,this._n=i+1,this;}valueOf(){const e=this._partials;let t=this._n,i,r,f,o=0;if(t>0){for(o=e[--t];t>0&&!(i=o,r=e[--t],o=i+r,f=r-(o-i),f););t>0&&(f<0&&e[t-1]<0||f>0&&e[t-1]>0)&&(r=f*2,i=o+r,r==i-o&&(o=i));}return o;}}function un1(n,e){return Array.from(e,t=>n[t]);}function W3(n=a1){if(n===a1)return p1;if(typeof n!="function")throw new TypeError("compare is not a function");return(e,t)=>{const i=n(e,t);return i||i===0?i:(n(t,t)===0)-(n(e,e)===0);};}function p1(n,e){return(n==null||!(n>=n))-(e==null||!(e>=e))||(n<e?-1:n>e?1:0);}var Cn1=Array.prototype,Qn=Cn1.slice;const Wn1=Math.sqrt(50),$n1=Math.sqrt(10),_n=Math.sqrt(2);function D2(n,e,t){const i=(e-n)/Math.max(0,t),r=Math.floor(Math.log10(i)),f=i/Math.pow(10,r),o=f>=Wn1?10:f>=$n1?5:f>=_n?2:1;let u,c,l;return r<0?(l=Math.pow(10,-r)/o,u=Math.round(n*l),c=Math.round(e*l),u/l<n&&++u,c/l>e&&--c,l=-l):(l=Math.pow(10,r)*o,u=Math.round(n/l),c=Math.round(e/l),u*l<n&&++u,c*l>e&&--c),c<u&&.5<=t&&t<2?D2(n,e,t*2):[u,c,l];}function ln1(n,e,t){if(e=+e,n=+n,t=+t,!(t>0))return[];if(n===e)return[n];const i=e<n,[r,f,o]=i?D2(e,n,t):D2(n,e,t);if(!(f>=r))return[];const u=f-r+1,c=new Array(u);if(i)if(o<0)for(let l=0;l<u;++l)c[l]=(f-l)/-o;else for(let l=0;l<u;++l)c[l]=(f-l)*o;else if(o<0)for(let l=0;l<u;++l)c[l]=(r+l)/-o;else for(let l=0;l<u;++l)c[l]=(r+l)*o;return c;}function E4(n,e,t){return e=+e,n=+n,t=+t,D2(n,e,t)[2];}function kn(n,e,t){e=+e,n=+n,t=+t;const i=e<n,r=i?E4(e,n,t):E4(n,e,t);return(i?-1:1)*(r<0?1/-r:r);}function _4(n,e){let t;if(e===void 0)for(const i of n)i!=null&&(t<i||t===void 0&&i>=i)&&(t=i);else{let i=-1;for(let r of n)(r=e(r,++i,n))!=null&&(t<r||t===void 0&&r>=r)&&(t=r);}return t;}function L4(n,e){let t;if(e===void 0)for(const i of n)i!=null&&(t>i||t===void 0&&i>=i)&&(t=i);else{let i=-1;for(let r of n)(r=e(r,++i,n))!=null&&(t>r||t===void 0&&r>=r)&&(t=r);}return t;}function S3(n,e,t=0,i=Infinity,r){if(e=Math.floor(e),t=Math.floor(Math.max(0,t)),i=Math.floor(Math.min(n.length-1,i)),!(t<=e&&e<=i))return n;for(r=r===void 0?p1:W3(r);i>t;){if(i-t>600){const c=i-t+1,l=e-t+1,s=Math.log(c),d=.5*Math.exp(2*s/3),h=.5*Math.sqrt(s*d*(c-d)/c)*(l-c/2<0?-1:1),m=Math.max(t,Math.floor(e-l*d/c+h)),w=Math.min(i,Math.floor(e+(c-l)*d/c+h));S3(n,e,m,w,r);}const f=n[e];let o=t,u=i;for(q3(n,t,e),r(n[i],f)>0&&q3(n,t,i);o<u;){for(q3(n,o,u),++o,--u;r(n[o],f)<0;)++o;for(;r(n[u],f)>0;)--u;}r(n[t],f)===0?q3(n,t,u):(++u,q3(n,u,i)),u<=e&&(t=u+1),e<=u&&(i=u-1);}return n;}function q3(n,e,t){const i=n[e];n[e]=n[t],n[t]=i;}function O2(n,e,t){if(n=Float64Array.from(bn1(n,t)),!(i=n.length)||isNaN(e=+e))return;if(e<=0||i<2)return L4(n);if(e>=1)return _4(n);var i,r=(i-1)*e,f=Math.floor(r),o=_4(S3(n,f).subarray(0,f+1)),u=L4(n.subarray(f+1));return o+(u-o)*(r-f);}function Hn1(n,e,t=z4){if(!(i=n.length)||isNaN(e=+e))return;if(e<=0||i<2)return+t(n[0],0,n);if(e>=1)return+t(n[i-1],i-1,n);var i,r=(i-1)*e,f=Math.floor(r),o=+t(n[f],f,n),u=+t(n[f+1],f+1,n);return o+(u-o)*(r-f);}function Pn1(n,e){let t=0,i=0;if(e===void 0)for(let r of n)r!=null&&(r=+r)>=r&&(++t,i+=r);else{let r=-1;for(let f of n)(f=e(f,++r,n))!=null&&(f=+f)>=f&&(++t,i+=f);}if(t)return i/t;}function Xn1(n,e){return O2(n,.5,e);}function*vn(n){for(const e of n)yield*e;}function ne(n){return Array.from(vn(n));}function ie(n,e,t){n=+n,e=+e,t=(r=arguments.length)<2?(e=n,n=0,1):r<3?1:+t;for(var i=-1,r=Math.max(0,Math.ceil((e-n)/t))|0,f=new Array(r);++i<r;)f[i]=n+i*t;return f;}wn1(Math.random);function wn1(n){return function(t,i=0,r=t.length){let f=r-(i=+i);for(;f;){const o=n()*f--|0,u=t[f+i];t[f+i]=t[o+i],t[o+i]=u;}return t;};}function de(n,e){let t=0;if(e===void 0)for(let i of n)(i=+i)&&(t+=i);else{let i=-1;for(let r of n)(r=+e(r,++i,n))&&(t+=r);}return t;}function Ae(n,...e){n=new h1(n),e=e.map(pe);n:for(const t of n)for(const i of e)if(!i.has(t)){n.delete(t);continue n;}return n;}function pe(n){return n instanceof h1?n:new h1(n);}function Ne(...n){const e=new h1;for(const t of n)for(const i of t)e.add(i);return e;}function W4(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10);}function j4(n,t){if((e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var e,i=n.slice(0,e);return[i.length>1?i[0]+i.slice(2):i,+n.slice(e+1)];}function b2(n){return n=j4(Math.abs(n)),n?n[1]:NaN;}function _5(n,t){return function(e,i){for(var o=e.length,f=[],c=0,m=n[0],x=0;o>0&&m>0&&!(x+m+1>i&&(m=Math.max(1,i-x)),f.push(e.substring(o-=m,o+m)),(x+=m+1)>i);)m=n[c=(c+1)%n.length];return f.reverse().join(t);};}function v3(n){return function(t){return t.replace(/[0-9]/g,function(e){return n[+e];});};}var nn1=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function E5(n){if(!(t=nn1.exec(n)))throw new Error("invalid format: "+n);var t;return new F1({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]});}E5.prototype=F1.prototype;function F1(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+"";}F1.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type;};function tn1(n){n:for(var t=n.length,e=1,i=-1,o;e<t;++e)switch(n[e]){case".":i=o=e;break;case"0":i===0&&(i=e),o=e;break;default:if(!+n[e])break n;i>0&&(i=0);break;}return i>0?n.slice(0,i)+n.slice(o+1):n;}var I3;function rn1(n,t){var e=j4(n,t);if(!e)return n+"";var i=e[0],o=e[1],f=o-(I3=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,c=i.length;return f===c?i:f>c?i+new Array(f-c+1).join("0"):f>0?i.slice(0,f)+"."+i.slice(f):"0."+new Array(1-f).join("0")+j4(n,Math.max(0,t+f-1))[0];}function R3(n,t){var e=j4(n,t);if(!e)return n+"";var i=e[0],o=e[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0");}var X4={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:W4,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>R3(n*100,t),r:R3,s:rn1,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function O3(n){return n;}var U3=Array.prototype.map,Y4=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Z3(n){var t=n.grouping===void 0||n.thousands===void 0?O3:_5(U3.call(n.grouping,Number),n.thousands+""),e=n.currency===void 0?"":n.currency[0]+"",i=n.currency===void 0?"":n.currency[1]+"",o=n.decimal===void 0?".":n.decimal+"",f=n.numerals===void 0?O3:v3(U3.call(n.numerals,String)),c=n.percent===void 0?"%":n.percent+"",m=n.minus===void 0?"−":n.minus+"",x=n.nan===void 0?"NaN":n.nan+"";function $(a){a=E5(a);var p=a.fill,w=a.align,d=a.sign,S=a.symbol,l=a.zero,k=a.width,N=a.comma,g=a.precision,T=a.trim,h=a.type;h==="n"?(N=!0,h="g"):X4[h]||(g===void 0&&(g=12),T=!0,h="g"),(l||p==="0"&&w==="=")&&(l=!0,p="0",w="=");var K=S==="$"?e:S==="#"&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",Q=S==="$"?i:/[%p]/.test(h)?c:"",C=X4[h],V=/[defgprs%]/.test(h);g=g===void 0?6:/[gprs]/.test(h)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g));function D(r){var y=K,u=Q,M,G,P;if(h==="c")u=C(r)+u,r="";else{r=+r;var z=r<0||1/r<0;if(r=isNaN(r)?x:C(Math.abs(r),g),T&&(r=tn1(r)),z&&+r===0&&d!=="+"&&(z=!1),y=(z?d==="("?d:m:d==="-"||d==="("?"":d)+y,u=(h==="s"?Y4[8+I3/3]:"")+u+(z&&d==="("?")":""),V){for(M=-1,G=r.length;++M<G;)if(P=r.charCodeAt(M),48>P||P>57){u=(P===46?o+r.slice(M+1):r.slice(M))+u,r=r.slice(0,M);break;}}}N&&!l&&(r=t(r,Infinity));var A=y.length+r.length+u.length,s=A<k?new Array(k-A+1).join(p):"";N&&l&&(r=t(s+r,s.length?k-u.length:Infinity),s="");switch(w){case"<":r=y+r+u+s;break;case"=":r=y+s+r+u;break;case"^":r=s.slice(0,A=s.length>>1)+y+r+u+s.slice(A);break;default:r=s+y+r+u;break;}return f(r);}return D.toString=function(){return a+"";},D;}function J(a,p){var w=$((a=E5(a),a.type="f",a)),d=Math.max(-8,Math.min(8,Math.floor(b2(p)/3)))*3,S=Math.pow(10,-d),l=Y4[8+d/3];return function(k){return w(S*k)+l;};}return{format:$,formatPrefix:J};}var L5,q4,B3;H3({thousands:",",grouping:[3],currency:["$",""]});function H3(n){return L5=Z3(n),q4=L5.format,B3=L5.formatPrefix,L5;}function en1(n){return Math.max(0,-b2(Math.abs(n)));}function on1(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(b2(t)/3)))*3-b2(Math.abs(n)));}function an1(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,b2(t)-b2(n))+1;}const z5=new Date,x3=new Date;function o1(e,t,s,Y){function u(n){return e(n=arguments.length===0?new Date:new Date(+n)),n;}return u.floor=n=>(e(n=new Date(+n)),n),u.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),u.round=n=>{const r=u(n),c=u.ceil(n);return n-r<c-n?r:c;},u.offset=(n,r)=>(t(n=new Date(+n),r==null?1:Math.floor(r)),n),u.range=(n,r,c)=>{const D=[];if(n=u.ceil(n),c=c==null?1:Math.floor(c),!(n<r)||!(c>0))return D;let i;do D.push(i=new Date(+n)),t(n,c),e(n);while(i<n&&n<r)return D;},u.filter=n=>o1(r=>{if(r>=r)for(;e(r),!n(r);)r.setTime(r-1);},(r,c)=>{if(r>=r)if(c<0)for(;++c<=0;)for(;t(r,-1),!n(r););else for(;--c>=0;)for(;t(r,1),!n(r););}),s&&(u.count=(n,r)=>(z5.setTime(+n),x3.setTime(+r),e(z5),e(x3),Math.floor(s(z5,x3))),u.every=n=>(n=Math.floor(n),!isFinite(n)||!(n>0)?null:n>1?u.filter(Y?r=>Y(r)%n===0:r=>u.count(0,r)%n===0):u)),u;}const F2=o1(()=>{},(e,t)=>{e.setTime(+e+t);},(e,t)=>t-e);F2.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?o1(t=>{t.setTime(Math.floor(t/e)*e);},(t,s)=>{t.setTime(+t+s*e);},(t,s)=>(s-t)/e):F2);const G5=F2.range,T1=1e3,l1=T1*60,m2=l1*60,M2=m2*24,I4=M2*7,J3=M2*30,O4=M2*365,h2=o1(e=>{e.setTime(e-e.getMilliseconds());},(e,t)=>{e.setTime(+e+t*T1);},(e,t)=>(t-e)/T1,e=>e.getUTCSeconds()),K4=h2.range,b3=o1(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*T1);},(e,t)=>{e.setTime(+e+t*l1);},(e,t)=>(t-e)/l1,e=>e.getMinutes()),le=b3.range,Q3=o1(e=>{e.setUTCSeconds(0,0);},(e,t)=>{e.setTime(+e+t*l1);},(e,t)=>(t-e)/l1,e=>e.getUTCMinutes()),ae=Q3.range,j5=o1(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*T1-e.getMinutes()*l1);},(e,t)=>{e.setTime(+e+t*m2);},(e,t)=>(t-e)/m2,e=>e.getHours()),ge=j5.range,k4=o1(e=>{e.setUTCMinutes(0,0,0);},(e,t)=>{e.setTime(+e+t*m2);},(e,t)=>(t-e)/m2,e=>e.getUTCHours()),Te=k4.range,Z4=o1(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*l1)/M2,e=>e.getDate()-1),me=Z4.range,L6=o1(e=>{e.setUTCHours(0,0,0,0);},(e,t)=>{e.setUTCDate(e.getUTCDate()+t);},(e,t)=>(t-e)/M2,e=>e.getUTCDate()-1),Me=L6.range,q5=o1(e=>{e.setUTCHours(0,0,0,0);},(e,t)=>{e.setUTCDate(e.getUTCDate()+t);},(e,t)=>(t-e)/M2,e=>Math.floor(e/M2)),ye=q5.range;function C2(e){return o1(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0);},(t,s)=>{t.setDate(t.getDate()+s*7);},(t,s)=>(s-t-(s.getTimezoneOffset()-t.getTimezoneOffset())*l1)/I4);}const v4=C2(0),N3=C2(1),P4=C2(2),R4=C2(3),V2=C2(4),X5=C2(5),_6=C2(6),$2=v4.range,he=N3.range,Ce=P4.range,Ue=R4.range,De=V2.range,fe=X5.range,Fe=_6.range;function U4(e){return o1(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0);},(t,s)=>{t.setUTCDate(t.getUTCDate()+s*7);},(t,s)=>(s-t)/I4);}const S4=U4(0),d1=U4(1),p2=U4(2),ee=U4(3),te=U4(4),ne1=U4(5),re=U4(6),se=S4.range,Ye=d1.range,He=p2.range,ve=ee.range,Se=te.range,we=ne1.range,We=re.range,A4=o1(e=>{e.setDate(1),e.setHours(0,0,0,0);},(e,t)=>{e.setMonth(e.getMonth()+t);},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),ze=A4.range,B4=o1(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0);},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t);},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),xe=B4.range,w3=o1(e=>{e.setMonth(0,1),e.setHours(0,0,0,0);},(e,t)=>{e.setFullYear(e.getFullYear()+t);},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());w3.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:o1(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0);},(t,s)=>{t.setFullYear(t.getFullYear()+s*e);});const Ie=w3.range,W5=o1(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t);},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());W5.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:o1(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);},(t,s)=>{t.setUTCFullYear(t.getUTCFullYear()+s*e);});W5.range;function ue(e,t,s,Y,u,n){const r=[[h2,1,1e3],[h2,5,5*1e3],[h2,15,15*1e3],[h2,30,30*1e3],[n,1,l1],[n,5,5*l1],[n,15,15*l1],[n,30,30*l1],[u,1,m2],[u,3,3*m2],[u,6,6*m2],[u,12,12*m2],[Y,1,M2],[Y,2,2*M2],[s,1,I4],[t,1,J3],[t,3,3*J3],[e,1,O4]];function c(i,a,y){const f=a<i;f&&([i,a]=[a,i]);const g=y&&typeof y.range=="function"?y:D(i,a,y),H=g?g.range(i,+a+1):[];return f?H.reverse():H;}function D(i,a,y){const f=Math.abs(a-i)/y,g=G4(([,,ce])=>ce).right(r,f);if(g===r.length)return e.every(kn(i/O4,a/O4,y));if(g===0)return F2.every(Math.max(kn(i,a,y),1));const[H,oe]=r[f/r[g-1][2]<r[g][2]/f?g-1:g];return H.every(oe);}return[c,D];}const[be,Qe]=ue(W5,B4,S4,q5,k4,Q3),[je,ke]=ue(w3,A4,v4,Z4,j5,b3);const s="year",D3="quarter",f2="month",a2="week",g1="date",l2="day",U5="dayofyear",M3="hours",T2="minutes",y4="seconds",Y5="milliseconds",Z5=[s,D3,f2,a2,g1,l2,U5,M3,T2,y4,Y5],R5=Z5.reduce((t,e,n)=>(t[e]=1+n,t),{});function J4(t){const e=p(t).slice(),n={};e.length||b("Missing time unit."),e.forEach(o=>{g(R5,o)?n[o]=1:b(`Invalid time unit: ${o}.`);});const r=(n[a2]||n[l2]?1:0)+(n[D3]||n[f2]||n[g1]?1:0)+(n[U5]?1:0);return r>1&&b(`Incompatible time units: ${t}`),e.sort((o,c)=>R5[o]-R5[c]),e;}const bt={[s]:"%Y ",[D3]:"Q%q ",[f2]:"%b ",[g1]:"%d ",[a2]:"W%U ",[l2]:"%a ",[U5]:"%j ",[M3]:"%H:00",[T2]:"00:%M",[y4]:":%S",[Y5]:".%L",[`${s}-${f2}`]:"%Y-%m ",[`${s}-${f2}-${g1}`]:"%Y-%m-%d ",[`${M3}-${T2}`]:"%H:%M"};function xt(t,e){const n=J1({},bt,e),r=J4(t),o=r.length;let c="",i=0,u,d;for(i=0;i<o;)for(u=r.length;u>i;--u)if(d=r.slice(i,u).join("-"),n[d]!=null){c+=n[d],i=u;break;}return c.trim();}const h3=new Date;function q6(t){return h3.setFullYear(t),h3.setMonth(0),h3.setDate(1),h3.setHours(0,0,0,0),h3;}function Wt(t){return tt(new Date(t));}function Rt(t){return A5(new Date(t));}function tt(t){return Z4.count(q6(t.getFullYear())-1,t);}function A5(t){return v4.count(q6(t.getFullYear())-1,t);}function j6(t){return q6(t).getDay();}function qt(t,e,n,r,o,c,i){if(0<=t&&t<100){const u=new Date(-1,e,n,r,o,c,i);return u.setFullYear(t),u;}return new Date(t,e,n,r,o,c,i);}function At(t){return et(new Date(t));}function jt(t){return z6(new Date(t));}function et(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return L6.count(e-1,t);}function z6(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return S4.count(e-1,t);}function L7(t){return h3.setTime(Date.UTC(t,0,1)),h3.getUTCDay();}function zt(t,e,n,r,o,c,i){if(0<=t&&t<100){const u=new Date(Date.UTC(-1,e,n,r,o,c,i));return u.setUTCFullYear(n.y),u;}return new Date(Date.UTC(t,e,n,r,o,c,i));}function nt(t,e,n,r,o){const c=e||1,i=a(t),u=(O,H,N)=>(N=N||O,Lt(n[N],r[N],O===i&&c,H)),d=new Date,m=Xn(t),st=m[s]?u(s):On(2012),lt=m[f2]?u(f2):m[D3]?u(D3):y1,ft=m[a2]&&m[l2]?u(l2,1,a2+l2):m[a2]?u(a2,1):m[l2]?u(l2,1):m[g1]?u(g1,1):m[U5]?u(U5,1):v,mt=m[M3]?u(M3):y1,dt=m[T2]?u(T2):y1,Dt=m[y4]?u(y4):y1,gt=m[Y5]?u(Y5):y1;return function(O){d.setTime(+O);const H=st(d);return o(H,lt(d),ft(d,H),mt(d),dt(d),Dt(d),gt(d));};}function Lt(t,e,n,r){const o=n<=1?t:r?(c,i)=>r+n*Math.floor((t(c,i)-r)/n):(c,i)=>n*Math.floor(t(c,i)/n);return e?(c,i)=>e(o(c,i),i):o;}function C3(t,e,n){return e+t*7-(n+6)%7;}const Xt={[s]:t=>t.getFullYear(),[D3]:t=>Math.floor(t.getMonth()/3),[f2]:t=>t.getMonth(),[g1]:t=>t.getDate(),[M3]:t=>t.getHours(),[T2]:t=>t.getMinutes(),[y4]:t=>t.getSeconds(),[Y5]:t=>t.getMilliseconds(),[U5]:t=>tt(t),[a2]:t=>A5(t),[a2+l2]:(t,e)=>C3(A5(t),t.getDay(),j6(e)),[l2]:(t,e)=>C3(1,t.getDay(),j6(e))},Qt={[D3]:t=>3*t,[a2]:(t,e)=>C3(t,0,j6(e))};function Bt(t,e){return nt(t,e||1,Xt,Qt,qt);}const Gt={[s]:t=>t.getUTCFullYear(),[D3]:t=>Math.floor(t.getUTCMonth()/3),[f2]:t=>t.getUTCMonth(),[g1]:t=>t.getUTCDate(),[M3]:t=>t.getUTCHours(),[T2]:t=>t.getUTCMinutes(),[y4]:t=>t.getUTCSeconds(),[Y5]:t=>t.getUTCMilliseconds(),[U5]:t=>et(t),[a2]:t=>z6(t),[l2]:(t,e)=>C3(1,t.getUTCDay(),L7(e)),[a2+l2]:(t,e)=>C3(z6(t),t.getUTCDay(),L7(e))},_t={[D3]:t=>3*t,[a2]:(t,e)=>C3(t,0,L7(e))};function Kt(t,e){return nt(t,e||1,Gt,_t,zt);}const Pt={[s]:w3,[D3]:A4.every(3),[f2]:A4,[a2]:v4,[g1]:Z4,[l2]:Z4,[U5]:Z4,[M3]:j5,[T2]:b3,[y4]:h2,[Y5]:F2},Vt={[s]:W5,[D3]:B4.every(3),[f2]:B4,[a2]:S4,[g1]:L6,[l2]:L6,[U5]:L6,[M3]:k4,[T2]:Q3,[y4]:h2,[Y5]:F2};function X6(t){return Pt[t];}function Q4(t){return Vt[t];}function ot(t,e,n){return t?t.offset(e,n):void 0;}function Zt(t,e,n){return ot(X6(t),e,n);}function Jt(t,e,n){return ot(Q4(t),e,n);}function rt(t,e,n,r){return t?t.range(e,n,r):void 0;}function te1(t,e,n,r){return rt(X6(t),e,n,r);}function ee1(t,e,n,r){return rt(Q4(t),e,n,r);}const w4=1e3,p3=w4*60,F3=p3*60,x4=F3*24,ne2=x4*7,ut=x4*30,B5=x4*365,it=[s,f2,g1,M3,T2,y4,Y5],I5=it.slice(0,-1),k5=I5.slice(0,-1),v5=k5.slice(0,-1),oe=v5.slice(0,-1),re1=[s,a2],ct=[s,f2],at=[s],E6=[[I5,1,w4],[I5,5,5*w4],[I5,15,15*w4],[I5,30,30*w4],[k5,1,p3],[k5,5,5*p3],[k5,15,15*p3],[k5,30,30*p3],[v5,1,F3],[v5,3,3*F3],[v5,6,6*F3],[v5,12,12*F3],[oe,1,x4],[re1,1,ne2],[ct,1,ut],[ct,3,3*ut],[at,1,B5]];function ue1(t){const e=t.extent,n=t.maxbins||40,r=Math.abs(Wn(e))/n;let o=G4(u=>u[2]).right(E6,r),c,i;return o===E6.length?(c=at,i=kn(e[0]/B5,e[1]/B5,n)):o?(o=E6[r/E6[o-1][2]<E6[o][2]/r?o-1:o],c=o[0],i=o[1]):(c=it,i=Math.max(kn(e[0],e[1],n),1)),{units:c,step:i};}function N4(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t;}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L);}function O5(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t;}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L));}function w5(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0};}function V3(e){var t=e.dateTime,n=e.date,a=e.time,g=e.periods,T=e.days,W=e.shortDays,L=e.months,Y=e.shortMonths,ce=x5(g),fe=k6(g),ie=x5(T),se=k6(T),le=x5(W),me=k6(W),ye=x5(L),ge=k6(L),he=x5(Y),Te=k6(Y),p={a:xe,A:ke,b:We,B:Le,c:null,d:B6,e:B6,f:ft,g:Mt,G:Ct,H:ot1,I:ut1,j:ct1,L:z7,m:it1,M:st,p:Ye,q:Fe,Q:te2,s:ne3,S:lt,u:mt,U:yt,V:gt,w:ht,W:Tt,x:null,X:null,y:pt,Y:Ut,Z:vt,"%":ee2},M={a:be,A:He,b:Ne,B:Oe,c:null,d:E7,e:E7,f:wt,g:Ot,G:At1,H:dt,I:St,j:Dt,L:$3,m:xt1,M:kt,p:Ie,q:Ae,Q:te2,s:ne3,S:Wt1,u:Lt1,U:Yt,V:Ft,w:bt1,W:Ht,x:null,X:null,y:Nt,Y:It,Z:Zt1,"%":ee2},pe={a:Ue,A:Ce,b:ve,B:de,c:Se,d:X7,e:X7,f:tt1,g:J5,G:q7,H:j7,I:j7,j:Ee,L:et1,m:Ge,M:$e,p:Me,q:ze1,Q:rt1,s:at1,S:Ke,u:qe,U:Je,V:Xe,w:_e,W:je1,x:De,X:we,y:J5,Y:q7,Z:Be,"%":nt1};p.x=h(n,p),p.X=h(a,p),p.c=h(t,p),M.x=h(n,M),M.X=h(a,M),M.c=h(t,M);function h(o,u){return function(c){var r=[],l=-1,i=0,m=o.length,y,U,P;for(c instanceof Date||(c=new Date(+c));++l<m;)o.charCodeAt(l)===37&&(r.push(o.slice(i,l)),(U=_7[y=o.charAt(++l)])!=null?y=o.charAt(++l):U=y==="e"?" ":"0",(P=u[y])&&(y=P(c,U)),r.push(y),i=l+1);return r.push(o.slice(i,l)),r.join("");};}function Z(o,u){return function(c){var r=w5(1900,void 0,1),l=F(r,o,c+="",0),i,m;if(l!=c.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(r.s*1e3+("L"in r?r.L:0));if(u&&!("Z"in r)&&(r.Z=0),"p"in r&&(r.H=r.H%12+r.p*12),r.m===void 0&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||r.V>53)return null;"w"in r||(r.w=1),"Z"in r?(i=O5(w5(r.y,0,1)),m=i.getUTCDay(),i=m>4||m===0?d1.ceil(i):d1(i),i=L6.offset(i,(r.V-1)*7),r.y=i.getUTCFullYear(),r.m=i.getUTCMonth(),r.d=i.getUTCDate()+(r.w+6)%7):(i=N4(w5(r.y,0,1)),m=i.getDay(),i=m>4||m===0?N3.ceil(i):N3(i),i=Z4.offset(i,(r.V-1)*7),r.y=i.getFullYear(),r.m=i.getMonth(),r.d=i.getDate()+(r.w+6)%7);}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),m="Z"in r?O5(w5(r.y,0,1)).getUTCDay():N4(w5(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+r.W*7-(m+5)%7:r.w+r.U*7-(m+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,O5(r)):N4(r);};}function F(o,u,c,r){for(var l=0,i=u.length,m=c.length,y,U;l<i;){if(r>=m)return-1;if(y=u.charCodeAt(l++),y===37){if(y=u.charAt(l++),U=pe[y in _7?u.charAt(l++):y],!U||(r=U(o,c,r))<0)return-1;}else if(y!=c.charCodeAt(r++))return-1;}return r;}function Me(o,u,c){var r=ce.exec(u.slice(c));return r?(o.p=fe.get(r[0].toLowerCase()),c+r[0].length):-1;}function Ue(o,u,c){var r=le.exec(u.slice(c));return r?(o.w=me.get(r[0].toLowerCase()),c+r[0].length):-1;}function Ce(o,u,c){var r=ie.exec(u.slice(c));return r?(o.w=se.get(r[0].toLowerCase()),c+r[0].length):-1;}function ve(o,u,c){var r=he.exec(u.slice(c));return r?(o.m=Te.get(r[0].toLowerCase()),c+r[0].length):-1;}function de(o,u,c){var r=ye.exec(u.slice(c));return r?(o.m=ge.get(r[0].toLowerCase()),c+r[0].length):-1;}function Se(o,u,c){return F(o,t,u,c);}function De(o,u,c){return F(o,n,u,c);}function we(o,u,c){return F(o,a,u,c);}function xe(o){return W[o.getDay()];}function ke(o){return T[o.getDay()];}function We(o){return Y[o.getMonth()];}function Le(o){return L[o.getMonth()];}function Ye(o){return g[+(o.getHours()>=12)];}function Fe(o){return 1+~~(o.getMonth()/3);}function be(o){return W[o.getUTCDay()];}function He(o){return T[o.getUTCDay()];}function Ne(o){return Y[o.getUTCMonth()];}function Oe(o){return L[o.getUTCMonth()];}function Ie(o){return g[+(o.getUTCHours()>=12)];}function Ae(o){return 1+~~(o.getUTCMonth()/3);}return{format:function(o){var u=h(o+="",p);return u.toString=function(){return o;},u;},parse:function(o){var u=Z(o+="",!1);return u.toString=function(){return o;},u;},utcFormat:function(o){var u=h(o+="",M);return u.toString=function(){return o;},u;},utcParse:function(o){var u=Z(o+="",!0);return u.toString=function(){return o;},u;}};}var _7={"-":"",_:" ","0":"0"},s1=/^\s*\d+/,Qe1=/^%/,Re=/[\\^$*+?|[\]().{}]/g;function f3(e,t,n){var a=e<0?"-":"",g=(a?-e:e)+"",T=g.length;return a+(T<n?new Array(n-T+1).join(t)+g:g);}function Ve(e){return e.replace(Re,"\\$&");}function x5(e){return new RegExp("^(?:"+e.map(Ve).join("|")+")","i");}function k6(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]));}function _e(e,t,n){var a=s1.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1;}function qe(e,t,n){var a=s1.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1;}function Je(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1;}function Xe(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1;}function je1(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1;}function q7(e,t,n){var a=s1.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1;}function J5(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1;}function Be(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1;}function ze1(e,t,n){var a=s1.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1;}function Ge(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1;}function X7(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1;}function Ee(e,t,n){var a=s1.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1;}function j7(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1;}function $e(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1;}function Ke(e,t,n){var a=s1.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1;}function et1(e,t,n){var a=s1.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1;}function tt1(e,t,n){var a=s1.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1;}function nt1(e,t,n){var a=Qe1.exec(t.slice(n,n+1));return a?n+a[0].length:-1;}function rt1(e,t,n){var a=s1.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1;}function at1(e,t,n){var a=s1.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1;}function B6(e,t){return f3(e.getDate(),t,2);}function ot1(e,t){return f3(e.getHours(),t,2);}function ut1(e,t){return f3(e.getHours()%12||12,t,2);}function ct1(e,t){return f3(1+Z4.count(w3(e),e),t,3);}function z7(e,t){return f3(e.getMilliseconds(),t,3);}function ft(e,t){return z7(e,t)+"000";}function it1(e,t){return f3(e.getMonth()+1,t,2);}function st(e,t){return f3(e.getMinutes(),t,2);}function lt(e,t){return f3(e.getSeconds(),t,2);}function mt(e){var t=e.getDay();return t===0?7:t;}function yt(e,t){return f3(v4.count(w3(e)-1,e),t,2);}function G6(e){var t=e.getDay();return t>=4||t===0?V2(e):V2.ceil(e);}function gt(e,t){return e=G6(e),f3(V2.count(w3(e),e)+(w3(e).getDay()===4),t,2);}function ht(e){return e.getDay();}function Tt(e,t){return f3(N3.count(w3(e)-1,e),t,2);}function pt(e,t){return f3(e.getFullYear()%100,t,2);}function Mt(e,t){return e=G6(e),f3(e.getFullYear()%100,t,2);}function Ut(e,t){return f3(e.getFullYear()%1e4,t,4);}function Ct(e,t){var n=e.getDay();return e=n>=4||n===0?V2(e):V2.ceil(e),f3(e.getFullYear()%1e4,t,4);}function vt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+f3(t/60|0,"0",2)+f3(t%60,"0",2);}function E7(e,t){return f3(e.getUTCDate(),t,2);}function dt(e,t){return f3(e.getUTCHours(),t,2);}function St(e,t){return f3(e.getUTCHours()%12||12,t,2);}function Dt(e,t){return f3(1+L6.count(W5(e),e),t,3);}function $3(e,t){return f3(e.getUTCMilliseconds(),t,3);}function wt(e,t){return $3(e,t)+"000";}function xt1(e,t){return f3(e.getUTCMonth()+1,t,2);}function kt(e,t){return f3(e.getUTCMinutes(),t,2);}function Wt1(e,t){return f3(e.getUTCSeconds(),t,2);}function Lt1(e){var t=e.getUTCDay();return t===0?7:t;}function Yt(e,t){return f3(S4.count(W5(e)-1,e),t,2);}function K5(e){var t=e.getUTCDay();return t>=4||t===0?te(e):te.ceil(e);}function Ft(e,t){return e=K5(e),f3(te.count(W5(e),e)+(W5(e).getUTCDay()===4),t,2);}function bt1(e){return e.getUTCDay();}function Ht(e,t){return f3(d1.count(W5(e)-1,e),t,2);}function Nt(e,t){return f3(e.getUTCFullYear()%100,t,2);}function Ot(e,t){return e=K5(e),f3(e.getUTCFullYear()%100,t,2);}function It(e,t){return f3(e.getUTCFullYear()%1e4,t,4);}function At1(e,t){var n=e.getUTCDay();return e=n>=4||n===0?te(e):te.ceil(e),f3(e.getUTCFullYear()%1e4,t,4);}function Zt1(){return"+0000";}function ee2(){return"%";}function te2(e){return+e;}function ne3(e){return Math.floor(+e/1e3);}var C4,re2,ae1,I6,A6;oe1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function oe1(e){return C4=V3(e),re2=C4.format,ae1=C4.parse,I6=C4.utcFormat,A6=C4.utcParse,C4;}var ue2="%Y-%m-%dT%H:%M:%S.%LZ";function Pt1(e){return e.toISOString();}Date.prototype.toISOString?Pt1:I6(ue2);function Rt1(e){var t=new Date(e);return isNaN(t)?null:t;}+new Date("2000-01-01T00:00:00.000Z")?Rt1:A6(ue2);function f4(t){const r={};return e=>r[e]||(r[e]=t(e));}function ct2(t,r){return e=>{const o=t(e),n=o.indexOf(r);if(n<0)return o;let a=ft1(o,n);const m=a<o.length?o.slice(a):"";for(;--a>n;)if(o[a]!=="0"){++a;break;}return o.slice(0,a)+m;};}function ft1(t,r){let e=t.lastIndexOf("e"),o;if(e>0)return e;for(e=t.length;--e>r;)if(o=t.charCodeAt(e),o>=48&&o<=57)return e+1;}function k7(t){const r=f4(t.format),e=t.formatPrefix;return{format:r,formatPrefix:e,formatFloat(o){const n=E5(o||",");if(n.precision==null){n.precision=12;switch(n.type){case"%":n.precision-=2;break;case"e":n.precision-=1;break;}return ct2(r(n),r(".1f")(1)[1]);}else return r(n);},formatSpan(o,n,a,m){m=E5(m??",f");const s=kn(o,n,a),c=Math.max(Math.abs(o),Math.abs(n));let u;if(m.precision==null)switch(m.type){case"s":return isNaN(u=on1(s,c))||(m.precision=u),e(m,c);case"":case"e":case"g":case"p":case"r":{isNaN(u=an1(s,c))||(m.precision=u-(m.type==="e"));break;}case"f":case"%":{isNaN(u=en1(s))||(m.precision=u-(m.type==="%")*2);break;}}return r(m);}};}let L8;g2();function g2(){return L8=k7({format:q4,formatPrefix:B3});}function F4(t){return k7(Z3(t));}function l3(t){return arguments.length?L8=F4(t):L8;}function z8(t,r,e){e=e||{},M1(e)||b(`Invalid time multi-format specifier: ${e}`);const o=r(y4),n=r(T2),a=r(M3),m=r(g1),s1=r(a2),c=r(f2),u=r(D3),j=r(s),A=t(e[Y5]||".%L"),Y=t(e[y4]||":%S"),C=t(e[T2]||"%I:%M"),K=t(e[M3]||"%I %p"),Z=t(e[g1]||e[l2]||"%a %d"),q=t(e[a2]||"%b %d"),B=t(e[f2]||"%B"),H=t(e[D3]||"%B"),Q=t(e[s]||"%Y");return i=>(o(i)<i?A:n(i)<i?Y:a(i)<i?C:m(i)<i?K:c(i)<i?s1(i)<i?Z:q:j(i)<i?u(i)<i?B:H:Q)(i);}function T3(t){const r=f4(t.format),e=f4(t.utcFormat);return{timeFormat:o=>X1(o)?r(o):z8(r,X6,o),utcFormat:o=>X1(o)?e(o):z8(e,Q4,o),timeParse:f4(t.parse),utcParse:f4(t.utcParse)};}let h4;x6();function x6(){return h4=T3({format:re2,parse:ae1,utcFormat:I6,utcParse:A6});}function b4(t){return T3(V3(t));}function d2(t){return arguments.length?h4=b4(t):h4;}const D4=(t,r)=>J1({},t,r);function lt1(t,r){const e=t?F4(t):l3(),o=r?b4(r):d2();return D4(e,o);}function R6(t,r){const e=arguments.length;return e&&e!==2&&b("defaultLocale expects either zero or two arguments."),e?D4(l3(t),d2(r)):D4(l3(),d2());}function dt1(){return g2(),x6(),R6();}var X8=typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{},g3=[],F5=[],vr=typeof Uint8Array!="undefined"?Uint8Array:Array,C5=!1;function Z6(){C5=!0;for(var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,n=i.length;r<n;++r)g3[r]=i[r],F5[i.charCodeAt(r)]=r;F5["-".charCodeAt(0)]=62,F5["_".charCodeAt(0)]=63;}function Sr(i){C5||Z6();var r,n,e,t,o,u,h=i.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=i[h-2]==="="?2:i[h-1]==="="?1:0,u=new vr(h*3/4-o),e=o>0?h-4:h;var s=0;for(r=0,n=0;r<e;r+=4,n+=3)t=F5[i.charCodeAt(r)]<<18|F5[i.charCodeAt(r+1)]<<12|F5[i.charCodeAt(r+2)]<<6|F5[i.charCodeAt(r+3)],u[s++]=t>>16&255,u[s++]=t>>8&255,u[s++]=t&255;return o===2?(t=F5[i.charCodeAt(r)]<<2|F5[i.charCodeAt(r+1)]>>4,u[s++]=t&255):o===1&&(t=F5[i.charCodeAt(r)]<<10|F5[i.charCodeAt(r+1)]<<4|F5[i.charCodeAt(r+2)]>>2,u[s++]=t>>8&255,u[s++]=t&255),u;}function Pr(i){return g3[i>>18&63]+g3[i>>12&63]+g3[i>>6&63]+g3[i&63];}function Yr(i,r,n){for(var e,t=[],o=r;o<n;o+=3)e=(i[o]<<16)+(i[o+1]<<8)+i[o+2],t.push(Pr(e));return t.join("");}function G7(i){C5||Z6();for(var r,n=i.length,e=n%3,t="",o=[],u=16383,h=0,s=n-e;h<s;h+=u)o.push(Yr(i,h,h+u>s?s:h+u));return e===1?(r=i[n-1],t+=g3[r>>2],t+=g3[r<<4&63],t+="=="):e===2&&(r=(i[n-2]<<8)+i[n-1],t+=g3[r>>10],t+=g3[r>>4&63],t+=g3[r<<2&63],t+="="),o.push(t),o.join("");}function _8(i,r,n,e,t){var o,u,h=t*8-e-1,s=(1<<h)-1,a=s>>1,l=-7,c=n?t-1:0,y=n?-1:1,x=i[r+c];for(c+=y,o=x&(1<<-l)-1,x>>=-l,l+=h;l>0;o=o*256+i[r+c],c+=y,l-=8);for(u=o&(1<<-l)-1,o>>=-l,l+=e;l>0;u=u*256+i[r+c],c+=y,l-=8);if(o===0)o=1-a;else{if(o===s)return u?NaN:(x?-1:1)*Infinity;u=u+Math.pow(2,e),o=o-a;}return(x?-1:1)*u*Math.pow(2,o-e);}function K6(i,r,n,e,t,o){var u,h,s,a=o*8-t-1,l=(1<<a)-1,c=l>>1,y=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=e?0:o-1,w=e?1:-1,B=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===Infinity?(h=isNaN(r)?1:0,u=l):(u=Math.floor(Math.log(r)/Math.LN2),r*(s=Math.pow(2,-u))<1&&(u--,s*=2),u+c>=1?r+=y/s:r+=y*Math.pow(2,1-c),r*s>=2&&(u++,s/=2),u+c>=l?(h=0,u=l):u+c>=1?(h=(r*s-1)*Math.pow(2,t),u=u+c):(h=r*Math.pow(2,c-1)*Math.pow(2,t),u=0));t>=8;i[n+x]=h&255,x+=w,h/=256,t-=8);for(u=u<<t|h,a+=t;a>0;i[n+x]=u&255,x+=w,u/=256,a-=8);i[n+x-w]|=B*128;}var Cr={}.toString,Q5=Array.isArray||function(i){return Cr.call(i)=="[object Array]";};var Mr=50;f5.TYPED_ARRAY_SUPPORT=X8.TYPED_ARRAY_SUPPORT!==void 0?X8.TYPED_ARRAY_SUPPORT:!0;function M4(){return f5.TYPED_ARRAY_SUPPORT?2147483647:1073741823;}function R7(i,r){if(M4()<r)throw new RangeError("Invalid typed array length");return f5.TYPED_ARRAY_SUPPORT?(i=new Uint8Array(r),i.__proto__=f5.prototype):(i===null&&(i=new f5(r)),i.length=r),i;}function f5(i,r,n){if(!f5.TYPED_ARRAY_SUPPORT&&!(this instanceof f5))return new f5(i,r,n);if(typeof i=="number"){if(typeof r=="string")throw new Error("If encoding is specified then the first argument must be a string");return N5(this,i);}return b5(this,i,r,n);}f5.poolSize=8192,f5._augment=function(i){return i.__proto__=f5.prototype,i;};function b5(i,r,n,e){if(typeof r=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&r instanceof ArrayBuffer?Lr(i,r,n,e):typeof r=="string"?kr(i,r,n):Or(i,r);}f5.from=function(i,r,n){return b5(null,i,r,n);},f5.TYPED_ARRAY_SUPPORT&&(f5.prototype.__proto__=Uint8Array.prototype,f5.__proto__=Uint8Array);function rr(i){if(typeof i!="number")throw new TypeError('"size" argument must be a number');if(i<0)throw new RangeError('"size" argument must not be negative');}function Nr(i,r,n,e){return rr(r),r<=0?R7(i,r):n!==void 0?typeof e=="string"?R7(i,r).fill(n,e):R7(i,r).fill(n):R7(i,r);}f5.alloc=function(i,r,n){return Nr(null,i,r,n);};function N5(i,r){if(rr(r),i=R7(i,r<0?0:L9(r)|0),!f5.TYPED_ARRAY_SUPPORT)for(var n=0;n<r;++n)i[n]=0;return i;}f5.allocUnsafe=function(i){return N5(null,i);},f5.allocUnsafeSlow=function(i){return N5(null,i);};function kr(i,r,n){if((typeof n!="string"||n==="")&&(n="utf8"),!f5.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var e=nr(r,n)|0;i=R7(i,e);var t=i.write(r,n);return t!==e&&(i=i.slice(0,t)),i;}function k8(i,r){var n=r.length<0?0:L9(r.length)|0;i=R7(i,n);for(var e=0;e<n;e+=1)i[e]=r[e]&255;return i;}function Lr(i,r,n,e){if(r.byteLength,n<0||r.byteLength<n)throw new RangeError("'offset' is out of bounds");if(r.byteLength<n+(e||0))throw new RangeError("'length' is out of bounds");return n===void 0&&e===void 0?r=new Uint8Array(r):e===void 0?r=new Uint8Array(r,n):r=new Uint8Array(r,n,e),f5.TYPED_ARRAY_SUPPORT?(i=r,i.__proto__=f5.prototype):i=k8(i,r),i;}function Or(i,r){if(A7(r)){var n=L9(r.length)|0;return i=R7(i,n),i.length===0||r.copy(i,0,0,n),i;}if(r){if(typeof ArrayBuffer!="undefined"&&r.buffer instanceof ArrayBuffer||"length"in r)return typeof r.length!="number"||on2(r.length)?R7(i,0):k8(i,r);if(r.type==="Buffer"&&Q5(r.data))return k8(i,r.data);}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function L9(i){if(i>=M4())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+M4().toString(16)+" bytes");return i|0;}f5.isBuffer=un2;function A7(i){return!!(i!=null&&i._isBuffer);}f5.compare=function(r,n){if(!A7(r)||!A7(n))throw new TypeError("Arguments must be Buffers");if(r===n)return 0;for(var e=r.length,t=n.length,o=0,u=Math.min(e,t);o<u;++o)if(r[o]!==n[o]){e=r[o],t=n[o];break;}return e<t?-1:t<e?1:0;},f5.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},f5.concat=function(r,n){if(!Q5(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return f5.alloc(0);var e;if(n===void 0)for(n=0,e=0;e<r.length;++e)n+=r[e].length;var t=f5.allocUnsafe(n),o=0;for(e=0;e<r.length;++e){var u=r[e];if(!A7(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(t,o),o+=u.length;}return t;};function nr(i,r){if(A7(i))return i.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(i)||i instanceof ArrayBuffer))return i.byteLength;typeof i!="string"&&(i=""+i);var n=i.length;if(n===0)return 0;for(var e=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return D5(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return cr(i).length;default:if(e)return D5(i).length;r=(""+r).toLowerCase(),e=!0;}}f5.byteLength=nr;function zr(i,r,n){var e=!1;if((r===void 0||r<0)&&(r=0),r>this.length)return"";if((n===void 0||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,r>>>=0,n<=r)return"";for(i||(i="utf8");;)switch(i){case"hex":return Gr(this,r,n);case"utf8":case"utf-8":return or(this,r,n);case"ascii":return Xr(this,r,n);case"latin1":case"binary":return Zr(this,r,n);case"base64":return qr(this,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Kr(this,r,n);default:if(e)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),e=!0;}}f5.prototype._isBuffer=!0;function I7(i,r,n){var e=i[r];i[r]=i[n],i[n]=e;}f5.prototype.swap16=function(){var r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<r;n+=2)I7(this,n,n+1);return this;},f5.prototype.swap32=function(){var r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<r;n+=4)I7(this,n,n+3),I7(this,n+1,n+2);return this;},f5.prototype.swap64=function(){var r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<r;n+=8)I7(this,n,n+7),I7(this,n+1,n+6),I7(this,n+2,n+5),I7(this,n+3,n+4);return this;},f5.prototype.toString=function(){var r=this.length|0;return r===0?"":arguments.length===0?or(this,0,r):zr.apply(this,arguments);},f5.prototype.equals=function(r){if(!A7(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:f5.compare(this,r)===0;},f5.prototype.inspect=function(){var r="",n=Mr;return this.length>0&&(r=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(r+=" ... ")),"<Buffer "+r+">";},f5.prototype.compare=function(r,n,e,t,o){if(!A7(r))throw new TypeError("Argument must be a Buffer");if(n===void 0&&(n=0),e===void 0&&(e=r?r.length:0),t===void 0&&(t=0),o===void 0&&(o=this.length),n<0||e>r.length||t<0||o>this.length)throw new RangeError("out of range index");if(t>=o&&n>=e)return 0;if(t>=o)return-1;if(n>=e)return 1;if(n>>>=0,e>>>=0,t>>>=0,o>>>=0,this===r)return 0;for(var u=o-t,h=e-n,s=Math.min(u,h),a=this.slice(t,o),l=r.slice(n,e),c=0;c<s;++c)if(a[c]!==l[c]){u=a[c],h=l[c];break;}return u<h?-1:h<u?1:0;};function ir(i,r,n,e,t){if(i.length===0)return-1;if(typeof n=="string"?(e=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=t?0:i.length-1),n<0&&(n=i.length+n),n>=i.length){if(t)return-1;n=i.length-1;}else if(n<0)if(t)n=0;else return-1;if(typeof r=="string"&&(r=f5.from(r,e)),A7(r))return r.length===0?-1:er(i,r,n,e,t);if(typeof r=="number")return r=r&255,f5.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?t?Uint8Array.prototype.indexOf.call(i,r,n):Uint8Array.prototype.lastIndexOf.call(i,r,n):er(i,[r],n,e,t);throw new TypeError("val must be string, number or Buffer");}function er(i,r,n,e,t){var o=1,u=i.length,h=r.length;if(e!==void 0&&(e=String(e).toLowerCase(),e==="ucs2"||e==="ucs-2"||e==="utf16le"||e==="utf-16le")){if(i.length<2||r.length<2)return-1;o=2,u/=2,h/=2,n/=2;}function s(x,w){return o===1?x[w]:x.readUInt16BE(w*o);}var a;if(t){var l=-1;for(a=n;a<u;a++)if(s(i,a)===s(r,l===-1?0:a-l)){if(l===-1&&(l=a),a-l+1===h)return l*o;}else l!==-1&&(a-=a-l),l=-1;}else for(n+h>u&&(n=u-h),a=n;a>=0;a--){for(var c=!0,y=0;y<h;y++)if(s(i,a+y)!==s(r,y)){c=!1;break;}if(c)return a;}return-1;}f5.prototype.includes=function(r,n,e){return this.indexOf(r,n,e)!==-1;},f5.prototype.indexOf=function(r,n,e){return ir(this,r,n,e,!0);},f5.prototype.lastIndexOf=function(r,n,e){return ir(this,r,n,e,!1);};function Wr(i,r,n,e){n=Number(n)||0;var t=i.length-n;e?(e=Number(e),e>t&&(e=t)):e=t;var o=r.length;if(o%2!==0)throw new TypeError("Invalid hex string");e>o/2&&(e=o/2);for(var u=0;u<e;++u){var h=parseInt(r.substr(u*2,2),16);if(isNaN(h))return u;i[n+u]=h;}return u;}function jr(i,r,n,e){return v6(D5(r,i.length-n),i,n,e);}function tr(i,r,n,e){return v6(en2(r),i,n,e);}function Jr(i,r,n,e){return tr(i,r,n,e);}function Vr(i,r,n,e){return v6(cr(r),i,n,e);}function $r(i,r,n,e){return v6(tn2(r,i.length-n),i,n,e);}f5.prototype.write=function(r,n,e,t){if(n===void 0)t="utf8",e=this.length,n=0;else if(e===void 0&&typeof n=="string")t=n,e=this.length,n=0;else if(isFinite(n))n=n|0,isFinite(e)?(e=e|0,t===void 0&&(t="utf8")):(t=e,e=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-n;if((e===void 0||e>o)&&(e=o),r.length>0&&(e<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");t||(t="utf8");for(var u=!1;;)switch(t){case"hex":return Wr(this,r,n,e);case"utf8":case"utf-8":return jr(this,r,n,e);case"ascii":return tr(this,r,n,e);case"latin1":case"binary":return Jr(this,r,n,e);case"base64":return Vr(this,r,n,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $r(this,r,n,e);default:if(u)throw new TypeError("Unknown encoding: "+t);t=(""+t).toLowerCase(),u=!0;}},f5.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)};};function qr(i,r,n){return r===0&&n===i.length?G7(i):G7(i.slice(r,n));}function or(i,r,n){n=Math.min(i.length,n);for(var e=[],t=r;t<n;){var o=i[t],u=null,h=o>239?4:o>223?3:o>191?2:1;if(t+h<=n){var s,a,l,c;switch(h){case 1:o<128&&(u=o);break;case 2:s=i[t+1],(s&192)===128&&(c=(o&31)<<6|s&63,c>127&&(u=c));break;case 3:s=i[t+1],a=i[t+2],(s&192)===128&&(a&192)===128&&(c=(o&15)<<12|(s&63)<<6|a&63,c>2047&&(c<55296||c>57343)&&(u=c));break;case 4:s=i[t+1],a=i[t+2],l=i[t+3],(s&192)===128&&(a&192)===128&&(l&192)===128&&(c=(o&15)<<18|(s&63)<<12|(a&63)<<6|l&63,c>65535&&c<1114112&&(u=c));}}u===null?(u=65533,h=1):u>65535&&(u-=65536,e.push(u>>>10&1023|55296),u=56320|u&1023),e.push(u),t+=h;}return Hr(e);}var ur=4096;function Hr(i){var r=i.length;if(r<=ur)return String.fromCharCode.apply(String,i);for(var n="",e=0;e<r;)n+=String.fromCharCode.apply(String,i.slice(e,e+=ur));return n;}function Xr(i,r,n){var e="";n=Math.min(i.length,n);for(var t=r;t<n;++t)e+=String.fromCharCode(i[t]&127);return e;}function Zr(i,r,n){var e="";n=Math.min(i.length,n);for(var t=r;t<n;++t)e+=String.fromCharCode(i[t]);return e;}function Gr(i,r,n){var e=i.length;(!r||r<0)&&(r=0),(!n||n<0||n>e)&&(n=e);for(var t="",o=r;o<n;++o)t+=nn2(i[o]);return t;}function Kr(i,r,n){for(var e=i.slice(r,n),t="",o=0;o<e.length;o+=2)t+=String.fromCharCode(e[o]+e[o+1]*256);return t;}f5.prototype.slice=function(r,n){var e=this.length;r=~~r,n=n===void 0?e:~~n,r<0?(r+=e,r<0&&(r=0)):r>e&&(r=e),n<0?(n+=e,n<0&&(n=0)):n>e&&(n=e),n<r&&(n=r);var t;if(f5.TYPED_ARRAY_SUPPORT)t=this.subarray(r,n),t.__proto__=f5.prototype;else{var o=n-r;t=new f5(o,void 0);for(var u=0;u<o;++u)t[u]=this[u+r];}return t;};function p4(i,r,n){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+r>n)throw new RangeError("Trying to access beyond buffer length");}f5.prototype.readUIntLE=function(r,n,e){r=r|0,n=n|0,e||p4(r,n,this.length);for(var t=this[r],o=1,u=0;++u<n&&(o*=256);)t+=this[r+u]*o;return t;},f5.prototype.readUIntBE=function(r,n,e){r=r|0,n=n|0,e||p4(r,n,this.length);for(var t=this[r+--n],o=1;n>0&&(o*=256);)t+=this[r+--n]*o;return t;},f5.prototype.readUInt8=function(r,n){return n||p4(r,1,this.length),this[r];},f5.prototype.readUInt16LE=function(r,n){return n||p4(r,2,this.length),this[r]|this[r+1]<<8;},f5.prototype.readUInt16BE=function(r,n){return n||p4(r,2,this.length),this[r]<<8|this[r+1];},f5.prototype.readUInt32LE=function(r,n){return n||p4(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216;},f5.prototype.readUInt32BE=function(r,n){return n||p4(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3]);},f5.prototype.readIntLE=function(r,n,e){r=r|0,n=n|0,e||p4(r,n,this.length);for(var t=this[r],o=1,u=0;++u<n&&(o*=256);)t+=this[r+u]*o;return o*=128,t>=o&&(t-=Math.pow(2,8*n)),t;},f5.prototype.readIntBE=function(r,n,e){r=r|0,n=n|0,e||p4(r,n,this.length);for(var t=n,o=1,u=this[r+--t];t>0&&(o*=256);)u+=this[r+--t]*o;return o*=128,u>=o&&(u-=Math.pow(2,8*n)),u;},f5.prototype.readInt8=function(r,n){return n||p4(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r];},f5.prototype.readInt16LE=function(r,n){n||p4(r,2,this.length);var e=this[r]|this[r+1]<<8;return e&32768?e|4294901760:e;},f5.prototype.readInt16BE=function(r,n){n||p4(r,2,this.length);var e=this[r+1]|this[r]<<8;return e&32768?e|4294901760:e;},f5.prototype.readInt32LE=function(r,n){return n||p4(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24;},f5.prototype.readInt32BE=function(r,n){return n||p4(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3];},f5.prototype.readFloatLE=function(r,n){return n||p4(r,4,this.length),_8(this,r,!0,23,4);},f5.prototype.readFloatBE=function(r,n){return n||p4(r,4,this.length),_8(this,r,!1,23,4);},f5.prototype.readDoubleLE=function(r,n){return n||p4(r,8,this.length),_8(this,r,!0,52,8);},f5.prototype.readDoubleBE=function(r,n){return n||p4(r,8,this.length),_8(this,r,!1,52,8);};function E8(i,r,n,e,t,o){if(!A7(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>t||r<o)throw new RangeError('"value" argument is out of bounds');if(n+e>i.length)throw new RangeError("Index out of range");}f5.prototype.writeUIntLE=function(r,n,e,t){if(r=+r,n=n|0,e=e|0,!t){var o=Math.pow(2,8*e)-1;E8(this,r,n,e,o,0);}var u=1,h=0;for(this[n]=r&255;++h<e&&(u*=256);)this[n+h]=r/u&255;return n+e;},f5.prototype.writeUIntBE=function(r,n,e,t){if(r=+r,n=n|0,e=e|0,!t){var o=Math.pow(2,8*e)-1;E8(this,r,n,e,o,0);}var u=e-1,h=1;for(this[n+u]=r&255;--u>=0&&(h*=256);)this[n+u]=r/h&255;return n+e;},f5.prototype.writeUInt8=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,1,255,0),f5.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),this[n]=r&255,n+1;};function U6(i,r,n,e){r<0&&(r=65535+r+1);for(var t=0,o=Math.min(i.length-n,2);t<o;++t)i[n+t]=(r&255<<8*(e?t:1-t))>>>(e?t:1-t)*8;}f5.prototype.writeUInt16LE=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,2,65535,0),f5.TYPED_ARRAY_SUPPORT?(this[n]=r&255,this[n+1]=r>>>8):U6(this,r,n,!0),n+2;},f5.prototype.writeUInt16BE=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,2,65535,0),f5.TYPED_ARRAY_SUPPORT?(this[n]=r>>>8,this[n+1]=r&255):U6(this,r,n,!1),n+2;};function d3(i,r,n,e){r<0&&(r=4294967295+r+1);for(var t=0,o=Math.min(i.length-n,4);t<o;++t)i[n+t]=r>>>(e?t:3-t)*8&255;}f5.prototype.writeUInt32LE=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,4,4294967295,0),f5.TYPED_ARRAY_SUPPORT?(this[n+3]=r>>>24,this[n+2]=r>>>16,this[n+1]=r>>>8,this[n]=r&255):d3(this,r,n,!0),n+4;},f5.prototype.writeUInt32BE=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,4,4294967295,0),f5.TYPED_ARRAY_SUPPORT?(this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=r&255):d3(this,r,n,!1),n+4;},f5.prototype.writeIntLE=function(r,n,e,t){if(r=+r,n=n|0,!t){var o=Math.pow(2,8*e-1);E8(this,r,n,e,o-1,-o);}var u=0,h=1,s=0;for(this[n]=r&255;++u<e&&(h*=256);)r<0&&s===0&&this[n+u-1]!==0&&(s=1),this[n+u]=(r/h>>0)-s&255;return n+e;},f5.prototype.writeIntBE=function(r,n,e,t){if(r=+r,n=n|0,!t){var o=Math.pow(2,8*e-1);E8(this,r,n,e,o-1,-o);}var u=e-1,h=1,s=0;for(this[n+u]=r&255;--u>=0&&(h*=256);)r<0&&s===0&&this[n+u+1]!==0&&(s=1),this[n+u]=(r/h>>0)-s&255;return n+e;},f5.prototype.writeInt8=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,1,127,-128),f5.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),r<0&&(r=255+r+1),this[n]=r&255,n+1;},f5.prototype.writeInt16LE=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,2,32767,-32768),f5.TYPED_ARRAY_SUPPORT?(this[n]=r&255,this[n+1]=r>>>8):U6(this,r,n,!0),n+2;},f5.prototype.writeInt16BE=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,2,32767,-32768),f5.TYPED_ARRAY_SUPPORT?(this[n]=r>>>8,this[n+1]=r&255):U6(this,r,n,!1),n+2;},f5.prototype.writeInt32LE=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,4,2147483647,-2147483648),f5.TYPED_ARRAY_SUPPORT?(this[n]=r&255,this[n+1]=r>>>8,this[n+2]=r>>>16,this[n+3]=r>>>24):d3(this,r,n,!0),n+4;},f5.prototype.writeInt32BE=function(r,n,e){return r=+r,n=n|0,e||E8(this,r,n,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),f5.TYPED_ARRAY_SUPPORT?(this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=r&255):d3(this,r,n,!1),n+4;};function fr(i,r,n,e,t,o){if(n+e>i.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range");}function hr(i,r,n,e,t){return t||fr(i,r,n,4),K6(i,r,n,e,23,4),n+4;}f5.prototype.writeFloatLE=function(r,n,e){return hr(this,r,n,!0,e);},f5.prototype.writeFloatBE=function(r,n,e){return hr(this,r,n,!1,e);};function sr(i,r,n,e,t){return t||fr(i,r,n,8),K6(i,r,n,e,52,8),n+8;}f5.prototype.writeDoubleLE=function(r,n,e){return sr(this,r,n,!0,e);},f5.prototype.writeDoubleBE=function(r,n,e){return sr(this,r,n,!1,e);},f5.prototype.copy=function(r,n,e,t){if(e||(e=0),!t&&t!==0&&(t=this.length),n>=r.length&&(n=r.length),n||(n=0),t>0&&t<e&&(t=e),t===e)return 0;if(r.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(t<0)throw new RangeError("sourceEnd out of bounds");t>this.length&&(t=this.length),r.length-n<t-e&&(t=r.length-n+e);var o=t-e,u;if(this===r&&e<n&&n<t)for(u=o-1;u>=0;--u)r[u+n]=this[u+e];else if(o<1e3||!f5.TYPED_ARRAY_SUPPORT)for(u=0;u<o;++u)r[u+n]=this[u+e];else Uint8Array.prototype.set.call(r,this.subarray(e,e+o),n);return o;},f5.prototype.fill=function(r,n,e,t){if(typeof r=="string"){if(typeof n=="string"?(t=n,n=0,e=this.length):typeof e=="string"&&(t=e,e=this.length),r.length===1){var o=r.charCodeAt(0);o<256&&(r=o);}if(t!==void 0&&typeof t!="string")throw new TypeError("encoding must be a string");if(typeof t=="string"&&!f5.isEncoding(t))throw new TypeError("Unknown encoding: "+t);}else typeof r=="number"&&(r=r&255);if(n<0||this.length<n||this.length<e)throw new RangeError("Out of range index");if(e<=n)return this;n=n>>>0,e=e===void 0?this.length:e>>>0,r||(r=0);var u;if(typeof r=="number")for(u=n;u<e;++u)this[u]=r;else{var h=A7(r)?r:D5(new f5(r,t).toString()),s=h.length;for(u=0;u<e-n;++u)this[u+n]=h[u%s];}return this;};var Qr=/[^+\/0-9A-Za-z-_]/g;function br(i){if(i=rn2(i).replace(Qr,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i;}function rn2(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"");}function nn2(i){return i<16?"0"+i.toString(16):i.toString(16);}function D5(i,r){r=r||Infinity;for(var n,e=i.length,t=null,o=[],u=0;u<e;++u){if(n=i.charCodeAt(u),n>55295&&n<57344){if(!t){if(n>56319){(r-=3)>-1&&o.push(239,191,189);continue;}else if(u+1===e){(r-=3)>-1&&o.push(239,191,189);continue;}t=n;continue;}if(n<56320){(r-=3)>-1&&o.push(239,191,189),t=n;continue;}n=(t-55296<<10|n-56320)+65536;}else t&&(r-=3)>-1&&o.push(239,191,189);if(t=null,n<128){if((r-=1)<0)break;o.push(n);}else if(n<2048){if((r-=2)<0)break;o.push(n>>6|192,n&63|128);}else if(n<65536){if((r-=3)<0)break;o.push(n>>12|224,n>>6&63|128,n&63|128);}else if(n<1114112){if((r-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128);}else throw new Error("Invalid code point");}return o;}function en2(i){for(var r=[],n=0;n<i.length;++n)r.push(i.charCodeAt(n)&255);return r;}function tn2(i,r){for(var n,e,t,o=[],u=0;u<i.length&&!((r-=2)<0);++u)n=i.charCodeAt(u),e=n>>8,t=n%256,o.push(t),o.push(e);return o;}function cr(i){return Sr(br(i));}function v6(i,r,n,e){for(var t=0;t<e&&!(t+n>=r.length||t>=i.length);++t)r[t+n]=i[t];return t;}function on2(i){return i!==i;}function un2(i){return i!=null&&(!!i._isBuffer||ar(i)||fn1(i));}function ar(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i);}function fn1(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&ar(i.slice(0,0));}const hn1=/^(data:|([A-Za-z]+:)?\/\/)/,sn1=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,cn1=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,lr="file://";function an2(i,r){return n=>({options:n||{},sanitize:pn2,load:ln2,fileAccess:!!r,file:xn2(r),http:En1(i)});}async function ln2(i,r){const n=await this.sanitize(i,r),e=n.href;return n.localFile?this.file(e):this.http(e,r);}async function pn2(i,r){r=J1({},this.options,r);const n=this.fileAccess,e={href:null};let t,o,u;const h=sn1.test(i.replace(cn1,""));(i==null||typeof i!="string"||!h)&&b("Sanitize failure, invalid URI: "+Z1(i));const s=hn1.test(i);return(u=r.baseURL)&&!s&&(!i.startsWith("/")&&!u.endsWith("/")&&(i="/"+i),i=u+i),o=(t=i.startsWith(lr))||r.mode==="file"||r.mode!=="http"&&!s&&n,t?i=i.slice(lr.length):i.startsWith("//")&&(r.defaultProtocol==="file"?(i=i.slice(2),o=!0):i=(r.defaultProtocol||"http")+":"+i),Object.defineProperty(e,"localFile",{value:!!o}),e.href=i,r.target&&(e.target=r.target+""),r.rel&&(e.rel=r.rel+""),r.context==="image"&&r.crossOrigin&&(e.crossOrigin=r.crossOrigin+""),e;}function xn2(i){return i?r=>new Promise((n,e)=>{i.readFile(r,(t,o)=>{t?e(t):n(o);});}):wn2;}async function wn2(){b("No file system access.");}function En1(i){return i?async function(r,n){const e=J1({},this.options.http,n),t=n&&n.response,o=await i(r,e);return o.ok?O1(o[t])?o[t]():o.text():b(o.status+""+o.statusText);}:yn;}async function yn(){b("No HTTP fetch method available.");}const Fn1=i=>i!=null&&i===i,mn1=i=>i==="true"||i==="false"||i===!0||i===!1,gn1=i=>!Number.isNaN(Date.parse(i)),pr=i=>!Number.isNaN(+i)&&!(i instanceof Date),An2=i=>pr(i)&&Number.isInteger(+i),O6={boolean:xn,integer:L2,number:L2,date:Kn,string:Vn,unknown:A1},S5=[mn1,An2,pr,gn1],Rn2=["boolean","integer","number","date"];function xr(i,r){if(!i||!i.length)return"unknown";const n=i.length,e=S5.length,t=S5.map((o,u)=>u+1);for(let o=0,u=0,h,s;o<n;++o)for(s=r?i[o][r]:i[o],h=0;h<e;++h)if(t[h]&&Fn1(s)&&!S5[h](s)&&(t[h]=0,++u,u===S5.length))return"string";return Rn2[t.reduce((o,u)=>o===0?u:o,0)-1];}function wr(i,r){return r.reduce((n,e)=>(n[e]=xr(i,e),n),{});}function Er(i){const r=function(n,e){const t={delimiter:i};return z9(n,e?J1(e,t):t);};return r.responseType="text",r;}function z9(i,r){return r.header&&(i=r.header.map(Z1).join(r.delimiter)+`
`+i),j2(r.delimiter).parse(i+"");}z9.responseType="text";function Tn1(i){return typeof f5=="function"&&O1(f5.isBuffer)?f5.isBuffer(i):!1;}function W6(i,r){const n=r&&r.property?z1(r.property):A1;return M1(i)&&!Tn1(i)?In1(n(i),r):n(JSON.parse(i));}W6.responseType="json";function In1(i,r){return!w1(i)&&Cn(i)&&(i=[...i]),r&&r.copy?JSON.parse(JSON.stringify(i)):i;}const Bn1={interior:(i,r)=>i!==r,exterior:(i,r)=>i===r};function yr(i,r){let n,e,t,o;return i=W6(i,r),r&&r.feature?(n=z3,t=r.feature):r&&r.mesh?(n=_3,t=r.mesh,o=Bn1[r.filter]):b("Missing TopoJSON feature or mesh parameter."),e=(e=i.objects[t])?n(i,e,o):b("Invalid TopoJSON object: "+t),e&&e.features||[e];}yr.responseType="json";const P5={dsv:z9,csv:Er(","),tsv:Er("	"),json:W6,topojson:yr};function j8(i,r){return arguments.length>1?(P5[i]=r,this):g(P5,i)?P5[i]:null;}function _n1(i){const r=j8(i);return r&&r.responseType||"text";}function Un1(i,r,n,e){r=r||{};const t=j8(r.type||"json");return t||b("Unknown data format type: "+r.type),i=t(i,r),r.parse&&dn1(i,r.parse,n,e),g(i,"columns")&&delete i.columns,i;}function dn1(i,r,n,e){if(!i.length)return;const t=d2();n=n||t.timeParse,e=e||t.utcParse;let o=i.columns||Object.keys(i[0]),u,h,s,a,l,c;r==="auto"&&(r=wr(i,o)),o=Object.keys(r);const y=o.map(x=>{const w=r[x];let B,m;if(w&&(w.startsWith("date:")||w.startsWith("utc:"))){B=w.split(/:(.+)?/,2),m=B[1],(m[0]==="'"&&m[m.length-1]==="'"||m[0]==='"'&&m[m.length-1]==='"')&&(m=m.slice(1,-1));const Fr=B[0]==="utc"?e:n;return Fr(m);}if(!O6[w])throw Error("Illegal format pattern: "+x+":"+w);return O6[w];});for(s=0,l=i.length,c=o.length;s<l;++s)for(u=i[s],a=0;a<c;++a)h=o[a],u[h]=y[a](u[h]);}const Dn1=an2(typeof fetch!="undefined"&&fetch,null);function q8(t){const e=t||A1,n=[],i={};return n.add=s=>{const r=e(s);return i[r]||(i[r]=1,n.push(s)),n;},n.remove=s=>{const r=e(s);if(i[r]){i[r]=0;const u=n.indexOf(s);u>=0&&n.splice(u,1);}return n;},n;}async function C6(t,e){try{await e(t);}catch(n){t.error(n);}}const tt2=Symbol("vega_id");let Pt2=1;function Et(t){return!!(t&&d4(t));}function d4(t){return t[tt2];}function et2(t,e){return t[tt2]=e,t;}function V4(t){const e=t===Object(t)?t:{data:t};return d4(e)?e:et2(e,Pt2++);}function Ot1(t){return nt2(t,V4({}));}function nt2(t,e){for(const n in t)e[n]=t[n];return e;}function At2(t,e){return et2(e,d4(t));}function Mt1(t,e){return t?e?(n,i)=>t(n,i)||d4(e(n))-d4(e(i)):(n,i)=>t(n,i)||d4(n)-d4(i):null;}function it2(t){return t&&t.constructor===I8;}function I8(){const t=[],e=[],n=[],i=[],s=[];let r=null,u=!1;return{constructor:I8,insert(o){const a=p(o),h=a.length;for(let f=0;f<h;++f)t.push(a[f]);return this;},remove(o){const a=O1(o)?i:e,h=p(o),f=h.length;for(let l=0;l<f;++l)a.push(h[l]);return this;},modify(o,a,h){const f={field:a,value:On(h)};return O1(o)?(f.filter=o,s.push(f)):(f.tuple=o,n.push(f)),this;},encode(o,a){return O1(o)?s.push({filter:o,field:a}):n.push({tuple:o,field:a}),this;},clean(o){return r=o,this;},reflow(){return u=!0,this;},pulse(o,a){const h={},f={};let l,c,p,D,_,P;for(l=0,c=a.length;l<c;++l)h[d4(a[l])]=1;for(l=0,c=e.length;l<c;++l)_=e[l],h[d4(_)]=-1;for(l=0,c=i.length;l<c;++l)D=i[l],a.forEach(m=>{D(m)&&(h[d4(m)]=-1);});for(l=0,c=t.length;l<c;++l)_=t[l],P=d4(_),h[P]?h[P]=1:o.add.push(V4(t[l]));for(l=0,c=a.length;l<c;++l)_=a[l],h[d4(_)]<0&&o.rem.push(_);function J(m,Z,G){G?m[Z]=G(m):o.encode=Z,u||(f[d4(m)]=m);}for(l=0,c=n.length;l<c;++l)p=n[l],_=p.tuple,D=p.field,P=h[d4(_)],P>0&&(J(_,D,p.value),o.modifies(D));for(l=0,c=s.length;l<c;++l)p=s[l],D=p.filter,a.forEach(m=>{D(m)&&h[d4(m)]>0&&J(m,p.field,p.value);}),o.modifies(p.field);if(u)o.mod=e.length||i.length?a.filter(m=>h[d4(m)]>0):a.slice();else for(P in f)o.mod.push(f[P]);return(r||r==null&&(e.length||i.length))&&o.clean(!0),o;}};}const T4="_:mod:_";function U7(){Object.defineProperty(this,T4,{writable:!0,value:{}});}U7.prototype={set(t,e,n,i){const s=this,r=s[t],u=s[T4];return e!=null&&e>=0?(r[e]!==n||i)&&(r[e]=n,u[e+":"+t]=-1,u[t]=-1):(r!==n||i)&&(s[t]=n,u[t]=w1(n)?1+n.length:-1),s;},modified(t,e){const n=this[T4];if(arguments.length){if(w1(t)){for(let i=0;i<t.length;++i)if(n[t[i]])return!0;return!1;}}else{for(const i in n)if(n[i])return!0;return!1;}return e!=null&&e>=0?e+1<n[t]||!!n[e+":"+t]:!!n[t];},clear(){return this[T4]={},this;}};let qt1=0;const St1="pulse",Lt2=new U7,Rt2=1,bt2=2;function g4(t,e,n,i){this.id=++qt1,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,i);}function st1(t){return function(e){const n=this.flags;return arguments.length===0?!!(n&t):(this.flags=e?n|t:n&~t,this);};}g4.prototype={targets(){return this._targets||(this._targets=q8(k1));},set(t){return this.value!==t?(this.value=t,1):0;},skip:st1(Rt2),modified:st1(bt2),parameters(t,e,n){e=e!==!1;const i=this._argval=this._argval||new U7,s=this._argops=this._argops||[],r=[];let u,o,a,h;const f=(l,c,p)=>{p instanceof g4?(p!==this&&(e&&p.targets().add(this),r.push(p)),s.push({op:p,name:l,index:c})):i.set(l,c,p);};for(u in t)if(o=t[u],u===St1)p(o).forEach(l=>{l instanceof g4?l!==this&&(l.targets().add(this),r.push(l)):b("Pulse parameters must be operator instances.");}),this.source=o;else if(w1(o))for(i.set(u,-1,Array(a=o.length)),h=0;h<a;++h)f(u,h,o[h]);else f(u,-1,o);return this.marshall().clear(),n&&(s.initonly=!0),r;},marshall(t){const e=this._argval||Lt2,n=this._argops;let i,s,r,u;if(n){const o=n.length;for(s=0;s<o;++s)i=n[s],r=i.op,u=r.modified()&&r.stamp===t,e.set(i.name,i.index,r.value,u);if(n.initonly){for(s=0;s<o;++s)i=n[s],i.op.targets().remove(this);this._argops=null,this._update=null;}}return e;},detach(){const t=this._argops;let e,n,i,s;if(t)for(e=0,n=t.length;e<n;++e)i=t[e],s=i.op,s._targets&&s._targets.remove(this);this.pulse=null,this.source=null;},evaluate(t){const e=this._update;if(e){const n=this.marshall(t.stamp),i=e.call(this,n,t);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return t.StopPropagation;}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t;}};function zt1(t,e,n,i){let s=1,r;return t instanceof g4?r=t:t&&t.prototype instanceof g4?r=new t:O1(t)?r=new g4(null,t):(s=0,r=new g4(t,e)),this.rank(r),s&&(i=n,n=e),n&&this.connect(r,r.parameters(n,i)),this.touch(r),r;}function Ct1(t,e){const n=t.rank,i=e.length;for(let s=0;s<i;++s)if(n<e[s].rank){this.rerank(t);return;}}let It1=0;function Y6(t,e,n){this.id=++It1,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e);}function k9(t,e,n){return new Y6(t,e,n);}Y6.prototype={_filter:_1,_apply:A1,targets(){return this._targets||(this._targets=q8(k1));},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume;},receive(t){if(this._filter(t)){const e=this.value=this._apply(t),n=this._targets,i=n?n.length:0;for(let s=0;s<i;++s)n[s].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation());}},filter(t){const e=k9(t);return this.targets().add(e),e;},apply(t){const e=k9(null,t);return this.targets().add(e),e;},merge(){const t=k9();this.targets().add(t);for(let e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t;},throttle(t){let e=-1;return this.filter(()=>{const n=Date.now();return n-e>t?(e=n,1):0;});},debounce(t){const e=k9();return this.targets().add(k9(null,null,Dn(t,n=>{const i=n.dataflow;e.receive(n),i&&i.run&&i.run();}))),e;},between(t,e){let n=!1;return t.targets().add(k9(null,null,()=>n=!0)),e.targets().add(k9(null,null,()=>n=!1)),this.filter(()=>n);},detach(){this._filter=_1,this._targets=null;}};function Tt1(t,e,n,i){const s=this,r=k9(n,i),u=function(h){h.dataflow=s;try{r.receive(h);}catch(f){s.error(f);}finally{s.run();}};let o;typeof t=="string"&&typeof document!="undefined"?o=document.querySelectorAll(t):o=p(t);const a=o.length;for(let h=0;h<a;++h)o[h].addEventListener(e,u);return r;}function Ut1(t,e){const n=this.locale();return Un1(t,e,n.timeParse,n.utcParse);}function jt1(t,e,n){return e=this.parse(e,n),this.pulse(t,this.changeset().insert(e));}async function Nt1(t,e){const n=this;let i=0,s;try{s=await n.loader().load(t,{context:"dataflow",response:_n1(e&&e.type)});try{s=n.parse(s,e);}catch(r){i=-2,n.warn("Data ingestion failed",t,r);}}catch(r){i=-1,n.warn("Loading failed",t,r);}return{data:s,status:i};}async function $t(t,e,n){const i=this,s=i._pending||Kt1(i);s.requests+=1;const r=await i.request(e,n);return i.pulse(t,i.changeset().remove(_1).insert(r.data||[])),s.done(),r;}function Kt1(t){let e;const n=new Promise(i=>e=i);return n.requests=0,n.done=()=>{--n.requests===0&&(t._pending=null,e(t));},t._pending=n;}const Vt1={skip:!0};function Yt1(t,e,n,i,s){const r=t instanceof g4?Ht1:Bt1;return r(this,t,e,n,i,s),this;}function Bt1(t,e,n,i,s,r){const u=J1({},r,Vt1);let o,a;O1(n)||(n=On(n)),i===void 0?o=h=>t.touch(n(h)):O1(i)?(a=new g4(null,i,s,!1),o=h=>{a.evaluate(h);const f=n(h),l=a.value;it2(l)?t.pulse(f,l,r):t.update(f,l,u);}):o=h=>t.update(n(h),i,u),e.apply(o);}function Ht1(t,e,n,i,s,r){if(i===void 0)e.targets().add(n);else{const u=r||{},o=new g4(null,Wt2(n,i),s,!1);o.modified(u.force),o.rank=e.rank,e.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),t.connect(n,[o]));}}function Wt2(t,e){return e=O1(e)?e:On(e),t?function(n,i){const s=e(n,i);return t.skip()||(t.skip(s!==this.value).value=s),s;}:e;}function Xt1(t){t.rank=++this._rank;}function Jt1(t){const e=[t];let n,i,s;for(;e.length;)if(this.rank(n=e.pop()),i=n._targets)for(s=i.length;--s>=0;)e.push(n=i[s]),n===t&&b("Cycle detected in dataflow graph.");}const j9={},v7=1<<0,F6=1<<1,w6=1<<2,Zt2=v7|F6,rt2=v7|w6,M5=v7|F6|w6,ot2=1<<3,S6=1<<4,lt2=1<<5,ut2=1<<6;function y5(t,e,n){this.dataflow=t,this.stamp=e??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null;}function B7(t,e){const n=[];return Hn(t,e,i=>n.push(i)),n;}function ht1(t,e){const n={};return t.visit(e,i=>{n[d4(i)]=1;}),i=>n[d4(i)]?null:i;}function N6(t,e){return t?(n,i)=>t(n,i)&&e(n,i):e;}y5.prototype={StopPropagation:j9,ADD:v7,REM:F6,MOD:w6,ADD_REM:Zt2,ADD_MOD:rt2,ALL:M5,REFLOW:ot2,SOURCE:S6,NO_SOURCE:lt2,NO_FIELDS:ut2,fork(t){return new y5(this.dataflow).init(this,t);},clone(){const t=this.fork(M5);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(M5|S6);},addAll(){let t=this;const e=!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length;return e||(t=new y5(this.dataflow).init(this),t.add=t.source,t.rem=[]),t;},init(t,e){const n=this;return n.stamp=t.stamp,n.encode=t.encode,t.fields&&!(e&ut2)&&(n.fields=t.fields),e&v7?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),e&F6?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),e&w6?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),e&lt2?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n;},runAfter(t){this.dataflow.runAfter(t);},changed(t){const e=t||M5;return e&v7&&this.add.length||e&F6&&this.rem.length||e&w6&&this.mod.length;},reflow(t){if(t)return this.fork(M5).reflow();const e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(w6,ht1(this,v7))),this;},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans;},modifies(t){const e=this.fields||(this.fields={});return w1(t)?t.forEach(n=>e[n]=!0):e[t]=!0,this;},modified(t,e){const n=this.fields;return(e||this.mod.length)&&n?arguments.length?w1(t)?t.some(i=>n[i]):n[t]:!!n:!1;},filter(t,e){const n=this;return t&v7&&(n.addF=N6(n.addF,e)),t&F6&&(n.remF=N6(n.remF,e)),t&w6&&(n.modF=N6(n.modF,e)),t&S6&&(n.srcF=N6(n.srcF,e)),n;},materialize(t){t=t||M5;const e=this;return t&v7&&e.addF&&(e.add=B7(e.add,e.addF),e.addF=null),t&F6&&e.remF&&(e.rem=B7(e.rem,e.remF),e.remF=null),t&w6&&e.modF&&(e.mod=B7(e.mod,e.modF),e.modF=null),t&S6&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e;},visit(t,e){const n=this,i=e;if(t&S6)return Hn(n.source,n.srcF,i),n;t&v7&&Hn(n.add,n.addF,i),t&F6&&Hn(n.rem,n.remF,i),t&w6&&Hn(n.mod,n.modF,i);const s=n.source;if(t&ot2&&s){const r=n.add.length+n.mod.length;r===s.length||(r?Hn(s,ht1(n,rt2),i):Hn(s,n.srcF,i));}return n;}};function H4(t,e,n,i){const s=this;let r=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=i||null,this.pulses=n;for(const u of n){if(u.stamp!==e)continue;if(u.fields){const o=s.fields||(s.fields={});for(const a in u.fields)o[a]=1;}u.changed(s.ADD)&&(r|=s.ADD),u.changed(s.REM)&&(r|=s.REM),u.changed(s.MOD)&&(r|=s.MOD);}this.changes=r;}Pn(H4,y5,{fork(t){const e=new y5(this.dataflow).init(this,t&this.NO_FIELDS);return t!==void 0&&(t&e.ADD&&this.visit(e.ADD,n=>e.add.push(n)),t&e.REM&&this.visit(e.REM,n=>e.rem.push(n)),t&e.MOD&&this.visit(e.MOD,n=>e.mod.push(n))),e;},changed(t){return this.changes&t;},modified(t){const e=this,n=e.fields;return n&&e.changes&e.MOD?w1(t)?t.some(i=>n[i]):n[t]:0;},filter(){b("MultiPulse does not support filtering.");},materialize(){b("MultiPulse does not support materialization.");},visit(t,e){const n=this,i=n.pulses,s=i.length;let r=0;if(t&n.SOURCE)for(;r<s;++r)i[r].visit(t,e);else for(;r<s;++r)i[r].stamp===n.stamp&&i[r].visit(t,e);return n;}});async function Gt1(t,e,n){const i=this,s=[];if(i._pulse)return at2(i);if(i._pending&&await i._pending,e&&await C6(i,e),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const r=++i._clock;i._pulse=new y5(i,r,t),i._touched.forEach(f=>i._enqueue(f,!0)),i._touched=q8(k1);let u=0,o,a,h;try{for(;i._heap.size()>0;){if(o=i._heap.pop(),o.rank!==o.qrank){i._enqueue(o,!0);continue;}a=o.run(i._getPulse(o,t)),a.then?a=await a:a.async&&(s.push(a.async),a=j9),a!==j9&&o._targets&&o._targets.forEach(f=>i._enqueue(f)),++u;}}catch(f){i._heap.clear(),h=f;}if(i._input={},i._pulse=null,i.debug(`Pulse ${r}: ${u} operators`),h&&(i._postrun=[],i.error(h)),i._postrun.length){const f=i._postrun.sort((l,c)=>c.priority-l.priority);i._postrun=[];for(let l=0;l<f.length;++l)await C6(i,f[l].callback);}return n&&await C6(i,n),s.length&&Promise.all(s).then(f=>i.runAsync(null,()=>{f.forEach(l=>{try{l(i);}catch(c){i.error(c);}});})),i;}async function Qt1(t,e,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(t,e,n)).then(i,i),this._running;}function xt2(t,e,n){return this._pulse?at2(this):(this.evaluate(t,e,n),this);}function te3(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this);}catch(i){this.error(i);}}function at2(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t;}function ee3(t,e){const n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t));}function ne4(t,e){const n=t.source,i=this._clock;return n&&w1(n)?new H4(this,i,n.map(s=>s.pulse),e):this._input[t.id]||ie1(this._pulse,n&&n.pulse);}function ie1(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==j9&&(t.source=e.source),t);}const W7={skip:!1,force:!1};function se1(t,e){const n=e||W7;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this;}function re3(t,e,n){const i=n||W7;return(t.set(e)||i.force)&&this.touch(t,i),this;}function oe2(t,e,n){this.touch(t,n||W7);const i=new y5(this,this._clock+(this._pulse?0:1)),s=t.pulse&&t.pulse.source||[];return i.target=t,this._input[t.id]=e.pulse(i,s),this;}function le1(t){let e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:n=>(e.push(n),ft2(e,0,e.length-1,t)),pop:()=>{const n=e.pop();let i;return e.length?(i=e[0],e[0]=n,ue3(e,0,t)):i=n,i;}};}function ft2(t,e,n,i){let s,r;const u=t[n];for(;n>e;){if(r=n-1>>1,s=t[r],i(u,s)<0){t[n]=s,n=r;continue;}break;}return t[n]=u;}function ue3(t,e,n){const i=e,s=t.length,r=t[e];let u=(e<<1)+1,o;for(;u<s;)o=u+1,o<s&&n(t[u],t[o])>=0&&(u=o),t[e]=t[u],e=u,u=(e<<1)+1;return t[e]=r,ft2(t,i,e,n);}function ct3(){this.logger(en()),this.logLevel(1),this._clock=0,this._rank=0,this._locale=R6();try{this._loader=Dn1();}catch(t){}this._touched=q8(k1),this._input={},this._pulse=null,this._heap=le1((t,e)=>t.qrank-e.qrank),this._postrun=[];}function L10(t){return function(){return this._log[t].apply(this,arguments);};}ct3.prototype={stamp(){return this._clock;},loader(t){return arguments.length?(this._loader=t,this):this._loader;},locale(t){return arguments.length?(this._locale=t,this):this._locale;},logger(t){return arguments.length?(this._log=t,this):this._log;},error:L10("error"),warn:L10("warn"),info:L10("info"),debug:L10("debug"),logLevel:L10("level"),cleanThreshold:1e4,add:zt1,connect:Ct1,rank:Xt1,rerank:Jt1,pulse:oe2,touch:se1,update:re3,changeset:I8,ingest:jt1,parse:Ut1,preload:$t,request:Nt1,events:Tt1,on:Yt1,evaluate:Gt1,run:xt2,runAsync:Qt1,runAfter:te3,_enqueue:ee3,_getPulse:ne4};function dt2(t,e){g4.call(this,t,null,e);}Pn(dt2,g4,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(n=>this.pulse=n):e!==t.StopPropagation&&(this.pulse=e),e;},evaluate(t){const e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n;},transform(){}});const X9={};function he1(t){const e=pt1(t);return e&&e.Definition||null;}function pt1(t){return t=t&&t.toLowerCase(),g(X9,t)?X9[t]:null;}function*G8(t,n){if(n==null)for(let e of t)e!=null&&e!==""&&(e=+e)>=e&&(yield e);else{let e=-1;for(let l of t)l=n(l,++e,t),l!=null&&l!==""&&(l=+l)>=l&&(yield l);}}function K7(t,n,e){const l=Float64Array.from(G8(t,e));return l.sort(a1),n.map(o=>Hn1(l,o));}function W8(t,n){return K7(t,[.25,.5,.75],n);}function Z7(t,n){const e=t.length,l=v2(t,n),o=W8(t,n),r=(o[2]-o[0])/1.34,i=Math.min(l,r)||l||Math.abs(o[0])||1;return 1.06*i*Math.pow(e,-.2);}function pe1(t){const n=t.maxbins||20,e=t.base||10,l=Math.log(e),o=t.divide||[5,2];let r=t.extent[0],i=t.extent[1],u,f,s,c,a,h;const g=t.span||i-r||Math.abs(r)||1;if(t.step)u=t.step;else if(t.steps){for(c=g/n,a=0,h=t.steps.length;a<h&&t.steps[a]<c;++a);u=t.steps[Math.max(0,a-1)];}else{for(f=Math.ceil(Math.log(n)/l),s=t.minstep||0,u=Math.max(s,Math.pow(e,Math.round(Math.log(g)/l)-f));Math.ceil(g/u)>n;)u*=e;for(a=0,h=o.length;a<h;++a)c=u/o[a],c>=s&&g/c<=n&&(u=c);}c=Math.log(u);const p=c>=0?0:~~(-c/l)+1,M=Math.pow(e,-p-1);return(t.nice||t.nice===void 0)&&(c=Math.floor(r/u+M)*u,r=r<c?c-u:c,i=Math.ceil(i/u)*u),{start:r,stop:i===r?r+u:i,step:u};}var N7=Math.random;function Me1(t){N7=t;}function de1(t,n,e,l){if(!t.length)return[void 0,void 0];const o=Float64Array.from(G8(t,l)),r=o.length,i=n;let u,f,s,c;for(s=0,c=Array(i);s<i;++s){for(u=0,f=0;f<r;++f)u+=o[~~(N7()*r)];c[s]=u/r;}return c.sort(a1),[O2(c,e/2),O2(c,1-e/2)];}function me1(t,n,e,l){l=l||(h=>h);const o=t.length,r=new Float64Array(o);let i=0,u=1,f=l(t[0]),s=f,c=f+n,a;for(;u<o;++u){if(a=l(t[u]),a>=c){for(s=(f+s)/2;i<u;++i)r[i]=s;c=a+n,f=a;}s=a;}for(s=(f+s)/2;i<u;++i)r[i]=s;return e?we1(r,n+n/4):r;}function we1(t,n){const e=t.length;let l=0,o=1,r,i;for(;t[l]===t[o];)++o;for(;o<e;){for(r=o+1;t[o]===t[r];)++r;if(t[o]-t[o-1]<n){for(i=o+(l+r-o-o>>1);i<o;)t[i++]=t[o];for(;i>o;)t[i--]=t[l];}l=o,o=r;}return t;}function be1(t){return function(){return t=(1103515245*t+12345)%2147483647,t/2147483647;};}function Ne1(t,n){n==null&&(n=t,t=0);let e,l,o;const r={min(i){return arguments.length?(e=i||0,o=l-e,r):e;},max(i){return arguments.length?(l=i||0,o=l-e,r):l;},sample(){return e+Math.floor(o*N7());},pdf(i){return i===Math.floor(i)&&i>=e&&i<l?1/o:0;},cdf(i){const u=Math.floor(i);return u<e?0:u>=l?1:(u-e+1)/o;},icdf(i){return i>=0&&i<=1?e-1+Math.floor(i*o):NaN;}};return r.min(t).max(n);}const B8=Math.sqrt(2*Math.PI),Xe1=Math.SQRT2;let F7=NaN;function j10(t,n){t=t||0,n=n??1;let e=0,l=0,o,r;if(F7===F7)e=F7,F7=NaN;else{do e=N7()*2-1,l=N7()*2-1,o=e*e+l*l;while(o===0||o>1)r=Math.sqrt(-2*Math.log(o)/o),e*=r,F7=l*r;}return t+e*n;}function H5(t,n,e){e=e??1;const l=(t-(n||0))/e;return Math.exp(-.5*l*l)/(e*B8);}function z10(t,n,e){n=n||0,e=e??1;const l=(t-n)/e,o=Math.abs(l);let r;if(o>37)r=0;else{const i=Math.exp(-o*o/2);let u;o<7.07106781186547?(u=.0352624965998911*o+.700383064443688,u=u*o+6.37396220353165,u=u*o+33.912866078383,u=u*o+112.079291497871,u=u*o+221.213596169931,u=u*o+220.206867912376,r=i*u,u=.0883883476483184*o+1.75566716318264,u=u*o+16.064177579207,u=u*o+86.7807322029461,u=u*o+296.564248779674,u=u*o+637.333633378831,u=u*o+793.826512519948,u=u*o+440.413735824752,r=r/u):(u=o+.65,u=o+4/u,u=o+3/u,u=o+2/u,u=o+1/u,r=i/u/2.506628274631);}return l>0?1-r:r;}function P6(t,n,e){return t<0||t>1?NaN:(n||0)+(e??1)*Xe1*qe1(2*t-1);}function qe1(t){let n=-Math.log((1-t)*(1+t)),e;return n<6.25?(n-=3.125,e=-364441206401782e-35,e=-16850591381820166e-35+e*n,e=128584807152564e-32+e*n,e=11157877678025181e-33+e*n,e=-1333171662854621e-31+e*n,e=20972767875968562e-33+e*n,e=6637638134358324e-30+e*n,e=-4054566272975207e-29+e*n,e=-8151934197605472e-29+e*n,e=26335093153082323e-28+e*n,e=-12975133253453532e-27+e*n,e=-5415412054294628e-26+e*n,e=10512122733215323e-25+e*n,e=-4112633980346984e-24+e*n,e=-29070369957882005e-24+e*n,e=42347877827932404e-23+e*n,e=-13654692000834679e-22+e*n,e=-13882523362786469e-21+e*n,e=18673420803405714e-20+e*n,e=-740702534166267e-18+e*n,e=-.006033670871430149+e*n,e=.24015818242558962+e*n,e=1.6536545626831027+e*n):n<16?(n=Math.sqrt(n)-3.25,e=22137376921775787e-25,e=9075656193888539e-23+e*n,e=-27517406297064545e-23+e*n,e=18239629214389228e-24+e*n,e=15027403968909828e-22+e*n,e=-4013867526981546e-21+e*n,e=29234449089955446e-22+e*n,e=12475304481671779e-21+e*n,e=-47318229009055734e-21+e*n,e=6828485145957318e-20+e*n,e=24031110387097894e-21+e*n,e=-3550375203628475e-19+e*n,e=9532893797373805e-19+e*n,e=-.0016882755560235047+e*n,e=.002491442096107851+e*n,e=-.003751208507569241+e*n,e=.005370914553590064+e*n,e=1.0052589676941592+e*n,e=3.0838856104922208+e*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,e=-27109920616438573e-27,e=-2555641816996525e-25+e*n,e=15076572693500548e-25+e*n,e=-3789465440126737e-24+e*n,e=761570120807834e-23+e*n,e=-1496002662714924e-23+e*n,e=2914795345090108e-23+e*n,e=-6771199775845234e-23+e*n,e=22900482228026655e-23+e*n,e=-99298272942317e-20+e*n,e=4526062597223154e-21+e*n,e=-1968177810553167e-20+e*n,e=7599527703001776e-20+e*n,e=-21503011930044477e-20+e*n,e=-13871931833623122e-20+e*n,e=1.0103004648645344+e*n,e=4.849906401408584+e*n):e=Infinity,e*t;}function J6(t,n){let e,l;const o={mean(r){return arguments.length?(e=r||0,o):e;},stdev(r){return arguments.length?(l=r??1,o):l;},sample:()=>j10(e,l),pdf:r=>H5(r,e,l),cdf:r=>z10(r,e,l),icdf:r=>P6(r,e,l)};return o.mean(t).stdev(n);}function ye1(t,n){const e=J6();let l=0;const o={data(r){return arguments.length?(t=r,l=r?r.length:0,o.bandwidth(n)):t;},bandwidth(r){return arguments.length?(n=r,!n&&t&&(n=Z7(t)),o):n;},sample(){return t[~~(N7()*l)]+n*e.sample();},pdf(r){let i=0,u=0;for(;u<l;++u)i+=e.pdf((r-t[u])/n);return i/n/l;},cdf(r){let i=0,u=0;for(;u<l;++u)i+=e.cdf((r-t[u])/n);return i/l;},icdf(){throw Error("KDE icdf not supported.");}};return o.data(t);}function O7(t,n){return t=t||0,n=n??1,Math.exp(t+j10()*n);}function V5(t,n,e){if(t<=0)return 0;n=n||0,e=e??1;const l=(Math.log(t)-n)/e;return Math.exp(-.5*l*l)/(e*B8*t);}function $4(t,n,e){return z10(Math.log(t),n,e);}function _9(t,n,e){return Math.exp(P6(t,n,e));}function Ye1(t,n){let e,l;const o={mean(r){return arguments.length?(e=r||0,o):e;},stdev(r){return arguments.length?(l=r??1,o):l;},sample:()=>O7(e,l),pdf:r=>V5(r,e,l),cdf:r=>$4(r,e,l),icdf:r=>_9(r,e,l)};return o.mean(t).stdev(n);}function Ae1(t,n){let e=0,l;function o(i){const u=[];let f=0,s;for(s=0;s<e;++s)f+=u[s]=i[s]==null?1:+i[s];for(s=0;s<e;++s)u[s]/=f;return u;}const r={weights(i){return arguments.length?(l=o(n=i||[]),r):n;},distributions(i){return arguments.length?(i?(e=i.length,t=i):(e=0,t=[]),r.weights(n)):t;},sample(){const i=N7();let u=t[e-1],f=l[0],s=0;for(;s<e-1;f+=l[++s])if(i<f){u=t[s];break;}return u.sample();},pdf(i){let u=0,f=0;for(;f<e;++f)u+=l[f]*t[f].pdf(i);return u;},cdf(i){let u=0,f=0;for(;f<e;++f)u+=l[f]*t[f].cdf(i);return u;},icdf(){throw Error("Mixture icdf not supported.");}};return r.distributions(t).weights(n);}function x7(t,n){return n==null&&(n=t??1,t=0),t+(n-t)*N7();}function ee4(t,n,e){return e==null&&(e=n??1,n=0),t>=n&&t<=e?1/(e-n):0;}function ne5(t,n,e){return e==null&&(e=n??1,n=0),t<n?0:t>e?1:(t-n)/(e-n);}function te4(t,n,e){return e==null&&(e=n??1,n=0),t>=0&&t<=1?n+t*(e-n):NaN;}function Le(t,n){let e,l;const o={min(r){return arguments.length?(e=r||0,o):e;},max(r){return arguments.length?(l=r??1,o):l;},sample:()=>x7(e,l),pdf:r=>ee4(r,e,l),cdf:r=>ne5(r,e,l),icdf:r=>te4(r,e,l)};return n==null&&(n=t??1,t=0),o.min(t).max(n);}function re4(t,n,e){let l=0,o=0;for(const r of t){const i=e(r);if(n(r)==null||i==null||isNaN(i))continue;l+=(i-l)/++o;}return{coef:[l],predict:()=>l,rSquared:0};}function S7(t,n,e,l){const o=l-t*t,r=Math.abs(o)<1e-24?0:(e-t*n)/o,i=n-r*t;return[i,r];}function I9(t,n,e,l){t=t.filter(g=>{let p=n(g),M=e(g);return p!=null&&(p=+p)>=p&&M!=null&&(M=+M)>=M;}),l&&t.sort((g,p)=>n(g)-n(p));const o=t.length,r=new Float64Array(o),i=new Float64Array(o);let u=0,f=0,s=0,c,a,h;for(h of t)r[u]=c=+n(h),i[u]=a=+e(h),++u,f+=(c-f)/u,s+=(a-s)/u;for(u=0;u<o;++u)r[u]-=f,i[u]-=s;return[r,i,f,s];}function k10(t,n,e,l){let o=-1,r,i;for(const u of t)r=n(u),i=e(u),r!=null&&(r=+r)>=r&&i!=null&&(i=+i)>=i&&l(r,i,++o);}function Y7(t,n,e,l,o){let r=0,i=0;return k10(t,n,e,(u,f)=>{const s=f-o(u),c=f-l;r+=s*s,i+=c*c;}),1-r/i;}function oe3(t,n,e){let l=0,o=0,r=0,i=0,u=0;k10(t,n,e,(c,a)=>{++u,l+=(c-l)/u,o+=(a-o)/u,r+=(c*a-r)/u,i+=(c*c-i)/u;});const f=S7(l,o,r,i),s=c=>f[0]+f[1]*c;return{coef:f,predict:s,rSquared:Y7(t,n,e,o,s)};}function Fe1(t,n,e){let l=0,o=0,r=0,i=0,u=0;k10(t,n,e,(c,a)=>{++u,c=Math.log(c),l+=(c-l)/u,o+=(a-o)/u,r+=(c*a-r)/u,i+=(c*c-i)/u;});const f=S7(l,o,r,i),s=c=>f[0]+f[1]*Math.log(c);return{coef:f,predict:s,rSquared:Y7(t,n,e,o,s)};}function Se1(t,n,e){const[l,o,r,i]=I9(t,n,e);let u=0,f=0,s=0,c=0,a=0,h,g,p;k10(t,n,e,(b,w)=>{h=l[a++],g=Math.log(w),p=h*w,u+=(w*g-u)/a,f+=(p-f)/a,s+=(p*g-s)/a,c+=(h*p-c)/a;});const[M,d]=S7(f/i,u/i,s/i,c/i),m=b=>Math.exp(M+d*(b-r));return{coef:[Math.exp(M-d*r),d],predict:m,rSquared:Y7(t,n,e,i,m)};}function ke1(t,n,e){let l=0,o=0,r=0,i=0,u=0,f=0;k10(t,n,e,(a,h)=>{const g=Math.log(a),p=Math.log(h);++f,l+=(g-l)/f,o+=(p-o)/f,r+=(g*p-r)/f,i+=(g*g-i)/f,u+=(h-u)/f;});const s=S7(l,o,r,i),c=a=>s[0]*Math.pow(a,s[1]);return s[0]=Math.exp(s[0]),{coef:s,predict:c,rSquared:Y7(t,n,e,u,c)};}function le2(t,n,e){const[l,o,r,i]=I9(t,n,e),u=l.length;let f=0,s=0,c=0,a=0,h=0,g,p,M,d;for(g=0;g<u;)p=l[g],M=o[g++],d=p*p,f+=(d-f)/g,s+=(d*p-s)/g,c+=(d*d-c)/g,a+=(p*M-a)/g,h+=(d*M-h)/g;const m=c-f*f,b=f*m-s*s,w=(h*f-a*s)/b,X=(a*m-h*s)/b,q=-w*f,A=y=>(y=y-r,w*y*y+X*y+q+i);return{coef:[q-X*r+w*r*r+i,X-2*w*r,w],predict:A,rSquared:Y7(t,n,e,i,A)};}function Ie1(t,n,e,l){if(l===0)return re4(t,n,e);if(l===1)return oe3(t,n,e);if(l===2)return le2(t,n,e);const[o,r,i,u]=I9(t,n,e),f=o.length,s=[],c=[],a=l+1;let h,g,p,M,d;for(h=0;h<a;++h){for(p=0,M=0;p<f;++p)M+=Math.pow(o[p],h)*r[p];for(s.push(M),d=new Float64Array(a),g=0;g<a;++g){for(p=0,M=0;p<f;++p)M+=Math.pow(o[p],h+g);d[g]=M;}c.push(d);}c.push(s);const m=Qe2(c),b=w=>{w-=i;let X=u+m[0]+m[1]*w+m[2]*w*w;for(h=3;h<a;++h)X+=m[h]*Math.pow(w,h);return X;};return{coef:Ee1(a,m,-i,u),predict:b,rSquared:Y7(t,n,e,u,b)};}function Ee1(t,n,e,l){const o=Array(t);let r,i,u,f;for(r=0;r<t;++r)o[r]=0;for(r=t-1;r>=0;--r)for(u=n[r],f=1,o[r]+=u,i=1;i<=r;++i)f*=(r+1-i)/i,o[r-i]+=u*Math.pow(e,i)*f;return o[0]+=l,o;}function Qe2(t){const n=t.length-1,e=[];let l,o,r,i,u;for(l=0;l<n;++l){for(i=l,o=l+1;o<n;++o)Math.abs(t[l][o])>Math.abs(t[l][i])&&(i=o);for(r=l;r<n+1;++r)u=t[r][l],t[r][l]=t[r][i],t[r][i]=u;for(o=l+1;o<n;++o)for(r=n;r>=l;r--)t[r][o]-=t[r][l]*t[l][o]/t[l][l];}for(o=n-1;o>=0;--o){for(u=0,r=o+1;r<n;++r)u+=t[r][o]*e[r];e[o]=(t[n][o]-u)/t[o][o];}return e;}const ie2=1e-12;function Re1(t,n,e,l){const[o,r,i,u]=I9(t,n,e,!0),f=o.length,s=Math.max(2,~~(l*f)),c=new Float64Array(f),a=new Float64Array(f),h=new Float64Array(f).fill(1);for(let g=-1;++g<=2;){const p=[0,s-1];for(let d=0;d<f;++d){const m=o[d],b=p[0],w=p[1],X=m-o[b]>o[w]-m?b:w;let q=0,A=0,y=0,D=0,U=0;const fe=1/Math.abs(o[X]-m||1);for(let L=b;L<=w;++L){const E=o[L],C=r[L],Q=je2(Math.abs(m-E)*fe)*h[L],R=E*Q;q+=Q,A+=R,y+=C*Q,D+=C*R,U+=E*R;}const[se,ce]=S7(A/q,y/q,D/q,U/q);c[d]=se+ce*m,a[d]=Math.abs(r[d]-c[d]),ze2(o,d+1,p);}if(g===2)break;const M=Xn1(a);if(Math.abs(M)<1e-12)break;for(let d=0,m,b;d<f;++d)m=a[d]/(6*M),h[d]=m>=1?ie2:(b=1-m*m)*b;}return Pe(o,c,i,u);}function je2(t){return(t=1-t*t*t)*t*t;}function ze2(t,n,e){const l=t[n];let o=e[0],r=e[1]+1;if(r>=t.length)return;for(;n>o&&t[r]-l<=l-t[o];)e[0]=++o,e[1]=r,++r;}function Pe(t,n,e,l){const o=t.length,r=[];let i=0,u=0,f=[],s;for(;i<o;++i)s=t[i]+e,f[0]===s?f[1]+=(n[i]-f[1])/++u:(u=0,f[1]+=l,f=[s,n[i]],r.push(f));return f[1]+=l,r;}const De1=.5*Math.PI/180;function Ue1(t,n,e,l){e=e||25,l=Math.max(e,l||200);const o=M=>[M,t(M)],r=n[0],i=n[1],u=i-r,f=u/l,s=[o(r)],c=[];if(e===l){for(let M=1;M<l;++M)s.push(o(r+M/e*u));return s.push(o(i)),s;}else{c.push(o(i));for(let M=e;--M>0;)c.push(o(r+M/e*u));}let a=s[0],h=c[c.length-1];const g=1/u,p=Ce1(a[1],c);for(;h;){const M=o((a[0]+h[0])/2),d=M[0]-a[0]>=f;d&&Te1(a,M,h,g,p)>De1?c.push(M):(a=h,s.push(h),c.pop()),h=c[c.length-1];}return s;}function Ce1(t,n){let e=t,l=t;const o=n.length;for(let r=0;r<o;++r){const i=n[r][1];i<e&&(e=i),i>l&&(l=i);}return 1/(l-e);}function Te1(t,n,e,l,o){const r=Math.atan2(o*(e[1]-t[1]),l*(e[0]-t[0])),i=Math.atan2(o*(n[1]-t[1]),l*(n[0]-t[0]));return Math.abs(r-i);}function Ft1(e){return t=>{const i=e.length;let n=1,r=String(e[0](t));for(;n<i;++n)r+="|"+e[n](t);return r;};}function Q6(e){return!e||!e.length?function(){return"";}:e.length===1?e[0]:Ft1(e);}function Se2(e,t,i){return i||e+(t?"_"+t:"");}const B9=()=>{},zt2={init:B9,add:B9,rem:B9,idx:0},A8={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t);},rem:(e,t)=>{t<=e.min&&(e.min=NaN);},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t);},rem:(e,t)=>{t>=e.max&&(e.max=NaN);},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,i)=>{t<e.min&&(e.argmin=i);},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0);},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,i)=>{t>e.max&&(e.argmax=i);},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0);},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t;},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},I10=Object.keys(A8).filter(e=>e!=="__count__");function Lt3(e,t){return(i,n)=>J1({name:e,aggregate_param:n,out:i||e},zt2,t);}[...I10,"__count__"].forEach(e=>{A8[e]=Lt3(e,A8[e]);});function _e1(e,t,i){return A8[e](i,t);}function Ne2(e,t){return e.idx-t.idx;}function Pt3(e){const t={};e.forEach(n=>t[n.name]=n);const i=n=>{if(!n.req)return;n.req.forEach(r=>{t[r]||i(t[r]=A8[r]());});};return e.forEach(i),Object.values(t).sort(Ne2);}function Tt2(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param));}function jt2(e,t){if(e==null||e===""){++this.missing;return;}if(e!==e)return;++this.valid,this._ops.forEach(i=>i.add(this,e,t));}function $t1(e,t){if(e==null||e===""){--this.missing;return;}if(e!==e)return;--this.valid,this._ops.forEach(i=>i.rem(this,e,t));}function Vt2(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e;}function Me2(e,t){const i=t||A1,n=Pt3(e),r=e.slice().sort(Ne2);function a(s){this._ops=n,this._out=r,this.cell=s,this.init();}return a.prototype.init=Tt2,a.prototype.add=jt2,a.prototype.rem=$t1,a.prototype.set=Vt2,a.prototype.get=i,a.fields=e.map(s=>s.out),a;}function G9(e){this._key=e?z1(e):d4,this.reset();}const E9=G9.prototype;E9.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null;},E9.add=function(e){this._add.push(e);},E9.rem=function(e){this._rem.push(e);},E9.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,i=this._key,n=e.length,r=t.length,a=Array(n-r),s={};let o,u,d;for(o=0;o<r;++o)s[i(t[o])]=1;for(o=0,u=0;o<n;++o)s[i(d=e[o])]?s[i(d)]=0:a[u++]=d;return this._rem=[],this._add=a;},E9.distinct=function(e){const t=this.values(),i={};let n=t.length,r=0,a;for(;--n>=0;)a=e(t[n])+"",g(i,a)||(i[a]=1,++r);return r;},E9.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),i=zn(t,e);this._ext=[t[i[0]],t[i[1]]],this._get=e;}return this._ext;},E9.argmin=function(e){return this.extent(e)[0]||{};},E9.argmax=function(e){return this.extent(e)[1]||{};},E9.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0;},E9.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0;},E9.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=W8(this.values(),e),this._get=e),this._q;},E9.q1=function(e){return this.quartile(e)[0];},E9.q2=function(e){return this.quartile(e)[1];},E9.q3=function(e){return this.quartile(e)[2];},E9.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=de1(this.values(),1e3,.05,e),this._get=e),this._ci;},E9.ci0=function(e){return this.ci(e)[0];},E9.ci1=function(e){return this.ci(e)[1];};function w7(e){dt2.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null;}w7.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:I10},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},Pn(w7,dt2,{transform(e,t){const i=this,n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return i.stamp=n.stamp,i.value&&(r||t.modified(i._inputs,!0))?(i._prev=i.value,i.value=r?i.init(e):Object.create(null),t.visit(t.SOURCE,a=>i.add(a))):(i.value=i.value||i.init(e),t.visit(t.REM,a=>i.rem(a)),t.visit(t.ADD,a=>i.add(a))),n.modifies(i._outputs),i._drop=e.drop!==!1,e.cross&&i._dims.length>1&&(i._drop=!1,i.cross()),t.clean()&&i._drop&&n.clean(!0).runAfter(()=>this.clean()),i.changes(n);},cross(){const e=this,t=e.value,i=e._dnames,n=i.map(()=>({})),r=i.length;function a(o){let u,d,l,f;for(u in o)for(l=o[u].tuple,d=0;d<r;++d)n[d][f=l[i[d]]]=f;}a(e._prev),a(t);function s(o,u,d){const l=i[d],f=n[d++];for(const m in f){const g=o?o+"|"+m:m;u[l]=f[m],d<r?s(g,u,d):t[g]||e.cell(g,u);}}s("",{},0);},init(e){const t=this._inputs=[],i=this._outputs=[],n={};function r(b){const O=p(R1(b)),R=O.length;let k=0,j;for(;k<R;++k)n[j=O[k]]||(n[j]=1,t.push(j));}this._dims=p(e.groupby),this._dnames=this._dims.map(b=>{const O=H1(b);return r(b),i.push(O),O;}),this.cellkey=e.key?e.key:Q6(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],o=e.aggregate_params||[null],u=e.as||[],d=a.length,l={};let f,m,g,c,p1,y,x;for(d!==s.length&&b("Unmatched number of fields and aggregate ops."),x=0;x<d;++x){if(f=a[x],m=s[x],g=o[x]||null,f==null&&m!=="count"&&b("Null aggregate field specified."),p1=H1(f),y=Se2(m,p1,u[x]),i.push(y),m==="count"){this._counts.push(y);continue;}c=l[p1],c||(r(f),c=l[p1]=[],c.field=f,this._measures.push(c)),m!=="count"&&(this._countOnly=!1),c.push(_e1(m,g,y));}return this._measures=this._measures.map(b=>Me2(b,b.field)),Object.create(null);},cellkey:Q6(),cell(e,t){let i=this.value[e];return i?i.num===0&&this._drop&&i.stamp<this.stamp?(i.stamp=this.stamp,this._adds[this._alen++]=i):i.stamp<this.stamp&&(i.stamp=this.stamp,this._mods[this._mlen++]=i):(i=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=i),i;},newcell(e,t){const i={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const n=this._measures,r=n.length;i.agg=Array(r);for(let a=0;a<r;++a)i.agg[a]=new n[a](i);}return i.store&&(i.data=new G9),i;},newtuple(e,t){const i=this._dnames,n=this._dims,r=n.length,a={};for(let s=0;s<r;++s)a[i[s]]=n[s](e);return t?At2(t.tuple,a):V4(a);},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t];},add(e){const t=this.cellkey(e),i=this.cell(t,e);if(i.num+=1,this._countOnly)return;i.store&&i.data.add(e);const n=i.agg;for(let r=0,a=n.length;r<a;++r)n[r].add(n[r].get(e),e);},rem(e){const t=this.cellkey(e),i=this.cell(t,e);if(i.num-=1,this._countOnly)return;i.store&&i.data.rem(e);const n=i.agg;for(let r=0,a=n.length;r<a;++r)n[r].rem(n[r].get(e),e);},celltuple(e){const t=e.tuple,i=this._counts;e.store&&e.data.values();for(let n=0,r=i.length;n<r;++n)t[i[n]]=e.num;if(!this._countOnly){const n=e.agg;for(let r=0,a=n.length;r<a;++r)n[r].set(t);}return t;},changes(e){const t=this._adds,i=this._mods,n=this._prev,r=this._drop,a=e.add,s=e.rem,o=e.mod;let u,d,l,f;if(n)for(d in n)u=n[d],(!r||u.num)&&s.push(u.tuple);for(l=0,f=this._alen;l<f;++l)a.push(this.celltuple(t[l])),t[l]=null;for(l=0,f=this._mlen;l<f;++l)u=i[l],(u.num===0&&r?s:o).push(this.celltuple(u)),i[l]=null;return this._alen=this._mlen=0,this._prev=null,e;}});function J7(e){dt2.call(this,null,e);}J7.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},Pn(J7,dt2,{transform(e,t){const i=e.interval!==!1,n=this._bins(e),r=n.start,a=n.step,s=e.as||["bin0","bin1"],o=s[0],u=s[1];let d;return e.modified()?(t=t.reflow(!0),d=t.SOURCE):d=t.modified(R1(e.field))?t.ADD_MOD:t.ADD,t.visit(d,i?l=>{const f=n(l);l[o]=f,l[u]=f==null?null:r+a*(1+(f-r)/a);}:l=>l[o]=n(l)),t.modifies(i?s:o);},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,i=pe1(e),n=i.step;let r=i.start,a=r+Math.ceil((i.stop-r)/n)*n,s,o;(s=e.anchor)!=null&&(o=s-(r+n*Math.floor((s-r)/n)),r+=o,a+=o);const u=function(d){let l=L2(t(d));return l==null?null:l<r?-Infinity:l>a?Infinity:(l=Math.max(r,Math.min(l,a-n)),r+n*Math.floor(1e-14+(l-r)/n));};return u.start=r,u.stop=i.stop,u.step=n,this.value=f(u,R1(t),e.name||"bin_"+H1(t));}});function Re2(e,t,i){const n=e;let r=t||[],a=i||[],s={},o=0;return{add:u=>a.push(u),remove:u=>s[n(u)]=++o,size:()=>r.length,data:(u,d)=>(o&&(r=r.filter(l=>!s[n(l)]),s={},o=0),d&&u&&r.sort(u),a.length&&(r=u?Bn(u,r,a.sort(u)):r.concat(a),a=[]),r)};}function Y8(e){dt2.call(this,[],e);}Y8.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},Pn(Y8,dt2,{transform(e,t){const i=t.fork(t.ALL),n=Re2(d4,this.value,i.materialize(i.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return i.visit(i.REM,n.remove),this.modified(a),this.value=i.source=n.data(Mt1(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),i;}});function Ce2(e){g4.call(this,null,Kt2,e);}Pn(Ce2,g4);function Kt2(e){return this.value&&!e.modified()?this.value:Mn(e.fields,e.orders);}function Z8(e){dt2.call(this,null,e);}Z8.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Qt2(e,t,i){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break;}return e.match(i);}Pn(Z8,dt2,{transform(e,t){const i=f=>m=>{for(var g=Qt2(o(m),e.case,a)||[],c,p=0,y=g.length;p<y;++p)s.test(c=g[p])||f(c);},n=this._parameterCheck(e,t),r=this._counts,a=this._match,s=this._stop,o=e.field,u=e.as||["text","count"],d=i(f=>r[f]=1+(r[f]||0)),l=i(f=>r[f]-=1);return n?t.visit(t.SOURCE,d):(t.visit(t.ADD,d),t.visit(t.REM,l)),this._finish(t,u);},_parameterCheck(e,t){let i=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),i=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),i=!0),(e.modified("field")||t.modified(e.field.fields))&&(i=!0),i&&(this._counts={}),i;},_finish(e,t){const i=this._counts,n=this._tuples||(this._tuples={}),r=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,u,d;for(o in i)u=n[o],d=i[o]||0,!u&&d?(n[o]=u=V4({}),u[r]=o,u[a]=d,s.add.push(u)):d===0?(u&&s.rem.push(u),i[o]=null,n[o]=null):u[a]!==d&&(u[a]=d,s.mod.push(u));return s.modifies(t);}});function H6(e){dt2.call(this,null,e);}H6.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},Pn(H6,dt2,{transform(e,t){const i=t.fork(t.NO_SOURCE),n=e.as||["a","b"],r=n[0],a=n[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return s?(o&&(i.rem=o),o=t.materialize(t.SOURCE).source,i.add=this.value=Bt2(o,r,a,e.filter||_1)):i.mod=o,i.source=this.value,i.modifies(n);}});function Bt2(e,t,i,n){for(var r=[],a={},s=e.length,o=0,u,d;o<s;++o)for(a[t]=d=e[o],u=0;u<s;++u)a[i]=e[u],n(a)&&(r.push(V4(a)),a={},a[t]=d);return r;}const we2={kde:ye1,mixture:Ae1,normal:J6,lognormal:Ye1,uniform:Le},Gt2="distributions",Ue2="function",Jt2="field";function Ae2(e,t){const i=e[Ue2];g(we2,i)||b("Unknown distribution function: "+i);const n=we2[i]();for(const r in e)r===Jt2?n.data((e.from||t()).map(e[r])):r===Gt2?n[r](e[r].map(a=>Ae2(a,t))):typeof n[r]===Ue2&&n[r](e[r]);return n;}function X10(e){dt2.call(this,null,e);}const Ie2=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Yt2={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Ie2},{name:"weights",type:"number",array:!0}]};X10.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Ie2.concat(Yt2)},{name:"as",type:"string",array:!0,default:["value","density"]}]},Pn(X10,dt2,{transform(e,t){const i=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const n=Ae2(e.distribution,Zt3(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&b("Invalid density method: "+s),!e.extent&&!n.data&&b("Missing density extent parameter."),s=n[s];const o=e.as||["value","density"],u=e.extent||Nn(n.data()),d=Ue1(s,u,r,a).map(l=>{const f={};return f[o[0]]=l[0],f[o[1]]=l[1],V4(f);});this.value&&(i.rem=this.value),this.value=i.add=i.source=d;}return i;}});function Zt3(e){return()=>e.materialize(e.SOURCE).source;}function Fe2(e,t){return e?e.map((i,n)=>t[n]||H1(i)):null;}function ee5(e,t,i){const n=[],r=f=>f(u);let a,s,o,u,d,l;if(t==null)n.push(e.map(i));else for(a={},s=0,o=e.length;s<o;++s)u=e[s],d=t.map(r),l=a[d],l||(a[d]=l=[],l.dims=d,n.push(l)),l.push(i(u));return n;}const ze3="bin";function te5(e){dt2.call(this,null,e);}te5.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:ze3}]};const Ht2=(e,t)=>Wn(Nn(e,t))/30;Pn(te5,dt2,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const i=t.materialize(t.SOURCE).source,n=ee5(t.source,e.groupby,A1),r=e.smooth||!1,a=e.field,s=e.step||Ht2(i,a),o=Mt1((c,p)=>a(c)-a(p)),u=e.as||ze3,d=n.length;let l=Infinity,f=-Infinity,m=0,g;for(;m<d;++m){const c=n[m].sort(o);g=-1;for(const p of me1(c,s,r,a))p<l&&(l=p),p>f&&(f=p),c[++g][u]=p;}return this.value={start:l,stop:f,step:s},t.reflow(!0).modifies(u);}});function Le1(e){g4.call(this,null,Xt2,e),this.modified(!0);}Pn(Le1,g4);function Xt2(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:f(i=>t(i,e),R1(t),H1(t));}function ie3(e){dt2.call(this,[void 0,void 0],e);}ie3.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},Pn(ie3,dt2,{transform(e,t){const i=this.value,n=e.field,r=t.changed()||t.modified(n.fields)||e.modified("field");let a=i[0],s=i[1];if((r||a==null)&&(a=Infinity,s=-Infinity),t.visit(r?t.SOURCE:t.ADD,o=>{const u=L2(n(o));u!=null&&(u<a&&(a=u),u>s&&(s=u));}),!Number.isFinite(a)||!Number.isFinite(s)){let o=H1(n);o&&(o=` for field "${o}"`),t.dataflow.warn(`Infinite extent${o}: [${a}, ${s}]`),a=s=void 0;}this.value=[a,s];}});function ne6(e,t){g4.call(this,e),this.parent=t,this.count=0;}Pn(ne6,g4,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this;},add(e){this.count+=1,this.value.add.push(e);},rem(e){this.count-=1,this.value.rem.push(e);},mod(e){this.value.mod.push(e);},init(e){this.value.init(e,e.NO_SOURCE);},evaluate(){return this.value;}});function P7(e){dt2.call(this,{},e),this._keys=Sn();const t=this._targets=[];t.active=0,t.forEach=i=>{for(let n=0,r=t.active;n<r;++n)i(t[n],n,t);};}Pn(P7,dt2,{activate(e){this._targets[this._targets.active++]=e;},subflow(e,t,i,n){const r=this.value;let a=g(r,e)&&r[e],s,o;return a?a.value.stamp<i.stamp&&(a.init(i),this.activate(a)):(o=n||(o=this._group[e])&&o.tuple,s=i.dataflow,a=new ne6(i.fork(i.NO_SOURCE),this),s.add(a).connect(t(s,e,o)),r[e]=a,this.activate(a)),a;},clean(){const e=this.value;let t=0;for(const i in e)if(e[i].count===0){const n=e[i].detachSubflow;n&&n(),delete e[i],++t;}if(t){const i=this._targets.filter(n=>n&&n.count>0);this.initTargets(i);}},initTargets(e){const t=this._targets,i=t.length,n=e?e.length:0;let r=0;for(;r<n;++r)t[r]=e[r];for(;r<i&&t[r]!=null;++r)t[r]=null;t.active=n;},transform(e,t){const i=t.dataflow,n=e.key,r=e.subflow,a=this._keys,s=e.modified("key"),o=u=>this.subflow(u,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const d=d4(u),l=a.get(d);l!==void 0&&(a.delete(d),o(l).rem(u));}),t.visit(t.ADD,u=>{const d=n(u);a.set(d4(u),d),o(d).add(u);}),s||t.modified(n.fields)?t.visit(t.MOD,u=>{const d=d4(u),l=a.get(d),f=n(u);l===f?o(f).mod(u):(a.set(d,f),o(l).rem(u),o(f).add(u));}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{o(a.get(d4(u))).mod(u);}),s&&t.visit(t.REFLOW,u=>{const d=d4(u),l=a.get(d),f=n(u);l!==f&&(a.set(d,f),o(l).rem(u),o(f).add(u));}),t.clean()?i.runAfter(()=>{this.clean(),a.clean();}):a.empty>i.cleanThreshold&&i.runAfter(a.clean),t;}});function Pe1(e){g4.call(this,null,ei,e);}Pn(Pe1,g4);function ei(e){return this.value&&!e.modified()?this.value:w1(e.name)?p(e.name).map(t=>z1(t)):z1(e.name,e.as);}function ae2(e){dt2.call(this,Sn(),e);}ae2.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},Pn(ae2,dt2,{transform(e,t){const i=t.dataflow,n=this.value,r=t.fork(),a=r.add,s=r.rem,o=r.mod,u=e.expr;let d=!0;t.visit(t.REM,f=>{const m=d4(f);n.has(m)?n.delete(m):s.push(f);}),t.visit(t.ADD,f=>{u(f,e)?a.push(f):n.set(d4(f),1);});function l(f){const m=d4(f),g=u(f,e),c=n.get(m);g&&c?(n.delete(m),a.push(f)):!g&&!c?(n.set(m,1),s.push(f)):d&&g&&!c&&o.push(f);}return t.visit(t.MOD,l),e.modified()&&(d=!1,t.visit(t.REFLOW,l)),n.empty>i.cleanThreshold&&i.runAfter(n.clean),r;}});function re5(e){dt2.call(this,[],e);}re5.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},Pn(re5,dt2,{transform(e,t){const i=t.fork(t.NO_SOURCE),n=e.fields,r=Fe2(n,e.as||[]),a=e.index||null,s=r.length;return i.rem=this.value,t.visit(t.SOURCE,o=>{const u=n.map(c=>c(o)),d=u.reduce((c,p)=>Math.max(c,p.length),0);let l=0,f,m,g;for(;l<d;++l){for(m=Ot1(o),f=0;f<s;++f)m[r[f]]=(g=u[f][l])==null?null:g;a&&(m[a]=l),i.add.push(m);}}),this.value=i.source=i.add,a&&i.modifies(a),i.modifies(r);}});function se2(e){dt2.call(this,[],e);}se2.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},Pn(se2,dt2,{transform(e,t){const i=t.fork(t.NO_SOURCE),n=e.fields,r=n.map(H1),a=e.as||["key","value"],s=a[0],o=a[1],u=n.length;return i.rem=this.value,t.visit(t.SOURCE,d=>{for(let l=0,f;l<u;++l)f=Ot1(d),f[s]=r[l],f[o]=n[l](d),i.add.push(f);}),this.value=i.source=i.add,i.modifies(a);}});function oe4(e){dt2.call(this,null,e);}oe4.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},Pn(oe4,dt2,{transform(e,t){const i=e.expr,n=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(i.fields)||t.modified(n)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(n),t.visit(a,s=>s[n]=i(s,e));}});function Te2(e){dt2.call(this,[],e);}Pn(Te2,dt2,{transform(e,t){const i=t.fork(t.ALL),n=e.generator;let r=this.value,a=e.size-r.length,s,o,u;if(a>0){for(s=[];--a>=0;)s.push(u=V4(n(e))),r.push(u);i.add=i.add.length?i.materialize(i.ADD).add.concat(s):s;}else o=r.slice(0,-a),i.rem=i.rem.length?i.materialize(i.REM).rem.concat(o):o,r=r.slice(-a);return i.source=this.value=r,i;}});const T5={value:"value",median:Xn1,mean:Pn1,min:L4,max:_4},ti=[];function ue4(e){dt2.call(this,[],e);}ue4.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function ii(e){var t=e.method||T5.value,i;if(T5[t]==null)b("Unrecognized imputation method: "+t);else return t===T5.value?(i=e.value!==void 0?e.value:0,()=>i):T5[t];}function ni(e){const t=e.field;return i=>i?t(i):NaN;}Pn(ue4,dt2,{transform(e,t){var i=t.fork(t.ALL),n=ii(e),r=ni(e),a=H1(e.field),s=H1(e.key),o=(e.groupby||[]).map(H1),u=ai(t.source,e.groupby,e.key,e.keyvals),d=[],l=this.value,f=u.domain.length,m,g,c,p,y,x,b,O,R,k;for(y=0,O=u.length;y<O;++y)for(m=u[y],c=m.values,g=NaN,b=0;b<f;++b){if(m[b]!=null)continue;for(p=u.domain[b],k={_impute:!0},x=0,R=c.length;x<R;++x)k[o[x]]=c[x];k[s]=p,k[a]=Number.isNaN(g)?g=n(m,r):g,d.push(V4(k));}return d.length&&(i.add=i.materialize(i.ADD).add.concat(d)),l.length&&(i.rem=i.materialize(i.REM).rem.concat(l)),this.value=d,i;}});function ai(e,t,i,n){var r=x=>x(y),a=[],s=n?n.slice():[],o={},u={},d,l,f,m,g,c,p,y;for(s.forEach((x,b)=>o[x]=b+1),m=0,p=e.length;m<p;++m)y=e[m],c=i(y),g=o[c]||(o[c]=s.push(c)),l=(d=t?t.map(r):ti)+"",(f=u[l])||(f=u[l]=[],a.push(f),f.values=d),f[g-1]=y;return a.domain=s,a;}function le3(e){w7.call(this,e);}le3.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:I10},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},Pn(le3,w7,{transform(e,t){const i=this,n=e.modified();let r;return i.value&&(n||t.modified(i._inputs,!0))?(r=i.value=n?i.init(e):{},t.visit(t.SOURCE,a=>i.add(a))):(r=i.value=i.value||this.init(e),t.visit(t.REM,a=>i.rem(a)),t.visit(t.ADD,a=>i.add(a))),i.changes(),t.visit(t.SOURCE,a=>{J1(a,r[i.cellkey(a)].tuple);}),t.reflow(n).modifies(this._outputs);},changes(){const e=this._adds,t=this._mods;let i,n;for(i=0,n=this._alen;i<n;++i)this.celltuple(e[i]),e[i]=null;for(i=0,n=this._mlen;i<n;++i)this.celltuple(t[i]),t[i]=null;this._alen=this._mlen=0;}});function de2(e){dt2.call(this,null,e);}de2.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},Pn(de2,dt2,{transform(e,t){const i=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const n=t.materialize(t.SOURCE).source,r=ee5(n,e.groupby,e.field),a=(e.groupby||[]).map(H1),s=e.bandwidth,o=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],d=[];let l=e.extent,f=e.steps||e.minsteps||25,m=e.steps||e.maxsteps||200;o!=="pdf"&&o!=="cdf"&&b("Invalid density method: "+o),e.resolve==="shared"&&(l||(l=Nn(n,e.field)),f=m=e.steps||m),r.forEach(g=>{const c=ye1(g,s)[o],p=e.counts?g.length:1,y=l||Nn(g);Ue1(c,y,f,m).forEach(x=>{const b={};for(let O=0;O<a.length;++O)b[a[O]]=g.dims[O];b[u[0]]=x[0],b[u[1]]=x[1]*p,d.push(V4(b));});}),this.value&&(i.rem=this.value),this.value=i.add=i.source=d;}return i;}});function je3(e){g4.call(this,null,ri,e);}Pn(je3,g4);function ri(e){return this.value&&!e.modified()?this.value:qn(e.fields,e.flat);}function $e1(e){dt2.call(this,[],e),this._pending=null;}Pn($e1,dt2,{transform(e,t){const i=t.dataflow;if(this._pending)return fe1(this,t,this._pending);if(si(e))return t.StopPropagation;if(e.values)return fe1(this,t,i.parse(e.values,e.format));if(e.async){const n=i.request(e.url,e.format).then(r=>(this._pending=p(r.data),a=>a.touch(this)));return{async:n};}else return i.request(e.url,e.format).then(n=>fe1(this,t,p(n.data)));}});function si(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"));}function fe1(e,t,i){i.forEach(V4);const n=t.fork(t.NO_FIELDS&t.NO_SOURCE);return n.rem=e.value,e.value=n.source=n.add=i,e._pending=null,n.rem.length&&n.clean(!0),n;}function me2(e){dt2.call(this,{},e);}me2.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},Pn(me2,dt2,{transform(e,t){const i=e.fields,n=e.index,r=e.values,a=e.default==null?null:e.default,s=e.modified(),o=i.length;let u=s?t.SOURCE:t.ADD,d=t,l=e.as,f,m,g;return r?(m=r.length,o>1&&!l&&b('Multi-field lookup requires explicit "as" parameter.'),l&&l.length!==o*m&&b('The "as" parameter has too few output field names.'),l=l||r.map(H1),f=function(c){for(var p=0,y=0,x,b;p<o;++p)if(b=n.get(i[p](c)),b==null)for(x=0;x<m;++x,++y)c[l[y]]=a;else for(x=0;x<m;++x,++y)c[l[y]]=r[x](b);}):(l||b("Missing output field names."),f=function(c){for(var p=0,y;p<o;++p)y=n.get(i[p](c)),c[l[p]]=y??a;}),s?d=t.reflow(!0):(g=i.some(c=>t.modified(c.fields)),u|=g?t.MOD:0),t.visit(u,f),d.modifies(l);}});function Ve1(e){g4.call(this,null,oi,e);}Pn(Ve1,g4);function oi(e){if(this.value&&!e.modified())return this.value;const t=e.extents,i=t.length;let n=Infinity,r=-Infinity,a,s;for(a=0;a<i;++a)s=t[a],s[0]<n&&(n=s[0]),s[1]>r&&(r=s[1]);return[n,r];}function We1(e){g4.call(this,null,ui,e);}Pn(We1,g4);function ui(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,i)=>t.concat(i),[]);}function Ke1(e){dt2.call(this,null,e);}Pn(Ke1,dt2,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS);}});function ce(e){w7.call(this,e);}ce.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:I10,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},Pn(ce,w7,{_transform:w7.prototype.transform,transform(e,t){return this._transform(li(e,t),t);}});function li(e,t){const i=e.field,n=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=R1(i).concat(R1(n)),s=fi(i,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(o=>di(o,i,n,a)),as:s.map(o=>o+""),modified:e.modified.bind(e)};}function di(e,t,i,n){return f(r=>t(r)===e?i(r):NaN,n,e+"");}function fi(e,t,i){const n={},r=[];return i.visit(i.SOURCE,a=>{const s=e(a);n[s]||(n[s]=1,r.push(s));}),r.sort(P1),t?r.slice(0,t):r;}function Qe3(e){P7.call(this,e);}Pn(Qe3,P7,{transform(e,t){const i=e.subflow,n=e.field,r=a=>this.subflow(d4(a),i,t,a);return(e.modified("field")||n&&t.modified(R1(n)))&&b("PreFacet does not support field modification."),this.initTargets(),n?(t.visit(t.MOD,a=>{const s=r(a);n(a).forEach(o=>s.mod(o));}),t.visit(t.ADD,a=>{const s=r(a);n(a).forEach(o=>s.add(V4(o)));}),t.visit(t.REM,a=>{const s=r(a);n(a).forEach(o=>s.rem(o));})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t;}});function he2(e){dt2.call(this,null,e);}he2.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},Pn(he2,dt2,{transform(e,t){const i=t.fork(t.NO_SOURCE),n=e.fields,r=Fe2(e.fields,e.as||[]),a=n?(o,u)=>mi(o,u,n,r):nt2;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,o=>{const u=d4(o);i.rem.push(s[u]),s[u]=null;}),t.visit(t.ADD,o=>{const u=a(o,V4({}));s[d4(o)]=u,i.add.push(u);}),t.visit(t.MOD,o=>{i.mod.push(a(o,s[d4(o)]));}),i;}});function mi(e,t,i,n){for(let r=0,a=i.length;r<a;++r)t[n[r]]=i[r](e);return t;}function Be1(e){dt2.call(this,null,e);}Pn(Be1,dt2,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation;}});function pe2(e){dt2.call(this,null,e);}pe2.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};Pn(pe2,dt2,{transform(e,t){const i=t.fork(t.NO_SOURCE|t.NO_FIELDS),n=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return i.source=this.value,i;const r=t.materialize(t.SOURCE).source,a=ee5(r,e.groupby,e.field),s=(e.groupby||[]).map(H1),o=[],u=e.step||.01,d=e.probs||ie(u/2,1-1e-14,u),l=d.length;return a.forEach(f=>{const m=K7(f,d);for(let g=0;g<l;++g){const c={};for(let p=0;p<s.length;++p)c[s[p]]=f.dims[p];c[n[0]]=d[g],c[n[1]]=m[g],o.push(V4(c));}}),this.value&&(i.rem=this.value),this.value=i.add=i.source=o,i;}});function Ge1(e){dt2.call(this,null,e);}Pn(Ge1,dt2,{transform(e,t){let i,n;return this.value?n=this.value:(i=t=t.addAll(),n=this.value={}),e.derive&&(i=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=d4(r);i.rem.push(n[a]),n[a]=null;}),t.visit(t.ADD,r=>{const a=Ot1(r);n[d4(r)]=a,i.add.push(a);}),t.visit(t.MOD,r=>{const a=n[d4(r)];for(const s in r)a[s]=r[s],i.modifies(s);i.mod.push(a);})),i;}});function ge1(e){dt2.call(this,[],e),this.count=0;}ge1.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},Pn(ge1,dt2,{transform(e,t){const i=t.fork(t.NO_SOURCE),n=e.modified("size"),r=e.size,a=this.value.reduce((l,f)=>(l[d4(f)]=1,l),{});let s=this.value,o=this.count,u=0;function d(l){let f,m;s.length<r?s.push(l):(m=~~((o+1)*N7()),m<s.length&&m>=u&&(f=s[m],a[d4(f)]&&i.rem.push(f),s[m]=l)),++o;}if(t.rem.length&&(t.visit(t.REM,l=>{const f=d4(l);a[f]&&(a[f]=-1,i.rem.push(l)),--o;}),s=s.filter(l=>a[d4(l)]!==-1)),(t.rem.length||n)&&s.length<r&&t.source&&(u=o=s.length,t.visit(t.SOURCE,l=>{a[d4(l)]||d(l);}),u=-1),n&&s.length>r){const l=s.length-r;for(let f=0;f<l;++f)a[d4(s[f])]=-1,i.rem.push(s[f]);s=s.slice(l);}return t.mod.length&&t.visit(t.MOD,l=>{a[d4(l)]&&i.mod.push(l);}),t.add.length&&t.visit(t.ADD,d),(t.add.length||u<0)&&(i.add=s.filter(l=>!a[d4(l)])),this.count=o,this.value=i.source=s,i;}});function ve1(e){dt2.call(this,null,e);}ve1.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},Pn(ve1,dt2,{transform(e,t){if(this.value&&!e.modified())return;const i=t.materialize().fork(t.MOD),n=e.as||"data";return i.rem=this.value?t.rem.concat(this.value):t.rem,this.value=ie(e.start,e.stop,e.step||1).map(r=>{const a={};return a[n]=r,V4(a);}),i.add=t.add.concat(this.value),i;}});function Je1(e){dt2.call(this,null,e),this.modified(!0);}Pn(Je1,dt2,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation;}});function ye2(e){dt2.call(this,null,e);}const Ye2=["unit0","unit1"];ye2.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Z5,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Ye2}]},Pn(ye2,dt2,{transform(e,t){const i=e.field,n=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),s=(r?Q4:X6)(a.unit).offset,o=e.as||Ye2,u=o[0],d=o[1],l=a.step;let f=a.start||Infinity,m=a.stop||-Infinity,g=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(R1(i)))&&(t=t.reflow(!0),g=t.SOURCE,f=Infinity,m=-Infinity),t.visit(g,c=>{const p=i(c);let y,x;p==null?(c[u]=null,n&&(c[d]=null)):(c[u]=y=x=a(p),n&&(c[d]=x=s(y,l)),y<f&&(f=y),x>m&&(m=x));}),a.start=f,a.stop=m,t.modifies(n?o:u);},_floor(e,t){const i=e.timezone==="utc",{units:n,step:r}=e.units?{units:e.units,step:e.step||1}:ue1({extent:e.extent||Nn(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a1=J4(n),s=this.value||{},o=(i?Kt:Bt)(a1,r);return o.unit=a(a1),o.units=a1,o.step=r,o.start=s.start,o.stop=s.stop,this.value=o;}});function Ze(e){dt2.call(this,Sn(),e);}Pn(Ze,dt2,{transform(e,t){const i=t.dataflow,n=e.field,r=this.value,a=o=>r.set(n(o),o);let s=!0;return e.modified("field")||t.modified(n.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,o=>r.delete(n(o))),t.visit(t.ADD,a)):s=!1,this.modified(s),r.empty>i.cleanThreshold&&i.runAfter(r.clean),t.fork();}});function He1(e){dt2.call(this,null,e);}Pn(He1,dt2,{transform(e,t){const i=!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields);i&&(this.value=(e.sort?t.source.slice().sort(Mt1(e.sort)):t.source).map(e.field));}});function hi(e,t,i,n){const r=F8[e](t,i);return{init:r.init||y1,update:function(a,s){s[n]=r.next(a);}};}const F8={row_number:function(){return{next:e=>e.index+1};},rank:function(){let e;return{init:()=>e=1,next:t=>{const i=t.index,n=t.data;return i&&t.compare(n[i-1],n[i])?e=i+1:e;}};},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const i=t.index,n=t.data;return i&&t.compare(n[i-1],n[i])?++e:e;}};},percent_rank:function(){const e=F8.rank(),t=e.next;return{init:e.init,next:i=>(t(i)-1)/(i.data.length-1)};},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const i=t.data,n=t.compare;let r=t.index;if(e<r){for(;r+1<i.length&&!n(i[r],i[r+1]);)++r;e=r;}return(1+e)/i.length;}};},ntile:function(e,t){t=+t,t>0||b("ntile num must be greater than zero.");const i=F8.cume_dist(),n=i.next;return{init:i.init,next:r=>Math.ceil(t*n(r))};},lag:function(e,t){return t=+t||1,{next:i=>{const n=i.index-t;return n>=0?e(i.data[n]):null;}};},lead:function(e,t){return t=+t||1,{next:i=>{const n=i.index+t,r=i.data;return n<r.length?e(r[n]):null;}};},first_value:function(e){return{next:t=>e(t.data[t.i0])};},last_value:function(e){return{next:t=>e(t.data[t.i1-1])};},nth_value:function(e,t){return t=+t,t>0||b("nth_value nth must be greater than zero."),{next:i=>{const n=i.i0+(t-1);return n<i.i1?e(i.data[n]):null;}};},prev_value:function(e){let t;return{init:()=>t=null,next:i=>{const n=e(i.data[i.index]);return n!=null?t=n:t;}};},next_value:function(e){let t,i;return{init:()=>(t=null,i=-1),next:n=>{const r=n.data;return n.index<=i?t:(i=pi(e,r,n.index))<0?(i=r.length,t=null):t=e(r[i]);}};}};function pi(e,t,i){for(let n=t.length;i<n;++i){const r=e(t[i]);if(r!=null)return i;}return-1;}const gi=Object.keys(F8);function Xe2(e){const t=p(e.ops),i=p(e.fields),n=p(e.params),r=p(e.aggregate_params),a=p(e.as),s=this.outputs=[],o=this.windows=[],u={},d={},l=[],f=[];let m=!0;function g1(c){p(R1(c)).forEach(p=>u[p]=1);}g1(e.sort),t.forEach((c,p)=>{const y=i[p],x=n[p],b1=r[p]||null,O=H1(y),R=Se2(c,O,a[p]);if(g1(y),s.push(R),g(F8,c))o.push(hi(c,y,x,R));else{if(y==null&&c!=="count"&&b("Null aggregate field specified."),c==="count"){l.push(R);return;}m=!1;let k=d[O];k||(k=d[O]=[],k.field=y,f.push(k)),k.push(_e1(c,b1,R));}}),(l.length||f.length)&&(this.cell=vi(f,l,m)),this.inputs=Object.keys(u);}const et3=Xe2.prototype;et3.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init();},et3.update=function(e,t){const i=this.cell,n=this.windows,r=e.data,a=n&&n.length;let s;if(i){for(s=e.p0;s<e.i0;++s)i.rem(r[s]);for(s=e.p1;s<e.i1;++s)i.add(r[s]);i.set(t);}for(s=0;s<a;++s)n[s].update(e,t);};function vi(e,t,i){e=e.map(u=>Me2(u,u.field));const n={num:0,agg:null,store:!1,count:t};if(!i)for(var r=e.length,a=n.agg=Array(r),s=0;s<r;++s)a[s]=new e[s](n);if(n.store)var o=n.data=new G9;return n.add=function(u){if(n.num+=1,i)return;o&&o.add(u);for(let d=0;d<r;++d)a[d].add(a[d].get(u),u);},n.rem=function(u){if(n.num-=1,i)return;o&&o.rem(u);for(let d=0;d<r;++d)a[d].rem(a[d].get(u),u);},n.set=function(u){let d,l;for(o&&o.values(),d=0,l=t.length;d<l;++d)u[t[d]]=n.num;if(!i)for(d=0,l=a.length;d<l;++d)a[d].set(u);},n.init=function(){n.num=0,o&&o.reset();for(let u=0;u<r;++u)a[u].init();},n;}function xe1(e){dt2.call(this,{},e),this._mlen=0,this._mods=[];}xe1.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:gi.concat(I10)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},Pn(xe1,dt2,{transform(e,t){this.stamp=t.stamp;const i=e.modified(),n=Mt1(e.sort),r=Q6(e.groupby),a=o=>this.group(r(o));let s=this.state;(!s||i)&&(s=this.state=new Xe2(e)),i||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,o=>a(o).add(o))):(t.visit(t.REM,o=>a(o).remove(o)),t.visit(t.ADD,o=>a(o).add(o)));for(let o=0,u=this._mlen;o<u;++o)yi(this._mods[o],s,n,e);return this._mlen=0,this._mods=[],t.reflow(i).modifies(s.outputs);},group(e){let t=this.value[e];return t||(t=this.value[e]=Re2(d4),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t;}});function yi(e,t,i,n){const r=n.sort,a=r&&!n.ignorePeers,s=n.frame||[null,0],o=e.data(i),u=o.length,d=a?G4(r):null,l={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||On(-1)};t.init();for(let f=0;f<u;++f)xi(l,s,f,u),a&&bi(l,d),t.update(l,o[f]);}function xi(e,t,i,n){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,i-Math.abs(t[0])),e.i1=t[1]==null?n:Math.min(n,i+Math.abs(t[1])+1),e.index=i;}function bi(e,t){const i=e.i0,n=e.i1-1,r=e.compare,a=e.data,s=a.length-1;i>0&&!r(a[i],a[i-1])&&(e.i0=t.left(a,a[i])),n<s&&!r(a[n],a[n+1])&&(e.i1=t.right(a,a[n]));}const mod=function(){return{aggregate:w7,bin:J7,collect:Y8,compare:Ce2,countpattern:Z8,cross:H6,density:X10,dotbin:te5,expression:Le1,extent:ie3,facet:P7,field:Pe1,filter:ae2,flatten:re5,fold:se2,formula:oe4,generate:Te2,impute:ue4,joinaggregate:le3,kde:de2,key:je3,load:$e1,lookup:me2,multiextent:Ve1,multivalues:We1,params:Ke1,pivot:ce,prefacet:Qe3,project:he2,proxy:Be1,quantile:pe2,relay:Ge1,sample:ge1,sequence:ve1,sieve:Je1,subflow:ne6,timeunit:ye2,tupleindex:Ze,values:He1,window:xe1,default:null};}();const c=Math.PI,y6=2*c,u3=1e-6,q9=y6-u3;function E10($){this._+=$[0];for(let t=1,h=$.length;t<h;++t)this._+=arguments[t]+$[t];}function C7($){let t=Math.floor($);if(!(t>=0))throw new Error(`invalid digits: ${$}`);if(t>15)return E10;const h=10**t;return function(i){this._+=i[0];for(let s=1,e=i.length;s<e;++s)this._+=Math.round(arguments[s]*h)/h+i[s];};}class f6{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?E10:C7(t);}moveTo(t,h){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+h}`;}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`);}lineTo(t,h){this._append`L${this._x1=+t},${this._y1=+h}`;}quadraticCurveTo(t,h,i,s){this._append`Q${+t},${+h},${this._x1=+i},${this._y1=+s}`;}bezierCurveTo(t,h,i,s,e,a){this._append`C${+t},${+h},${+i},${+s},${this._x1=+e},${this._y1=+a}`;}arcTo(t,h,i,s,e){if(t=+t,h=+h,i=+i,s=+s,e=+e,e<0)throw new Error(`negative radius: ${e}`);let a=this._x1,d=this._y1,l=i-t,p=s-h,_=a-t,o=d-h,n=_*_+o*o;if(this._x1===null)this._append`M${this._x1=t},${this._y1=h}`;else if(n>1e-6)if(!(Math.abs(o*l-p*_)>1e-6)||!e)this._append`L${this._x1=t},${this._y1=h}`;else{let r=i-a,M=s-d,v=l*l+p*p,m=r*r+M*M,b=Math.sqrt(v),T=Math.sqrt(n),w=e*Math.tan((c-Math.acos((v+n-m)/(2*b*T)))/2),x=w/T,A=w/b;Math.abs(x-1)>1e-6&&this._append`L${t+x*_},${h+x*o}`,this._append`A${e},${e},0,0,${+(o*r>_*M)},${this._x1=t+A*l},${this._y1=h+A*p}`;}}arc(t,h,i,s,e,a){if(t=+t,h=+h,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let d=i*Math.cos(s),l=i*Math.sin(s),p=t+d,_=h+l,o=1^a,n=a?s-e:e-s;if(this._x1===null?this._append`M${p},${_}`:(Math.abs(this._x1-p)>1e-6||Math.abs(this._y1-_)>1e-6)&&this._append`L${p},${_}`,!i)return;n<0&&(n=n%y6+y6),n>q9?this._append`A${i},${i},0,1,${o},${t-d},${h-l}A${i},${i},0,1,${o},${this._x1=p},${this._y1=_}`:n>1e-6&&this._append`A${i},${i},0,${+(n>=c)},${o},${this._x1=t+i*Math.cos(e)},${this._y1=h+i*Math.sin(e)}`;}rect(t,h,i,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+h}h${i=+i}v${+s}h${-i}Z`;}toString(){return this._;}}function L11(){return new f6;}L11.prototype=f6.prototype;function f7(t){return function(){return t;};}const Bt3=Math.abs,S8=Math.atan2,q10=Math.cos,wn3=Math.max,U8=Math.min,R8=Math.sin,x8=Math.sqrt,I11=Math.PI,et4=I11/2,L12=2*I11;function Sn1(t){return t>1?0:t<-1?I11:Math.acos(t);}function Yt3(t){return t>=1?et4:t<=-1?-et4:Math.asin(t);}function K8(t){let n=3;return t.digits=function(i){if(!arguments.length)return n;if(i==null)n=null;else{const e=Math.floor(i);if(!(e>=0))throw new RangeError(`invalid digits: ${i}`);n=e;}return t;},()=>new f6(n);}function Nn1(t){return t.innerRadius;}function En2(t){return t.outerRadius;}function An3(t){return t.startAngle;}function Rn3(t){return t.endAngle;}function Cn2(t){return t&&t.padAngle;}function Pn2(t,n,i,e,r,s,h,o){var l=i-t,a=e-n,u=h-r,_=o-s,c=_*l-u*a;return c*c<1e-12?void 0:(c=(u*(n-s)-_*(t-r))/c,[t+c*l,n+c*a]);}function st2(t,n,i,e,r,s,h){var o=t-i,l=n-e,a=(h?s:-s)/x8(o*o+l*l),u=a*l,_=-a*o,c=t+u,y=n+_,m=i+u,g=e+_,k=(c+m)/2,d=(y+g)/2,w=m-c,b=g-y,T=w*w+b*b,E=r-s,A=c*g-m*y,X=(b<0?-1:1)*x8(wn3(0,E*E*T-A*A)),z=(A*b-w*X)/T,D=(-A*w-b*X)/T,B=(A*b+w*X)/T,C=(-A*w+b*X)/T,P=z-k,p=D-d,v=B-k,H=C-d;return P*P+p*p>v*v+H*H&&(z=B,D=C),{cx:z,cy:D,x01:-u,y01:-_,x11:z*(r/E-1),y11:D*(r/E-1)};}function Mn1(){var t=Nn1,n=En2,i=f7(0),e=null,r=An3,s=Rn3,h=Cn2,o=null,l=K8(a);function a(){var u,_,c=+t.apply(this,arguments),y=+n.apply(this,arguments),m=r.apply(this,arguments)-et4,g=s.apply(this,arguments)-et4,k=Bt3(g-m),d=g>m;if(o||(o=u=l()),y<c&&(_=y,y=c,c=_),!(y>1e-12))o.moveTo(0,0);else if(k>L12-1e-12)o.moveTo(y*q10(m),y*R8(m)),o.arc(0,0,y,m,g,!d),c>1e-12&&(o.moveTo(c*q10(g),c*R8(g)),o.arc(0,0,c,g,m,d));else{var w=m,b=g,T=m,E=g,A=k,X=k,z=h.apply(this,arguments)/2,D=z>1e-12&&(e?+e.apply(this,arguments):x8(c*c+y*y)),B=U8(Bt3(y-c)/2,+i.apply(this,arguments)),C=B,P=B,p,v;if(D>1e-12){var H=Yt3(D/c*R8(z)),$=Yt3(D/y*R8(z));(A-=H*2)>1e-12?(H*=d?1:-1,T+=H,E-=H):(A=0,T=E=(m+g)/2),(X-=$*2)>1e-12?($*=d?1:-1,w+=$,b-=$):(X=0,w=b=(m+g)/2);}var W=y*q10(w),F=y*R8(w),j=c*q10(E),tt=c*R8(E);if(B>1e-12){var nt=y*q10(b),it=y*R8(b),pt=c*q10(T),yt=c*R8(T),Y;if(k<I11)if(Y=Pn2(W,F,pt,yt,nt,it,j,tt)){var dt=W-Y[0],mt=F-Y[1],vt=nt-Y[0],gt=it-Y[1],Mt=1/R8(Sn1((dt*vt+mt*gt)/(x8(dt*dt+mt*mt)*x8(vt*vt+gt*gt)))/2),Ot=x8(Y[0]*Y[0]+Y[1]*Y[1]);C=U8(B,(c-Ot)/(Mt-1)),P=U8(B,(y-Ot)/(Mt+1));}else C=P=0;}X>1e-12?P>1e-12?(p=st2(pt,yt,W,F,y,P,d),v=st2(nt,it,j,tt,y,P,d),o.moveTo(p.cx+p.x01,p.cy+p.y01),P<B?o.arc(p.cx,p.cy,P,S8(p.y01,p.x01),S8(v.y01,v.x01),!d):(o.arc(p.cx,p.cy,P,S8(p.y01,p.x01),S8(p.y11,p.x11),!d),o.arc(0,0,y,S8(p.cy+p.y11,p.cx+p.x11),S8(v.cy+v.y11,v.cx+v.x11),!d),o.arc(v.cx,v.cy,P,S8(v.y11,v.x11),S8(v.y01,v.x01),!d))):(o.moveTo(W,F),o.arc(0,0,y,w,b,!d)):o.moveTo(W,F),!(c>1e-12)||!(A>1e-12)?o.lineTo(j,tt):C>1e-12?(p=st2(j,tt,nt,it,c,-C,d),v=st2(W,F,pt,yt,c,-C,d),o.lineTo(p.cx+p.x01,p.cy+p.y01),C<B?o.arc(p.cx,p.cy,C,S8(p.y01,p.x01),S8(v.y01,v.x01),!d):(o.arc(p.cx,p.cy,C,S8(p.y01,p.x01),S8(p.y11,p.x11),!d),o.arc(0,0,c,S8(p.cy+p.y11,p.cx+p.x11),S8(v.cy+v.y11,v.cx+v.x11),d),o.arc(v.cx,v.cy,C,S8(v.y11,v.x11),S8(v.y01,v.x01),!d))):o.arc(0,0,c,E,T,d);}if(o.closePath(),u)return o=null,u+""||null;}return a.centroid=function(){var u=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,_=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-I11/2;return[q10(_)*u,R8(_)*u];},a.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:f7(+u),a):t;},a.outerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:f7(+u),a):n;},a.cornerRadius=function(u){return arguments.length?(i=typeof u=="function"?u:f7(+u),a):i;},a.padRadius=function(u){return arguments.length?(e=u==null?null:typeof u=="function"?u:f7(+u),a):e;},a.startAngle=function(u){return arguments.length?(r=typeof u=="function"?u:f7(+u),a):r;},a.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:f7(+u),a):s;},a.padAngle=function(u){return arguments.length?(h=typeof u=="function"?u:f7(+u),a):h;},a.context=function(u){return arguments.length?(o=u??null,a):o;},a;}Array.prototype.slice;function ot3(t){return typeof t=="object"&&"length"in t?t:Array.from(t);}function qt2(t){this._context=t;}qt2.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._point=0;},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line;},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n);break;}}};function rt3(t){return new qt2(t);}function xt3(t){return t[0];}function Tt3(t){return t[1];}function bt3(t,n){var i=f7(!0),e=null,r=rt3,s=null,h=K8(o);t=typeof t=="function"?t:t===void 0?xt3:f7(t),n=typeof n=="function"?n:n===void 0?Tt3:f7(n);function o(l){var a,u=(l=ot3(l)).length,_,c=!1,y;for(e==null&&(s=r(y=h())),a=0;a<=u;++a)!(a<u&&i(_=l[a],a,l))===c&&((c=!c)?s.lineStart():s.lineEnd()),c&&s.point(+t(_,a,l),+n(_,a,l));if(y)return s=null,y+""||null;}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:f7(+l),o):t;},o.y=function(l){return arguments.length?(n=typeof l=="function"?l:f7(+l),o):n;},o.defined=function(l){return arguments.length?(i=typeof l=="function"?l:f7(!!l),o):i;},o.curve=function(l){return arguments.length?(r=l,e!=null&&(s=r(e)),o):r;},o.context=function(l){return arguments.length?(l==null?e=s=null:s=r(e=l),o):e;},o;}function Xt3(t,n,i){var e=null,r=f7(!0),s=null,h=rt3,o=null,l=K8(a);t=typeof t=="function"?t:t===void 0?xt3:f7(+t),n=typeof n=="function"?n:n===void 0?f7(0):f7(+n),i=typeof i=="function"?i:i===void 0?Tt3:f7(+i);function a(_){var c,y,m,g=(_=ot3(_)).length,k,d=!1,w,b=new Array(g),T=new Array(g);for(s==null&&(o=h(w=l())),c=0;c<=g;++c){if(!(c<g&&r(k=_[c],c,_))===d)if(d=!d)y=c,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=c-1;m>=y;--m)o.point(b[m],T[m]);o.lineEnd(),o.areaEnd();}d&&(b[c]=+t(k,c,_),T[c]=+n(k,c,_),o.point(e?+e(k,c,_):b[c],i?+i(k,c,_):T[c]));}if(w)return o=null,w+""||null;}function u(){return bt3().defined(r).curve(h).context(s);}return a.x=function(_){return arguments.length?(t=typeof _=="function"?_:f7(+_),e=null,a):t;},a.x0=function(_){return arguments.length?(t=typeof _=="function"?_:f7(+_),a):t;},a.x1=function(_){return arguments.length?(e=_==null?null:typeof _=="function"?_:f7(+_),a):e;},a.y=function(_){return arguments.length?(n=typeof _=="function"?_:f7(+_),i=null,a):n;},a.y0=function(_){return arguments.length?(n=typeof _=="function"?_:f7(+_),a):n;},a.y1=function(_){return arguments.length?(i=_==null?null:typeof _=="function"?_:f7(+_),a):i;},a.lineX0=a.lineY0=function(){return u().x(t).y(n);},a.lineY1=function(){return u().x(t).y(i);},a.lineX1=function(){return u().x(e).y(n);},a.defined=function(_){return arguments.length?(r=typeof _=="function"?_:f7(!!_),a):r;},a.curve=function(_){return arguments.length?(h=_,s!=null&&(o=h(s)),a):h;},a.context=function(_){return arguments.length?(_==null?s=o=null:o=h(s=_),a):s;},a;}kt1(rt3);function Dt1(t){this._curve=t;}Dt1.prototype={areaStart:function(){this._curve.areaStart();},areaEnd:function(){this._curve.areaEnd();},lineStart:function(){this._curve.lineStart();},lineEnd:function(){this._curve.lineEnd();},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t));}};function kt1(t){function n(i){return new Dt1(t(i));}return n._curve=t,n;}x8(3);var at3={draw(t,n){const i=x8(n/I11);t.moveTo(i,0),t.arc(0,0,i,0,L12);}};x8(1/3);const jt3=R8(I11/10)/R8(7*I11/10),Gn1=R8(L12/10)*jt3,Jn1=-q10(L12/10)*jt3;x8(3);x8(3);x8(3)/2,1/x8(12);function $n2(t,n){let i=null,e=K8(r);t=typeof t=="function"?t:f7(t||at3),n=typeof n=="function"?n:f7(n===void 0?64:+n);function r(){let s;if(i||(i=s=e()),t.apply(this,arguments).draw(i,+n.apply(this,arguments)),s)return i=null,s+""||null;}return r.type=function(s){return arguments.length?(t=typeof s=="function"?s:f7(s),r):t;},r.size=function(s){return arguments.length?(n=typeof s=="function"?s:f7(+s),r):n;},r.context=function(s){return arguments.length?(i=s??null,r):i;},r;}function V6(){}function lt3(t,n,i){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+i)/6);}function ut3(t){this._context=t;}ut3.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0;},lineEnd:function(){switch(this._point){case 3:lt3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break;}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line;},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:lt3(this,t,n);break;}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n;}};function jn1(t){return new ut3(t);}function rn3(t){this._context=t;}rn3.prototype={areaStart:V6,areaEnd:V6,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0;},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break;}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break;}}},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:lt3(this,t,n);break;}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n;}};function ti1(t){return new rn3(t);}function hn2(t){this._context=t;}hn2.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0;},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line;},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+t)/6,e=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(i,e):this._context.moveTo(i,e);break;case 3:this._point=4;default:lt3(this,t,n);break;}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n;}};function ni1(t){return new hn2(t);}function an3(t,n){this._basis=new ut3(t),this._beta=n;}an3.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart();},lineEnd:function(){var t=this._x,n=this._y,i=t.length-1;if(i>0)for(var e=t[0],r=n[0],s=t[i]-e,h=n[i]-r,o=-1,l;++o<=i;)l=o/i,this._basis.point(this._beta*t[o]+(1-this._beta)*(e+l*s),this._beta*n[o]+(1-this._beta)*(r+l*h));this._x=this._y=null,this._basis.lineEnd();},point:function(t,n){this._x.push(+t),this._y.push(+n);}};var ii1=function t(n){function i(e){return n===1?new ut3(e):new an3(e,n);}return i.beta=function(e){return t(+e);},i;}(.85);function _t1(t,n,i){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-i),t._x2,t._y2);}function Et1(t,n){this._context=t,this._k=(1-n)/6;}Et1.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0;},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:_t1(this,this._x1,this._y1);break;}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line;},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:_t1(this,t,n);break;}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n;}};var ei1=function t(n){function i(e){return new Et1(e,n);}return i.tension=function(e){return t(+e);},i;}(0);function At3(t,n){this._context=t,this._k=(1-n)/6;}At3.prototype={areaStart:V6,areaEnd:V6,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0;},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break;}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break;}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break;}}},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:_t1(this,t,n);break;}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n;}};var si1=function t(n){function i(e){return new At3(e,n);}return i.tension=function(e){return t(+e);},i;}(0);function Rt3(t,n){this._context=t,this._k=(1-n)/6;}Rt3.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0;},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line;},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_t1(this,t,n);break;}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n;}};var oi1=function t(n){function i(e){return new Rt3(e,n);}return i.tension=function(e){return t(+e);},i;}(0);function Ct2(t,n,i){var e=t._x1,r=t._y1,s=t._x2,h=t._y2;if(t._l01_a>1e-12){var o=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);e=(e*o-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*o-t._y0*t._l12_2a+t._y2*t._l01_2a)/l;}if(t._l23_a>1e-12){var a=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*a+t._x1*t._l23_2a-n*t._l12_2a)/u,h=(h*a+t._y1*t._l23_2a-i*t._l12_2a)/u;}t._context.bezierCurveTo(e,r,s,h,t._x2,t._y2);}function ln3(t,n){this._context=t,this._alpha=n;}ln3.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0;},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break;}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line;},point:function(t,n){if(t=+t,n=+n,this._point){var i=this._x2-t,e=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+e*e,this._alpha));}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:Ct2(this,t,n);break;}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n;}};var ri1=function t(n){function i(e){return n?new ln3(e,n):new Et1(e,0);}return i.alpha=function(e){return t(+e);},i;}(.5);function un3(t,n){this._context=t,this._alpha=n;}un3.prototype={areaStart:V6,areaEnd:V6,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0;},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break;}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break;}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break;}}},point:function(t,n){if(t=+t,n=+n,this._point){var i=this._x2-t,e=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+e*e,this._alpha));}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:Ct2(this,t,n);break;}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n;}};var hi1=function t(n){function i(e){return n?new un3(e,n):new At3(e,0);}return i.alpha=function(e){return t(+e);},i;}(.5);function _n2(t,n){this._context=t,this._alpha=n;}_n2.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0;},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line;},point:function(t,n){if(t=+t,n=+n,this._point){var i=this._x2-t,e=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+e*e,this._alpha));}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ct2(this,t,n);break;}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n;}};var ai1=function t(n){function i(e){return n?new _n2(e,n):new Rt3(e,0);}return i.alpha=function(e){return t(+e);},i;}(.5);function cn2(t){this._context=t;}cn2.prototype={areaStart:V6,areaEnd:V6,lineStart:function(){this._point=0;},lineEnd:function(){this._point&&this._context.closePath();},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n));}};function li1(t){return new cn2(t);}function fn2(t){return t<0?-1:1;}function pn3(t,n,i){var e=t._x1-t._x0,r=n-t._x1,s=(t._y1-t._y0)/(e||r<0&&-0),h=(i-t._y1)/(r||e<0&&-0),o=(s*r+h*e)/(e+r);return(fn2(s)+fn2(h))*Math.min(Math.abs(s),Math.abs(h),.5*Math.abs(o))||0;}function yn1(t,n){var i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-n)/2:n;}function Pt4(t,n,i){var e=t._x0,r=t._y0,s=t._x1,h=t._y1,o=(s-e)/3;t._context.bezierCurveTo(e+o,r+o*n,s-o,h-o*i,s,h);}function ct4(t){this._context=t;}ct4.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0;},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pt4(this,this._t0,yn1(this,this._t0));break;}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line;},point:function(t,n){var i=NaN;if(t=+t,n=+n,t===this._x1&&n===this._y1)return;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,Pt4(this,yn1(this,i=pn3(this,t,n)),i);break;default:Pt4(this,this._t0,i=pn3(this,t,n));break;}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=i;}};function dn2(t){this._context=new mn2(t);}(dn2.prototype=Object.create(ct4.prototype)).point=function(t,n){ct4.prototype.point.call(this,n,t);};function mn2(t){this._context=t;}mn2.prototype={moveTo:function(t,n){this._context.moveTo(n,t);},closePath:function(){this._context.closePath();},lineTo:function(t,n){this._context.lineTo(n,t);},bezierCurveTo:function(t,n,i,e,r,s){this._context.bezierCurveTo(n,t,e,i,s,r);}};function ui1(t){return new ct4(t);}function _i(t){return new dn2(t);}function vn1(t){this._context=t;}vn1.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x=[],this._y=[];},lineEnd:function(){var t=this._x,n=this._y,i=t.length;if(i)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),i===2)this._context.lineTo(t[1],n[1]);else for(var e=gn2(t),r=gn2(n),s=0,h=1;h<i;++s,++h)this._context.bezierCurveTo(e[0][s],r[0][s],e[1][s],r[1][s],t[h],n[h]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null;},point:function(t,n){this._x.push(+t),this._y.push(+n);}};function gn2(t){var n,i=t.length-1,e,r=new Array(i),s=new Array(i),h=new Array(i);for(r[0]=0,s[0]=2,h[0]=t[0]+2*t[1],n=1;n<i-1;++n)r[n]=1,s[n]=4,h[n]=4*t[n]+2*t[n+1];for(r[i-1]=2,s[i-1]=7,h[i-1]=8*t[i-1]+t[i],n=1;n<i;++n)e=r[n]/s[n-1],s[n]-=e,h[n]-=e*h[n-1];for(r[i-1]=h[i-1]/s[i-1],n=i-2;n>=0;--n)r[n]=(h[n]-r[n+1])/s[n];for(s[i-1]=(t[i]+r[i-1])/2,n=0;n<i-1;++n)s[n]=2*t[n+1]-r[n+1];return[r,s];}function ci(t){return new vn1(t);}function ft3(t,n){this._context=t,this._t=n;}ft3.prototype={areaStart:function(){this._line=0;},areaEnd:function(){this._line=NaN;},lineStart:function(){this._x=this._y=NaN,this._point=0;},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line);},point:function(t,n){t=+t,n=+n;switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var i=this._x*(1-this._t)+t*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,n);}break;}}this._x=t,this._y=n;}};function fi1(t){return new ft3(t,.5);}function pi1(t){return new ft3(t,0);}function yi1(t){return new ft3(t,1);}function n1(t,a){if(typeof document!="undefined"&&document.createElement){const e=document.createElement("canvas");if(e&&e.getContext)return e.width=t,e.height=a,e;}return null;}const o2=()=>typeof Image!="undefined"?Image:null;function y7(e,t,r){e.prototype=t.prototype=r,r.constructor=e;}function v8(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r;}function g5(){}var d5=.7,m3=1/d5,$5="\\s*([+-]?\\d+)\\s*",M6="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",c1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ge2=/^#([0-9a-f]{3,8})$/,de3=new RegExp(`^rgb\\(${$5},${$5},${$5}\\)$`),oe5=new RegExp(`^rgb\\(${c1},${c1},${c1}\\)$`),pe3=new RegExp(`^rgba\\(${$5},${$5},${$5},${M6}\\)$`),we3=new RegExp(`^rgba\\(${c1},${c1},${c1},${M6}\\)$`),ye3=new RegExp(`^hsl\\(${M6},${c1},${c1}\\)$`),me3=new RegExp(`^hsla\\(${M6},${c1},${c1},${M6}\\)$`),A9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};y7(g5,R9,{copy(e){return Object.assign(new this.constructor,this,e);},displayable(){return this.rgb().displayable();},hex:L13,formatHex:L13,formatHex8:$e2,formatHsl:Ne3,formatRgb:K9,toString:K9});function L13(){return this.rgb().formatHex();}function $e2(){return this.rgb().formatHex8();}function Ne3(){return J8(this).formatHsl();}function K9(){return this.rgb().formatRgb();}function R9(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ge2.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?X11(t):r===3?new a3(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?k11(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?k11(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=de3.exec(e))?new a3(t[1],t[2],t[3],1):(t=oe5.exec(e))?new a3(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=pe3.exec(e))?k11(t[1],t[2],t[3],t[4]):(t=we3.exec(e))?k11(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ye3.exec(e))?G10(t[1],t[2]/100,t[3]/100,1):(t=me3.exec(e))?G10(t[1],t[2]/100,t[3]/100,t[4]):A9.hasOwnProperty(e)?X11(A9[e]):e==="transparent"?new a3(NaN,NaN,NaN,0):null;}function X11(e){return new a3(e>>16&255,e>>8&255,e&255,1);}function k11(e,t,r,n){return n<=0&&(e=t=r=NaN),new a3(e,t,r,n);}function _10(e){return e instanceof g5||(e=R9(e)),e?(e=e.rgb(),new a3(e.r,e.g,e.b,e.opacity)):new a3;}function Y9(e,t,r,n){return arguments.length===1?_10(e):new a3(e,t,r,n??1);}function a3(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n;}y7(a3,Y9,v8(g5,{brighter(e){return e=e==null?m3:Math.pow(m3,e),new a3(this.r*e,this.g*e,this.b*e,this.opacity);},darker(e){return e=e==null?d5:Math.pow(d5,e),new a3(this.r*e,this.g*e,this.b*e,this.opacity);},rgb(){return this;},clamp(){return new a3(o3(this.r),o3(this.g),o3(this.b),q11(this.opacity));},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1;},hex:Z9,formatHex:Z9,formatHex8:ve2,formatRgb:F9,toString:F9}));function Z9(){return`#${p5(this.r)}${p5(this.g)}${p5(this.b)}`;}function ve2(){return`#${p5(this.r)}${p5(this.g)}${p5(this.b)}${p5((isNaN(this.opacity)?1:this.opacity)*255)}`;}function F9(){const e=q11(this.opacity);return`${e===1?"rgb(":"rgba("}${o3(this.r)}, ${o3(this.g)}, ${o3(this.b)}${e===1?")":`, ${e})`}`;}function q11(e){return isNaN(e)?1:Math.max(0,Math.min(1,e));}function o3(e){return Math.max(0,Math.min(255,Math.round(e)||0));}function p5(e){return e=o3(e),(e<16?"0":"")+e.toString(16);}function G10(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new h5(e,t,r,n);}function J8(e){if(e instanceof h5)return new h5(e.h,e.s,e.l,e.opacity);if(e instanceof g5||(e=R9(e)),!e)return new h5;if(e instanceof h5)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),f=Math.max(t,r,n),s=NaN,x=f-i,b=(f+i)/2;return x?(t===f?s=(r-n)/x+(r<n)*6:r===f?s=(n-t)/x+2:s=(t-r)/x+4,x/=b<.5?f+i:2-f-i,s*=60):x=b>0&&b<1?0:s,new h5(s,x,b,e.opacity);}function Q7(e,t,r,n){return arguments.length===1?J8(e):new h5(e,t,r,n??1);}function h5(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n;}y7(h5,Q7,v8(g5,{brighter(e){return e=e==null?m3:Math.pow(m3,e),new h5(this.h,this.s,this.l*e,this.opacity);},darker(e){return e=e==null?d5:Math.pow(d5,e),new h5(this.h,this.s,this.l*e,this.opacity);},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new a3(I12(e>=240?e-240:e+120,i,n),I12(e,i,n),I12(e<120?e+240:e-120,i,n),this.opacity);},clamp(){return new h5(T6(this.h),E11(this.s),E11(this.l),q11(this.opacity));},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1;},formatHsl(){const e=q11(this.opacity);return`${e===1?"hsl(":"hsla("}${T6(this.h)}, ${E11(this.s)*100}%, ${E11(this.l)*100}%${e===1?")":`, ${e})`}`;}}));function T6(e){return e=(e||0)%360,e<0?e+360:e;}function E11(e){return Math.max(0,Math.min(1,e||0));}function I12(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255;}const U9=Math.PI/180,V7=180/Math.PI,W9=.96422,ee6=1,te6=.82521,re6=4/29,N8=6/29,ne7=3*N8*N8,Me3=N8*N8*N8;function ie4(e){if(e instanceof l4)return new l4(e.l,e.a,e.b,e.opacity);if(e instanceof u4)return he3(e);e instanceof a3||(e=_10(e));var t=D6(e.r),r=D6(e.g),n=D6(e.b),i=z11((.2225045*t+.7168786*r+.0606169*n)/1),f,s;return t===r&&r===n?f=s=i:(f=z11((.4360747*t+.3850649*r+.1430804*n)/W9),s=z11((.0139322*t+.0971045*r+.7141733*n)/te6)),new l4(116*i-16,500*(f-i),200*(i-s),e.opacity);}function ae3(e,t,r,n){return arguments.length===1?ie4(e):new l4(e,t,r,n??1);}function l4(e,t,r,n){this.l=+e,this.a=+t,this.b=+r,this.opacity=+n;}y7(l4,ae3,v8(g5,{brighter(e){return new l4(this.l+18*(e??1),this.a,this.b,this.opacity);},darker(e){return new l4(this.l-18*(e??1),this.a,this.b,this.opacity);},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,r=isNaN(this.b)?e:e-this.b/200;return t=W9*j11(t),e=ee6*j11(e),r=te6*j11(r),new a3(B10(3.1338561*t-1.6168667*e-.4906146*r),B10(-.9787684*t+1.9161415*e+.033454*r),B10(.0719453*t-.2289914*e+1.4052427*r),this.opacity);}}));function z11(e){return e>Me3?Math.pow(e,1/3):e/ne7+re6;}function j11(e){return e>N8?e*e*e:ne7*(e-re6);}function B10(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055);}function D6(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);}function fe2(e){if(e instanceof u4)return new u4(e.h,e.c,e.l,e.opacity);if(e instanceof l4||(e=ie4(e)),e.a===0&&e.b===0)return new u4(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*V7;return new u4(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity);}function se3(e,t,r,n){return arguments.length===1?fe2(e):new u4(e,t,r,n??1);}function u4(e,t,r,n){this.h=+e,this.c=+t,this.l=+r,this.opacity=+n;}function he3(e){if(isNaN(e.h))return new l4(e.l,0,0,e.opacity);var t=e.h*U9;return new l4(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity);}y7(u4,se3,v8(g5,{brighter(e){return new u4(this.h,this.c,this.l+18*(e??1),this.opacity);},darker(e){return new u4(this.h,this.c,this.l-18*(e??1),this.opacity);},rgb(){return he3(this).rgb();}}));var le4=-.14861,O8=1.78277,S9=-.29227,P8=-.90649,H7=1.97294,xe2=H7*P8,ce1=H7*O8,ue5=O8*S9-P8*le4;function ke2(e){if(e instanceof w8)return new w8(e.h,e.s,e.l,e.opacity);e instanceof a3||(e=_10(e));var t=e.r/255,r=e.g/255,n=e.b/255,i=(ue5*n+xe2*t-ce1*r)/(ue5+xe2-ce1),f=n-i,s=(H7*(r-i)-S9*f)/P8,x=Math.sqrt(s*s+f*f)/(H7*i*(1-i)),b=x?Math.atan2(s,f)*V7-120:NaN;return new w8(b<0?b+360:b,x,i,e.opacity);}function be2(e,t,r,n){return arguments.length===1?ke2(e):new w8(e,t,r,n??1);}function w8(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n;}y7(w8,be2,v8(g5,{brighter(e){return e=e==null?m3:Math.pow(m3,e),new w8(this.h,this.s,this.l*e,this.opacity);},darker(e){return e=e==null?d5:Math.pow(d5,e),new w8(this.h,this.s,this.l*e,this.opacity);},rgb(){var e=isNaN(this.h)?0:(this.h+120)*U9,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),n=Math.cos(e),i=Math.sin(e);return new a3(255*(t+r*(le4*n+O8*i)),255*(t+r*(S9*n+P8*i)),255*(t+r*(H7*n)),this.opacity);}}));function _11(r,n,e,i,t){var u=r*r,o=u*r;return((1-3*r+3*u-o)*n+(4-6*u+3*o)*e+(1+3*r+3*u-3*o)*i+o*t)/6;}function F10(r){var n=r.length-1;return function(e){var i=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),t=r[i],u=r[i+1],o=i>0?r[i-1]:2*t-u,a=i<n-1?r[i+2]:2*u-t;return _11((e-i/n)*n,o,t,u,a);};}function G11(r){var n=r.length;return function(e){var i=Math.floor(((e%=1)<0?++e:e)*n),t=r[(i+n-1)%n],u=r[i%n],o=r[(i+1)%n],a=r[(i+2)%n];return _11((e-i/n)*n,t,u,o,a);};}var A10=r=>()=>r;function Q8(r,n){return function(e){return r+e*n;};}function cn3(r,n,e){return r=Math.pow(r,e),n=Math.pow(n,e)-r,e=1/e,function(i){return Math.pow(r+i*n,e);};}function N9(r,n){var e=n-r;return e?Q8(r,e>180||e<-180?e-360*Math.round(e/360):e):A10(isNaN(r)?n:r);}function ln4(r){return(r=+r)===1?p6:function(n,e){return e-n?cn3(n,e,r):A10(isNaN(n)?e:n);};}function p6(r,n){var e=n-r;return e?Q8(r,e):A10(isNaN(r)?n:r);}var q12=function r(n){var e=ln4(n);function i(t,u){var o=e((t=Y9(t)).r,(u=Y9(u)).r),a=e(t.g,u.g),s=e(t.b,u.b),l=p6(t.opacity,u.opacity);return function(c){return t.r=o(c),t.g=a(c),t.b=s(c),t.opacity=l(c),t+"";};}return i.gamma=r,i;}(1);function K10(r){return function(n){var e=n.length,i=new Array(e),t=new Array(e),u=new Array(e),o,a;for(o=0;o<e;++o)a=Y9(n[o]),i[o]=a.r||0,t[o]=a.g||0,u[o]=a.b||0;return i=r(i),t=r(t),u=r(u),a.opacity=1,function(s){return a.r=i(s),a.g=t(s),a.b=u(s),a+"";};};}var fn3=K10(F10),sn2=K10(G11);function B11(r,n){n||(n=[]);var e=r?Math.min(n.length,r.length):0,i=n.slice(),t;return function(u){for(t=0;t<e;++t)i[t]=r[t]*(1-u)+n[t]*u;return i;};}function W10(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView);}function hn3(r,n){return(W10(n)?B11:Z10)(r,n);}function Z10(r,n){var e=n?n.length:0,i=r?Math.min(e,r.length):0,t=new Array(i),u=new Array(e),o;for(o=0;o<i;++o)t[o]=d6(r[o],n[o]);for(;o<e;++o)u[o]=n[o];return function(a){for(o=0;o<i;++o)u[o]=t[o](a);return u;};}function J9(r,n){var e=new Date;return r=+r,n=+n,function(i){return e.setTime(r*(1-i)+n*i),e;};}function M7(r,n){return r=+r,n=+n,function(e){return r*(1-e)+n*e;};}function U10(r,n){var e={},i={},t;(r===null||typeof r!="object")&&(r={}),(n===null||typeof n!="object")&&(n={});for(t in n)t in r?e[t]=d6(r[t],n[t]):i[t]=n[t];return function(u){for(t in e)i[t]=e[t](u);return i;};}var C8=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,R10=new RegExp(C8.source,"g");function pn4(r){return function(){return r;};}function gn3(r){return function(n){return r(n)+"";};}function P9(r,n){var e=C8.lastIndex=R10.lastIndex=0,i,t,u,o=-1,a=[],s=[];for(r=r+"",n=n+"";(i=C8.exec(r))&&(t=R10.exec(n));)(u=t.index)>e&&(u=n.slice(e,u),a[o]?a[o]+=u:a[++o]=u),(i=i[0])===(t=t[0])?a[o]?a[o]+=t:a[++o]=t:(a[++o]=null,s.push({i:o,x:M7(i,t)})),e=R10.lastIndex;return e<n.length&&(u=n.slice(e),a[o]?a[o]+=u:a[++o]=u),a.length<2?s[0]?gn3(s[0].x):pn4(n):(n=s.length,function(l){for(var c=0,f;c<n;++c)a[(f=s[c]).i]=f.x(l);return a.join("");});}function d6(r,n){var e=typeof n,i;return n==null||e==="boolean"?A10(n):(e==="number"?M7:e==="string"?(i=R9(n))?(n=i,q12):P9:n instanceof R9?q12:n instanceof Date?J9:W10(n)?B11:Array.isArray(n)?Z10:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?U10:M7)(r,n);}function vn2(r){var n=r.length;return function(e){return r[Math.max(0,Math.min(n-1,Math.floor(e*n)))];};}function mn3(r,n){var e=N9(+r,+n);return function(i){var t=e(i);return t-360*Math.floor(t/360);};}function Mn2(r,n){return r=+r,n=+n,function(e){return Math.round(r*(1-e)+n*e);};}var b6=180/Math.PI,z12={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function nn3(r,n,e,i,t,u){var o,a,s;return(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o),(s=r*e+n*i)&&(e-=r*s,i-=n*s),(a=Math.sqrt(e*e+i*i))&&(e/=a,i/=a,s/=a),r*i<n*e&&(r=-r,n=-n,s=-s,o=-o),{translateX:t,translateY:u,rotate:Math.atan2(n,r)*b6,skewX:Math.atan(s)*b6,scaleX:o,scaleY:a};}var S10;function wn4(r){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(r+"");return n.isIdentity?z12:nn3(n.a,n.b,n.c,n.d,n.e,n.f);}function yn2(r){return r==null?z12:(S10||(S10=document.createElementNS("http://www.w3.org/2000/svg","g")),S10.setAttribute("transform",r),(r=S10.transform.baseVal.consolidate())?(r=r.matrix,nn3(r.a,r.b,r.c,r.d,r.e,r.f)):z12);}function rn4(r,n,e,i){function t(l){return l.length?l.pop()+" ":"";}function u(l,c,f,h,g,m){if(l!==f||c!==h){var v=g.push("translate(",null,n,null,e);m.push({i:v-4,x:M7(l,f)},{i:v-2,x:M7(c,h)});}else(f||h)&&g.push("translate("+f+n+h+e);}function o(l,c,f,h){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),h.push({i:f.push(t(f)+"rotate(",null,i)-2,x:M7(l,c)})):c&&f.push(t(f)+"rotate("+c+i);}function a(l,c,f,h){l!==c?h.push({i:f.push(t(f)+"skewX(",null,i)-2,x:M7(l,c)}):c&&f.push(t(f)+"skewX("+c+i);}function s(l,c,f,h,g,m){if(l!==f||c!==h){var v=g.push(t(g)+"scale(",null,",",null,")");m.push({i:v-4,x:M7(l,f)},{i:v-2,x:M7(c,h)});}else(f!==1||h!==1)&&g.push(t(g)+"scale("+f+","+h+")");}return function(l,c){var f=[],h=[];return l=r(l),c=r(c),u(l.translateX,l.translateY,c.translateX,c.translateY,f,h),o(l.rotate,c.rotate,f,h),a(l.skewX,c.skewX,f,h),s(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,h),l=c=null,function(g){for(var m=-1,v=h.length,w;++m<v;)f[(w=h[m]).i]=w.x(g);return f.join("");};};}var xn3=rn4(wn4,"px, ","px)","deg)"),Xn2=rn4(yn2,", ",")",")"),An4=1e-12;function en3(r){return((r=Math.exp(r))+1/r)/2;}function Nn2(r){return((r=Math.exp(r))-1/r)/2;}function dn3(r){return((r=Math.exp(2*r))-1)/(r+1);}var Sn2=function r(n,e,i){function t(u,o){var a=u[0],s=u[1],l=u[2],c=o[0],f=o[1],h=o[2],g=c-a,m=f-s,v=g*g+m*m,w,y;if(v<An4)y=Math.log(h/l)/n,w=function(X){return[a+X*g,s+X*m,l*Math.exp(n*X*y)];};else{var k=Math.sqrt(v),$=(h*h-l*l+i*v)/(2*l*e*k),Y=(h*h-l*l-i*v)/(2*h*e*k),x=Math.log(Math.sqrt($*$+1)-$),an=Math.log(Math.sqrt(Y*Y+1)-Y);y=(an-x)/n,w=function(X){var D=X*y,L=en3(x),I=l/(e*k)*(L*dn3(n*D+x)-Nn2(x));return[a+I*g,s+I*m,l*L/en3(n*D+x)];};}return w.duration=y*1e3*n/Math.SQRT2,w;}return t.rho=function(u){var o=Math.max(.001,+u),a=o*o,s=a*a;return r(o,a,s);},t;}(Math.SQRT2,2,4);function tn3(r){return function(n,e){var i=r((n=Q7(n)).h,(e=Q7(e)).h),t=p6(n.s,e.s),u=p6(n.l,e.l),o=p6(n.opacity,e.opacity);return function(a){return n.h=i(a),n.s=t(a),n.l=u(a),n.opacity=o(a),n+"";};};}var kn1=tn3(N9),$n3=tn3(p6);function Yn(r,n){var e=p6((r=ae3(r)).l,(n=ae3(n)).l),i=p6(r.a,n.a),t=p6(r.b,n.b),u=p6(r.opacity,n.opacity);return function(o){return r.l=e(o),r.a=i(o),r.b=t(o),r.opacity=u(o),r+"";};}function on3(r){return function(n,e){var i=r((n=se3(n)).h,(e=se3(e)).h),t=p6(n.c,e.c),u=p6(n.l,e.l),o=p6(n.opacity,e.opacity);return function(a){return n.h=i(a),n.c=t(a),n.l=u(a),n.opacity=o(a),n+"";};};}var jn2=on3(N9),qn2=on3(p6);function un4(r){return function n(e){e=+e;function i(t,u){var o=r((t=be2(t)).h,(u=be2(u)).h),a=p6(t.s,u.s),s=p6(t.l,u.l),l=p6(t.opacity,u.opacity);return function(c){return t.h=o(c),t.s=a(c),t.l=s(Math.pow(c,e)),t.opacity=l(c),t+"";};}return i.gamma=n,i;}(1);}var Bn2=un4(N9),Cn3=un4(p6);function Rn4(r,n){n===void 0&&(n=r,r=d6);for(var e=0,i=n.length-1,t=n[0],u=new Array(i<0?0:i);e<i;)u[e]=r(t,t=n[++e]);return function(o){var a=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return u[a](o-a);};}function zn1(r,n){for(var e=new Array(n),i=0;i<n;++i)e[i]=r(i/(n-1));return e;}const mod1=function(){return{interpolate:d6,interpolateArray:hn3,interpolateBasis:F10,interpolateBasisClosed:G11,interpolateCubehelix:Bn2,interpolateCubehelixLong:Cn3,interpolateDate:J9,interpolateDiscrete:vn2,interpolateHcl:jn2,interpolateHclLong:qn2,interpolateHsl:kn1,interpolateHslLong:$n3,interpolateHue:mn3,interpolateLab:Yn,interpolateNumber:M7,interpolateNumberArray:B11,interpolateObject:U10,interpolateRgb:q12,interpolateRgbBasis:fn3,interpolateRgbBasisClosed:sn2,interpolateRound:Mn2,interpolateString:P9,interpolateTransformCss:xn3,interpolateTransformSvg:Xn2,interpolateZoom:Sn2,piecewise:Rn4,quantize:zn1,default:null};}();function M8(n,r){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(r).domain(n);break;}return this;}function N10(n,r){switch(arguments.length){case 0:break;case 1:{typeof n=="function"?this.interpolator(n):this.range(n);break;}default:{this.domain(n),typeof r=="function"?this.interpolator(r):this.range(r);break;}}return this;}const F11=Symbol("implicit");function T7(){var n=new f1,r=[],u=[],t=F11;function a(e){let i=n.get(e);if(i===void 0){if(t!==F11)return t;n.set(e,i=r.push(e)-1);}return u[i%u.length];}return a.domain=function(e){if(!arguments.length)return r.slice();r=[],n=new f1;for(const i of e){if(n.has(i))continue;n.set(i,r.push(i)-1);}return a;},a.range=function(e){return arguments.length?(u=Array.from(e),a):u.slice();},a.unknown=function(e){return arguments.length?(t=e,a):t;},a.copy=function(){return T7(r,u).unknown(t);},M8.apply(a,arguments),a;}function at4(n){return function(){return n;};}function R11(n){return+n;}var Z11=[0,1];function y8(n){return n;}function $6(n,r){return(r-=n=+n)?function(u){return(u-n)/r;}:at4(isNaN(r)?NaN:.5);}function it3(n,r){var u;return n>r&&(u=n,n=r,r=u),function(t){return Math.max(n,Math.min(r,t));};}function ot4(n,r,u){var t=n[0],a=n[1],e=r[0],i=r[1];return a<t?(t=$6(a,t),e=u(i,e)):(t=$6(t,a),e=u(e,i)),function(c){return e(t(c));};}function lt4(n,r,u){var t=Math.min(n.length,r.length)-1,a=new Array(t),e=new Array(t),i=-1;for(n[t]<n[0]&&(n=n.slice().reverse(),r=r.slice().reverse());++i<t;)a[i]=$6(n[i],n[i+1]),e[i]=u(r[i],r[i+1]);return function(c){var s=U2(n,c,1,t)-1;return e[s](a[s](c));};}function A11(n,r){return r.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown());}function L14(){var n=Z11,r=Z11,u=d6,t,a,e,i=y8,c,s,o;function g(){var l=Math.min(n.length,r.length);return i!==y8&&(i=it3(n[0],n[l-1])),c=l>2?lt4:ot4,s=o=null,f;}function f(l){return l==null||isNaN(l=+l)?e:(s||(s=c(n.map(t),r,u)))(t(i(l)));}return f.invert=function(l){return i(a((o||(o=c(r,n.map(t),M7)))(l)));},f.domain=function(l){return arguments.length?(n=Array.from(l,R11),g()):n.slice();},f.range=function(l){return arguments.length?(r=Array.from(l),g()):r.slice();},f.rangeRound=function(l){return r=Array.from(l),u=Mn2,g();},f.clamp=function(l){return arguments.length?(i=l?!0:y8,g()):i!==y8;},f.interpolate=function(l){return arguments.length?(u=l,g()):u;},f.unknown=function(l){return arguments.length?(e=l,f):e;},function(l,p){return t=l,a=p,g();};}function Y10(){return L14()(y8,y8);}function nn4(n,r,u,t){var a=kn(n,r,u),e;t=E5(t??",f");switch(t.type){case"s":{var i=Math.max(Math.abs(n),Math.abs(r));return t.precision==null&&!isNaN(e=on1(a,i))&&(t.precision=e),B3(t,i);}case"":case"e":case"g":case"p":case"r":{t.precision==null&&!isNaN(e=an1(a,Math.max(Math.abs(n),Math.abs(r))))&&(t.precision=e-(t.type==="e"));break;}case"f":case"%":{t.precision==null&&!isNaN(e=en1(a))&&(t.precision=e-(t.type==="%")*2);break;}}return q4(t);}function q13(n){var r=n.domain;return n.ticks=function(u){var t=r();return ln1(t[0],t[t.length-1],u??10);},n.tickFormat=function(u,t){var a=r();return nn4(a[0],a[a.length-1],u??10,t);},n.nice=function(u){u==null&&(u=10);var t=r(),a=0,e=t.length-1,i=t[a],c=t[e],s,o,g=10;for(c<i&&(o=i,i=c,c=o,o=a,a=e,e=o);g-- >0;){if(o=E4(i,c,u),o===s)return t[a]=i,t[e]=c,r(t);if(o>0)i=Math.floor(i/o)*o,c=Math.ceil(c/o)*o;else if(o<0)i=Math.ceil(i*o)/o,c=Math.floor(c*o)/o;else break;s=o;}return n;},n;}function tn4(){var n=Y10();return n.copy=function(){return A11(n,tn4());},M8.apply(n,arguments),q13(n);}function rn5(n){var r;function u(t){return t==null||isNaN(t=+t)?r:t;}return u.invert=u,u.domain=u.range=function(t){return arguments.length?(n=Array.from(t,R11),u):n.slice();},u.unknown=function(t){return arguments.length?(r=t,u):r;},u.copy=function(){return rn5(n).unknown(r);},n=arguments.length?Array.from(n,R11):[0,1],q13(u);}function en4(n,r){n=n.slice();var u=0,t=n.length-1,a=n[u],e=n[t],i;return e<a&&(i=u,u=t,t=i,i=a,a=e,e=i),n[u]=r.floor(a),n[t]=r.ceil(e),n;}function un5(n){return Math.log(n);}function an4(n){return Math.exp(n);}function ct5(n){return-Math.log(-n);}function st3(n){return-Math.exp(-n);}function ft4(n){return isFinite(n)?+("1e"+n):n<0?0:n;}function gt1(n){return n===10?ft4:n===Math.E?Math.exp:r=>Math.pow(n,r);}function mt1(n){return n===Math.E?Math.log:n===10&&Math.log10||n===2&&Math.log2||(n=Math.log(n),r=>Math.log(r)/n);}function on4(n){return(r,u)=>-n(-r,u);}function B12(n){const r=n(un5,an4),u=r.domain;let t=10,a,e;function i(){return a=mt1(t),e=gt1(t),u()[0]<0?(a=on4(a),e=on4(e),n(ct5,st3)):n(un5,an4),r;}return r.base=function(c){return arguments.length?(t=+c,i()):t;},r.domain=function(c){return arguments.length?(u(c),i()):u();},r.ticks=c=>{const s=u();let o=s[0],g=s[s.length-1];const f=g<o;f&&([o,g]=[g,o]);let l=a(o),p=a(g),d,m;const w=c==null?10:+c;let v=[];if(!(t%1)&&p-l<w){if(l=Math.floor(l),p=Math.ceil(p),o>0)for(;l<=p;++l)for(d=1;d<t;++d){if(m=l<0?d/e(-l):d*e(l),m<o)continue;if(m>g)break;v.push(m);}else for(;l<=p;++l)for(d=t-1;d>=1;--d){if(m=l>0?d/e(-l):d*e(l),m<o)continue;if(m>g)break;v.push(m);}v.length*2<w&&(v=ln1(o,g,w));}else v=ln1(l,p,Math.min(p-l,w)).map(e);return f?v.reverse():v;},r.tickFormat=(c,s)=>{if(c==null&&(c=10),s==null&&(s=t===10?"s":","),typeof s!="function"&&(!(t%1)&&(s=E5(s)).precision==null&&(s.trim=!0),s=q4(s)),c===Infinity)return s;const o=Math.max(1,t*c/r.ticks().length);return g=>{let f=g/e(Math.round(a(g)));return f*t<t-.5&&(f*=t),f<=o?s(g):"";};},r.nice=()=>u(en4(u(),{floor:c=>e(Math.floor(a(c))),ceil:c=>e(Math.ceil(a(c)))})),r;}function ln5(){const n=B12(L14()).domain([1,10]);return n.copy=()=>A11(n,ln5()).base(n.base()),M8.apply(n,arguments),n;}function cn4(n){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/n));};}function sn3(n){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*n;};}function Q9(n){var r=1,u=n(cn4(r),sn3(r));return u.constant=function(t){return arguments.length?n(cn4(r=+t),sn3(r)):r;},q13(u);}function fn4(){var n=Q9(L14());return n.copy=function(){return A11(n,fn4()).constant(n.constant());},M8.apply(n,arguments);}function gn4(n){return function(r){return r<0?-Math.pow(-r,n):Math.pow(r,n);};}function pt2(n){return n<0?-Math.sqrt(-n):Math.sqrt(n);}function ht2(n){return n<0?-n*n:n*n;}function H8(n){var r=n(y8,y8),u=1;function t(){return u===1?n(y8,y8):u===.5?n(pt2,ht2):n(gn4(u),gn4(1/u));}return r.exponent=function(a){return arguments.length?(u=+a,t()):u;},q13(r);}function U11(){var n=H8(L14());return n.copy=function(){return A11(n,U11()).exponent(n.exponent());},M8.apply(n,arguments),n;}function dt3(){return U11.apply(null,arguments).exponent(.5);}function hn4(){var n=[],r=[],u=[],t;function a(){var i=0,c=Math.max(1,r.length);for(u=new Array(c-1);++i<c;)u[i-1]=Hn1(n,i/c);return e;}function e(i){return i==null||isNaN(i=+i)?t:r[U2(u,i)];}return e.invertExtent=function(i){var c=r.indexOf(i);return c<0?[NaN,NaN]:[c>0?u[c-1]:n[0],c<u.length?u[c]:n[n.length-1]];},e.domain=function(i){if(!arguments.length)return n.slice();n=[];for(let c of i)c!=null&&!isNaN(c=+c)&&n.push(c);return n.sort(a1),a();},e.range=function(i){return arguments.length?(r=Array.from(i),a()):r.slice();},e.unknown=function(i){return arguments.length?(t=i,e):t;},e.quantiles=function(){return u.slice();},e.copy=function(){return hn4().domain(n).range(r).unknown(t);},M8.apply(e,arguments);}function dn4(){var n=0,r=1,u=1,t=[.5],a=[0,1],e;function i(s){return s!=null&&s<=s?a[U2(t,s,0,u)]:e;}function c(){var s=-1;for(t=new Array(u);++s<u;)t[s]=((s+1)*r-(s-u)*n)/(u+1);return i;}return i.domain=function(s){return arguments.length?([n,r]=s,n=+n,r=+r,c()):[n,r];},i.range=function(s){return arguments.length?(u=(a=Array.from(s)).length-1,c()):a.slice();},i.invertExtent=function(s){var o=a.indexOf(s);return o<0?[NaN,NaN]:o<1?[n,t[0]]:o>=u?[t[u-1],r]:[t[o-1],t[o]];},i.unknown=function(s){return arguments.length&&(e=s),i;},i.thresholds=function(){return t.slice();},i.copy=function(){return dn4().domain([n,r]).range(a).unknown(e);},M8.apply(q13(i),arguments);}function yn3(){var n=[.5],r=[0,1],u,t=1;function a(e){return e!=null&&e<=e?r[U2(n,e,0,t)]:u;}return a.domain=function(e){return arguments.length?(n=Array.from(e),t=Math.min(n.length,r.length-1),a):n.slice();},a.range=function(e){return arguments.length?(r=Array.from(e),t=Math.min(n.length,r.length-1),a):r.slice();},a.invertExtent=function(e){var i=r.indexOf(e);return[n[i-1],n[i]];},a.unknown=function(e){return arguments.length?(u=e,a):u;},a.copy=function(){return yn3().domain(n).range(r).unknown(u);},M8.apply(a,arguments);}function vt1(n){return new Date(n);}function Mt2(n){return n instanceof Date?+n:+new Date(+n);}function C9(n,r,u,t,a,e,i,c,s,o){var g=Y10(),f=g.invert,l=g.domain,p=o(".%L"),d=o(":%S"),m=o("%I:%M"),w=o("%I %p"),v=o("%a %d"),D=o("%b %d"),I=o("%B"),bn=o("%Y");function An(h){return(s(h)<h?p:c(h)<h?d:i(h)<h?m:e(h)<h?w:t(h)<h?a(h)<h?v:D:u(h)<h?I:bn)(h);}return g.invert=function(h){return new Date(f(h));},g.domain=function(h){return arguments.length?l(Array.from(h,Mt2)):l().map(vt1);},g.ticks=function(h){var k=l();return n(k[0],k[k.length-1],h??10);},g.tickFormat=function(h,k){return k==null?An:o(k);},g.nice=function(h){var k=l();return(!h||typeof h.range!="function")&&(h=r(k[0],k[k.length-1],h??10)),h?l(en4(k,h)):g;},g.copy=function(){return A11(g,C9(n,r,u,t,a,e,i,c,s,o));},g;}function wt1(){return M8.apply(C9(je,ke,w3,A4,v4,Z4,j5,b3,h2,re2).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments);}function kt2(){return M8.apply(C9(be,Qe,W5,B4,S4,L6,k4,Q3,h2,I6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments);}function O9(){var n=0,r=1,u,t,a,e,i=y8,c=!1,s;function o(f){return f==null||isNaN(f=+f)?s:i(a===0?.5:(f=(e(f)-u)*a,c?Math.max(0,Math.min(1,f)):f));}o.domain=function(f){return arguments.length?([n,r]=f,u=e(n=+n),t=e(r=+r),a=u===t?0:1/(t-u),o):[n,r];},o.clamp=function(f){return arguments.length?(c=!!f,o):c;},o.interpolator=function(f){return arguments.length?(i=f,o):i;};function g(f){return function(l){var p,d;return arguments.length?([p,d]=l,i=f(p,d),o):[i(0),i(1)];};}return o.range=g(d6),o.rangeRound=g(Mn2),o.unknown=function(f){return arguments.length?(s=f,o):s;},function(f){return e=f,u=f(n),t=f(r),a=u===t?0:1/(t-u),o;};}function S11(n,r){return r.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown());}function vn3(){var n=q13(O9()(y8));return n.copy=function(){return S11(n,vn3());},N10.apply(n,arguments);}function Mn3(){var n=B12(O9()).domain([1,10]);return n.copy=function(){return S11(n,Mn3()).base(n.base());},N10.apply(n,arguments);}function wn5(){var n=Q9(O9());return n.copy=function(){return S11(n,wn5()).constant(n.constant());},N10.apply(n,arguments);}function X12(){var n=H8(O9());return n.copy=function(){return S11(n,X12()).exponent(n.exponent());},N10.apply(n,arguments);}function Nt2(){return X12.apply(null,arguments).exponent(.5);}function P10(){var n=0,r=.5,u=1,t=1,a,e,i,c,s,o=y8,g,f=!1,l;function p(m){return isNaN(m=+m)?l:(m=.5+((m=+g(m))-e)*(t*m<t*e?c:s),o(f?Math.max(0,Math.min(1,m)):m));}p.domain=function(m){return arguments.length?([n,r,u]=m,a=g(n=+n),e=g(r=+r),i=g(u=+u),c=a===e?0:.5/(e-a),s=e===i?0:.5/(i-e),t=e<a?-1:1,p):[n,r,u];},p.clamp=function(m){return arguments.length?(f=!!m,p):f;},p.interpolator=function(m){return arguments.length?(o=m,p):o;};function d(m){return function(w){var v,D,I;return arguments.length?([v,D,I]=w,o=Rn4(m,[v,D,I]),p):[o(0),o(.5),o(1)];};}return p.range=d(d6),p.rangeRound=d(Mn2),p.unknown=function(m){return arguments.length?(l=m,p):l;},function(m){return g=m,a=m(n),e=m(r),i=m(u),c=a===e?0:.5/(e-a),s=e===i?0:.5/(i-e),t=e<a?-1:1,p;};}function Nn3(){var n=q13(P10()(y8));return n.copy=function(){return S11(n,Nn3());},N10.apply(n,arguments);}function qn3(){var n=B12(P10()).domain([.1,1,10]);return n.copy=function(){return S11(n,qn3()).base(n.base());},N10.apply(n,arguments);}function Sn3(){var n=Q9(P10());return n.copy=function(){return S11(n,Sn3()).constant(n.constant());},N10.apply(n,arguments);}function x9(){var n=H8(P10());return n.copy=function(){return S11(n,x9()).exponent(n.exponent());},N10.apply(n,arguments);}function qt3(){return x9.apply(null,arguments).exponent(.5);}function W11(e,f,n){const a=e-f+n*2;return e?a>0?a:1:0;}const H9="identity",L15="linear",v9="log",j12="pow",z13="sqrt",D7="symlog",$7="time",S12="utc",R12="sequential",q14="diverging",x10="quantile",C10="quantize",T8="threshold",X13="ordinal",Z12="point",J10="band",_12="bin-ordinal",s2="continuous",G12="discrete",O10="discretizing",g6="interpolating",P11="temporal";function rf(e){return function(f){let n=f[0],a=f[1],c;return a<n&&(c=n,n=a,a=c),[e.invert(n),e.invert(a)];};}function bf(e){return function(f){const n=e.range();let a=f[0],c=f[1],t=-1,d,r,o,l;for(c<a&&(r=a,a=c,c=r),o=0,l=n.length;o<l;++o)n[o]>=a&&n[o]<=c&&(t<0&&(t=o),d=o);return t<0?void 0:(a=e.invertExtent(n[t]),c=e.invertExtent(n[d]),[a[0]===void 0?a[1]:a[0],c[1]===void 0?c[0]:c[1]]);};}function Q10(){const e=T7().unknown(void 0),f=e.domain,n=e.range;let a=[0,1],c,t,d=!1,r=0,o=0,l=.5;delete e.unknown;function m(){const b=f().length,p=a[1]<a[0],w=a[1-p],k=W11(b,r,o);let u=a[p-0];c=(w-u)/(k||1),d&&(c=Math.floor(c)),u+=(w-u-c*(b-r))*l,t=c*(1-r),d&&(u=Math.round(u),t=Math.round(t));const h=ie(b).map(y=>u+c*y);return n(p?h.reverse():h);}return e.domain=function(b){return arguments.length?(f(b),m()):f();},e.range=function(b){return arguments.length?(a=[+b[0],+b[1]],m()):a.slice();},e.rangeRound=function(b){return a=[+b[0],+b[1]],d=!0,m();},e.bandwidth=function(){return t;},e.step=function(){return c;},e.round=function(b){return arguments.length?(d=!!b,m()):d;},e.padding=function(b){return arguments.length?(o=Math.max(0,Math.min(1,b)),r=o,m()):r;},e.paddingInner=function(b){return arguments.length?(r=Math.max(0,Math.min(1,b)),m()):r;},e.paddingOuter=function(b){return arguments.length?(o=Math.max(0,Math.min(1,b)),m()):o;},e.align=function(b){return arguments.length?(l=Math.max(0,Math.min(1,b)),m()):l;},e.invertRange=function(b){if(b[0]==null||b[1]==null)return;const p=a[1]<a[0],w=p?n().reverse():n(),k=w.length-1;let u=+b[0],h=+b[1],y,B,I;return u!==u||h!==h?void 0:(h<u&&(I=u,u=h,h=I),h<w[0]||u>a[1-p]?void 0:(y=Math.max(0,U2(w,u)-1),B=u===h?y:U2(w,h)-1,u-w[y]>t+1e-10&&++y,p&&(I=y,y=k-B,B=k-I),y>B?void 0:f().slice(y,B+1)));},e.invert=function(b){const p=e.invertRange([b,b]);return p&&p[0];},e.copy=function(){return Q10().domain(f()).range(a).round(d).paddingInner(r).paddingOuter(o).align(l);},m();}function ee7(e){const f=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return ee7(f());},e;}function of(){return ee7(Q10().paddingInner(1));}var sf=Array.prototype.map;function uf(e){return sf.call(e,L2);}const lf=Array.prototype.slice;function fe3(){let e=[],f=[];function n(a){return a==null||a!==a?void 0:f[(U2(e,a)-1)%f.length];}return n.domain=function(a){return arguments.length?(e=uf(a),n):e.slice();},n.range=function(a){return arguments.length?(f=lf.call(a),n):f.slice();},n.tickFormat=function(a1,c){return nn4(e[0],a(e),a1??10,c);},n.copy=function(){return fe3().domain(n.domain()).range(n.range());},n;}const A12=new Map,ae4=Symbol("vega_scale");function ne8(e){return e[ae4]=!0,e;}function mf(e){return e&&e[ae4]===!0;}function gf(e,f,n){const a=function(){const t=f();return t.invertRange||(t.invertRange=t.invert?rf(t):t.invertExtent?bf(t):void 0),t.type=e,ne8(t);};return a.metadata=Xn(p(n)),a;}function i1(e,f,n){return arguments.length>1?(A12.set(e,gf(e,f,n)),this):ce2(e)?A12.get(e):void 0;}i1(H9,rn5),i1(L15,tn4,s2),i1(v9,ln5,[s2,v9]),i1(j12,U11,s2),i1(z13,dt3,s2),i1(D7,fn4,s2),i1($7,wt1,[s2,P11]),i1(S12,kt2,[s2,P11]),i1(R12,vn3,[s2,g6]),i1(`${R12}-${L15}`,vn3,[s2,g6]),i1(`${R12}-${v9}`,Mn3,[s2,g6,v9]),i1(`${R12}-${j12}`,X12,[s2,g6]),i1(`${R12}-${z13}`,Nt2,[s2,g6]),i1(`${R12}-${D7}`,wn5,[s2,g6]),i1(`${q14}-${L15}`,Nn3,[s2,g6]),i1(`${q14}-${v9}`,qn3,[s2,g6,v9]),i1(`${q14}-${j12}`,x9,[s2,g6]),i1(`${q14}-${z13}`,qt3,[s2,g6]),i1(`${q14}-${D7}`,Sn3,[s2,g6]),i1(x10,hn4,[O10,x10]),i1(C10,dn4,O10),i1(T8,yn3,O10),i1(_12,fe3,[G12,O10]),i1(X13,T7,G12),i1(J10,Q10,G12),i1(Z12,of,G12);function ce2(e){return A12.has(e);}function F12(e,f){const n=A12.get(e);return n&&n.metadata[f];}function pf(e){return F12(e,s2);}function te7(e){return F12(e,G12);}function de4(e){return F12(e,O10);}function re7(e){return F12(e,v9);}function be3(e){return F12(e,P11);}function hf(e){return F12(e,g6);}function yf(e){return F12(e,x10);}const vf=["clamp","base","constant","exponent"];function wf(e,f){const n=f[0],a1=a(f)-n;return function(c){return e(n+c*a1);};}function ie5(e,f,n){return Rn4(oe6(f||"rgb",n),e);}function Mf(e,f){const n=new Array(f),a=f+1;for(let c=0;c<f;)n[c]=e(++c/a);return n;}function Sf(e,f,n){const a=n-f;let c,t,d;return!a||!Number.isFinite(a)?On(.5):(c=(t=e.type).indexOf("-"),t=c<0?t:t.slice(c+1),d=i1(t)().domain([f,n]).range([0,1]),vf.forEach(r=>e[r]?d[r](e[r]()):0),d);}function oe6(e,f){const n=mod1[Rf(e)];return f!=null&&n&&n.gamma?n.gamma(f):n;}function Rf(e){return"interpolate"+e.toLowerCase().split("-").map(f=>f[0].toUpperCase()+f.slice(1)).join("");}const Ff={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},qf={category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"};function se4(e){const f=e.length/6|0,n=new Array(f);for(let a=0;a<f;)n[a]="#"+e.slice(a*6,++a*6);return n;}function ue6(e,f){for(const n in e)me4(n,f(e[n]));}const le5={};ue6(qf,se4),ue6(Ff,e=>ie5(se4(e)));function me4(e,f){return e=e&&e.toLowerCase(),arguments.length>1?(le5[e]=f,this):le5[e];}const ge3="symbol",pe4="discrete",xf="gradient",Bf=e=>w1(e)?e.map(f=>String(f)):String(e),Gf=(e,f)=>e[1]-f[1],Of=(e,f)=>f[1]-e[1];function kf(e,f,n){let a;return V(f)&&(e.bins&&(f=Math.max(f,e.bins.length)),n!=null&&(f=Math.min(f,Math.floor(Wn(e.domain())/n||1)+1))),M1(f)&&(a=f.step,f=f.interval),X1(f)&&(f=e.type===$7?X6(f):e.type==S12?Q4(f):b("Only time and utc scales accept interval strings."),a&&(f=f.every(a))),f;}function he4(e,f,n){let a1=e.range(),c=a1[0],t=a(a1),d=Gf;if(c>t&&(a1=t,t=c,c=a1,d=Of),c=Math.floor(c),t=Math.ceil(t),f=f.map(r=>[r,e(r)]).filter(r=>c<=r[1]&&r[1]<=t).sort(d).map(r=>r[0]),n>0&&f.length>1){const r=[f[0],a(f)];for(;f.length>n&&f.length>=3;)f=f.filter((o,l)=>!(l%2));f.length<3&&(f=r);}return f;}function U12(e,f){return e.bins?he4(e,e.bins):e.ticks?e.ticks(f):e.domain();}function ye4(e,f,n,a,c,t){const d=f.type;let r=Bf;if(d===$7||c===$7)r=e.timeFormat(a);else if(d===S12||c===S12)r=e.utcFormat(a);else if(re7(d)){const o=e.formatFloat(a);if(t||f.bins)r=o;else{const l=ve3(f,n,!1);r=m=>l(m)?o(m):"";}}else if(f.tickFormat){const o=f.domain();r=e.formatSpan(o[0],o[o.length-1],n,a);}else a&&(r=e.format(a));return r;}function ve3(e,f,n){const a=U12(e,f),c=e.base(),t=Math.log(c),d=Math.max(1,c*f/a.length),r=o=>{let l=o/Math.pow(c,Math.round(Math.log(o)/t));return l*c<c-.5&&(l*=c),l<=d;};return n?a.filter(r):r;}const E12={[x10]:"quantiles",[C10]:"thresholds",[T8]:"domain"},we4={[x10]:"quantiles",[C10]:"domain"};function Me4(e,f){return e.bins?jf(e.bins):e.type===v9?ve3(e,f,!0):E12[e.type]?Lf(e[E12[e.type]]()):U12(e,f);}function If(e,f,n){const a=f[we4[f.type]](),c=a.length;let t=c>1?a[1]-a[0]:a[0],d;for(d=1;d<c;++d)t=Math.min(t,a[d]-a[d-1]);return e.formatSpan(0,t,3*10,n);}function Lf(e){const f=[-Infinity].concat(e);return f.max=Infinity,f;}function jf(e){const f=e.slice(0,-1);return f.max=a(e),f;}const zf=e=>E12[e.type]||e.bins;function $e3(e,f,n,a,c,t,d){const r=we4[f.type]&&t!==$7&&t!==S12?If(e,f,c):ye4(e,f,n,c,t,d);return a===ge3&&zf(f)?Df(r):a===pe4?Cf(r):Tf(r);}const Df=e=>(f,n,a)=>{const c=Se3(a[n+1],Se3(a.max,Infinity)),t=Re3(f,e),d=Re3(c,e);return t&&d?t+" – "+d:d?"< "+d:"≥ "+t;},Se3=(e,f)=>e??f,Cf=e=>(f,n)=>n?e(f):null,Tf=e=>f=>e(f),Re3=(e,f)=>Number.isFinite(e)?f(e):null;function Af(e){const f=e.domain(),n=f.length-1;let a1=+f[0],c=+a(f),t=c-a1;if(e.type===T8){const d=n?t/n:.1;a1-=d,c+=d,t=c-a1;}return d=>(d-a1)/t;}function Pf(e,f,n,a){const c=a||f.type;return X1(n)&&be3(c)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&c===$7?e.timeFormat("%A, %d %B %Y, %X"):!n&&c===S12?e.utcFormat("%A, %d %B %Y, %X UTC"):$e3(e,f,5,null,n,a,!0);}function Qf(e,f,n){n=n||{};const a1=Math.max(3,n.maxlen||7),c=Pf(e,f,n.format,n.formatType);if(de4(f.type)){const t=Me4(f).slice(1).map(c),d=t.length;return`${d} boundar${d===1?"y":"ies"}: ${t.join(", ")}`;}else if(te7(f.type)){const t=f.domain(),d=t.length,r=d>a1?t.slice(0,a1-2).map(c).join(", ")+", ending with "+t.slice(-1).map(c):t.map(c).join(", ");return`${d} value${d===1?"":"s"}: ${r}`;}else{const t=f.domain();return`values from ${c(t[0])} to ${c(a(t))}`;}}let Cn4=0;function Mr1(){Cn4=0;}const It2="p_";function ye5(t){return t&&t.gradient;}function Rn5(t,e,n){const i=t.gradient;let r=t.id,o=i==="radial"?It2:"";return r||(r=t.id="gradient_"+Cn4++,i==="radial"?(t.x1=D8(t.x1,.5),t.y1=D8(t.y1,.5),t.r1=D8(t.r1,0),t.x2=D8(t.x2,.5),t.y2=D8(t.y2,.5),t.r2=D8(t.r2,.5),o=It2):(t.x1=D8(t.x1,0),t.y1=D8(t.y1,0),t.x2=D8(t.x2,1),t.y2=D8(t.y2,0))),e[r]=t,"url("+(n||"")+"#"+o+r+")";}function D8(t,e){return t??e;}function Cr1(t,e){var n=[],i;return i={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:n,stop:function(r,o){return n.push({offset:r,color:o}),i;}};}const zn2={basis:{curve:jn1},"basis-closed":{curve:ti1},"basis-open":{curve:ni1},bundle:{curve:ii1,tension:"beta",value:.85},cardinal:{curve:ei1,tension:"tension",value:0},"cardinal-open":{curve:oi1,tension:"tension",value:0},"cardinal-closed":{curve:si1,tension:"tension",value:0},"catmull-rom":{curve:ri1,tension:"alpha",value:.5},"catmull-rom-closed":{curve:hi1,tension:"alpha",value:.5},"catmull-rom-open":{curve:ai1,tension:"alpha",value:.5},linear:{curve:rt3},"linear-closed":{curve:li1},monotone:{horizontal:_i,vertical:ui1},natural:{curve:ci},step:{curve:fi1},"step-after":{curve:yi1},"step-before":{curve:pi1}};function _e2(t,e,n){var i=g(zn2,t)&&zn2[t],r=null;return i&&(r=i.curve||i[e||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r;}const Rr={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},zr1=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Ar=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Er1=/^((\s+,?\s*)|(,\s*))/,Pr1=/^[01]/;function yt1(t){const e=[],n=t.match(zr1)||[];return n.forEach(i=>{let r=i[0];const o=r.toLowerCase(),s=Rr[o],l=Sr1(o,s,i.slice(1).trim()),a=l.length;if(a<s||a&&a%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(e.push([r,...l.slice(0,s)]),a===s)return;o==="m"&&(r=r==="M"?"L":"l");for(let h=s;h<a;h+=s)e.push([r,...l.slice(h,h+s)]);}),e;}function Sr1(t,e,n){const i=[];for(let r=0;e&&r<n.length;)for(let o=0;o<e;++o){const s=t==="a"&&(o===3||o===4)?Pr1:Ar,l=n.slice(r).match(s);if(l===null)throw Error("Invalid SVG path, incorrect parameter type");r+=l[0].length,i.push(+l[0]);const a=n.slice(r).match(Er1);a!==null&&(r+=a[0].length);}return i;}const G13=Math.PI/180,nt3=Math.PI/2,N11=Math.PI*2,ut4=Math.sqrt(3)/2;var ke3={},we5={},An5=[].join;function mr(t,e,n,i,r,o,s,l,a){const h=An5.call(arguments);if(ke3[h])return ke3[h];const u=s*G13,c=Math.sin(u),f=Math.cos(u);n=Math.abs(n),i=Math.abs(i);const d=f*(l-t)*.5+c*(a-e)*.5,p=f*(a-e)*.5-c*(l-t)*.5;let g=d*d/(n*n)+p*p/(i*i);g>1&&(g=Math.sqrt(g),n*=g,i*=g);const v=f/n,k=c/n,_=-c/i,T=f/i,y=v*l+k*a,R=_*l+T*a,z=v*t+k*e,x=_*t+T*e,A=(z-y)*(z-y)+(x-R)*(x-R);let ht=1/A-.25;ht<0&&(ht=0);let Z=Math.sqrt(ht);o==r&&(Z=-Z);const ce=.5*(y+z)-Z*(x-R),fe=.5*(R+x)+Z*(z-y),de=Math.atan2(R-fe,y-ce),Ji=Math.atan2(x-fe,z-ce);let tt=Ji-de;tt<0&&o===1?tt+=N11:tt>0&&o===0&&(tt-=N11);const pe=Math.ceil(Math.abs(tt/(nt3+.001))),pn=[];for(let vt=0;vt<pe;++vt){const Fi=de+vt*tt/pe,Ki=de+(vt+1)*tt/pe;pn[vt]=[ce,fe,Fi,Ki,n,i,c,f];}return ke3[h]=pn;}function Or1(t){const e=An5.call(t);if(we5[e])return we5[e];var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],l=t[5],a=t[6],h=t[7];const u=h*s,c=-a*l,f=a*s,d=h*l,p=Math.cos(r),g=Math.sin(r),v=Math.cos(o),k=Math.sin(o),_=.5*(o-r),T=Math.sin(_*.5),y=8/3*T*T/Math.sin(_),R=n+p-y*g,z=i+g+y*p,x=n+v,A=i+k,ht=x+y*k,Z=A-y*v;return we5[e]=[u*R+c*z,f*R+d*z,u*ht+c*Z,f*ht+d*Z,u*x+c*A,f*x+d*A];}const S13=["l",0,0,0,0,0,0,0];function $r1(t,e,n){const i=S13[0]=t[0];if(i==="a"||i==="A")S13[1]=e*t[1],S13[2]=n*t[2],S13[3]=t[3],S13[4]=t[4],S13[5]=t[5],S13[6]=e*t[6],S13[7]=n*t[7];else if(i==="h"||i==="H")S13[1]=e*t[1];else if(i==="v"||i==="V")S13[1]=n*t[1];else for(var r=1,o=t.length;r<o;++r)S13[r]=(r%2==1?e:n)*t[r];return S13;}function Dt2(t,e,n,i,r,o){var s,l=null,a=0,h=0,u=0,c=0,f,d,p,g,v=0,k=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),o==null&&(o=r),t.beginPath&&t.beginPath();for(var _=0,T=e.length;_<T;++_){s=e[_],(r!==1||o!==1)&&(s=$r1(s,r,o));switch(s[0]){case"l":a+=s[1],h+=s[2],t.lineTo(a+n,h+i);break;case"L":a=s[1],h=s[2],t.lineTo(a+n,h+i);break;case"h":a+=s[1],t.lineTo(a+n,h+i);break;case"H":a=s[1],t.lineTo(a+n,h+i);break;case"v":h+=s[1],t.lineTo(a+n,h+i);break;case"V":h=s[1],t.lineTo(a+n,h+i);break;case"m":a+=s[1],h+=s[2],v=a,k=h,t.moveTo(a+n,h+i);break;case"M":a=s[1],h=s[2],v=a,k=h,t.moveTo(a+n,h+i);break;case"c":f=a+s[5],d=h+s[6],u=a+s[3],c=h+s[4],t.bezierCurveTo(a+s[1]+n,h+s[2]+i,u+n,c+i,f+n,d+i),a=f,h=d;break;case"C":a=s[5],h=s[6],u=s[3],c=s[4],t.bezierCurveTo(s[1]+n,s[2]+i,u+n,c+i,a+n,h+i);break;case"s":f=a+s[3],d=h+s[4],u=2*a-u,c=2*h-c,t.bezierCurveTo(u+n,c+i,a+s[1]+n,h+s[2]+i,f+n,d+i),u=a+s[1],c=h+s[2],a=f,h=d;break;case"S":f=s[3],d=s[4],u=2*a-u,c=2*h-c,t.bezierCurveTo(u+n,c+i,s[1]+n,s[2]+i,f+n,d+i),a=f,h=d,u=s[1],c=s[2];break;case"q":f=a+s[3],d=h+s[4],u=a+s[1],c=h+s[2],t.quadraticCurveTo(u+n,c+i,f+n,d+i),a=f,h=d;break;case"Q":f=s[3],d=s[4],t.quadraticCurveTo(s[1]+n,s[2]+i,f+n,d+i),a=f,h=d,u=s[1],c=s[2];break;case"t":f=a+s[1],d=h+s[2],l[0].match(/[QqTt]/)===null?(u=a,c=h):l[0]==="t"?(u=2*a-p,c=2*h-g):l[0]==="q"&&(u=2*a-u,c=2*h-c),p=u,g=c,t.quadraticCurveTo(u+n,c+i,f+n,d+i),a=f,h=d,u=a+s[1],c=h+s[2];break;case"T":f=s[1],d=s[2],u=2*a-u,c=2*h-c,t.quadraticCurveTo(u+n,c+i,f+n,d+i),a=f,h=d;break;case"a":En3(t,a+n,h+i,[s[1],s[2],s[3],s[4],s[5],s[6]+a+n,s[7]+h+i]),a+=s[6],h+=s[7];break;case"A":En3(t,a+n,h+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),a=s[6],h=s[7];break;case"z":case"Z":a=v,h=k,t.closePath();break;}l=s;}}function En3(t,e,n,i){const r=mr(i[5],i[6],i[0],i[1],i[3],i[4],i[2],e,n);for(let o=0;o<r.length;++o){const s=Or1(r[o]);t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);}}const Pn3=.5773502691896257,Sn4={circle:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,N11);}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/2.5;t.moveTo(-n,-i),t.lineTo(-n,i),t.lineTo(-i,i),t.lineTo(-i,n),t.lineTo(i,n),t.lineTo(i,i),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(i,-i),t.lineTo(i,-n),t.lineTo(-i,-n),t.lineTo(-i,-i),t.closePath();}},diamond:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath();}},square:{draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n);}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/7,r=n/2.5,o=n/8;t.moveTo(-i,n),t.lineTo(i,n),t.lineTo(i,-o),t.lineTo(r,-o),t.lineTo(0,-n),t.lineTo(-r,-o),t.lineTo(-i,-o),t.closePath();}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,i=ut4*n,r=i-n*Pn3,o=n/4;t.moveTo(0,-i-r),t.lineTo(-o,i-r),t.lineTo(o,i-r),t.closePath();}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,i=ut4*n,r=i-n*Pn3;t.moveTo(0,-i-r),t.lineTo(-n,i-r),t.lineTo(n,i-r),t.closePath();}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,i=ut4*n;t.moveTo(0,-i),t.lineTo(-n,i),t.lineTo(n,i),t.closePath();}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,i=ut4*n;t.moveTo(0,i),t.lineTo(-n,-i),t.lineTo(n,-i),t.closePath();}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,i=ut4*n;t.moveTo(i,0),t.lineTo(-i,-n),t.lineTo(-i,n),t.closePath();}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,i=ut4*n;t.moveTo(-i,0),t.lineTo(i,-n),t.lineTo(i,n),t.closePath();}},stroke:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0);}}};function Ln1(t){return g(Sn4,t)?Sn4[t]:Ir(t);}var be4={};function Ir(t){if(!g(be4,t)){const e=yt1(t);be4[t]={draw:function(n,i){Dt2(n,e,0,0,Math.sqrt(i)/2);}};}return be4[t];}function Dr(t){return t.x;}function Nr1(t){return t.y;}function qr1(t){return t.width;}function Hr1(t){return t.height;}function H10(t){return typeof t=="function"?t:()=>+t;}function Nt3(t,e,n){return Math.max(e,Math.min(t,n));}function mn4(){var t=Dr,e=Nr1,n=qr1,i=Hr1,r=H10(0),o=r,s=r,l=r,a=null;function h(u,c,f){var d,p=c??+t.call(this,u),g=f??+e.call(this,u),v=+n.call(this,u),k=+i.call(this,u),_=Math.min(v,k)/2,T=Nt3(+r.call(this,u),0,_),y=Nt3(+o.call(this,u),0,_),R=Nt3(+s.call(this,u),0,_),z=Nt3(+l.call(this,u),0,_);if(a||(a=d=L11()),T<=0&&y<=0&&R<=0&&z<=0)a.rect(p,g,v,k);else{var x=p+v,A=g+k;a.moveTo(p+T,g),a.lineTo(x-y,g),a.bezierCurveTo(x-.448084975506*y,g,x,g+.448084975506*y,x,g+y),a.lineTo(x,A-z),a.bezierCurveTo(x,A-.448084975506*z,x-.448084975506*z,A,x-z,A),a.lineTo(p+R,A),a.bezierCurveTo(p+.448084975506*R,A,p,A-.448084975506*R,p,A-R),a.lineTo(p,g+T),a.bezierCurveTo(p,g+.448084975506*T,p+.448084975506*T,g,p+T,g),a.closePath();}if(d)return a=null,d+""||null;}return h.x=function(u){return arguments.length?(t=H10(u),h):t;},h.y=function(u){return arguments.length?(e=H10(u),h):e;},h.width=function(u){return arguments.length?(n=H10(u),h):n;},h.height=function(u){return arguments.length?(i=H10(u),h):i;},h.cornerRadius=function(u,c,f,d){return arguments.length?(r=H10(u),o=c!=null?H10(c):r,l=f!=null?H10(f):r,s=d!=null?H10(d):o,h):r;},h.context=function(u){return arguments.length?(a=u??null,h):a;},h;}function On1(){var t,e,n,i,r=null,o,s,l,a;function h(c,f,d){const p=d/2;if(o){var g=l-f,v=c-s;if(g||v){var k=Math.hypot(g,v),_=(g/=k)*a,T=(v/=k)*a,y=Math.atan2(v,g);r.moveTo(s-_,l-T),r.lineTo(c-g*p,f-v*p),r.arc(c,f,p,y-Math.PI,y),r.lineTo(s+_,l+T),r.arc(s,l,a,y,y+Math.PI);}else r.arc(c,f,p,0,N11);r.closePath();}else o=1;s=c,l=f,a=p;}function u(c){var f,d=c.length,p,g=!1,v;for(r==null&&(r=v=L11()),f=0;f<=d;++f)!(f<d&&i(p=c[f],f,c))===g&&(g=!g)&&(o=0),g&&h(+t(p,f,c),+e(p,f,c),+n(p,f,c));if(v)return r=null,v+""||null;}return u.x=function(c){return arguments.length?(t=c,u):t;},u.y=function(c){return arguments.length?(e=c,u):e;},u.size=function(c){return arguments.length?(n=c,u):n;},u.defined=function(c){return arguments.length?(i=c,u):i;},u.context=function(c){return arguments.length?(c==null?r=null:r=c,u):r;},u;}function _t2(t,e){return t??e;}const kt3=t=>t.x||0,wt2=t=>t.y||0,Vr1=t=>t.width||0,Br=t=>t.height||0,Gr1=t=>(t.x||0)+(t.width||0),jr1=t=>(t.y||0)+(t.height||0),Wr1=t=>t.startAngle||0,Ur=t=>t.endAngle||0,Yr1=t=>t.padAngle||0,Xr1=t=>t.innerRadius||0,Jr1=t=>t.outerRadius||0,Fr=t=>t.cornerRadius||0,Kr1=t=>_t2(t.cornerRadiusTopLeft,t.cornerRadius)||0,Qr1=t=>_t2(t.cornerRadiusTopRight,t.cornerRadius)||0,Zr1=t=>_t2(t.cornerRadiusBottomRight,t.cornerRadius)||0,ts=t=>_t2(t.cornerRadiusBottomLeft,t.cornerRadius)||0,es=t=>_t2(t.size,64),ns=t=>t.size||1,qt4=t=>!(t.defined===!1),is=t=>Ln1(t.shape||"circle"),rs=Mn1().startAngle(Wr1).endAngle(Ur).padAngle(Yr1).innerRadius(Xr1).outerRadius(Jr1).cornerRadius(Fr),ss=Xt3().x(kt3).y1(wt2).y0(jr1).defined(qt4),os=Xt3().y(wt2).x1(kt3).x0(Gr1).defined(qt4),as=bt3().x(kt3).y(wt2).defined(qt4),ls=mn4().x(kt3).y(wt2).width(Vr1).height(Br).cornerRadius(Kr1,Qr1,Zr1,ts),hs=$n2().type(is).size(es),us=On1().x(kt3).y(wt2).defined(qt4).size(ns);function xe3(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft;}function cs(t,e){return rs.context(t)(e);}function fs(t,e){const n=e[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?os:ss).curve(_e2(i,n.orient,n.tension)).context(t)(e);}function ds(t,e){const n=e[0],i=n.interpolate||"linear";return as.curve(_e2(i,n.orient,n.tension)).context(t)(e);}function ct6(t,e,n,i){return ls.context(t)(e,n,i);}function ps(t,e){return(e.mark.shape||e.shape).context(t)(e);}function gs(t,e){return hs.context(t)(e);}function vs(t,e){return us.context(t)(e);}var $n4=1;function In2(){$n4=1;}function Te3(t,e,n){var i=e.clip,r=t._defs,o=e.clip_id||(e.clip_id="clip"+$n4++),s=r.clipping[o]||(r.clipping[o]={id:o});return O1(i)?s.path=i(null):xe3(n)?s.path=ct6(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+o+")";}function E13(t){this.clear(),t&&this.union(t);}E13.prototype={clone(){return new E13(this);},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this;},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE;},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2;},set(t,e,n,i){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),i<e?(this.y2=e,this.y1=i):(this.y1=e,this.y2=i),this;},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this;},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this;},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this;},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this;},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this;},rotate(t,e,n){const i=this.rotatedPoints(t,e,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7]);},rotatedPoints(t,e,n){var{x1:i,y1:r,x2:o,y2:s}=this,l=Math.cos(t),a=Math.sin(t),h=e-e*l+n*a,u=n-e*a-n*l;return[l*i-a*r+h,a*i+l*r+u,l*i-a*s+h,a*i+l*s+u,l*o-a*r+h,a*o+l*r+u,l*o-a*s+h,a*o+l*s+u];},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this;},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this;},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2;},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2);},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2);},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2);},width(){return this.x2-this.x1;},height(){return this.y2-this.y1;}};function Me5(t){this.mark=t,this.bounds=this.bounds||new E13;}function Ce3(t){Me5.call(this,t),this.items=this.items||[];}Pn(Ce3,Me5);function Re4(t){this._pending=0,this._loader=t||Dn1();}function Dn2(t){t._pending+=1;}function bt4(t){t._pending-=1;}Re4.prototype={pending(){return this._pending;},sanitizeURL(t){const e=this;return Dn2(e),e._loader.sanitize(t,{context:"href"}).then(n=>(bt4(e),n)).catch(()=>(bt4(e),null));},loadImage(t){const e=this,n=o2();return Dn2(e),e._loader.sanitize(t,{context:"image"}).then(i=>{const r=i.href;if(!r||!n)throw{url:r};const o=new n,s=g(i,"crossOrigin")?i.crossOrigin:"anonymous";return s!=null&&(o.crossOrigin=s),o.onload=()=>bt4(e),o.onerror=()=>bt4(e),o.src=r,o;}).catch(i=>(bt4(e),{complete:!1,width:0,height:0,src:i&&i.url||""}));},ready(){const t=this;return new Promise(e=>{function n(i){t.pending()?setTimeout(()=>{n(!0);},10):e(i);}n(!1);});}};function it4(t,e,n){if(e.stroke&&e.opacity!==0&&e.strokeOpacity!==0){const i=e.strokeWidth!=null?+e.strokeWidth:1;t.expand(i+(n?ys(e,i):0));}return t;}function ys(t,e){return t.strokeJoin&&t.strokeJoin!=="miter"?0:e;}const _s=N11-1e-8;let Ht3,Vt3,Bt4,rt4,ze4,Gt3,Ae3,Ee2;const W12=(t,e)=>Ht3.add(t,e),jt4=(t,e)=>W12(Vt3=t,Bt4=e),Nn4=t=>W12(t,Ht3.y1),qn4=t=>W12(Ht3.x1,t),st4=(t,e)=>ze4*t+Ae3*e,ot5=(t,e)=>Gt3*t+Ee2*e,Pe2=(t,e)=>W12(st4(t,e),ot5(t,e)),Se4=(t,e)=>jt4(st4(t,e),ot5(t,e));function xt4(t,e){return Ht3=t,e?(rt4=e*G13,ze4=Ee2=Math.cos(rt4),Gt3=Math.sin(rt4),Ae3=-Gt3):(ze4=Ee2=1,rt4=Gt3=Ae3=0),ks;}const ks={beginPath(){},closePath(){},moveTo:Se4,lineTo:Se4,rect(t,e,n,i){rt4?(Pe2(t+n,e),Pe2(t+n,e+i),Pe2(t,e+i),Se4(t,e)):(W12(t+n,e+i),jt4(t,e));},quadraticCurveTo(t,e,n,i){const r=st4(t,e),o=ot5(t,e),s=st4(n,i),l=ot5(n,i);Hn2(Vt3,r,s,Nn4),Hn2(Bt4,o,l,qn4),jt4(s,l);},bezierCurveTo(t,e,n,i,r,o){const s=st4(t,e),l=ot5(t,e),a=st4(n,i),h=ot5(n,i),u=st4(r,o),c=ot5(r,o);Vn1(Vt3,s,a,u,Nn4),Vn1(Bt4,l,h,c,qn4),jt4(u,c);},arc(t,e,n,i,r,o){if(i+=rt4,r+=rt4,Vt3=n*Math.cos(r)+t,Bt4=n*Math.sin(r)+e,Math.abs(r-i)>_s)W12(t-n,e-n),W12(t+n,e+n);else{const s=h=>W12(n*Math.cos(h)+t,n*Math.sin(h)+e);let l,a;if(s(i),s(r),r!==i)if(i=i%N11,i<0&&(i+=N11),r=r%N11,r<0&&(r+=N11),r<i&&(o=!o,l=i,i=r,r=l),o)for(r-=N11,l=i-i%nt3,a=0;a<4&&l>r;++a,l-=nt3)s(l);else for(l=i-i%nt3+nt3,a=0;a<4&&l<r;++a,l=l+nt3)s(l);}}};function Hn2(t,e,n,i){const r=(t-e)/(t+n-2*e);0<r&&r<1&&i(t+(e-t)*r);}function Vn1(t,e,n,i,r){const o=i-t+3*e-3*n,s=t+n-2*e,l=t-e;let a=0,h=0,u;Math.abs(o)>1e-14?(u=s*s+l*o,u>=0&&(u=Math.sqrt(u),a=(-s+u)/o,h=(-s-u)/o)):a=.5*l/s,0<a&&a<1&&r(Bn3(a,t,e,n,i)),0<h&&h<1&&r(Bn3(h,t,e,n,i));}function Bn3(t,e,n,i,r){const o=1-t,s=o*o,l=t*t;return s*o*e+3*s*t*n+3*o*l*i+l*t*r;}var U13=(U13=n1(1,1))?U13.getContext("2d"):null;const Le2=new E13;function me5(t){return function(e,n){if(!U13)return!0;t(U13,e),Le2.clear().union(e.bounds).intersect(n).round();const{x1:i,y1:r,x2:o,y2:s}=Le2;for(let l=r;l<=s;++l)for(let a=i;a<=o;++a)if(U13.isPointInPath(a,l))return!0;return!1;};}function Oe(t,e){return e.contains(t.x||0,t.y||0);}function Gn2(t,e){const n=t.x||0,i=t.y||0,r=t.width||0,o=t.height||0;return e.intersects(Le2.set(n,i,n+r,i+o));}function jn3(t,e){const n=t.x||0,i=t.y||0,r=t.x2!=null?t.x2:n,o=t.y2!=null?t.y2:i;return ft5(e,n,i,r,o);}function ft5(t,e,n,i,r){const{x1:o,y1:s,x2:l,y2:a}=t,h=i-e,u=r-n;let c=0,f=1,d,p,g,v;for(v=0;v<4;++v){if(v===0&&(d=-h,p=-(o-e)),v===1&&(d=h,p=l-e),v===2&&(d=-u,p=-(s-n)),v===3&&(d=u,p=a-n),Math.abs(d)<1e-10&&p<0)return!1;if(g=p/d,d<0){if(g>f)return!1;g>c&&(c=g);}else if(d>0){if(g<c)return!1;g<f&&(f=g);}}return!0;}function dt4(t,e){t.globalCompositeOperation=e.blend||"source-over";}function m4(t,e){return t??e;}function Wn2(t,e){const n=e.length;for(let i=0;i<n;++i)t.addColorStop(e[i].offset,e[i].color);return t;}function ws(t,e,n){const i=n.width(),r=n.height();let o;if(e.gradient==="radial")o=t.createRadialGradient(n.x1+m4(e.x1,.5)*i,n.y1+m4(e.y1,.5)*r,Math.max(i,r)*m4(e.r1,0),n.x1+m4(e.x2,.5)*i,n.y1+m4(e.y2,.5)*r,Math.max(i,r)*m4(e.r2,.5));else{const s=m4(e.x1,0),l=m4(e.y1,0),a=m4(e.x2,1),h=m4(e.y2,0);if(s===a||l===h||i===r)o=t.createLinearGradient(n.x1+s*i,n.y1+l*r,n.x1+a*i,n.y1+h*r);else{const u=n1(Math.ceil(i),Math.ceil(r)),c=u.getContext("2d");return c.scale(i,r),c.fillStyle=Wn2(c.createLinearGradient(s,l,a,h),e.stops),c.fillRect(0,0,i,r),t.createPattern(u,"no-repeat");}}return Wn2(o,e.stops);}function Un2(t,e,n){return ye5(n)?ws(t,n,e.bounds):n;}function Wt3(t,e,n){return n*=e.fillOpacity==null?1:e.fillOpacity,n>0?(t.globalAlpha=n,t.fillStyle=Un2(t,e,e.fill),!0):!1;}var bs=[];function pt3(t,e,n){var i=(i=e.strokeWidth)!=null?i:1;return i<=0?!1:(n*=e.strokeOpacity==null?1:e.strokeOpacity,n>0?(t.globalAlpha=n,t.strokeStyle=Un2(t,e,e.stroke),t.lineWidth=i,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||bs),t.lineDashOffset=e.strokeDashOffset||0),!0):!1);}function xs(t,e){return t.zindex-e.zindex||t.index-e.index;}function $e4(t){if(!t.zdirty)return t.zitems;var e=t.items,n=[],i,r,o;for(r=0,o=e.length;r<o;++r)i=e[r],i.index=r,i.zindex&&n.push(i);return t.zdirty=!1,t.zitems=n.sort(xs);}function O11(t,e){var n=t.items,i,r;if(!n||!n.length)return;const o=$e4(t);if(o&&o.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||e(n[i]);n=o;}for(i=0,r=n.length;i<r;++i)e(n[i]);}function Ut2(t,e){var n=t.items,i,r;if(!n||!n.length)return null;const o=$e4(t);for(o&&o.length&&(n=o),r=n.length;--r>=0;)if(i=e(n[r]))return i;if(n===o){for(n=t.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=e(n[r])))return i;}return null;}function Ie3(t){return function(e,n,i){O11(n,r=>{(!i||i.intersects(r.bounds))&&Yn1(t,e,r,r);});};}function Ts(t){return function(e,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&Yn1(t,e,n.items[0],n.items);};}function Yn1(t,e,n,i){var r=n.opacity==null?1:n.opacity;if(r===0)return;if(t(e,i))return;dt4(e,n),n.fill&&Wt3(e,n,r)&&e.fill(),n.stroke&&pt3(e,n,r)&&e.stroke();}function Yt4(t){return t=t||_1,function(e,n,i,r,o,s){return i*=e.pixelRatio,r*=e.pixelRatio,Ut2(n,l=>{const a=l.bounds;if(a&&!a.contains(o,s)||!a)return;if(t(e,l,i,r,o,s))return l;});};}function Tt4(t,e){return function(n,i,r,o){var s=Array.isArray(i)?i[0]:i,l=e??s.fill,a=s.stroke&&n.isPointInStroke,h,u;return a&&(h=s.strokeWidth,u=s.strokeCap,n.lineWidth=h??1,n.lineCap=u??"butt"),t(n,i)?!1:l&&n.isPointInPath(r,o)||a&&n.isPointInStroke(r,o);};}function De2(t){return Yt4(Tt4(t));}function at5(t,e){return"translate("+t+","+e+")";}function Ne4(t){return"rotate("+t+")";}function Ms(t,e){return"scale("+t+","+e+")";}function Xn3(t){return at5(t.x||0,t.y||0);}function Cs(t){return at5(t.x||0,t.y||0)+(t.angle?" "+Ne4(t.angle):"");}function Rs(t){return at5(t.x||0,t.y||0)+(t.angle?" "+Ne4(t.angle):"")+(t.scaleX||t.scaleY?" "+Ms(t.scaleX||1,t.scaleY||1):"");}function qe2(t,e,n){function i(s,l){s("transform",Cs(l)),s("d",e(null,l));}function r(s,l){return e(xt4(s,l.angle),l),it4(s,l).translate(l.x||0,l.y||0);}function o(s,l){var a=l.x||0,h=l.y||0,u=l.angle||0;s.translate(a,h),u&&s.rotate(u*=G13),s.beginPath(),e(s,l),u&&s.rotate(-u),s.translate(-a,-h);}return{type:t,tag:"path",nested:!1,attr:i,bound:r,draw:Ie3(o),pick:De2(o),isect:n||me5(o)};}var zs=qe2("arc",cs);function As(t,e){for(var n=t[0].orient==="horizontal"?e[1]:e[0],i=t[0].orient==="horizontal"?"y":"x",r=t.length,o=Infinity,s,l;--r>=0;){if(t[r].defined===!1)continue;l=Math.abs(t[r][i]-n),l<o&&(o=l,s=t[r]);}return s;}function Es(t,e){for(var n=Math.pow(t[0].strokeWidth||1,2),i=t.length,r,o,s;--i>=0;){if(t[i].defined===!1)continue;if(r=t[i].x-e[0],o=t[i].y-e[1],s=r*r+o*o,s<n)return t[i];}return null;}function Ps(t,e){for(var n=t.length,i,r,o;--n>=0;){if(t[n].defined===!1)continue;if(i=t[n].x-e[0],r=t[n].y-e[1],o=i*i+r*r,i=t[n].size||1,o<i*i)return t[n];}return null;}function He2(t,e,n){function i(a,h){var u=h.mark.items;u.length&&a("d",e(null,u));}function r(a,h){var u=h.items;return u.length===0?a:(e(xt4(a),u),it4(a,u[0]));}function o(a,h){a.beginPath(),e(a,h);}const s=Tt4(o);function l(a,h,u,c,f,d){var p=h.items,g=h.bounds;return!p||!p.length||g&&!g.contains(f,d)?null:(u*=a.pixelRatio,c*=a.pixelRatio,s(a,p,u,c)?p[0]:null);}return{type:t,tag:"path",nested:!0,attr:i,bound:r,draw:Ts(o),pick:l,isect:Oe,tip:n};}var Ss=He2("area",fs,As);function Ls(t,e){var n=e.clip;t.save(),O1(n)?(t.beginPath(),n(t),t.clip()):Jn2(t,e.group);}function Jn2(t,e){t.beginPath(),xe3(e)?ct6(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip();}function Fn2(t){const e=m4(t.strokeWidth,1);return t.strokeOffset!=null?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0;}function ms(t,e){t("transform",Xn3(e));}function Kn1(t,e){const n=Fn2(e);t("d",ct6(null,e,n,n));}function Os(t,e){t("class","background"),t("aria-hidden",!0),Kn1(t,e);}function $s(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?Kn1(t,e):t("d","");}function Is(t,e,n){const i=e.clip?Te3(n,e,e):null;t("clip-path",i);}function Ds(t,e){if(!e.clip&&e.items){const n=e.items,i=n.length;for(let r=0;r<i;++r)t.union(n[r].bounds);}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),it4(t,e),t.translate(e.x||0,e.y||0);}function Mt3(t,e,n,i){const r=Fn2(e);t.beginPath(),ct6(t,e,(n||0)+r,(i||0)+r);}const Ns=Tt4(Mt3),qs=Tt4(Mt3,!1),Hs=Tt4(Mt3,!0);function Vs(t,e,n,i){O11(e,r=>{const o=r.x||0,s=r.y||0,l=r.strokeForeground,a=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&a&&(Mt3(t,r,o,s),dt4(t,r),r.fill&&Wt3(t,r,a)&&t.fill(),r.stroke&&!l&&pt3(t,r,a)&&t.stroke()),t.save(),t.translate(o,s),r.clip&&Jn2(t,r),n&&n.translate(-o,-s),O11(r,h=>{(h.marktype==="group"||i==null||i.includes(h.marktype))&&this.draw(t,h,n,i);}),n&&n.translate(o,s),t.restore(),l&&r.stroke&&a&&(Mt3(t,r,o,s),dt4(t,r),pt3(t,r,a)&&t.stroke());});}function Bs(t,e,n,i,r,o){if(e.bounds&&!e.bounds.contains(r,o)||!e.items)return null;const s=n*t.pixelRatio,l=i*t.pixelRatio;return Ut2(e,a=>{let h,u,c;const f=a.bounds;if(f&&!f.contains(r,o))return;u=a.x||0,c=a.y||0;const d=u+(a.width||0),p=c+(a.height||0),g=a.clip;if(g&&(r<u||r>d||o<c||o>p))return;if(t.save(),t.translate(u,c),u=r-u,c=o-c,g&&xe3(a)&&!Hs(t,a,s,l))return t.restore(),null;const v=a.strokeForeground,k=e.interactive!==!1;return k&&v&&a.stroke&&qs(t,a,s,l)?(t.restore(),a):(h=Ut2(a,_=>Gs(_,u,c)?this.pick(_,n,i,u,c):null),!h&&k&&(a.fill||!v&&a.stroke)&&Ns(t,a,s,l)&&(h=a),t.restore(),h||null);});}function Gs(t,e,n){return(t.interactive!==!1||t.marktype==="group")&&t.bounds&&t.bounds.contains(e,n);}var js={type:"group",tag:"g",nested:!1,attr:ms,bound:Ds,draw:Vs,pick:Bs,isect:Gn2,content:Is,background:Os,foreground:$s},Ct3={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Ve2(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then(i=>{t.image=i,t.image.url=t.url;})),n;}function Be2(t,e){return t.width!=null?t.width:!e||!e.width?0:t.aspect!==!1&&t.height?t.height*e.width/e.height:e.width;}function Ge2(t,e){return t.height!=null?t.height:!e||!e.height?0:t.aspect!==!1&&t.width?t.width*e.height/e.width:e.height;}function Xt4(t,e){return t==="center"?e/2:t==="right"?e:0;}function Jt3(t,e){return t==="middle"?e/2:t==="bottom"?e:0;}function Ws(t,e,n){const i=Ve2(e,n),r=Be2(e,i),o=Ge2(e,i),s=(e.x||0)-Xt4(e.align,r),l=(e.y||0)-Jt3(e.baseline,o),a=!i.src&&i.toDataURL?i.toDataURL():i.src||"";t("href",a,Ct3["xmlns:xlink"],"xlink:href"),t("transform",at5(s,l)),t("width",r),t("height",o),t("preserveAspectRatio",e.aspect===!1?"none":"xMidYMid");}function Us(t,e){const n=e.image,i=Be2(e,n),r=Ge2(e,n),o=(e.x||0)-Xt4(e.align,i),s=(e.y||0)-Jt3(e.baseline,r);return t.set(o,s,o+i,s+r);}function Ys(t,e,n){O11(e,i=>{if(n&&!n.intersects(i.bounds))return;const r=Ve2(i,this);let o=Be2(i,r),s=Ge2(i,r);if(o===0||s===0)return;let l=(i.x||0)-Xt4(i.align,o),a=(i.y||0)-Jt3(i.baseline,s),h,u,c,f;i.aspect!==!1&&(u=r.width/r.height,c=i.width/i.height,u===u&&c===c&&u!==c&&(c<u?(f=o/u,a+=(s-f)/2,s=f):(f=s*u,l+=(o-f)/2,o=f))),(r.complete||r.toDataURL)&&(dt4(t,i),t.globalAlpha=(h=i.opacity)!=null?h:1,t.imageSmoothingEnabled=i.smooth!==!1,t.drawImage(r,l,a,o,s));});}var Xs={type:"image",tag:"image",nested:!1,attr:Ws,bound:Us,draw:Ys,pick:Yt4(),isect:_1,get:Ve2,xOffset:Xt4,yOffset:Jt3},Js=He2("line",ds,Es);function Fs(t,e){var n=e.scaleX||1,i=e.scaleY||1;(n!==1||i!==1)&&t("vector-effect","non-scaling-stroke"),t("transform",Rs(e)),t("d",e.path);}function Ft2(t,e){var n=e.path;if(n==null)return!0;var i=e.x||0,r=e.y||0,o=e.scaleX||1,s=e.scaleY||1,l=(e.angle||0)*G13,a=e.pathCache;(!a||a.path!==n)&&((e.pathCache=a=yt1(n)).path=n),l&&t.rotate&&t.translate?(t.translate(i,r),t.rotate(l),Dt2(t,a,0,0,o,s),t.rotate(-l),t.translate(-i,-r)):Dt2(t,a,i,r,o,s);}function Ks(t,e){return Ft2(xt4(t,e.angle),e)?t.set(0,0,0,0):it4(t,e,!0);}var Qs={type:"path",tag:"path",nested:!1,attr:Fs,bound:Ks,draw:Ie3(Ft2),pick:De2(Ft2),isect:me5(Ft2)};function Zs(t,e){t("d",ct6(null,e));}function to(t,e){var n,i;return it4(t.set(n=e.x||0,i=e.y||0,n+e.width||0,i+e.height||0),e);}function Qn1(t,e){t.beginPath(),ct6(t,e);}var eo={type:"rect",tag:"path",nested:!1,attr:Zs,bound:to,draw:Ie3(Qn1),pick:De2(Qn1),isect:Gn2};function no(t,e){t("transform",Xn3(e)),t("x2",e.x2!=null?e.x2-(e.x||0):0),t("y2",e.y2!=null?e.y2-(e.y||0):0);}function io(t,e){var n,i;return it4(t.set(n=e.x||0,i=e.y||0,e.x2!=null?e.x2:n,e.y2!=null?e.y2:i),e);}function Zn1(t,e,n){var i,r,o,s;return e.stroke&&pt3(t,e,n)?(i=e.x||0,r=e.y||0,o=e.x2!=null?e.x2:i,s=e.y2!=null?e.y2:r,t.beginPath(),t.moveTo(i,r),t.lineTo(o,s),!0):!1;}function ro(t,e,n){O11(e,i=>{if(n&&!n.intersects(i.bounds))return;var r=i.opacity==null?1:i.opacity;r&&Zn1(t,i,r)&&(dt4(t,i),t.stroke());});}function so(t,e,n,i){return t.isPointInStroke?Zn1(t,e,1)&&t.isPointInStroke(n,i):!1;}var oo={type:"rule",tag:"line",nested:!1,attr:no,bound:io,draw:ro,pick:Yt4(so),isect:jn3},ao=qe2("shape",ps),lo=qe2("symbol",gs,Oe);const ti2=Un();var Y11={height:q15,measureWidth:je4,estimateWidth:Kt3,width:Kt3,canvas:ei2};ei2(!0);function ei2(t){Y11.width=t&&U13?je4:Kt3;}function Kt3(t,e){return ni2(J11(t,e),q15(t));}function ni2(t,e){return~~(.8*t.length*e);}function je4(t,e){return q15(t)<=0||!(e=J11(t,e))?0:ii2(e,Qt3(t));}function ii2(t,e){const n=`(${e}) ${t}`;let i=ti2.get(n);return i===void 0&&(U13.font=e,i=U13.measureText(t).width,ti2.set(n,i)),i;}function q15(t){return t.fontSize!=null?+t.fontSize||0:11;}function X14(t){return t.lineHeight!=null?t.lineHeight:q15(t)+2;}function ho(t){return w1(t)?t.length>1?t:t[0]:t;}function Rt4(t){return ho(t.lineBreak&&t.text&&!w1(t.text)?t.text.split(t.lineBreak):t.text);}function uo(t){const e=Rt4(t);return(w1(e)?e.length-1:0)*X14(t);}function J11(t,e){const n=e==null?"":(e+"").trim();return t.limit>0&&n.length?fo(t,n):n;}function co(t){if(Y11.width===je4){const e=Qt3(t);return n=>ii2(n,e);}else if(Y11.width===Kt3){const e=q15(t);return n=>ni2(n,e);}else return e=>Y11.width(t,e);}function fo(t,e){var n=+t.limit,i=co(t);if(i(e)<n)return e;var r=t.ellipsis||"…",o=t.dir==="rtl",s=0,l=e.length,a;if(n-=i(r),o){for(;s<l;)a=s+l>>>1,i(e.slice(a))>n?s=a+1:l=a;return r+e.slice(s);}else{for(;s<l;)a=1+(s+l>>>1),i(e.slice(0,a))<n?s=a:l=a-1;return e.slice(0,s)+r;}}function zt3(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif";}function Qt3(t,e){return""+(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+q15(t)+"px "+zt3(t,e);}function We2(t){var e=t.baseline,n=q15(t);return Math.round(e==="top"?.79*n:e==="middle"?.3*n:e==="bottom"?-.21*n:e==="line-top"?.29*n+.5*X14(t):e==="line-bottom"?.29*n-.5*X14(t):0);}const po={left:"start",center:"middle",right:"end"},At4=new E13;function Zt4(t){var e=t.x||0,n=t.y||0,i=t.radius||0,r;return i&&(r=(t.theta||0)-nt3,e+=i*Math.cos(r),n+=i*Math.sin(r)),At4.x1=e,At4.y1=n,At4;}function go(t,e){var n=e.dx||0,i=(e.dy||0)+We2(e),r=Zt4(e),o=r.x1,s=r.y1,l=e.angle||0,a;t("text-anchor",po[e.align]||"start"),l?(a=at5(o,s)+" "+Ne4(l),(n||i)&&(a+=" "+at5(n,i))):a=at5(o+n,s+i),t("transform",a);}function Ue3(t,e,n){var i=Y11.height(e),r=e.align,o=Zt4(e),s=o.x1,l=o.y1,a=e.dx||0,h=(e.dy||0)+We2(e)-Math.round(.8*i),u=Rt4(e),c;if(w1(u)?(i+=X14(e)*(u.length-1),c=u.reduce((f,d)=>Math.max(f,Y11.width(e,d)),0)):c=Y11.width(e,u),r==="center"?a-=c/2:r==="right"&&(a-=c),t.set(a+=s,h+=l,a+c,h+i),e.angle&&!n)t.rotate(e.angle*G13,s,l);else if(n===2)return t.rotatedPoints(e.angle*G13,s,l);return t;}function vo(t,e,n){O11(e,i=>{var r=i.opacity==null?1:i.opacity,o,s,l,a,h,u,c;if(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)return;if(t.font=Qt3(i),t.textAlign=i.align||"left",o=Zt4(i),s=o.x1,l=o.y1,i.angle&&(t.save(),t.translate(s,l),t.rotate(i.angle*G13),s=l=0),s+=i.dx||0,l+=(i.dy||0)+We2(i),u=Rt4(i),dt4(t,i),w1(u))for(h=X14(i),a=0;a<u.length;++a)c=J11(i,u[a]),i.fill&&Wt3(t,i,r)&&t.fillText(c,s,l),i.stroke&&pt3(t,i,r)&&t.strokeText(c,s,l),l+=h;else c=J11(i,u),i.fill&&Wt3(t,i,r)&&t.fillText(c,s,l),i.stroke&&pt3(t,i,r)&&t.strokeText(c,s,l);i.angle&&t.restore();});}function yo(t,e,n,i,r,o){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var s=Zt4(e),l=s.x1,a=s.y1,h=Ue3(At4,e,1),u=-e.angle*G13,c=Math.cos(u),f=Math.sin(u),d=c*r-f*o+(l-c*l+f*a),p=f*r+c*o+(a-f*l-c*a);return h.contains(d,p);}function _o(t,e){const n=Ue3(At4,t,2);return ft5(e,n[0],n[1],n[2],n[3])||ft5(e,n[0],n[1],n[4],n[5])||ft5(e,n[4],n[5],n[6],n[7])||ft5(e,n[2],n[3],n[6],n[7]);}var ko={type:"text",tag:"text",nested:!1,attr:go,bound:Ue3,draw:vo,pick:Yt4(yo),isect:_o},wo=He2("trail",vs,Ps),$8={arc:zs,area:Ss,group:js,image:Xs,line:Js,path:Qs,rect:eo,rule:oo,shape:ao,symbol:lo,text:ko,trail:wo};function Ye3(t,e,n){var i=$8[t.mark.marktype],r=e||i.bound;return i.nested&&(t=t.mark),r(t.bounds||(t.bounds=new E13),t,n);}var ri2={mark:null};function si2(t,e,n){var i=$8[t.marktype],r=i.bound,o=t.items,s=o&&o.length,l,a,h,u;if(i.nested)return s?h=o[0]:(ri2.mark=t,h=ri2),u=Ye3(h,r,n),e=e&&e.union(u)||u,e;if(e=e||t.bounds&&t.bounds.clear()||new E13,s)for(l=0,a=o.length;l<a;++l)e.union(Ye3(o[l],r,n));return t.bounds=e;}const bo=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function oi2(t,e){return JSON.stringify(t,bo,e);}function ai2(t){const e=typeof t=="string"?JSON.parse(t):t;return li2(e);}function li2(t){var e=t.marktype,n=t.items,i,r,o;if(n)for(r=0,o=n.length;r<o;++r)i=e?"mark":"group",n[r][i]=t,n[r].zindex&&(n[r][i].zdirty=!0),(e||i)==="group"&&li2(n[r]);return e&&si2(t),t;}function hi2(t){arguments.length?this.root=ai2(t):(this.root=ui2({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Ce3(this.root)]);}hi2.prototype={toJSON(t){return oi2(this.root,t||0);},mark(t,e,n){e=e||this.root.items[0];const i=ui2(t,e);return e.items[n]=i,i.zindex&&(i.group.zdirty=!0),i;}};function ui2(t,e){const n={bounds:new E13,clip:!!t.clip,group:e,interactive:!(t.interactive===!1),items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return t.aria!=null&&(n.aria=t.aria),t.description&&(n.description=t.description),n;}function F13(t,e,n){return!t&&typeof document!="undefined"&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null;}function Xe3(t,e){e=e.toLowerCase();for(var n=t.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===e)return n[i];}function w9(t,e,n,i){var r=t.childNodes[e],o;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(o=r||null,r=F13(t.ownerDocument,n,i),t.insertBefore(r,o)),r;}function L16(t,e){for(var n=t.childNodes,i=n.length;i>e;)t.removeChild(n[--i]);return t;}function ci1(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"");}function Je2(t,e){const n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)];}function xo(t,e,n,i){var r=t&&t.mark,o,s;if(r&&(o=$8[r.marktype]).tip){for(s=Je2(e,n),s[0]-=i[0],s[1]-=i[1];t=t.mark.group;)s[0]-=t.x||0,s[1]-=t.y||0;t=o.tip(r.items,s);}return t;}function K11(t,e){this._active=null,this._handlers={},this._loader=t||Dn1(),this._tooltip=e||To;}function To(t,e,n,i){t.element().setAttribute("title",i||"");}K11.prototype={initialize(t,e,n){return this._el=t,this._obj=n||null,this.origin(e);},element(){return this._el;},canvas(){return this._el&&this._el.firstChild;},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice();},scene(t){return arguments.length?(this._scene=t,this):this._scene;},on(){},off(){},_handlerIndex(t,e,n){for(let i=t?t.length:0;--i>=0;)if(t[i].type===e&&(!n||t[i].handler===n))return i;return-1;},handlers(t){const e=this._handlers,n=[];if(t)n.push(...e[this.eventName(t)]);else for(const i in e)n.push(...e[i]);return n;},eventName(t){const e=t.indexOf(".");return e<0?t:t.slice(0,e);},handleHref(t,e,n){this._loader.sanitize(n,{context:"href"}).then(i=>{const r=new MouseEvent(t.type,t),o=F13(null,"a");for(const s in i)o.setAttribute(s,i[s]);o.dispatchEvent(r);}).catch(()=>{});},handleTooltip(t,e,n){if(e&&e.tooltip!=null){e=xo(e,t,this.canvas(),this._origin);const i=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,i);}},getItemBoundingClientRect(t){const e=this.canvas();if(!e)return;const n=e.getBoundingClientRect(),i=this._origin,r=t.bounds,o=r.width(),s=r.height();let l=r.x1+i[0]+n.left,a=r.y1+i[1]+n.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,a+=t.y||0;return{x:l,y:a,width:o,height:s,left:l,top:a,right:l+o,bottom:a+s};}};function P12(t){this._el=null,this._bgcolor=null,this._loader=new Re4(t);}P12.prototype={initialize(t,e,n,i,r){return this._el=t,this.resize(e,n,i,r);},element(){return this._el;},canvas(){return this._el&&this._el.firstChild;},background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this);},resize(t,e,n,i){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=i||1,this;},dirty(){},render(t,e){const n=this;return n._call=function(){n._render(t,e);},n._call(),n._call=null,n;},_render(){},renderAsync(t,e){const n=this.render(t,e);return this._ready?this._ready.then(()=>n):Promise.resolve(n);},_load(t,e){var n=this,i=n._loader[t](e);if(!n._ready){const r=n._call;n._ready=n._loader.ready().then(o=>{o&&r(),n._ready=null;});}return i;},sanitizeURL(t){return this._load("sanitizeURL",t);},loadImage(t){return this._load("loadImage",t);}};const Mo="keydown",Co="keypress",Ro="keyup",fi2="dragenter",te8="dragleave",di1="dragover",Fe3="pointerdown",zo="pointerup",ee8="pointermove",Et2="pointerout",pi2="pointerover",Ke2="mousedown",Ao="mouseup",gi1="mousemove",Qe4="mouseout",vi1="mouseover",ne9="click",Eo="dblclick",Po="wheel",yi2="mousewheel",ie6="touchstart",re8="touchmove",se5="touchend",So=[Mo,Co,Ro,fi2,te8,di1,Fe3,zo,ee8,Et2,pi2,Ke2,Ao,gi1,Qe4,vi1,ne9,Eo,Po,yi2,ie6,re8,se5],Ze1=ee8,Pt5=Et2,tn5=ne9;function gt2(t,e){K11.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={};}const Lo=t=>t===ie6||t===re8||t===se5?[ie6,re8,se5]:[t];function _i1(t,e){Lo(e).forEach(n=>mo(t,n));}function mo(t,e){const n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?i=>t[e](i):i=>t.fire(e,i)));}function St2(t,e,n){e.forEach(i=>t.fire(i,n));}function ki(t,e,n){return function(i){const r=this._active,o=this.pickEvent(i);o===r?St2(this,t,i):((!r||!r.exit)&&St2(this,n,i),this._active=o,St2(this,e,i),St2(this,t,i));};}function wi(t){return function(e){St2(this,t,e),this._active=null;};}Pn(gt2,K11,{initialize(t,e,n){return this._canvas=t&&Xe3(t,"canvas"),[ne9,Ke2,Fe3,ee8,Et2,te8].forEach(i=>_i1(this,i)),K11.prototype.initialize.call(this,t,e,n);},canvas(){return this._canvas;},context(){return this._canvas.getContext("2d");},events:So,DOMMouseScroll(t){this.fire(yi2,t);},pointermove:ki([ee8,gi1],[pi2,vi1],[Et2,Qe4]),dragover:ki([di1],[fi2],[te8]),pointerout:wi([Et2,Qe4]),dragleave:wi([te8]),pointerdown(t){this._down=this._active,this.fire(Fe3,t);},mousedown(t){this._down=this._active,this.fire(Ke2,t);},click(t){this._down===this._active&&(this.fire(ne9,t),this._down=null);},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(ie6,t,!0);},touchmove(t){this.fire(re8,t,!0);},touchend(t){this.fire(se5,t,!0),this._touch=null;},fire(t,e,n){const i=n?this._touch:this._active,r=this._handlers[t];if(e.vegaType=t,t===tn5&&i&&i.href?this.handleHref(e,i,i.href):(t===Ze1||t===Pt5)&&this.handleTooltip(e,i,t!==Pt5),r)for(let o=0,s=r.length;o<s;++o)r[o].handler.call(this._obj,e,i);},on(t,e){const n=this.eventName(t),i=this._handlers,r=this._handlerIndex(i[n],t,e);return r<0&&(_i1(this,t),(i[n]||(i[n]=[])).push({type:t,handler:e})),this;},off(t,e){const n=this.eventName(t),i=this._handlers[n],r=this._handlerIndex(i,t,e);return r>=0&&i.splice(r,1),this;},pickEvent(t){const e=Je2(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1]);},pick(t,e,n,i,r){const o=this.context(),s=$8[t.marktype];return s.pick.call(this,o,t,e,n,i,r);}});function Oo(){return typeof window!="undefined"&&window.devicePixelRatio||1;}function $o(t,e,n,i,r,o){const s=typeof HTMLElement!="undefined"&&t instanceof HTMLElement&&t.parentNode!=null,l=t.getContext("2d"),a=s?Oo():r;t.width=e*a,t.height=n*a;for(const h in o)l[h]=o[h];return s&&a!==1&&(t.style.width=e+"px",t.style.height=n+"px"),l.pixelRatio=a,l.setTransform(a,0,0,a,a*i[0],a*i[1]),t;}function Lt4(t){P12.call(this,t),this._options={},this._redraw=!1,this._dirty=new E13,this._tempb=new E13;}const bi1=P12.prototype,Io=(t,e,n)=>new E13().set(0,0,e,n).translate(-t[0],-t[1]);function Do(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-(n[0]%1),-(n[1]%1)),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e;}Pn(Lt4,P12,{initialize(t,e,n,i,r,o){return this._options=o||{},this._canvas=this._options.externalContext?null:n1(1,1,this._options.type),t&&this._canvas&&(L16(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),bi1.initialize.call(this,t,e,n,i,r);},resize(t,e,n,i){if(bi1.resize.call(this,t,e,n,i),this._canvas)$o(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const r=this._options.externalContext;r||b("CanvasRenderer is missing a valid canvas or context"),r.scale(this._scale,this._scale),r.translate(this._origin[0],this._origin[1]);}return this._redraw=!0,this;},canvas(){return this._canvas;},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null);},dirty(t){const e=this._tempb.clear().union(t.bounds);let n=t.mark.group;for(;n;)e.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(e);},_render(t,e){const n=this.context(),i=this._origin,r=this._width,o=this._height,s=this._dirty,l=Io(i,r,o);n.save();const a=this._redraw||s.empty()?(this._redraw=!1,l.expand(1)):Do(n,l.intersect(s),i);return this.clear(-i[0],-i[1],r,o),this.draw(n,t,a,e),n.restore(),s.clear(),this;},draw(t,e,n,i){if(e.marktype!=="group"&&i!=null&&!i.includes(e.marktype))return;const r=$8[e.marktype];e.clip&&Ls(t,e),r.draw.call(this,t,e,n,i),e.clip&&t.restore();},clear(t,e,n,i){const r=this._options,o=this.context();r.type!=="pdf"&&!r.externalContext&&o.clearRect(t,e,n,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,e,n,i));}});function en5(t,e){K11.call(this,t,e);const n=this;n._hrefHandler=nn5(n,(i,r)=>{r&&r.href&&n.handleHref(i,r,r.href);}),n._tooltipHandler=nn5(n,(i,r)=>{n.handleTooltip(i,r,i.type!==Pt5);});}const nn5=(t,e)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,e.call(t._obj,n,i);};Pn(en5,K11,{initialize(t,e,n){let i=this._svg;return i&&(i.removeEventListener(tn5,this._hrefHandler),i.removeEventListener(Ze1,this._tooltipHandler),i.removeEventListener(Pt5,this._tooltipHandler)),this._svg=i=t&&Xe3(t,"svg"),i&&(i.addEventListener(tn5,this._hrefHandler),i.addEventListener(Ze1,this._tooltipHandler),i.addEventListener(Pt5,this._tooltipHandler)),K11.prototype.initialize.call(this,t,e,n);},canvas(){return this._svg;},on(t,e){const n=this.eventName(t),i=this._handlers,r=this._handlerIndex(i[n],t,e);if(r<0){const o={type:t,handler:e,listener:nn5(this,e)};(i[n]||(i[n]=[])).push(o),this._svg&&this._svg.addEventListener(n,o.listener);}return this;},off(t,e){const n=this.eventName(t),i=this._handlers[n],r=this._handlerIndex(i,t,e);return r>=0&&(this._svg&&this._svg.removeEventListener(n,i[r].listener),i.splice(r,1)),this;}});const xi1="aria-hidden",rn6="aria-label",sn4="role",on5="aria-roledescription",Ti="graphics-object",an5="graphics-symbol",Mi=(t,e,n)=>({[sn4]:t,[on5]:e,[rn6]:n||void 0}),No=Xn(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Ci={axis:{desc:"axis",caption:Vo},legend:{desc:"legend",caption:Bo},"title-text":{desc:"title",caption:t=>`Title text '${Ei(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${Ei(t)}'`}},Ri={ariaRole:sn4,ariaRoleDescription:on5,description:rn6};function zi(t,e){const n=e.aria===!1;if(t(xi1,n||void 0),n||e.description==null)for(const i in Ri)t(Ri[i],void 0);else{const i=e.mark.marktype;t(rn6,e.description),t(sn4,e.ariaRole||(i==="group"?Ti:an5)),t(on5,e.ariaRoleDescription||`${i} mark`);}}function Ai(t){return t.aria===!1?{[xi1]:!0}:No[t.role]?null:Ci[t.role]?Ho(t,Ci[t.role]):qo(t);}function qo(t){const e=t.marktype,n=e==="group"||e==="text"||t.items.some(i=>i.description!=null&&i.aria!==!1);return Mi(n?Ti:an5,`${e} mark container`,t.description);}function Ho(t,e){try{const n=t.items[0],i=e.caption||(()=>"");return Mi(e.role||an5,e.desc,n.description||i(n));}catch(n){return null;}}function Ei(t){return p(t.text).join(" ");}function Vo(t){const e=t.datum,n=t.orient,i=e.title?Pi(t):null,r=t.context,o=r.scales[e.scale].value,s=r.dataflow.locale(),l=o.type,a=n==="left"||n==="right"?"Y":"X";return`${a}-axis`+(i?` titled '${i}'`:"")+` for a ${te7(l)?"discrete":l} scale with ${Qf(s,o,t)}`;}function Bo(t){const e=t.datum,n=e.title?Pi(t):null,i=`${e.type||""} legend`.trim(),r=e.scales,o=Object.keys(r),s=t.context,l=s.scales[r[o[0]]].value,a=s.dataflow.locale();return jo(i)+(n?` titled '${n}'`:"")+` for ${Go(o)} with ${Qf(a,l,t)}`;}function Pi(t){try{return p(a(t.items).items[0].text).join(" ");}catch(e){return null;}}function Go(t){return t=t.map(e=>e+(e==="fill"||e==="stroke"?" color":"")),t.length<2?t[0]:t.slice(0,-1).join(", ")+" and "+a(t);}function jo(t){return t.length?t[0].toUpperCase()+t.slice(1):t;}const Si=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Wo=t=>Si(t).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function ln6(){let t="",e="",n="";const i=[],r=()=>e=n="",o=a=>{e&&(t+=`${e}>${n}`,r()),i.push(a);},s=(a,h)=>(h!=null&&(e+=` ${a}="${Wo(h)}"`),l),l={open(a){o(a),e="<"+a;for(var h=arguments.length,u=new Array(h>1?h-1:0),c=1;c<h;c++)u[c-1]=arguments[c];for(const f of u)for(const d in f)s(d,f[d]);return l;},close(){const a=i.pop();return e?t+=e+(n?`>${n}</${a}>`:"/>"):t+=`</${a}>`,r(),l;},attr:s,text:a=>(n+=Si(a),l),toString:()=>t};return l;}const Li=t=>mi1(ln6(),t)+"";function mi1(t,e){if(t.open(e.tagName),e.hasAttributes()){const n=e.attributes,i=n.length;for(let r=0;r<i;++r)t.attr(n[r].name,n[r].value);}if(e.hasChildNodes()){const n=e.childNodes;for(const i of n)i.nodeType===3?t.text(i.nodeValue):mi1(t,i);}return t.close();}const oe7={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},ae5={blend:"mix-blend-mode"},Oi={fill:"none","stroke-miterlimit":10},mt2=0,$i="http://www.w3.org/2000/xmlns/",b7=Ct3.xmlns;function le6(t){P12.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null;}const hn5=P12.prototype;Pn(le6,P12,{initialize(t,e,n,i,r){return this._defs={},this._clearDefs(),t&&(this._svg=w9(t,0,"svg",b7),this._svg.setAttributeNS($i,"xmlns",b7),this._svg.setAttributeNS($i,"xmlns:xlink",Ct3["xmlns:xlink"]),this._svg.setAttribute("version",Ct3.version),this._svg.setAttribute("class","marks"),L16(t,1),this._root=w9(this._svg,mt2,"g",b7),Q11(this._root,Oi),L16(this._svg,0+1)),this.background(this._bgcolor),hn5.initialize.call(this,t,e,n,i,r);},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),hn5.background.apply(this,arguments);},resize(t,e,n,i){return hn5.resize.call(this,t,e,n,i),this._svg&&(Q11(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this;},canvas(){return this._svg;},svg(){const t=this._svg,e=this._bgcolor;if(!t)return null;let n;e&&(t.removeAttribute("style"),n=w9(t,mt2,"rect",b7),Q11(n,{width:this._width,height:this._height,fill:e}));const i=Li(t);return e&&(t.removeChild(n),this._svg.style.setProperty("background-color",e)),i;},_render(t,e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,e),L16(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this;},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t));},isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID;},_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const e=++this._dirtyID;let n,i,r,o,s,l,a;for(s=0,l=t.length;s<l;++s){if(n=t[s],i=n.mark,i.marktype!==r&&(r=i.marktype,o=$8[r]),i.zdirty&&i.dirty!==e&&(this._dirtyAll=!1,Ii(n,e),i.items.forEach(h=>{h.dirty=e;})),i.zdirty)continue;if(n.exit){o.nested&&i.items.length?(a=i.items[0],a._svg&&this._update(o,a._svg,a)):n._svg&&(a=n._svg.parentNode,a&&a.removeChild(n._svg)),n._svg=null;continue;}if(n=o.nested?i.items[0]:n,n._update===e)continue;!n._svg||!n._svg.ownerSVGElement?(this._dirtyAll=!1,Ii(n,e)):this._update(o,n._svg,n),n._update=e;}return!this._dirtyAll;},mark(t,e,n,i){if(!this.isDirty(e))return e._svg;const r=this._svg,o=e.marktype,s=$8[o],l=e.interactive===!1?"none":null,a=s.tag==="g",h=Di(e,t,n,"g",r);if(o!=="group"&&i!=null&&!i.includes(o))return L16(h,0),e._svg;h.setAttribute("class",ci1(e));const u=Ai(e);for(const p in u)C11(h,p,u[p]);a||C11(h,"pointer-events",l),C11(h,"clip-path",e.clip?Te3(this,e,e.group):null);let c=null,f=0;const d=p=>{const g=this.isDirty(p),v=Di(p,h,c,s.tag,r);g&&(this._update(s,v,p),a&&Xo(this,v,p,i)),c=v,++f;};return s.nested?e.items.length&&d(e.items[0]):O11(e,d),L16(h,f),h;},_update(t,e,n){V8=e,M9=e.__values__,zi(Ot2,n),t.attr(Ot2,n,this);const i=Fo[t.type];i&&i.call(this,t,e,n),V8&&this.style(V8,n);},style(t,e){if(e==null)return;for(const n in oe7){let i=n==="font"?zt3(e):e[n];if(i===M9[n])continue;const r=oe7[n];i==null?t.removeAttribute(r):(ye5(i)&&(i=Rn5(i,this._defs.gradient,Ni())),t.setAttribute(r,i+"")),M9[n]=i;}for(const n in ae5)he5(t,ae5[n],e[n]);},defs(){const t=this._svg,e=this._defs;let n=e.el,i=0;for(const r in e.gradient)n||(e.el=n=w9(t,mt2+1,"defs",b7)),i=Uo(n,e.gradient[r],i);for(const r in e.clipping)n||(e.el=n=w9(t,mt2+1,"defs",b7)),i=Yo(n,e.clipping[r],i);n&&(i===0?(t.removeChild(n),e.el=null):L16(n,i));},_clearDefs(){const t=this._defs;t.gradient={},t.clipping={};}});function Ii(t,e){for(;t&&t.dirty!==e;t=t.mark.group)if(t.dirty=e,t.mark&&t.mark.dirty!==e)t.mark.dirty=e;else return;}function Uo(t,e,n){let i,r,o;if(e.gradient==="radial"){let s=w9(t,n++,"pattern",b7);Q11(s,{id:It2+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=w9(s,0,"rect",b7),Q11(s,{width:1,height:1,fill:`url(${Ni()}#${e.id})`}),t=w9(t,n++,"radialGradient",b7),Q11(t,{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2});}else t=w9(t,n++,"linearGradient",b7),Q11(t,{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(i=0,r=e.stops.length;i<r;++i)o=w9(t,i,"stop",b7),o.setAttribute("offset",e.stops[i].offset),o.setAttribute("stop-color",e.stops[i].color);return L16(t,i),n;}function Yo(t,e,n){let i;return t=w9(t,n,"clipPath",b7),t.setAttribute("id",e.id),e.path?(i=w9(t,0,"path",b7),i.setAttribute("d",e.path)):(i=w9(t,0,"rect",b7),Q11(i,{x:0,y:0,width:e.width,height:e.height})),L16(t,1),n+1;}function Xo(t,e,n,i){e=e.lastChild.previousSibling;let r,o=0;O11(n,s=>{r=t.mark(e,s,r,i),++o;}),L16(e,1+o);}function Di(t,e,n,i,r){let o=t._svg,s;if(!o&&(s=e.ownerDocument,o=F13(s,i,b7),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},i==="g"))){const l=F13(s,"path",b7);o.appendChild(l),l.__data__=t;const a=F13(s,"g",b7);o.appendChild(a),a.__data__=t;const h=F13(s,"path",b7);o.appendChild(h),h.__data__=t,h.__values__={fill:"default"};}return(o.ownerSVGElement!==r||Jo(o,n))&&e.insertBefore(o,n?n.nextSibling:e.firstChild),o;}function Jo(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e;}let V8=null,M9=null;const Fo={group(t,e,n){const i=V8=e.childNodes[2];M9=i.__values__,t.foreground(Ot2,n,this),M9=e.__values__,V8=e.childNodes[1],t.content(Ot2,n,this);const r=V8=e.childNodes[0];t.background(Ot2,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==M9.events&&(C11(i,"pointer-events",o),C11(r,"pointer-events",o),M9.events=o),n.strokeForeground&&n.stroke){const s=n.fill;C11(i,"display",null),this.style(r,n),C11(r,"stroke",null),s&&(n.fill=null),M9=i.__values__,this.style(i,n),s&&(n.fill=s),V8=null;}else C11(i,"display","none");},image(t,e,n){n.smooth===!1?(he5(e,"image-rendering","optimizeSpeed"),he5(e,"image-rendering","pixelated")):he5(e,"image-rendering",null);},text(t,e,n){const i=Rt4(n);let r,o,s,l;w1(i)?(o=i.map(a=>J11(n,a)),r=o.join(`
`),r!==M9.text&&(L16(e,0),s=e.ownerDocument,l=X14(n),o.forEach((a,h)=>{const u=F13(s,"tspan",b7);u.__data__=n,u.textContent=a,h&&(u.setAttribute("x",0),u.setAttribute("dy",l)),e.appendChild(u);}),M9.text=r)):(o=J11(n,i),o!==M9.text&&(e.textContent=o,M9.text=o)),C11(e,"font-family",zt3(n)),C11(e,"font-size",q15(n)+"px"),C11(e,"font-style",n.fontStyle),C11(e,"font-variant",n.fontVariant),C11(e,"font-weight",n.fontWeight);}};function Ot2(t,e,n){if(e===M9[t])return;n?Ko(V8,t,e,n):C11(V8,t,e),M9[t]=e;}function he5(t,e,n){n!==M9[e]&&(n==null?t.style.removeProperty(e):t.style.setProperty(e,n+""),M9[e]=n);}function Q11(t,e){for(const n in e)C11(t,n,e[n]);}function C11(t,e,n){n!=null?t.setAttribute(e,n):t.removeAttribute(e);}function Ko(t,e,n,i){n!=null?t.setAttributeNS(i,e,n):t.removeAttributeNS(i,e);}function Ni(){let t;return typeof window=="undefined"?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href;}function un6(t){P12.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}};}Pn(un6,P12,{svg(){return this._text;},_render(t){const e=ln6();e.open("svg",J1({},Ct3,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&n!=="transparent"&&n!=="none"&&e.open("rect",{width:this._width,height:this._height,fill:n}).close(),e.open("g",Oi,{transform:"translate("+this._origin+")"}),this.mark(e,t),e.close(),this.defs(e),this._text=e.close()+"",this;},mark(t,e){const n=$8[e.marktype],i=n.tag,r=[zi,n.attr];t.open("g",{class:ci1(e),"clip-path":e.clip?Te3(this,e,e.group):null},Ai(e),{"pointer-events":i!=="g"&&e.interactive===!1?"none":null});const o=s=>{const l=this.href(s);if(l&&t.open("a",l),t.open(i,this.attr(e,s,r,i!=="g"?i:null)),i==="text"){const a=Rt4(s);if(w1(a)){const h={x:0,dy:X14(s)};for(let u=0;u<a.length;++u)t.open("tspan",u?h:null).text(J11(s,a[u])).close();}else t.text(J11(s,a));}else if(i==="g"){const a=s.strokeForeground,h=s.fill,u=s.stroke;a&&u&&(s.stroke=null),t.open("path",this.attr(e,s,n.background,"bgrect")).close(),t.open("g",this.attr(e,s,n.content)),O11(s,c=>this.mark(t,c)),t.close(),a&&u?(h&&(s.fill=null),s.stroke=u,t.open("path",this.attr(e,s,n.foreground,"bgrect")).close(),h&&(s.fill=h)):t.open("path",this.attr(e,s,n.foreground,"bgfore")).close();}t.close(),l&&t.close();};return n.nested?e.items&&e.items.length&&o(e.items[0]):O11(e,o),t.close();},href(t){const e=t.href;let n;if(e){if(n=this._hrefs&&this._hrefs[e])return n;this.sanitizeURL(e).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[e]=i;});}return null;},attr(t,e,n,i){const r={},o=(s,l,a,h)=>{r[h||s]=l;};return Array.isArray(n)?n.forEach(s=>s(o,e,this)):n(o,e,this),i&&Qo(r,e,t,i,this._defs),r;},defs(t){const e=this._defs.gradient,n=this._defs.clipping,i=Object.keys(e).length+Object.keys(n).length;if(i===0)return;t.open("defs");for(const r in e){const o=e[r],s=o.stops;o.gradient==="radial"?(t.open("pattern",{id:It2+r,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+r+")"}).close(),t.close(),t.open("radialGradient",{id:r,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:r,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let l=0;l<s.length;++l)t.open("stop",{offset:s[l].offset,"stop-color":s[l].color}).close();t.close();}for(const r in n){const o=n[r];t.open("clipPath",{id:r}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close();}t.close();}});function Qo(t,e,n,i,r){let o;if(e==null)return t;if(i==="bgrect"&&n.interactive===!1&&(t["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(t["pointer-events"]="none"),t.display="none",e.fill!==null))return t;i==="image"&&e.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(t["font-family"]=zt3(e),t["font-size"]=q15(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(const s in oe7){let l=e[s];const a=oe7[s];l==="transparent"&&(a==="fill"||a==="stroke")||l!=null&&(ye5(l)&&(l=Rn5(l,r.gradient,"")),t[a]=l);}for(const s in ae5){const l=e[s];l!=null&&(o=o||[],o.push(`${ae5[s]}: ${l};`));}return o&&(t.style=o.join(" ")),t;}const I13={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Zo(t){I13.svgMarkTypes=t.svgMarkTypes??["text"],I13.svgOnTop=t.svgOnTop??!0,I13.debug=t.debug??!1;}function ue7(t){P12.call(this,t),this._svgRenderer=new le6(t),this._canvasRenderer=new Lt4(t);}const qi=P12.prototype;Pn(ue7,P12,{initialize(t,e,n,i,r){this._root_el=w9(t,0,"div");const o=w9(this._root_el,0,"div"),s=w9(this._root_el,1,"div");return this._root_el.style.position="relative",I13.debug||(o.style.height="100%",s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.height="100%",s.style.width="100%"),this._svgEl=I13.svgOnTop?s:o,this._canvasEl=I13.svgOnTop?o:s,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,e,n,i,r),this._svgRenderer.initialize(this._svgEl,e,n,i,r),qi.initialize.call(this,t,e,n,i,r);},dirty(t){return I13.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this;},_render(t,e){const n=e??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"],i=n.filter(r=>!I13.svgMarkTypes.includes(r));this._svgRenderer.render(t,I13.svgMarkTypes),this._canvasRenderer.render(t,i);},resize(t,e,n,i){return qi.resize.call(this,t,e,n,i),this._svgRenderer.resize(t,e,n,i),this._canvasRenderer.resize(t,e,n,i),this;},background(t){return I13.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this;}});function cn5(t,e){gt2.call(this,t,e);}Pn(cn5,gt2,{initialize(t,e,n){const i=w9(w9(t,0,"div"),I13.svgOnTop?0:1,"div");return gt2.prototype.initialize.call(this,i,e,n);}});const Hi="canvas",Vi="hybrid",Bi="png",Gi="svg",ji="none",ta={Canvas:Hi,PNG:Bi,SVG:Gi,Hybrid:Vi,None:ji},lt5={};lt5[Hi]=lt5[Bi]={renderer:Lt4,headless:Lt4,handler:gt2},lt5[Gi]={renderer:le6,headless:un6,handler:en5},lt5[Vi]={renderer:ue7,headless:ue7,handler:cn5},lt5[ji]={};function ea(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(lt5[t]=e,this):lt5[t];}function na(t,e,n){const i=[],r=new E13().union(e),o=t.marktype;return o?Wi(t,r,n,i):o==="group"?Ui(t,r,n,i):b("Intersect scene must be mark node or group item.");}function Wi(t,e,n,i){if(ia(t,e,n)){const r=t.items,o=t.marktype,s=r.length;let l=0;if(o==="group")for(;l<s;++l)Ui(r[l],e,n,i);else for(const a=$8[o].isect;l<s;++l){const h=r[l];Yi(h,e,a)&&i.push(h);}}return i;}function ia(t,e,n){return t.bounds&&e.intersects(t.bounds)&&(t.marktype==="group"||t.interactive!==!1&&(!n||n(t)));}function Ui(t,e,n,i){n&&n(t.mark)&&Yi(t,e,$8.group.isect)&&i.push(t);const r=t.items,o=r&&r.length;if(o){const s=t.x||0,l=t.y||0;e.translate(-s,-l);for(let a=0;a<o;++a)Wi(r[a],e,n,i);e.translate(s,l);}return i;}function Yi(t,e,n){const i=t.bounds;return e.encloses(i)||e.intersects(i)&&n(t,e);}const fn5=new E13;function ra(t){const e=t.clip;if(O1(e))e(xt4(fn5.clear()));else if(e)fn5.set(0,0,t.group.width,t.group.height);else return;t.bounds.intersect(fn5);}function dn5(t,e,n){return t===e?!0:n==="path"?Xi(t,e):t instanceof Date&&e instanceof Date?+t===+e:V(t)&&V(e)?Math.abs(t-e)<=1e-9:!t||!e||!M1(t)&&!M1(e)?t==e:oa(t,e);}function Xi(t,e){return dn5(yt1(t),yt1(e));}function oa(t,e){var n=Object.keys(t),i=Object.keys(e),r,o;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),o=n.length-1;o>=0;o--)if(n[o]!=i[o])return!1;for(o=n.length-1;o>=0;o--)if(r=n[o],!dn5(t[r],e[r],r))return!1;return typeof t===typeof e;}function aa(){In2(),Mr1();}const Y12="top",S14="left",v10="right",j13="bottom",Yt5="top-left",Nt4="top-right",Wt4="bottom-left",Xt5="bottom-right",Q12="start",_13="middle",T9="end",qt5="x",Vt4="y",V9="group",tt3="axis",nt4="title",Ut3="frame",Jt4="scope",ot6="legend",ut5="row-header",ft6="row-footer",ht3="row-title",mt3="column-header",yt2="column-footer",bt5="column-title",Kt4="padding",Zt5="symbol",xt5="fit",gt3="fit-x",kt4="fit-y",$t2="pad",et5="none",U14="all",at6="each",rt5="flush",B13="column",G14="row";function Mt4(n){dt2.call(this,null,n);}Pn(Mt4,dt2,{transform(n,t){const o=t.dataflow,r=n.mark,a=r.marktype,i=$8[a],s=i.bound;let c=r.bounds,l;if(i.nested)r.items.length&&o.dirty(r.items[0]),c=J12(r,s),r.items.forEach(u=>{u.bounds.clear().union(c);});else if(a===V9||n.modified()){t.visit(t.MOD,u=>o.dirty(u)),c.clear(),r.items.forEach(u=>c.union(J12(u,s)));switch(r.role){case tt3:case ot6:case nt4:t.reflow();}}else l=t.changed(t.REM),t.visit(t.ADD,u=>{c.union(J12(u,s));}),t.visit(t.MOD,u=>{l=l||c.alignsWith(u.bounds),o.dirty(u),c.union(J12(u,s));}),l&&(c.clear(),r.items.forEach(u=>c.union(u.bounds)));return ra(r),t.modifies("bounds");}});function J12(n,t,o){return t(n.bounds.clear(),n,o);}const wt3=":vega_identifier:";function it5(n){dt2.call(this,0,n);}it5.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},Pn(it5,dt2,{transform(n,t){const o=Qt4(t.dataflow),r=n.as;let a=o.value;return t.visit(t.ADD,i=>i[r]=i[r]||++a),o.set(this.value=a),t;}});function Qt4(n){return n._signals[wt3]||(n._signals[wt3]=n.add(0));}function pt4(n){dt2.call(this,null,n);}Pn(pt4,dt2,{transform(n,t){let o=this.value;o||(o=t.dataflow.scenegraph().mark(n.markdef,_t3(n),n.index),o.group.context=n.context,n.context.group||(n.context.group=o.group),o.source=this.source,o.clip=n.clip,o.interactive=n.interactive,this.value=o);const r=o.marktype===V9?Ce3:Me5;return t.visit(t.ADD,a=>r.call(a,o)),(n.modified("clip")||n.modified("interactive"))&&(o.clip=n.clip,o.interactive=!!n.interactive,o.zdirty=!0,t.reflow()),o.items=t.source,t;}});function _t3(n){const t=n.groups,o=n.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&o?t.lookup(o):null;}function Et3(n){dt2.call(this,null,n);}const Rt5={parity:n=>n.filter((t,o)=>o%2?t.opacity=0:1),greedy:(n,t)=>{let o;return n.filter((r,a)=>!a||!Lt5(o.bounds,r.bounds,t)?(o=r,1):r.opacity=0);}},Lt5=(n,t,o)=>o>Math.max(t.x1-n.x2,n.x1-t.x2,t.y1-n.y2,n.y1-t.y2),zt4=(n,t)=>{for(var o=1,r=n.length,a=n[0].bounds,i;o<r;a=i,++o)if(Lt5(a,i=n[o].bounds,t))return!0;},tn6=n=>{const t=n.bounds;return t.width()>1&&t.height()>1;},nn6=(n,t,o)=>{var r=n.range(),a=new E13;return t===Y12||t===j13?a.set(r[0],-Infinity,r[1],Infinity):a.set(-Infinity,r[0],Infinity,r[1]),a.expand(o||1),i=>a.encloses(i.bounds);},At5=n=>(n.forEach(t=>t.opacity=1),n),Tt5=(n,t)=>n.reflow(t.modified()).modifies("opacity");Pn(Et3,dt2,{transform(n,t){const o=Rt5[n.method]||Rt5.parity,r=n.separation||0;let a1=t.materialize(t.SOURCE).source,i,s;if(!a1||!a1.length)return;if(!n.method)return n.modified("method")&&(At5(a1),t=Tt5(t,n)),t;if(a1=a1.filter(tn6),!a1.length)return;if(n.sort&&(a1=a1.slice().sort(n.sort)),i=At5(a1),t=Tt5(t,n),i.length>=3&&zt4(i,r)){do i=o(i,r);while(i.length>=3&&zt4(i,r))i.length<3&&!a(a1).opacity&&(i.length>1&&(a(i).opacity=0),a(a1).opacity=1);}n.boundScale&&n.boundTolerance>=0&&(s=nn6(n.boundScale,n.boundOrient,+n.boundTolerance),a1.forEach(l=>{s(l)||(l.opacity=0);}));const c=i[0].mark.bounds.clear();return a1.forEach(l=>{l.opacity&&c.union(l.bounds);}),t;}});function Ot3(n){dt2.call(this,null,n);}Pn(Ot3,dt2,{transform(n,t){const o=t.dataflow;if(t.visit(t.ALL,r=>o.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0);}}});const A13=new E13;function N12(n,t,o){return n[t]===o?0:(n[t]=o,1);}function on6(n){var t=n.items[0].orient;return t===S14||t===v10;}function en6(n){let t=+n.grid;return[n.ticks?t++:-1,n.labels?t++:-1,t+ +n.domain];}function an6(n,t,o,r){var a=t.items[0],i=a.datum,s=a.translate!=null?a.translate:.5,c=a.orient,l=en6(i),u=a.range,d=a.offset,m=a.position,h=a.minExtent,x=a.maxExtent,b=i.title&&a.items[l[2]].items[0],g=a.titlePadding,f=a.bounds,y=b&&uo(b),k=0,M=0,L,E;A13.clear().union(f),f.clear(),(L=l[0])>-1&&f.union(a.items[L].bounds),(L=l[1])>-1&&f.union(a.items[L].bounds);switch(c){case Y12:k=m||0,M=-d,E=Math.max(h,Math.min(x,-f.y1)),f.add(0,-E).add(u,0),b&&K12(n,b,E,g,y,0,-1,f);break;case S14:k=-d,M=m||0,E=Math.max(h,Math.min(x,-f.x1)),f.add(-E,0).add(0,u),b&&K12(n,b,E,g,y,1,-1,f);break;case v10:k=o+d,M=m||0,E=Math.max(h,Math.min(x,f.x2)),f.add(0,0).add(E,u),b&&K12(n,b,E,g,y,1,1,f);break;case j13:k=m||0,M=r+d,E=Math.max(h,Math.min(x,f.y2)),f.add(0,0).add(u,E),b&&K12(n,b,E,g,0,0,1,f);break;default:k=a.x,M=a.y;}return it4(f.translate(k,M),a),N12(a,"x",k+s)|N12(a,"y",M+s)&&(a.bounds=A13,n.dirty(a),a.bounds=f,n.dirty(a)),a.mark.bounds.clear().union(f);}function K12(n,t,o,r,a,i,s,c){const l=t.bounds;if(t.auto){const u=s*(o+a+r);let d=0,m=0;n.dirty(t),i?d=(t.x||0)-(t.x=u):m=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-d,-m)),n.dirty(t);}c.union(l);}const Ft3=(n,t)=>Math.floor(Math.min(n,t)),It3=(n,t)=>Math.ceil(Math.max(n,t));function rn7(n){var t=n.items,o=t.length,r=0,a,i;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<o;++r)if(a=t[r],i=a.items,a.marktype===V9)switch(a.role){case tt3:case ot6:case nt4:break;case ut5:s.rowheaders.push(...i);break;case ft6:s.rowfooters.push(...i);break;case mt3:s.colheaders.push(...i);break;case yt2:s.colfooters.push(...i);break;case ht3:s.rowtitle=i[0];break;case bt5:s.coltitle=i[0];break;default:s.marks.push(...i);}return s;}function sn5(n){return new E13().set(0,0,n.width||0,n.height||0);}function cn6(n){const t=n.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(n.x||0),-(n.y||0));}function w10(n,t,o){const r=M1(n)?n[t]:n;return r??(o!==void 0?o:0);}function Ct4(n){return n<0?Math.ceil(-n):0;}function Dt3(n,t,o){var r=!o.nodirty,a=o.bounds===rt5?sn5:cn6,i=A13.set(0,0,0,0),s=w10(o.align,B13),c=w10(o.align,G14),l=w10(o.padding,B13),u=w10(o.padding,G14),d=o.columns||t.length,m=d<=0?1:Math.ceil(t.length/d),h=t.length,x=Array(h),b=Array(d),g=0,f=Array(h),y=Array(m),k=0,M=Array(h),L=Array(h),E=Array(h),O,e,p,R,P,I,st,ct,F,C,z;for(e=0;e<d;++e)b[e]=0;for(e=0;e<m;++e)y[e]=0;for(e=0;e<h;++e)I=t[e],P=E[e]=a(I),I.x=I.x||0,M[e]=0,I.y=I.y||0,L[e]=0,p=e%d,R=~~(e/d),g=Math.max(g,st=Math.ceil(P.x2)),k=Math.max(k,ct=Math.ceil(P.y2)),b[p]=Math.max(b[p],st),y[R]=Math.max(y[R],ct),x[e]=l+Ct4(P.x1),f[e]=u+Ct4(P.y1),r&&n.dirty(t[e]);for(e=0;e<h;++e)e%d===0&&(x[e]=0),e<d&&(f[e]=0);if(s===at6)for(p=1;p<d;++p){for(z=0,e=p;e<h;e+=d)z<x[e]&&(z=x[e]);for(e=p;e<h;e+=d)x[e]=z+b[p-1];}else if(s===U14){for(z=0,e=0;e<h;++e)e%d&&z<x[e]&&(z=x[e]);for(e=0;e<h;++e)e%d&&(x[e]=z+g);}else for(s=!1,p=1;p<d;++p)for(e=p;e<h;e+=d)x[e]+=b[p-1];if(c===at6)for(R=1;R<m;++R){for(z=0,e=R*d,O=e+d;e<O;++e)z<f[e]&&(z=f[e]);for(e=R*d;e<O;++e)f[e]=z+y[R-1];}else if(c===U14){for(z=0,e=d;e<h;++e)z<f[e]&&(z=f[e]);for(e=d;e<h;++e)f[e]=z+k;}else for(c=!1,R=1;R<m;++R)for(e=R*d,O=e+d;e<O;++e)f[e]+=y[R-1];for(F=0,e=0;e<h;++e)F=x[e]+(e%d?F:0),M[e]+=F-t[e].x;for(p=0;p<d;++p)for(C=0,e=p;e<h;e+=d)C+=f[e],L[e]+=C-t[e].y;if(s&&w10(o.center,B13)&&m>1)for(e=0;e<h;++e)P=s===U14?g:b[e%d],F=P-E[e].x2-t[e].x-M[e],F>0&&(M[e]+=F/2);if(c&&w10(o.center,G14)&&d!==1)for(e=0;e<h;++e)P=c===U14?k:y[~~(e/d)],C=P-E[e].y2-t[e].y-L[e],C>0&&(L[e]+=C/2);for(e=0;e<h;++e)i.union(E[e].translate(M[e],L[e]));F=w10(o.anchor,qt5),C=w10(o.anchor,Vt4);switch(w10(o.anchor,B13)){case T9:F-=i.width();break;case _13:F-=i.width()/2;}switch(w10(o.anchor,G14)){case T9:C-=i.height();break;case _13:C-=i.height()/2;}for(F=Math.round(F),C=Math.round(C),i.clear(),e=0;e<h;++e)t[e].mark.bounds.clear();for(e=0;e<h;++e)I=t[e],I.x+=M[e]+=F,I.y+=L[e]+=C,i.union(I.mark.bounds.union(I.bounds.translate(M[e],L[e]))),r&&n.dirty(I);return i;}function dn6(n,t,o){var r=rn7(t),a=r.marks,i=o.bounds===rt5?ln7:un7,s=o.offset,c=o.columns||a.length,l=c<=0?1:Math.ceil(a.length/c),u=l*c,d,m,h,x,b,g,f;const y=Dt3(n,a,o);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(g=w10(o.headerBand,G14,null),d=Z13(n,r.rowheaders,a,c,l,-w10(s,"rowHeader"),Ft3,0,i,"x1",0,c,1,g)),r.colheaders&&(g=w10(o.headerBand,B13,null),m=Z13(n,r.colheaders,a,c,c,-w10(s,"columnHeader"),Ft3,1,i,"y1",0,1,c,g)),r.rowfooters&&(g=w10(o.footerBand,G14,null),h=Z13(n,r.rowfooters,a,c,l,w10(s,"rowFooter"),It3,0,i,"x2",c-1,c,1,g)),r.colfooters&&(g=w10(o.footerBand,B13,null),x=Z13(n,r.colfooters,a,c,c,w10(s,"columnFooter"),It3,1,i,"y2",u-c,1,c,g)),r.rowtitle&&(b=w10(o.titleAnchor,G14),f=w10(s,"rowTitle"),f=b===T9?h+f:d-f,g=w10(o.titleBand,G14,.5),St3(n,r.rowtitle,f,0,y,g)),r.coltitle&&(b=w10(o.titleAnchor,B13),f=w10(s,"columnTitle"),f=b===T9?x+f:m-f,g=w10(o.titleBand,B13,.5),St3(n,r.coltitle,f,1,y,g));}function ln7(n,t){return t==="x1"?n.x||0:t==="y1"?n.y||0:t==="x2"?(n.x||0)+(n.width||0):t==="y2"?(n.y||0)+(n.height||0):void 0;}function un7(n,t){return n.bounds[t];}function Z13(n,t,o,r,a,i,s,c,l,u,d,m,h,x){var b=o.length,g=0,f=0,y,k,M,L,E,O,e,p,R;if(!b)return g;for(y=d;y<b;y+=m)o[y]&&(g=s(g,l(o[y],u)));if(!t.length)return g;for(t.length>a&&(n.warn("Grid headers exceed limit: "+a),t=t.slice(0,a)),g+=i,k=0,L=t.length;k<L;++k)n.dirty(t[k]),t[k].mark.bounds.clear();for(y=d,k=0,L=t.length;k<L;++k,y+=m){for(O=t[k],E=O.mark.bounds,M=y;M>=0&&(e=o[M])==null;M-=h);c?(p=x==null?e.x:Math.round(e.bounds.x1+x*e.bounds.width()),R=g):(p=g,R=x==null?e.y:Math.round(e.bounds.y1+x*e.bounds.height())),E.union(O.bounds.translate(p-(O.x||0),R-(O.y||0))),O.x=p,O.y=R,n.dirty(O),f=s(f,E[u]);}return f;}function St3(n,t,o,r,a,i){if(!t)return;n.dirty(t);var s=o,c=o;r?s=Math.round(a.x1+i*a.width()):c=Math.round(a.y1+i*a.height()),t.bounds.translate(s-(t.x||0),c-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=c,n.dirty(t);}function fn6(n,t){const o=n[t]||{};return(r,a)=>o[r]!=null?o[r]:n[r]!=null?n[r]:a;}function hn6(n,t){let o=-Infinity;return n.forEach(r=>{r.offset!=null&&(o=Math.max(o,r.offset));}),o>-Infinity?o:t;}function mn5(n,t,o,r,a,i,s){const c=fn6(o,t),l=hn6(n,c("offset",0)),u=c("anchor",Q12),d=u===T9?1:u===_13?.5:0,m={align:at6,bounds:c("bounds",rt5),columns:c("direction")==="vertical"?1:n.length,padding:c("margin",8),center:c("center"),nodirty:!0};switch(t){case S14:m.anchor={x:Math.floor(r.x1)-l,column:T9,y:d*(s||r.height()+2*r.y1),row:u};break;case v10:m.anchor={x:Math.ceil(r.x2)+l,y:d*(s||r.height()+2*r.y1),row:u};break;case Y12:m.anchor={y:Math.floor(a.y1)-l,row:T9,x:d*(i||a.width()+2*a.x1),column:u};break;case j13:m.anchor={y:Math.ceil(a.y2)+l,x:d*(i||a.width()+2*a.x1),column:u};break;case Yt5:m.anchor={x:l,y:l};break;case Nt4:m.anchor={x:i-l,y:l,column:T9};break;case Wt4:m.anchor={x:l,y:s-l,row:T9};break;case Xt5:m.anchor={x:i-l,y:s-l,column:T9,row:T9};break;}return m;}function yn4(n,t){var o=t.items[0],r=o.datum,a=o.orient,i=o.bounds,s=o.x,c=o.y,l,u;return o._bounds?o._bounds.clear().union(i):o._bounds=i.clone(),i.clear(),xn4(n,o,o.items[0].items[0]),i=bn2(o,i),l=2*o.padding,u=2*o.padding,i.empty()||(l=Math.ceil(i.width()+l),u=Math.ceil(i.height()+u)),r.type===Zt5&&gn5(o.items[0].items[0].items[0].items),a!==et5&&(o.x=s=0,o.y=c=0),o.width=l,o.height=u,it4(i.set(s,c,s+l,c+u),o),o.mark.bounds.clear().union(i),o;}function bn2(n,t){return n.items.forEach(o=>t.union(o.bounds)),t.x1=n.padding,t.y1=n.padding,t;}function xn4(n,t,o){var r=t.padding,a=r-o.x,i=r-o.y;if(!t.datum.title)(a||i)&&X15(n,o,a,i);else{var s=t.items[1].items[0],c=s.anchor,l=t.titlePadding||0,u=r-s.x,d=r-s.y;switch(s.orient){case S14:a+=Math.ceil(s.bounds.width())+l;break;case v10:case j13:break;default:i+=s.bounds.height()+l;}(a||i)&&X15(n,o,a,i);switch(s.orient){case S14:d+=W13(t,o,s,c,1,1);break;case v10:u+=W13(t,o,s,T9,0,0)+l,d+=W13(t,o,s,c,1,1);break;case j13:u+=W13(t,o,s,c,0,0),d+=W13(t,o,s,T9,-1,0,1)+l;break;default:u+=W13(t,o,s,c,0,0);}(u||d)&&X15(n,s,u,d),(u=Math.round(s.bounds.x1-r))<0&&(X15(n,o,-u,0),X15(n,s,-u,0));}}function W13(n,t,o,r,a,i,s){const c=n.datum.type!=="symbol",l=o.datum.vgrad,u=c&&(i||!l)&&!s?t.items[0]:t,d=u.bounds[a?"y2":"x2"]-n.padding,m=l&&i?d:0,h=l&&i?0:d,x=a<=0?0:uo(o);return Math.round(r===Q12?m:r===T9?h-x:.5*(d-x));}function X15(n,t,o,r){t.x+=o,t.y+=r,t.bounds.translate(o,r),t.mark.bounds.translate(o,r),n.dirty(t);}function gn5(n){const t=n.reduce((o,r)=>(o[r.column]=Math.max(r.bounds.x2-r.x,o[r.column]||0),o),{});n.forEach(o=>{o.width=t[o.column],o.height=o.bounds.y2-o.y;});}function kn2(n,t,o,r,a){var i=t.items[0],s=i.frame,c=i.orient,l=i.anchor,u=i.offset,d=i.padding,m=i.items[0].items[0],h=i.items[1]&&i.items[1].items[0],x=c===S14||c===v10?r:o,b=0,g=0,f=0,y=0,k=0,M;if(s!==V9?c===S14?(b=a.y2,x=a.y1):c===v10?(b=a.y1,x=a.y2):(b=a.x1,x=a.x2):c===S14&&(b=r,x=0),M=l===Q12?b:l===T9?x:(b+x)/2,h&&h.text){switch(c){case Y12:case j13:k=m.bounds.height()+d;break;case S14:y=m.bounds.width()+d;break;case v10:y=-m.bounds.width()-d;break;}A13.clear().union(h.bounds),A13.translate(y-(h.x||0),k-(h.y||0)),N12(h,"x",y)|N12(h,"y",k)&&(n.dirty(h),h.bounds.clear().union(A13),h.mark.bounds.clear().union(A13),n.dirty(h)),A13.clear().union(h.bounds);}else A13.clear();A13.union(m.bounds);switch(c){case Y12:g=M,f=a.y1-A13.height()-u;break;case S14:g=a.x1-A13.width()-u,f=M;break;case v10:g=a.x2+A13.width()+u,f=M;break;case j13:g=M,f=a.y2+u;break;default:g=i.x,f=i.y;}return N12(i,"x",g)|N12(i,"y",f)&&(A13.translate(g,f),n.dirty(i),i.bounds.clear().union(A13),t.bounds.clear().union(A13),n.dirty(i)),i.bounds;}function vt2(n){dt2.call(this,null,n);}Pn(vt2,dt2,{transform(n,t){const o=t.dataflow;return n.mark.items.forEach(r=>{n.layout&&dn6(o,r,n.layout),wn6(o,r,n);}),Mn4(n.mark.group)?t.reflow():t;}});function Mn4(n){return n&&n.mark.role!=="legend-entry";}function wn6(n,t,o){var r=t.items,a=Math.max(0,t.width||0),i=Math.max(0,t.height||0),s=new E13().set(0,0,a,i),c=s.clone(),l=s.clone(),u=[],d,m,h,x,b,g;for(b=0,g=r.length;b<g;++b){m=r[b];switch(m.role){case tt3:x=on6(m)?c:l,x.union(an6(n,m,a,i));break;case nt4:d=m;break;case ot6:u.push(yn4(n,m));break;case Ut3:case Jt4:case ut5:case ft6:case ht3:case mt3:case yt2:case bt5:c.union(m.bounds),l.union(m.bounds);break;default:s.union(m.bounds);}}if(u.length){const f={};u.forEach(y=>{h=y.orient||v10,h!==et5&&(f[h]||(f[h]=[])).push(y);});for(const y in f){const k=f[y];Dt3(n,k,mn5(k,y,o.legends,c,l,a,i));}u.forEach(y=>{const k=y.bounds;if(k.equals(y._bounds)||(y.bounds=y._bounds,n.dirty(y),y.bounds=k,n.dirty(y)),o.autosize&&(o.autosize.type===xt5||o.autosize.type===gt3||o.autosize.type===kt4))switch(y.orient){case S14:case v10:s.add(k.x1,0).add(k.x2,0);break;case Y12:case j13:s.add(0,k.y1).add(0,k.y2);}else s.union(k);});}s.union(c).union(l),d&&s.union(kn2(n,d,a,i,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),pn5(n,t,s,o);}function pn5(n,t,o,r){const a=r.autosize||{},i=a.type;if(n._autosize<1||!i)return;let s=n._width,c=n._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-o.x1)),d=Math.max(0,t.height||0),m=Math.max(0,Math.ceil(-o.y1));const h=Math.max(0,Math.ceil(o.x2-l)),x=Math.max(0,Math.ceil(o.y2-d));if(a.contains===Kt4){const b=n.padding();s-=b.left+b.right,c-=b.top+b.bottom;}i===et5?(u=0,m=0,l=s,d=c):i===xt5?(l=Math.max(0,s-u-h),d=Math.max(0,c-m-x)):i===gt3?(l=Math.max(0,s-u-h),c=d+m+x):i===kt4?(s=l+u+h,d=Math.max(0,c-m-x)):i===$t2&&(s=l+u+h,c=d+m+x),n._resizeView(s,c,l,d,[u,m],a.resize);}const mod2=function(){return{bound:Mt4,identifier:it5,mark:pt4,overlap:Et3,render:Ot3,viewlayout:vt2,default:null};}();function H11(e){dt2.call(this,null,e);}Pn(H11,dt2,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),a=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,l=e.count==null?e.values?e.values.length:10:e.count,r=kf(o,l,e.minstep),s=e.format||ye4(n,o,r,e.formatSpecifier,e.formatType,!!e.values),d=e.values?he4(o,e.values,r):U12(o,r);return i&&(a.rem=i),i=d.map((f,m)=>V4({index:m/(d.length-1||1),value:f,label:s(f)})),e.extra&&i.length&&i.push(V4({index:-1,extra:{value:i[0].value},label:""})),a.source=i,a.add=i,this.value=i,a;}});function Z14(e){dt2.call(this,null,e);}function Ve3(){return V4({});}function He3(e){const t=Sn().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t;}Pn(Z14,dt2,{transform(e,t){var n=t.dataflow,a=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Ve3,o=e.key||d4,l=this.value;return w1(a.encode)&&(a.encode=null),l&&(e.modified("key")||t.modified(o))&&b("DataJoin does not support modified key function or fields."),l||(t=t.addAll(),this.value=l=He3(o)),t.visit(t.ADD,r=>{const s=o(r);let d=l.get(s);d?d.exit?(l.empty--,a.add.push(d)):a.mod.push(d):(d=i(r),l.set(s,d),a.add.push(d)),d.datum=r,d.exit=!1;}),t.visit(t.MOD,r=>{const s=o(r),d=l.get(s);d&&(d.datum=r,a.mod.push(d));}),t.visit(t.REM,r=>{const s=o(r),d=l.get(s);r===d.datum&&!d.exit&&(a.rem.push(d),d.exit=!0,++l.empty);}),t.changed(t.ADD_MOD)&&a.modifies("datum"),(t.clean()||e.clean&&l.empty>n.cleanThreshold)&&n.runAfter(l.clean),a;}});function K13(e){dt2.call(this,null,e);}Pn(K13,dt2,{transform(e,t){var n=t.fork(t.ADD_REM),a=e.mod||!1,i=e.encoders,o=t.encode;if(w1(o))if(n.changed()||o.every(m=>i[m]))o=o[0],n.encode=null;else return t.StopPropagation;var l=o==="enter",r=i.update||nn,s=i.enter||nn,d=i.exit||nn,f=(o&&!l?i[o]:r)||nn;if(t.changed(t.ADD)&&(t.visit(t.ADD,m=>{s(m,e),r(m,e);}),n.modifies(s.output),n.modifies(r.output),f!==nn&&f!==r&&(t.visit(t.ADD,m=>{f(m,e);}),n.modifies(f.output))),t.changed(t.REM)&&d!==nn&&(t.visit(t.REM,m=>{d(m,e);}),n.modifies(d.output)),l||f!==nn){const m=t.MOD|(e.modified()?t.REFLOW:0);l?(t.visit(m,c=>{const g=s(c,e)||a;(f(c,e)||g)&&n.mod.push(c);}),n.mod.length&&n.modifies(s.output)):t.visit(m,c=>{(f(c,e)||a)&&n.mod.push(c);}),n.mod.length&&n.modifies(f.output);}return n.changed()?n:t.StopPropagation;}});function W14(e){dt2.call(this,[],e);}Pn(W14,dt2,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),a1=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||ge3,l=e.scale,r=+e.limit,s=kf(l,e.count==null?5:e.count,e.minstep),d=!!e.values||o===ge3,f=e.format||$e3(n,l,s,o,e.formatSpecifier,e.formatType,d),m=e.values||Me4(l,s),c,g,u,M,S;return i&&(a1.rem=i),o===ge3?(r&&m.length>r?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=m.slice(0,r-1),S=!0):i=m,O1(u=e.size)?(!e.values&&l(i[0])===0&&(i=i.slice(1)),M=i.reduce((p,v)=>Math.max(p,u(v,e)),0)):u=On(M=u||8),i=i.map((p,v)=>V4({index:v,label:f(p,v,i),value:p,offset:M,size:u(p,e)})),S&&(S=m[i.length],i.push(V4({index:i.length,label:`\u2026${m.length-i.length} entries`,value:S,offset:M,size:u(S,e)})))):o===xf?(c=l.domain(),g=Sf(l,c[0],a(c)),m.length<3&&!e.values&&c[0]!==a(c)&&(m=[c[0],a(c)]),i=m.map((p,v)=>V4({index:v,label:f(p,v,m),value:p,perc:g(p)}))):(u=m.length-1,g=Af(l),i=m.map((p,v)=>V4({index:v,label:f(p,v,m),value:p,perc:v?g(p):0,perc2:v===u?1:g(m[v+1])}))),a1.source=i,a1.add=i,this.value=i,a1;}});const Ze2=e=>e.source.x,Ke3=e=>e.source.y,We3=e=>e.target.x,Je3=e=>e.target.y;function O12(e){dt2.call(this,{},e);}O12.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},Pn(O12,dt2,{transform(e,t){var n=e.sourceX||Ze2,a=e.sourceY||Ke3,i=e.targetX||We3,o=e.targetY||Je3,l=e.as||"path",r=e.orient||"vertical",s=e.shape||"line",d=te9.get(s+"-"+r)||te9.get(s);return d||b("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,f=>{f[l]=d(n(f),a(f),i(f),o(f));}),t.reflow(e.modified()).modifies(l);}});const J13=(e,t,n,a)=>"M"+e+","+t+"L"+n+","+a,_e3=(e,t,n,a)=>J13(t*Math.cos(e),t*Math.sin(e),a*Math.cos(n),a*Math.sin(n)),_14=(e,t,n,a)=>{var i=n-e,o=a-t,l=Math.hypot(i,o)/2,r=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+l+","+l+" "+r+" 0 1 "+n+","+a;},et6=(e,t,n,a)=>_14(t*Math.cos(e),t*Math.sin(e),a*Math.cos(n),a*Math.sin(n)),ee9=(e,t,n,a)=>{const i=n-e,o=a-t,l=.2*(i+o),r=.2*(o-i);return"M"+e+","+t+"C"+(e+l)+","+(t+r)+" "+(n+r)+","+(a-l)+" "+n+","+a;},tt4=(e,t,n,a)=>ee9(t*Math.cos(e),t*Math.sin(e),a*Math.cos(n),a*Math.sin(n)),nt5=(e,t,n,a)=>"M"+e+","+t+"V"+a+"H"+n,it6=(e,t,n,a)=>"M"+e+","+t+"H"+n+"V"+a,at7=(e,t,n,a)=>{const i=Math.cos(e),o=Math.sin(e),l=Math.cos(n),r=Math.sin(n),s=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(s?1:0)+" "+t*l+","+t*r+"L"+a*l+","+a*r;},ot7=(e,t,n,a)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+a+" "+n+","+a;},rt6=(e,t,n,a)=>{const i=(t+a)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+a;},lt6=(e,t,n,a)=>{const i=Math.cos(e),o=Math.sin(e),l=Math.cos(n),r=Math.sin(n),s=(t+a)/2;return"M"+t*i+","+t*o+"C"+s*i+","+s*o+" "+s*l+","+s*r+" "+a*l+","+a*r;},te9=Sn({line:J13,"line-radial":_e3,arc:_14,"arc-radial":et6,curve:ee9,"curve-radial":tt4,"orthogonal-horizontal":nt5,"orthogonal-vertical":it6,"orthogonal-radial":at7,"diagonal-horizontal":ot7,"diagonal-vertical":rt6,"diagonal-radial":lt6});function P13(e){dt2.call(this,null,e);}P13.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},Pn(P13,dt2,{transform(e,t){var n=e.as||["startAngle","endAngle"],a=n[0],i=n[1],o=e.field||v,l=e.startAngle||0,r=e.endAngle!=null?e.endAngle:2*Math.PI,s=t.source,d=s.map(o),f=d.length,m=l,c=(r-l)/de(d),g=ie(f),u,M,S;for(e.sort&&g.sort((p,v)=>d[p]-d[v]),u=0;u<f;++u)S=d[g[u]],M=s[g[u]],M[a]=m,M[i]=m+=S*c;return this.value=d,t.reflow(e.modified()).modifies(n);}});const st5=5;function dt5(e){const t=e.type;return!e.bins&&(t===L15||t===j12||t===z13);}function ne10(e){return pf(e)&&e!==R12;}const ft7=Xn(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function ie7(e){dt2.call(this,null,e),this.modified(!0);}Pn(ie7,dt2,{transform(e,t){var n=t.dataflow,a=this.value,i=mt4(e);(!a||i!==a.type)&&(this.value=a=i1(i)());for(i in e)if(!ft7[i]){if(i==="padding"&&ne10(a.type))continue;O1(a[i])?a[i](e[i]):n.warn("Unsupported scale property: "+i);}return vt3(a,e,pt5(a,e,ut6(a,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS);}});function mt4(e){var t=e.type,n="",a;return t===R12?R12+"-"+L15:(ct7(e)&&(a=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=a===2?R12+"-":a===3?q14+"-":""),(n+t||L15).toLowerCase());}function ct7(e){const t=e.type;return pf(t)&&t!==$7&&t!==S12&&(e.scheme||e.range&&e.range.length&&e.range.every(X1));}function ut6(e,t,n){const a1=ht4(e,t.domainRaw,n);if(a1>-1)return a1;var i=t.domain,o=e.type,l=t.zero||t.zero===void 0&&dt5(e),r,s;if(!i)return 0;if(ne10(o)&&t.padding&&i[0]!==a(i)&&(i=gt4(o,i,t.range,t.padding,t.exponent,t.constant)),(l||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(r=(i=i.slice()).length-1||1,l&&(i[0]>0&&(i[0]=0),i[r]<0&&(i[r]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[r]=t.domainMax),t.domainMid!=null)){s=t.domainMid;const d=s>i[r]?r+1:s<i[0]?0:r;d!==r&&n.warn("Scale domainMid exceeds domain min or max.",s),i.splice(d,0,s);}return e.domain(ae6(o,i,n)),o===X13&&e.unknown(t.domainImplicit?F11:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&kf(e,t.nice)||null),i.length;}function ht4(e,t,n){return t?(e.domain(ae6(e.type,t,n)),t.length):-1;}function gt4(e,t,n,a1,i,o){var l=Math.abs(a(n)-n[0]),r=l/(l-2*a1),s=e===v9?gn(t,null,r):e===z13?an(t,null,r,.5):e===j12?an(t,null,r,i||1):e===D7?hn(t,null,r,o||1):fn(t,null,r);return t=t.slice(),t[0]=s[0],t[t.length-1]=s[1],t;}function ae6(e,t,n){if(re7(e)){var a=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));a!==t.length&&n.warn("Log scale domain includes zero: "+Z1(t));}return t;}function pt5(e,t,n){let a1=t.bins;if(a1&&!w1(a1)){const i=e.domain(),o=i[0],l=a(i),r=a1.step;let s=a1.start==null?o:a1.start,d=a1.stop==null?l:a1.stop;r||b("Scale bins parameter missing step property."),s<o&&(s=r*Math.ceil(o/r)),d>l&&(d=r*Math.floor(l/r)),a1=ie(s,d+r/2,r);}return a1?e.bins=a1:e.bins&&delete e.bins,e.type===_12&&(a1?!t.domain&&!t.domainRaw&&(e.domain(a1),n=a1.length):e.bins=e.domain()),n;}function vt3(e,t,n){var a=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=Mt5(a,t,n);else if(t.scheme&&(o=yt3(a,t,n),O1(o))){if(e.interpolator)return e.interpolator(o);b(`Scale type ${a} does not support interpolating color schemes.`);}if(o&&hf(a))return e.interpolator(ie5(E14(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(oe6(t.interpolate,t.interpolateGamma)):O1(e.round)?e.round(i):O1(e.rangeRound)&&e.interpolate(i?Mn2:d6),o&&e.range(E14(o,t.reverse));}function Mt5(e,t,n){e!==J10&&e!==Z12&&b("Only band and point scales support rangeStep.");var a=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===Z12?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*W11(n,i,a)];}function yt3(e,t,n){var a=t.schemeExtent,i,o;return w1(t.scheme)?o=ie5(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=me4(i),o||b(`Unrecognized scheme name: ${t.scheme}`)),n=e===T8?n+1:e===_12?n-1:e===x10||e===C10?+t.schemeCount||st5:n,hf(e)?oe8(o,a,t.reverse):O1(o)?Mf(oe8(o,a),n):e===X13?o:o.slice(0,n);}function oe8(e,t,n){return O1(e)&&(t||n)?wf(e,E14(t||[0,1],n)):e;}function E14(e,t){return t?e.slice().reverse():e;}function re9(e){dt2.call(this,null,e);}Pn(re9,dt2,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Mt1(e.sort)),this.modified(n),t;}});const le7="zero",se6="center",de5="normalize",fe4=["y0","y1"];function I14(e){dt2.call(this,null,e);}I14.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:le7,values:[le7,se6,de5]},{name:"as",type:"string",array:!0,length:2,default:fe4}]},Pn(I14,dt2,{transform(e,t){var n=e.as||fe4,a=n[0],i=n[1],o=Mt1(e.sort),l=e.field||v,r=e.offset===se6?St4:e.offset===de5?kt5:Dt4,s,d,f,m;for(s=bt6(t.source,e.groupby,o,l),d=0,f=s.length,m=s.max;d<f;++d)r(s[d],m,l,a,i);return t.reflow(e.modified()).modifies(n);}});function St4(e,t,n,a,i){for(var o=(t-e.sum)/2,l=e.length,r=0,s;r<l;++r)s=e[r],s[a]=o,s[i]=o+=Math.abs(n(s));}function kt5(e,t,n,a,i){for(var o=1/e.sum,l=0,r=e.length,s=0,d=0,f;s<r;++s)f=e[s],f[a]=l,f[i]=l=o*(d+=Math.abs(n(f)));}function Dt4(e,t,n,a,i){for(var o=0,l=0,r=e.length,s=0,d,f;s<r;++s)f=e[s],d=+n(f),d<0?(f[a]=l,f[i]=l+=d):(f[a]=o,f[i]=o+=d);}function bt6(e,t,n,a){var i=[],o=M=>M(f),l,r,s,d,f,m,c,g,u;if(t==null)i.push(e.slice());else for(l={},r=0,s=e.length;r<s;++r)f=e[r],m=t.map(o),c=l[m],c||(l[m]=c=[],i.push(c)),c.push(f);for(m=0,u=0,d=i.length;m<d;++m){for(c=i[m],r=0,g=0,s=c.length;r<s;++r)g+=Math.abs(a(c[r]));c.sum=g,g>u&&(u=g),n&&c.sort(n);}return i.max=u,i;}const mod3=function(){return{axisticks:H11,datajoin:Z14,encode:K13,legendentries:W14,linkpath:O12,pie:P13,scale:ie7,sortitems:re9,stack:I14,default:null};}();var m5=1e-6,xn5=1e-12,L17=Math.PI,O13=L17/2,nt6=L17/4,U15=L17*2,Y13=180/L17,N13=L17/180,C12=Math.abs,mn6=Math.atan,K14=Math.atan2,$9=Math.cos,tt5=Math.ceil,zr2=Math.exp,Xt6=Math.hypot,rt7=Math.log,Yt6=Math.pow,w11=Math.sin,on7=Math.sign||function(n){return n>0?1:n<0?-1:0;},H12=Math.sqrt,Dt5=Math.tan;function Lr1(n){return n>1?0:n<-1?L17:Math.acos(n);}function J14(n){return n>1?O13:n<-1?-O13:Math.asin(n);}function F14(){}function it7(n,t){n&&Ir1.hasOwnProperty(n.type)&&Ir1[n.type](n,t);}var qr2={Feature:function(n,t){it7(n.geometry,t);},FeatureCollection:function(n,t){for(var i=n.features,r=-1,e=i.length;++r<e;)it7(i[r].geometry,t);}},Ir1={Sphere:function(n,t){t.sphere();},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2]);},MultiPoint:function(n,t){for(var i=n.coordinates,r=-1,e=i.length;++r<e;)n=i[r],t.point(n[0],n[1],n[2]);},LineString:function(n,t){Ft4(n.coordinates,t,0);},MultiLineString:function(n,t){for(var i=n.coordinates,r=-1,e=i.length;++r<e;)Ft4(i[r],t,0);},Polygon:function(n,t){xr1(n.coordinates,t);},MultiPolygon:function(n,t){for(var i=n.coordinates,r=-1,e=i.length;++r<e;)xr1(i[r],t);},GeometryCollection:function(n,t){for(var i=n.geometries,r=-1,e=i.length;++r<e;)it7(i[r],t);}};function Ft4(n,t,i){var r=-1,e=n.length-i,o;for(t.lineStart();++r<e;)o=n[r],t.point(o[0],o[1],o[2]);t.lineEnd();}function xr1(n,t){var i=-1,r=n.length;for(t.polygonStart();++i<r;)Ft4(n[i],t,1);t.polygonEnd();}function an7(n,t){n&&qr2.hasOwnProperty(n.type)?qr2[n.type](n,t):it7(n,t);}var et7=new C1,ot8=new C1,Tr,Xr2,Gt4,Ot4,Zt6,fn7={point:F14,lineStart:F14,lineEnd:F14,polygonStart:function(){et7=new C1,fn7.lineStart=Bi1,fn7.lineEnd=Hi1;},polygonEnd:function(){var n=+et7;ot8.add(n<0?U15+n:n),this.lineStart=this.lineEnd=this.point=F14;},sphere:function(){ot8.add(U15);}};function Bi1(){fn7.point=ki1;}function Hi1(){Yr2(Tr,Xr2);}function ki1(n,t){fn7.point=Yr2,Tr=n,Xr2=t,n*=N13,t*=N13,Gt4=n,Ot4=$9(t=t/2+nt6),Zt6=w11(t);}function Yr2(n,t){n*=N13,t*=N13,t=t/2+nt6;var i=n-Gt4,r=i>=0?1:-1,e=r*i,o=$9(t),a=w11(t),u=Zt6*a,f=Ot4*o+u*$9(e),p=u*r*w11(e);et7.add(K14(p,f)),Gt4=n,Ot4=o,Zt6=a;}function Ui1(n){return ot8=new C1,an7(n,fn7),ot8*2;}function ut7(n){return[K14(n[1],n[0]),J14(n[2])];}function wn7(n){var t=n[0],i=n[1],r=$9(i);return[r*$9(t),r*w11(t),w11(i)];}function at8(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2];}function Nn5(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]];}function Wt5(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2];}function ct8(n,t){return[n[0]*t,n[1]*t,n[2]*t];}function ft8(n){var t=H12(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t;}var G15,nn7,Z15,tn7,Pn4,Dr1,Fr1,An6,Tn2,Sn5,vn4,dn7={point:Bt5,lineStart:Or2,lineEnd:Zr2,polygonStart:function(){dn7.point=Wr2,dn7.lineStart=Ki,dn7.lineEnd=Ji,Tn2=new C1,fn7.polygonStart();},polygonEnd:function(){fn7.polygonEnd(),dn7.point=Bt5,dn7.lineStart=Or2,dn7.lineEnd=Zr2,et7<0?(G15=-(Z15=180),nn7=-(tn7=90)):Tn2>m5?tn7=90:Tn2<-m5&&(nn7=-90),vn4[0]=G15,vn4[1]=Z15;},sphere:function(){G15=-(Z15=180),nn7=-(tn7=90);}};function Bt5(n,t){Sn5.push(vn4=[G15=n,Z15=n]),t<nn7&&(nn7=t),t>tn7&&(tn7=t);}function Gr2(n,t){var i=wn7([n*N13,t*N13]);if(An6){var r=Nn5(An6,i),e=[r[1],-r[0],0],o=Nn5(e,r);ft8(o),o=ut7(o);var a=n-Pn4,u=a>0?1:-1,f=o[0]*Y13*u,p,c=C12(a)>180;c^(u*Pn4<f&&f<u*n)?(p=o[1]*Y13,p>tn7&&(tn7=p)):(f=(f+360)%360-180,c^(u*Pn4<f&&f<u*n))?(p=-o[1]*Y13,p<nn7&&(nn7=p)):(t<nn7&&(nn7=t),t>tn7&&(tn7=t)),c?n<Pn4?rn8(G15,n)>rn8(G15,Z15)&&(Z15=n):rn8(n,Z15)>rn8(G15,Z15)&&(G15=n):Z15>=G15?(n<G15&&(G15=n),n>Z15&&(Z15=n)):n>Pn4?rn8(G15,n)>rn8(G15,Z15)&&(Z15=n):rn8(n,Z15)>rn8(G15,Z15)&&(G15=n);}else Sn5.push(vn4=[G15=n,Z15=n]);t<nn7&&(nn7=t),t>tn7&&(tn7=t),An6=i,Pn4=n;}function Or2(){dn7.point=Gr2;}function Zr2(){vn4[0]=G15,vn4[1]=Z15,dn7.point=Bt5,An6=null;}function Wr2(n,t){if(An6){var i=n-Pn4;Tn2.add(C12(i)>180?i+(i>0?360:-360):i);}else Dr1=n,Fr1=t;fn7.point(n,t),Gr2(n,t);}function Ki(){fn7.lineStart();}function Ji(){Wr2(Dr1,Fr1),fn7.lineEnd(),C12(Tn2)>m5&&(G15=-(Z15=180)),vn4[0]=G15,vn4[1]=Z15,An6=null;}function rn8(n,t){return(t-=n)<0?t+360:t;}function Qi(n,t){return n[0]-t[0];}function Br1(n,t){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t;}function Vi1(n){var t,i,r,e,o,a,u;if(tn7=Z15=-(G15=nn7=Infinity),Sn5=[],an7(n,dn7),i=Sn5.length){for(Sn5.sort(Qi),t=1,r=Sn5[0],o=[r];t<i;++t)e=Sn5[t],Br1(r,e[0])||Br1(r,e[1])?(rn8(r[0],e[1])>rn8(r[0],r[1])&&(r[1]=e[1]),rn8(e[0],r[1])>rn8(r[0],r[1])&&(r[0]=e[0])):o.push(r=e);for(a=-Infinity,i=o.length-1,t=0,r=o[i];t<=i;r=e,++t)e=o[t],(u=rn8(r[1],e[0]))>a&&(a=u,G15=e[0],Z15=r[1]);}return Sn5=vn4=null,G15===Infinity||nn7===Infinity?[[NaN,NaN],[NaN,NaN]]:[[G15,nn7],[Z15,tn7]];}var Xn4,lt7,st6,pt6,gt5,ht5,vt4,dt6,Ht4,kt6,Ut4,Hr2,kr1,Q13,V10,j14,cn7={sphere:F14,point:Kt5,lineStart:Ur1,lineEnd:Kr2,polygonStart:function(){cn7.lineStart=bi2,cn7.lineEnd=ne11;},polygonEnd:function(){cn7.lineStart=Ur1,cn7.lineEnd=Kr2;}};function Kt5(n,t){n*=N13,t*=N13;var i=$9(t);Yn2(i*$9(n),i*w11(n),w11(t));}function Yn2(n,t,i){++Xn4,st6+=(n-st6)/Xn4,pt6+=(t-pt6)/Xn4,gt5+=(i-gt5)/Xn4;}function Ur1(){cn7.point=ji1;}function ji1(n,t){n*=N13,t*=N13;var i=$9(t);Q13=i*$9(n),V10=i*w11(n),j14=w11(t),cn7.point=_i2,Yn2(Q13,V10,j14);}function _i2(n,t){n*=N13,t*=N13;var i=$9(t),r=i*$9(n),e=i*w11(n),o=w11(t),a=K14(H12((a=V10*o-j14*e)*a+(a=j14*r-Q13*o)*a+(a=Q13*e-V10*r)*a),Q13*r+V10*e+j14*o);lt7+=a,ht5+=a*(Q13+(Q13=r)),vt4+=a*(V10+(V10=e)),dt6+=a*(j14+(j14=o)),Yn2(Q13,V10,j14);}function Kr2(){cn7.point=Kt5;}function bi2(){cn7.point=te10;}function ne11(){Jr2(Hr2,kr1),cn7.point=Kt5;}function te10(n,t){Hr2=n,kr1=t,n*=N13,t*=N13,cn7.point=Jr2;var i=$9(t);Q13=i*$9(n),V10=i*w11(n),j14=w11(t),Yn2(Q13,V10,j14);}function Jr2(n,t){n*=N13,t*=N13;var i=$9(t),r=i*$9(n),e=i*w11(n),o=w11(t),a=V10*o-j14*e,u=j14*r-Q13*o,f=Q13*e-V10*r,p=Xt6(a,u,f),c=J14(p),s=p&&-c/p;Ht4.add(s*a),kt6.add(s*u),Ut4.add(s*f),lt7+=c,ht5+=c*(Q13+(Q13=r)),vt4+=c*(V10+(V10=e)),dt6+=c*(j14+(j14=o)),Yn2(Q13,V10,j14);}function re10(n){Xn4=lt7=st6=pt6=gt5=ht5=vt4=dt6=0,Ht4=new C1,kt6=new C1,Ut4=new C1,an7(n,cn7);var t=+Ht4,i=+kt6,r=+Ut4,e=Xt6(t,i,r);return e<xn5&&(t=ht5,i=vt4,r=dt6,lt7<m5&&(t=st6,i=pt6,r=gt5),e=Xt6(t,i,r),e<xn5)?[NaN,NaN]:[K14(i,t)*Y13,J14(r/e)*Y13];}function Jt5(n,t){function i(r,e){return r=n(r,e),t(r[0],r[1]);}return n.invert&&t.invert&&(i.invert=function(r,e){return r=t.invert(r,e),r&&n.invert(r[0],r[1]);}),i;}function Qt5(n,t){return C12(n)>L17&&(n-=Math.round(n/U15)*U15),[n,t];}Qt5.invert=Qt5;function Vt5(n,t,i){return(n%=U15)?t||i?Jt5(Vr2(n),jr2(t,i)):Vr2(n):t||i?jr2(t,i):Qt5;}function Qr2(n){return function(t,i){return t+=n,C12(t)>L17&&(t-=Math.round(t/U15)*U15),[t,i];};}function Vr2(n){var t=Qr2(n);return t.invert=Qr2(-n),t;}function jr2(n,t){var i=$9(n),r=w11(n),e=$9(t),o=w11(t);function a(u,f){var p=$9(f),c=$9(u)*p,s=w11(u)*p,l=w11(f),g=l*i+c*r;return[K14(s*e-g*o,c*i-l*r),J14(g*e+s*o)];}return a.invert=function(u,f){var p=$9(f),c=$9(u)*p,s=w11(u)*p,l=w11(f),g=l*e-s*o;return[K14(s*e+l*o,c*i+g*r),J14(g*i-c*r)];},a;}function _r(n){n=Vt5(n[0]*N13,n[1]*N13,n.length>2?n[2]*N13:0);function t(i){return i=n(i[0]*N13,i[1]*N13),i[0]*=Y13,i[1]*=Y13,i;}return t.invert=function(i){return i=n.invert(i[0]*N13,i[1]*N13),i[0]*=Y13,i[1]*=Y13,i;},t;}function br1(n,t,i,r,e,o){if(!i)return;var a=$9(t),u=w11(t),f=r*i;e==null?(e=t+r*U15,o=t-f/2):(e=ni3(a,e),o=ni3(a,o),(r>0?e<o:e>o)&&(e+=r*U15));for(var p,c=e;r>0?c>o:c<o;c-=f)p=ut7([a,-u*$9(c),-u*w11(c)]),n.point(p[0],p[1]);}function ni3(n,t){t=wn7(t),t[0]-=n,ft8(t);var i=Lr1(-t[1]);return((-t[2]<0?-i:i)+U15-m5)%U15;}function ti3(){var n=[],t;return{point:function(i,r,e){t.push([i,r,e]);},lineStart:function(){n.push(t=[]);},lineEnd:F14,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()));},result:function(){var i=n;return n=[],t=null,i;}};}function Et4(n,t){return C12(n[0]-t[0])<m5&&C12(n[1]-t[1])<m5;}function St5(n,t,i,r){this.x=n,this.z=t,this.o=i,this.e=r,this.v=!1,this.n=this.p=null;}function ri3(n,t,i,r,e){var o=[],a=[],u,f;if(n.forEach(function(h){if((y=h.length-1)<=0)return;var y,S=h[0],P=h[y],M;if(Et4(S,P)){if(!S[2]&&!P[2]){for(e.lineStart(),u=0;u<y;++u)e.point((S=h[u])[0],S[1]);e.lineEnd();return;}P[0]+=2*m5;}o.push(M=new St5(S,h,null,!0)),a.push(M.o=new St5(S,null,M,!1)),o.push(M=new St5(P,h,null,!1)),a.push(M.o=new St5(P,null,M,!0));}),!o.length)return;for(a.sort(t),ii3(o),ii3(a),u=0,f=a.length;u<f;++u)a[u].e=i=!i;for(var p=o[0],c,s;;){for(var l=p,g=!0;l.v;)if((l=l.n)===p)return;c=l.z,e.lineStart();do{if(l.v=l.o.v=!0,l.e){if(g)for(u=0,f=c.length;u<f;++u)e.point((s=c[u])[0],s[1]);else r(l.x,l.n.x,1,e);l=l.n;}else{if(g)for(c=l.p.z,u=c.length-1;u>=0;--u)e.point((s=c[u])[0],s[1]);else r(l.x,l.p.x,-1,e);l=l.p;}l=l.o,c=l.z,g=!g;}while(!l.v)e.lineEnd();}}function ii3(n){if(!(t=n.length))return;for(var t,i=0,r=n[0],e;++i<t;)r.n=e=n[i],e.p=r,r=e;r.n=e=n[0],e.p=r;}function jt5(n){return C12(n[0])<=L17?n[0]:on7(n[0])*((C12(n[0])+L17)%U15-L17);}function ei3(n,t){var i=jt5(t),r=t[1],e=w11(r),o=[w11(i),-$9(i),0],a=0,u=0,f=new C1;e===1?r=O13+m5:e===-1&&(r=-O13-m5);for(var p=0,c=n.length;p<c;++p){if(!(l=(s=n[p]).length))continue;for(var s,l,g=s[l-1],h=jt5(g),y=g[1]/2+nt6,S=w11(y),P=$9(y),M=0;M<l;++M,h=d,S=A,P=I,g=v){var v=s[M],d=jt5(v),R=v[1]/2+nt6,A=w11(R),I=$9(R),x=d-h,T=x>=0?1:-1,D=T*x,z=D>L17,_=S*A;if(f.add(K14(_*T*w11(D),P*I+_*$9(D))),a+=z?x+T*U15:x,z^h>=i^d>=i){var W=Nn5(wn7(g),wn7(v));ft8(W);var X=Nn5(o,W);ft8(X);var E=(z^x>=0?-1:1)*J14(X[2]);(r>E||r===E&&(W[0]||W[1]))&&(u+=z^x>=0?1:-1);}}}return(a<-m5||a<m5&&f<-xn5)^u&1;}function oi3(n,t,i,r){return function(e){var o=t(e),a=ti3(),u=t(a),f=!1,p,c,s,l={point:g,lineStart:y,lineEnd:S,polygonStart:function(){l.point=P,l.lineStart=M,l.lineEnd=v,c=[],p=[];},polygonEnd:function(){l.point=g,l.lineStart=y,l.lineEnd=S,c=ne(c);var d=ei3(p,r);c.length?(f||(e.polygonStart(),f=!0),ri3(c,oe9,d,i,e)):d&&(f||(e.polygonStart(),f=!0),e.lineStart(),i(null,null,1,e),e.lineEnd()),f&&(e.polygonEnd(),f=!1),c=p=null;},sphere:function(){e.polygonStart(),e.lineStart(),i(null,null,1,e),e.lineEnd(),e.polygonEnd();}};function g(d,R){n(d,R)&&e.point(d,R);}function h(d,R){o.point(d,R);}function y(){l.point=h,o.lineStart();}function S(){l.point=g,o.lineEnd();}function P(d,R){s.push([d,R]),u.point(d,R);}function M(){u.lineStart(),s=[];}function v(){P(s[0][0],s[0][1]),u.lineEnd();var d=u.clean(),R=a.result(),A,I=R.length,x,T,D;if(s.pop(),p.push(s),s=null,!I)return;if(d&1){if(T=R[0],(x=T.length-1)>0){for(f||(e.polygonStart(),f=!0),e.lineStart(),A=0;A<x;++A)e.point((D=T[A])[0],D[1]);e.lineEnd();}return;}I>1&&d&2&&R.push(R.pop().concat(R.shift())),c.push(R.filter(ee10));}return l;};}function ee10(n){return n.length>1;}function oe9(n,t){return((n=n.x)[0]<0?n[1]-O13-m5:O13-n[1])-((t=t.x)[0]<0?t[1]-O13-m5:O13-t[1]);}var _t4=oi3(function(){return!0;},ue8,ce3,[-L17,-O13]);function ue8(n){var t=NaN,i=NaN,r=NaN,e;return{lineStart:function(){n.lineStart(),e=1;},point:function(o,a){var u=o>0?L17:-L17,f=C12(o-t);C12(f-L17)<m5?(n.point(t,i=(i+a)/2>0?O13:-O13),n.point(r,i),n.lineEnd(),n.lineStart(),n.point(u,i),n.point(o,i),e=0):r!==u&&f>=L17&&(C12(t-r)<m5&&(t-=r*m5),C12(o-u)<m5&&(o-=u*m5),i=ae7(t,i,o,a),n.point(r,i),n.lineEnd(),n.lineStart(),n.point(u,i),e=0),n.point(t=o,i=a),r=u;},lineEnd:function(){n.lineEnd(),t=i=NaN;},clean:function(){return 2-e;}};}function ae7(n,t,i,r){var e,o,a=w11(n-i);return C12(a)>m5?mn6((w11(t)*(o=$9(r))*w11(i)-w11(r)*(e=$9(t))*w11(n))/(e*o*a)):(t+r)/2;}function ce3(n,t,i,r){var e;if(n==null)e=i*O13,r.point(-L17,e),r.point(0,e),r.point(L17,e),r.point(L17,0),r.point(L17,-e),r.point(0,-e),r.point(-L17,-e),r.point(-L17,0),r.point(-L17,e);else if(C12(n[0]-t[0])>m5){var o=n[0]<t[0]?L17:-L17;e=i*o/2,r.point(-o,e),r.point(0,e),r.point(o,e);}else r.point(t[0],t[1]);}function ui3(n){var t=$9(n),i=6*N13,r=t>0,e=C12(t)>m5;function o(c,s,l,g){br1(g,n,i,l,c,s);}function a(c,s){return $9(c)*$9(s)>t;}function u(c){var s,l,g,h,y;return{lineStart:function(){h=g=!1,y=1;},point:function(S,P){var M=[S,P],v,d=a(S,P),R=r?d?0:p(S,P):d?p(S+(S<0?L17:-L17),P):0;if(!s&&(h=g=d)&&c.lineStart(),d!==g&&(v=f(s,M),(!v||Et4(s,v)||Et4(M,v))&&(M[2]=1)),d!==g)y=0,d?(c.lineStart(),v=f(M,s),c.point(v[0],v[1])):(v=f(s,M),c.point(v[0],v[1],2),c.lineEnd()),s=v;else if(e&&s&&r^d){var A;!(R&l)&&(A=f(M,s,!0))&&(y=0,r?(c.lineStart(),c.point(A[0][0],A[0][1]),c.point(A[1][0],A[1][1]),c.lineEnd()):(c.point(A[1][0],A[1][1]),c.lineEnd(),c.lineStart(),c.point(A[0][0],A[0][1],3)));}d&&(!s||!Et4(s,M))&&c.point(M[0],M[1]),s=M,g=d,l=R;},lineEnd:function(){g&&c.lineEnd(),s=null;},clean:function(){return y|(h&&g)<<1;}};}function f(c,s,l){var g=wn7(c),h=wn7(s),y=[1,0,0],S=Nn5(g,h),P=at8(S,S),M=S[0],v=P-M*M;if(!v)return!l&&c;var d=t*P/v,R=-t*M/v,A=Nn5(y,S),I=ct8(y,d),x=ct8(S,R);Wt5(I,x);var T=A,D=at8(I,T),z=at8(T,T),_=D*D-z*(at8(I,I)-1);if(_<0)return;var W=H12(_),X=ct8(T,(-D-W)/z);if(Wt5(X,I),X=ut7(X),!l)return X;var E=c[0],q=s[0],B=c[1],b=s[1],en;q<E&&(en=E,E=q,q=en);var In=q-E,gn=C12(In-L17)<m5,yn=gn||In<m5;if(!gn&&b<B&&(en=B,B=b,b=en),yn?gn?B+b>0^X[1]<(C12(X[0]-E)<m5?B:b):B<=X[1]&&X[1]<=b:In>L17^(E<=X[0]&&X[0]<=q)){var hn=ct8(T,(-D+W)/z);return Wt5(hn,I),[X,ut7(hn)];}}function p(c,s){var l=r?n:L17-n,g=0;return c<-l?g|=1:c>l&&(g|=2),s<-l?g|=4:s>l&&(g|=8),g;}return oi3(a,u,o,r?[0,-n]:[-L17,n-L17]);}function fe5(n,t,i,r,e,o){var a=n[0],u=n[1],f=t[0],p=t[1],c=0,s=1,l=f-a,g=p-u,h;if(h=i-a,!l&&h>0)return;if(h/=l,l<0){if(h<c)return;h<s&&(s=h);}else if(l>0){if(h>s)return;h>c&&(c=h);}if(h=e-a,!l&&h<0)return;if(h/=l,l<0){if(h>s)return;h>c&&(c=h);}else if(l>0){if(h<c)return;h<s&&(s=h);}if(h=r-u,!g&&h>0)return;if(h/=g,g<0){if(h<c)return;h<s&&(s=h);}else if(g>0){if(h>s)return;h>c&&(c=h);}if(h=o-u,!g&&h<0)return;if(h/=g,g<0){if(h>s)return;h>c&&(c=h);}else if(g>0){if(h<c)return;h<s&&(s=h);}return c>0&&(n[0]=a+c*l,n[1]=u+c*g),s<1&&(t[0]=a+s*l,t[1]=u+s*g),!0;}var Dn3=1e9,yt4=-Dn3;function wt4(n,t,i,r){function e(p,c){return n<=p&&p<=i&&t<=c&&c<=r;}function o(p,c,s,l){var g=0,h=0;if(p==null||(g=a(p,s))!==(h=a(c,s))||f(p,c)<0^s>0)do l.point(g===0||g===3?n:i,g>1?r:t);while((g=(g+s+4)%4)!==h)else l.point(c[0],c[1]);}function a(p,c){return C12(p[0]-n)<m5?c>0?0:3:C12(p[0]-i)<m5?c>0?2:1:C12(p[1]-t)<m5?c>0?1:0:c>0?3:2;}function u(p,c){return f(p.x,c.x);}function f(p,c){var s=a(p,1),l=a(c,1);return s!==l?s-l:s===0?c[1]-p[1]:s===1?p[0]-c[0]:s===2?p[1]-c[1]:c[0]-p[0];}return function(p){var c=p,s=ti3(),l,g,h,y,S,P,M,v,d,R,A,I={point:x,lineStart:_,lineEnd:W,polygonStart:D,polygonEnd:z};function x(E,q){e(E,q)&&c.point(E,q);}function T(){for(var E=0,q=0,B=g.length;q<B;++q)for(var b=g[q],en=1,In=b.length,gn=b[0],yn,hn,bn=gn[0],Mn=gn[1];en<In;++en)yn=bn,hn=Mn,gn=b[en],bn=gn[0],Mn=gn[1],hn<=r?Mn>r&&(bn-yn)*(r-hn)>(Mn-hn)*(n-yn)&&++E:Mn<=r&&(bn-yn)*(r-hn)<(Mn-hn)*(n-yn)&&--E;return E;}function D(){c=s,l=[],g=[],A=!0;}function z(){var E=T(),q=A&&E,B=(l=ne(l)).length;(q||B)&&(p.polygonStart(),q&&(p.lineStart(),o(null,null,1,p),p.lineEnd()),B&&ri3(l,u,E,o,p),p.polygonEnd()),c=p,l=g=h=null;}function _(){I.point=X,g&&g.push(h=[]),R=!0,d=!1,M=v=NaN;}function W(){l&&(X(y,S),P&&d&&s.rejoin(),l.push(s.result())),I.point=x,d&&c.lineEnd();}function X(E,q){var B=e(E,q);if(g&&h.push([E,q]),R)y=E,S=q,P=B,R=!1,B&&(c.lineStart(),c.point(E,q));else if(B&&d)c.point(E,q);else{var b=[M=Math.max(yt4,Math.min(Dn3,M)),v=Math.max(yt4,Math.min(Dn3,v))],en=[E=Math.max(yt4,Math.min(Dn3,E)),q=Math.max(yt4,Math.min(Dn3,q))];fe5(b,en,n,t,i,r)?(d||(c.lineStart(),c.point(b[0],b[1])),c.point(en[0],en[1]),B||c.lineEnd(),A=!1):B&&(c.lineStart(),c.point(E,q),A=!1);}M=E,v=q,d=B;}return I;};}var bt7,nr1,Pt6,Rt6,Ln2={sphere:F14,point:F14,lineStart:se7,lineEnd:F14,polygonStart:F14,polygonEnd:F14};function se7(){Ln2.point=ge4,Ln2.lineEnd=pe5;}function pe5(){Ln2.point=Ln2.lineEnd=F14;}function ge4(n,t){n*=N13,t*=N13,nr1=n,Pt6=w11(t),Rt6=$9(t),Ln2.point=he6;}function he6(n,t){n*=N13,t*=N13;var i=w11(t),r=$9(t),e=C12(n-nr1),o=$9(e),a=w11(e),u=r*a,f=Rt6*i-Pt6*r*o,p=Pt6*i+Rt6*r*o;bt7.add(K14(H12(u*u+f*f),p)),nr1=n,Pt6=i,Rt6=r;}function ai3(n){return bt7=new C1,an7(n,Ln2),+bt7;}var tr1=[null,null],ve4={type:"LineString",coordinates:tr1};function Mt6(n,t){return tr1[0]=n,tr1[1]=t,ai3(ve4);}var fi3={Sphere:function(){return!0;},Point:function(n,t){return li3(n.coordinates,t);},MultiPoint:function(n,t){for(var i=n.coordinates,r=-1,e=i.length;++r<e;)if(li3(i[r],t))return!0;return!1;},LineString:function(n,t){return si3(n.coordinates,t);},MultiLineString:function(n,t){for(var i=n.coordinates,r=-1,e=i.length;++r<e;)if(si3(i[r],t))return!0;return!1;},Polygon:function(n,t){return pi3(n.coordinates,t);},MultiPolygon:function(n,t){for(var i=n.coordinates,r=-1,e=i.length;++r<e;)if(pi3(i[r],t))return!0;return!1;},GeometryCollection:function(n,t){for(var i=n.geometries,r=-1,e=i.length;++r<e;)if($t3(i[r],t))return!0;return!1;}};function $t3(n,t){return n&&fi3.hasOwnProperty(n.type)?fi3[n.type](n,t):!1;}function li3(n,t){return Mt6(n,t)===0;}function si3(n,t){for(var i,r,e,o=0,a=n.length;o<a;o++){if(r=Mt6(n[o],t),r===0)return!0;if(o>0&&(e=Mt6(n[o],n[o-1]),e>0&&i<=e&&r<=e&&(i+r-e)*(1-Math.pow((i-r)/e,2))<xn5*e))return!0;i=r;}return!1;}function pi3(n,t){return!!ei3(n.map(de6),gi2(t));}function de6(n){return n=n.map(gi2),n.pop(),n;}function gi2(n){return[n[0]*N13,n[1]*N13];}function hi3(n,t,i){var r=ie(n,t-m5,i).concat(t);return function(e){return r.map(function(o){return[e,o];});};}function vi2(n,t,i){var r=ie(n,t-m5,i).concat(t);return function(e){return r.map(function(o){return[o,e];});};}function di2(){var n,t,i,r,e,o,a,u,f=10,p=f,c=90,s=360,l,g,h,y,S=2.5;function P(){return{type:"MultiLineString",coordinates:M()};}function M(){return ie(tt5(r/c)*c,i,c).map(h).concat(ie(tt5(u/s)*s,a,s).map(y)).concat(ie(tt5(t/f)*f,n,f).filter(function(v){return C12(v%c)>m5;}).map(l)).concat(ie(tt5(o/p)*p,e,p).filter(function(v){return C12(v%s)>m5;}).map(g));}return P.lines=function(){return M().map(function(v){return{type:"LineString",coordinates:v};});},P.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(y(a).slice(1),h(i).reverse().slice(1),y(u).reverse().slice(1))]};},P.extent=function(v){return arguments.length?P.extentMajor(v).extentMinor(v):P.extentMinor();},P.extentMajor=function(v){return arguments.length?(r=+v[0][0],i=+v[1][0],u=+v[0][1],a=+v[1][1],r>i&&(v=r,r=i,i=v),u>a&&(v=u,u=a,a=v),P.precision(S)):[[r,u],[i,a]];},P.extentMinor=function(v){return arguments.length?(t=+v[0][0],n=+v[1][0],o=+v[0][1],e=+v[1][1],t>n&&(v=t,t=n,n=v),o>e&&(v=o,o=e,e=v),P.precision(S)):[[t,o],[n,e]];},P.step=function(v){return arguments.length?P.stepMajor(v).stepMinor(v):P.stepMinor();},P.stepMajor=function(v){return arguments.length?(c=+v[0],s=+v[1],P):[c,s];},P.stepMinor=function(v){return arguments.length?(f=+v[0],p=+v[1],P):[f,p];},P.precision=function(v){return arguments.length?(S=+v,l=hi3(o,e,90),g=vi2(t,n,S),h=hi3(u,a,90),y=vi2(r,i,S),P):S;},P.extentMajor([[-180,-90+m5],[180,90-m5]]).extentMinor([[-180,-80-m5],[180,80+m5]]);}var Fn3=n=>n,rr1=new C1,ir1=new C1,Ei1,Si1,er1,or1,En4={point:F14,lineStart:F14,lineEnd:F14,polygonStart:function(){En4.lineStart=we6,En4.lineEnd=Re5;},polygonEnd:function(){En4.lineStart=En4.lineEnd=En4.point=F14,rr1.add(C12(ir1)),ir1=new C1;},result:function(){var n=rr1/2;return rr1=new C1,n;}};function we6(){En4.point=Pe3;}function Pe3(n,t){En4.point=yi3,Ei1=er1=n,Si1=or1=t;}function yi3(n,t){ir1.add(or1*n-er1*t),er1=n,or1=t;}function Re5(){yi3(Ei1,Si1);}var Cn5=Infinity,mt5=Cn5,Gn3=-Cn5,Nt5=Gn3,At6={point:Me6,lineStart:F14,lineEnd:F14,polygonStart:F14,polygonEnd:F14,result:function(){var n=[[Cn5,mt5],[Gn3,Nt5]];return Gn3=Nt5=-(mt5=Cn5=Infinity),n;}};function Me6(n,t){n<Cn5&&(Cn5=n),n>Gn3&&(Gn3=n),t<mt5&&(mt5=t),t>Nt5&&(Nt5=t);}var ur1=0,ar1=0,On2=0,zt5=0,Lt6=0,qn5=0,cr1=0,fr1=0,Zn2=0,wi1,Pi1,ln8,sn6,un8={point:Rn6,lineStart:Ri1,lineEnd:Mi1,polygonStart:function(){un8.lineStart=Ne5,un8.lineEnd=Ae4;},polygonEnd:function(){un8.point=Rn6,un8.lineStart=Ri1,un8.lineEnd=Mi1;},result:function(){var n=Zn2?[cr1/Zn2,fr1/Zn2]:qn5?[zt5/qn5,Lt6/qn5]:On2?[ur1/On2,ar1/On2]:[NaN,NaN];return ur1=ar1=On2=zt5=Lt6=qn5=cr1=fr1=Zn2=0,n;}};function Rn6(n,t){ur1+=n,ar1+=t,++On2;}function Ri1(){un8.point=$e5;}function $e5(n,t){un8.point=me6,Rn6(ln8=n,sn6=t);}function me6(n,t){var i=n-ln8,r=t-sn6,e=H12(i*i+r*r);zt5+=e*(ln8+n)/2,Lt6+=e*(sn6+t)/2,qn5+=e,Rn6(ln8=n,sn6=t);}function Mi1(){un8.point=Rn6;}function Ne5(){un8.point=ze5;}function Ae4(){$i1(wi1,Pi1);}function ze5(n,t){un8.point=$i1,Rn6(wi1=ln8=n,Pi1=sn6=t);}function $i1(n,t){var i=n-ln8,r=t-sn6,e=H12(i*i+r*r);zt5+=e*(ln8+n)/2,Lt6+=e*(sn6+t)/2,qn5+=e,e=sn6*n-ln8*t,cr1+=e*(ln8+n),fr1+=e*(sn6+t),Zn2+=e*3,Rn6(ln8=n,sn6=t);}function mi2(n){this._context=n;}mi2.prototype={_radius:4.5,pointRadius:function(n){return this._radius=n,this;},polygonStart:function(){this._line=0;},polygonEnd:function(){this._line=NaN;},lineStart:function(){this._point=0;},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN;},point:function(n,t){switch(this._point){case 0:{this._context.moveTo(n,t),this._point=1;break;}case 1:{this._context.lineTo(n,t);break;}default:{this._context.moveTo(n+this._radius,t),this._context.arc(n,t,this._radius,0,U15);break;}}},result:F14};var lr1=new C1,sr1,Ni1,Ai1,Wn3,Bn4,Hn3={point:F14,lineStart:function(){Hn3.point=Le3;},lineEnd:function(){sr1&&zi1(Ni1,Ai1),Hn3.point=F14;},polygonStart:function(){sr1=!0;},polygonEnd:function(){sr1=null;},result:function(){var n=+lr1;return lr1=new C1,n;}};function Le3(n,t){Hn3.point=zi1,Ni1=Wn3=n,Ai1=Bn4=t;}function zi1(n,t){Wn3-=n,Bn4-=t,lr1.add(H12(Wn3*Wn3+Bn4*Bn4)),Wn3=n,Bn4=t;}let Li1,Ct5,Ci1,qi1;class Ii1{constructor(t){this._append=t==null?xi2:Ce4(t),this._radius=4.5,this._="";}pointRadius(t){return this._radius=+t,this;}polygonStart(){this._line=0;}polygonEnd(){this._line=NaN;}lineStart(){this._point=0;}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN;}point(t,i){switch(this._point){case 0:{this._append`M${t},${i}`,this._point=1;break;}case 1:{this._append`L${t},${i}`;break;}default:{if(this._append`M${t},${i}`,this._radius!==Ci1||this._append!==Ct5){const r=this._radius,e=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Ci1=r,Ct5=this._append,qi1=this._,this._=e;}this._+=qi1;break;}}}result(){const t=this._;return this._="",t.length?t:null;}}function xi2(n){let t=1;this._+=n[0];for(const i=n.length;t<i;++t)this._+=arguments[t]+n[t];}function Ce4(n){const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);if(t>15)return xi2;if(t!==Li1){const i=10**t;Li1=t,Ct5=function(e){let o=1;this._+=e[0];for(const a=e.length;o<a;++o)this._+=Math.round(arguments[o]*i)/i+e[o];};}return Ct5;}function qe3(n,t){let i=3,r=4.5,e,o;function a(u){return u&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),an7(u,e(o))),o.result();}return a.area=function(u){return an7(u,e(En4)),En4.result();},a.measure=function(u){return an7(u,e(Hn3)),Hn3.result();},a.bounds=function(u){return an7(u,e(At6)),At6.result();},a.centroid=function(u){return an7(u,e(un8)),un8.result();},a.projection=function(u){return arguments.length?(e=u==null?(n=null,Fn3):(n=u).stream,a):n;},a.context=function(u){return arguments.length?(o=u==null?(t=null,new Ii1(i)):new mi2(t=u),typeof r!="function"&&o.pointRadius(r),a):t;},a.pointRadius=function(u){return arguments.length?(r=typeof u=="function"?u:(o.pointRadius(+u),+u),a):r;},a.digits=function(u){if(!arguments.length)return i;if(u==null)i=null;else{const f=Math.floor(u);if(!(f>=0))throw new RangeError(`invalid digits: ${u}`);i=f;}return t===null&&(o=new Ii1(i)),a;},a.projection(n).digits(i).context(t);}function kn3(n){return function(t){var i=new pr1;for(var r in n)i[r]=n[r];return i.stream=t,i;};}function pr1(){}pr1.prototype={constructor:pr1,point:function(n,t){this.stream.point(n,t);},sphere:function(){this.stream.sphere();},lineStart:function(){this.stream.lineStart();},lineEnd:function(){this.stream.lineEnd();},polygonStart:function(){this.stream.polygonStart();},polygonEnd:function(){this.stream.polygonEnd();}};function gr(n,t,i){var r=n.clipExtent&&n.clipExtent();return n.scale(150).translate([0,0]),r!=null&&n.clipExtent(null),an7(i,n.stream(At6)),t(At6.result()),r!=null&&n.clipExtent(r),n;}function qt6(n,t,i){return gr(n,function(r){var e=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(e/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),u=+t[0][0]+(e-a*(r[1][0]+r[0][0]))/2,f=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;n.scale(150*a).translate([u,f]);},i);}function hr1(n,t,i){return qt6(n,[[0,0],t],i);}function vr1(n,t,i){return gr(n,function(r){var e=+t,o=e/(r[1][0]-r[0][0]),a=(e-o*(r[1][0]+r[0][0]))/2,u=-o*r[0][1];n.scale(150*o).translate([a,u]);},i);}function dr(n,t,i){return gr(n,function(r){var e=+t,o=e/(r[1][1]-r[0][1]),a=-o*r[0][0],u=(e-o*(r[1][1]+r[0][1]))/2;n.scale(150*o).translate([a,u]);},i);}var Ti1=16,xe4=$9(30*N13);function Xi1(n,t){return+t?Xe4(n,t):Te4(n);}function Te4(n){return kn3({point:function(t,i){t=n(t,i),this.stream.point(t[0],t[1]);}});}function Xe4(n,t){function i(r,e,o,a,u,f,p,c,s,l,g,h,y,S){var P=p-r,M=c-e,v=P*P+M*M;if(v>4*t&&y--){var d=a+l,R=u+g,A=f+h,I=H12(d*d+R*R+A*A),x=J14(A/=I),T=C12(C12(A)-1)<m5||C12(o-s)<m5?(o+s)/2:K14(R,d),D=n(T,x),z=D[0],_=D[1],W=z-r,X=_-e,E=M*W-P*X;(E*E/v>t||C12((P*W+M*X)/v-.5)>.3||a*l+u*g+f*h<xe4)&&(i(r,e,o,a,u,f,z,_,T,d/=I,R/=I,A,y,S),S.point(z,_),i(z,_,T,d,R,A,p,c,s,l,g,h,y,S));}}return function(r){var e,o,a,u,f,p,c,s,l,g,h,y,S={point:P,lineStart:M,lineEnd:d,polygonStart:function(){r.polygonStart(),S.lineStart=R;},polygonEnd:function(){r.polygonEnd(),S.lineStart=M;}};function P(x,T){x=n(x,T),r.point(x[0],x[1]);}function M(){s=NaN,S.point=v,r.lineStart();}function v(x,T){var D=wn7([x,T]),z=n(x,T);i(s,l,c,g,h,y,s=z[0],l=z[1],c=x,g=D[0],h=D[1],y=D[2],Ti1,r),r.point(s,l);}function d(){S.point=P,r.lineEnd();}function R(){M(),S.point=A,S.lineEnd=I;}function A(x,T){v(e=x,T),o=s,a=l,u=g,f=h,p=y,S.point=v;}function I(){i(s,l,c,g,h,y,o,a,e,u,f,p,Ti1,r),S.lineEnd=d,d();}return S;};}var Ye4=kn3({point:function(n,t){this.stream.point(n*N13,t*N13);}});function De3(n){return kn3({point:function(t,i){var r=n(t,i);return this.stream.point(r[0],r[1]);}});}function Fe4(n,t,i,r,e){function o(a,u){return a*=r,u*=e,[t+n*a,i-n*u];}return o.invert=function(a,u){return[(a-t)/n*r,(i-u)/n*e];},o;}function Yi1(n,t,i,r,e,o){if(!o)return Fe4(n,t,i,r,e);var a=$9(o),u=w11(o),f=a*n,p=u*n,c=a/n,s=u/n,l=(u*i-a*t)/n,g=(u*t+a*i)/n;function h(y,S){return y*=r,S*=e,[f*y-p*S+t,i-p*y-f*S];}return h.invert=function(y,S){return[r*(c*y-s*S+l),e*(g-s*y-c*S)];},h;}function pn6(n){return Er2(function(){return n;})();}function Er2(n){var t,i=150,r=480,e=250,o=0,a=0,u=0,f=0,p=0,c,s=0,l=1,g=1,h=null,y=_t4,S=null,P,M,v,d=Fn3,R=.5,A,I,x,T,D;function z(E){return x(E[0]*N13,E[1]*N13);}function _(E){return E=x.invert(E[0],E[1]),E&&[E[0]*Y13,E[1]*Y13];}z.stream=function(E){return T&&D===E?T:T=Ye4(De3(c)(y(A(d(D=E)))));},z.preclip=function(E){return arguments.length?(y=E,h=void 0,X()):y;},z.postclip=function(E){return arguments.length?(d=E,S=P=M=v=null,X()):d;},z.clipAngle=function(E){return arguments.length?(y=+E?ui3(h=E*N13):(h=null,_t4),X()):h*Y13;},z.clipExtent=function(E){return arguments.length?(d=E==null?(S=P=M=v=null,Fn3):wt4(S=+E[0][0],P=+E[0][1],M=+E[1][0],v=+E[1][1]),X()):S==null?null:[[S,P],[M,v]];},z.scale=function(E){return arguments.length?(i=+E,W()):i;},z.translate=function(E){return arguments.length?(r=+E[0],e=+E[1],W()):[r,e];},z.center=function(E){return arguments.length?(o=E[0]%360*N13,a=E[1]%360*N13,W()):[o*Y13,a*Y13];},z.rotate=function(E){return arguments.length?(u=E[0]%360*N13,f=E[1]%360*N13,p=E.length>2?E[2]%360*N13:0,W()):[u*Y13,f*Y13,p*Y13];},z.angle=function(E){return arguments.length?(s=E%360*N13,W()):s*Y13;},z.reflectX=function(E){return arguments.length?(l=E?-1:1,W()):l<0;},z.reflectY=function(E){return arguments.length?(g=E?-1:1,W()):g<0;},z.precision=function(E){return arguments.length?(A=Xi1(I,R=E*E),X()):H12(R);},z.fitExtent=function(E,q){return qt6(z,E,q);},z.fitSize=function(E,q){return hr1(z,E,q);},z.fitWidth=function(E,q){return vr1(z,E,q);},z.fitHeight=function(E,q){return dr(z,E,q);};function W(){var E=Yi1(i,0,0,l,g,s).apply(null,t(o,a)),q=Yi1(i,r-E[0],e-E[1],l,g,s);return c=Vt5(u,f,p),I=Jt5(t,q),x=Jt5(c,I),A=Xi1(I,R),X();}function X(){return T=D=null,z;}return function(){return t=n.apply(this,arguments),z.invert=t.invert&&_,W();};}function Sr2(n){var t=0,i=L17/3,r=Er2(n),e=r(t,i);return e.parallels=function(o){return arguments.length?r(t=o[0]*N13,i=o[1]*N13):[t*Y13,i*Y13];},e;}function Ge3(n){var t=$9(n);function i(r,e){return[r*t,w11(e)/t];}return i.invert=function(r,e){return[r/t,J14(e*t)];},i;}function Di1(n,t){var i=w11(n),r=(i+w11(t))/2;if(C12(r)<m5)return Ge3(n);var e=1+i*(2*r-i),o=H12(e)/r;function a(u,f){var p=H12(e-2*r*w11(f))/r;return[p*w11(u*=r),o-p*$9(u)];}return a.invert=function(u,f){var p=o-f,c=K14(u,C12(p))*on7(p);return p*r<0&&(c-=L17*on7(u)*on7(p)),[c/r,J14((e-(u*u+p*p)*r*r)/(2*r))];},a;}function It4(){return Sr2(Di1).scale(155.424).center([0,33.6442]);}function Fi(){return It4().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7]);}function Oe1(n){var t=n.length;return{point:function(i,r){for(var e=-1;++e<t;)n[e].point(i,r);},sphere:function(){for(var i=-1;++i<t;)n[i].sphere();},lineStart:function(){for(var i=-1;++i<t;)n[i].lineStart();},lineEnd:function(){for(var i=-1;++i<t;)n[i].lineEnd();},polygonStart:function(){for(var i=-1;++i<t;)n[i].polygonStart();},polygonEnd:function(){for(var i=-1;++i<t;)n[i].polygonEnd();}};}function Ze3(){var n,t,i=Fi(),r,e=It4().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=It4().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,f,p={point:function(l,g){f=[l,g];}};function c(l){var g=l[0],h=l[1];return f=null,(r.point(g,h),f)||(o.point(g,h),f)||(u.point(g,h),f);}c.invert=function(l){var g=i.scale(),h=i.translate(),y=(l[0]-h[0])/g,S=(l[1]-h[1])/g;return(S>=.12&&S<.234&&y>=-.425&&y<-.214?e:S>=.166&&S<.234&&y>=-.214&&y<-.115?a:i).invert(l);},c.stream=function(l){return n&&t===l?n:n=Oe1([i.stream(t=l),e.stream(l),a.stream(l)]);},c.precision=function(l){return arguments.length?(i.precision(l),e.precision(l),a.precision(l),s()):i.precision();},c.scale=function(l){return arguments.length?(i.scale(l),e.scale(l*.35),a.scale(l),c.translate(i.translate())):i.scale();},c.translate=function(l){if(!arguments.length)return i.translate();var g=i.scale(),h=+l[0],y=+l[1];return r=i.translate(l).clipExtent([[h-.455*g,y-.238*g],[h+.455*g,y+.238*g]]).stream(p),o=e.translate([h-.307*g,y+.201*g]).clipExtent([[h-.425*g+m5,y+.12*g+m5],[h-.214*g-m5,y+.234*g-m5]]).stream(p),u=a.translate([h-.205*g,y+.212*g]).clipExtent([[h-.214*g+m5,y+.166*g+m5],[h-.115*g-m5,y+.234*g-m5]]).stream(p),s();},c.fitExtent=function(l,g){return qt6(c,l,g);},c.fitSize=function(l,g){return hr1(c,l,g);},c.fitWidth=function(l,g){return vr1(c,l,g);},c.fitHeight=function(l,g){return dr(c,l,g);};function s(){return n=t=null,c;}return c.scale(1070);}function Gi1(n){return function(t,i){var r=$9(t),e=$9(i),o=n(r*e);return o===Infinity?[2,0]:[o*e*w11(t),o*w11(i)];};}function Un3(n){return function(t,i){var r=H12(t*t+i*i),e=n(r),o=w11(e),a=$9(e);return[K14(t*o,r*a),J14(r&&i*o/r)];};}var yr1=Gi1(function(n){return H12(2/(1+n));});yr1.invert=Un3(function(n){return 2*J14(n/2);});function We4(){return pn6(yr1).scale(124.75).clipAngle(180-.001);}var wr1=Gi1(function(n){return(n=Lr1(n))&&n/w11(n);});wr1.invert=Un3(function(n){return n;});function Be3(){return pn6(wr1).scale(79.4188).clipAngle(180-.001);}function Kn2(n,t){return[n,rt7(Dt5((O13+t)/2))];}Kn2.invert=function(n,t){return[n,2*mn6(zr2(t))-O13];};function He4(){return Oi1(Kn2).scale(961/U15);}function Oi1(n){var t=pn6(n),i=t.center,r=t.scale,e=t.translate,o=t.clipExtent,a=null,u,f,p;t.scale=function(s){return arguments.length?(r(s),c()):r();},t.translate=function(s){return arguments.length?(e(s),c()):e();},t.center=function(s){return arguments.length?(i(s),c()):i();},t.clipExtent=function(s){return arguments.length?(s==null?a=u=f=p=null:(a=+s[0][0],u=+s[0][1],f=+s[1][0],p=+s[1][1]),c()):a==null?null:[[a,u],[f,p]];};function c(){var s=L17*r(),l=t(_r(t.rotate()).invert([0,0]));return o(a==null?[[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]]:n===Kn2?[[Math.max(l[0]-s,a),u],[Math.min(l[0]+s,f),p]]:[[a,Math.max(l[1]-s,u)],[f,Math.min(l[1]+s,p)]]);}return c();}function xt6(n){return Dt5((O13+n)/2);}function Zi(n,t){var i=$9(n),r=n===t?w11(n):rt7(i/$9(t))/rt7(xt6(t)/xt6(n)),e=i*Yt6(xt6(n),r)/r;if(!r)return Kn2;function o(a,u){e>0?u<-O13+m5&&(u=-O13+m5):u>O13-m5&&(u=O13-m5);var f=e/Yt6(xt6(u),r);return[f*w11(r*a),e-f*$9(r*a)];}return o.invert=function(a,u){var f=e-u,p=on7(r)*H12(a*a+f*f),c=K14(a,C12(f))*on7(f);return f*r<0&&(c-=L17*on7(a)*on7(f)),[c/r,2*mn6(Yt6(e/p,1/r))-O13];},o;}function ke4(){return Sr2(Zi).scale(109.5).parallels([30,30]);}function Jn3(n,t){return[n,t];}Jn3.invert=Jn3;function Ue4(){return pn6(Jn3).scale(152.63);}function Wi1(n,t){var i=$9(n),r=n===t?w11(n):(i-$9(t))/(t-n),e=i/r+n;if(C12(r)<m5)return Jn3;function o(a,u){var f=e-u,p=r*a;return[f*w11(p),e-f*$9(p)];}return o.invert=function(a,u){var f=e-u,p=K14(a,C12(f))*on7(f);return f*r<0&&(p-=L17*on7(a)*on7(f)),[p/r,e-on7(r)*H12(a*a+f*f)];},o;}function Ke4(){return Sr2(Wi1).scale(131.154).center([0,13.9389]);}var Qn2=1.340264,Vn2=-.081106,jn4=893e-6,_n3=.003796,Tt6=H12(3)/2,Je4=12;function Pr2(n,t){var i=J14(Tt6*w11(t)),r=i*i,e=r*r*r;return[n*$9(i)/(Tt6*(Qn2+3*Vn2*r+e*(7*jn4+9*_n3*r))),i*(Qn2+Vn2*r+e*(jn4+_n3*r))];}Pr2.invert=function(n,t){for(var i=t,r=i*i,e=r*r*r,o=0,a,u,f;o<Je4&&!(u=i*(Qn2+Vn2*r+e*(jn4+_n3*r))-t,f=Qn2+3*Vn2*r+e*(7*jn4+9*_n3*r),i-=a=u/f,r=i*i,e=r*r*r,C12(a)<xn5);++o);return[Tt6*n*(Qn2+3*Vn2*r+e*(7*jn4+9*_n3*r))/$9(i),J14(w11(i)/Tt6)];};function Qe5(){return pn6(Pr2).scale(177.158);}function Rr1(n,t){var i=$9(t),r=$9(n)*i;return[i*w11(n)/r,w11(t)/r];}Rr1.invert=Un3(mn6);function Ve4(){return pn6(Rr1).scale(144.049).clipAngle(60);}function je5(){var n=1,t=0,i=0,r=1,e=1,o=0,a,u,f=null,p,c,s,l=1,g=1,h=kn3({point:function(d,R){var A=v([d,R]);this.stream.point(A[0],A[1]);}}),y=Fn3,S,P;function M(){return l=n*r,g=n*e,S=P=null,v;}function v(d){var R=d[0]*l,A=d[1]*g;if(o){var I=A*a-R*u;R=R*a+A*u,A=I;}return[R+t,A+i];}return v.invert=function(d){var R=d[0]-t,A=d[1]-i;if(o){var I=A*a+R*u;R=R*a-A*u,A=I;}return[R/l,A/g];},v.stream=function(d){return S&&P===d?S:S=h(y(P=d));},v.postclip=function(d){return arguments.length?(y=d,f=p=c=s=null,M()):y;},v.clipExtent=function(d){return arguments.length?(y=d==null?(f=p=c=s=null,Fn3):wt4(f=+d[0][0],p=+d[0][1],c=+d[1][0],s=+d[1][1]),M()):f==null?null:[[f,p],[c,s]];},v.scale=function(d){return arguments.length?(n=+d,M()):n;},v.translate=function(d){return arguments.length?(t=+d[0],i=+d[1],M()):[t,i];},v.angle=function(d){return arguments.length?(o=d%360*N13,u=w11(o),a=$9(o),M()):o*Y13;},v.reflectX=function(d){return arguments.length?(r=d?-1:1,M()):r<0;},v.reflectY=function(d){return arguments.length?(e=d?-1:1,M()):e<0;},v.fitExtent=function(d,R){return qt6(v,d,R);},v.fitSize=function(d,R){return hr1(v,d,R);},v.fitWidth=function(d,R){return vr1(v,d,R);},v.fitHeight=function(d,R){return dr(v,d,R);},v;}function Mr2(n,t){var i=t*t,r=i*i;return[n*(.8707-.131979*i+r*(-.013791+r*(.003971*i-.001529*r))),t*(1.007226+i*(.015085+r*(-.044475+.028874*i-.005916*r)))];}Mr2.invert=function(n,t){var i=t,r=25,e;do{var o=i*i,a=o*o;i-=e=(i*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)));}while(C12(e)>m5&&--r>0)return[n/(.8707+(o=i*i)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),i];};function _e4(){return pn6(Mr2).scale(175.295);}function $r2(n,t){return[$9(t)*w11(n),w11(t)];}$r2.invert=Un3(J14);function be5(){return pn6($r2).scale(249.5).clipAngle(90+m5);}function mr1(n,t){var i=$9(t),r=1+$9(n)*i;return[i*w11(n)/r,w11(t)/r];}mr1.invert=Un3(function(n){return 2*mn6(n);});function no1(){return pn6(mr1).scale(250).clipAngle(142);}function Nr2(n,t){return[rt7(Dt5((O13+t)/2)),-n];}Nr2.invert=function(n,t){return[-t,2*mn6(zr2(n))-O13];};function to1(){var n=Oi1(Nr2),t=n.center,i=n.rotate;return n.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]]);},n.rotate=function(r){return arguments.length?i([r[0],r[1],r.length>2?r[2]+90:90]):(r=i(),[r[0],r[1],r[2]-90]);},i([0,0,90]).scale(159.155);}var d7=Math.abs,y9=Math.atan,V11=Math.atan2,w12=Math.cos,tr2=Math.exp,dr1=Math.floor,Y14=Math.log,fr2=Math.max,X16=Math.min,Fr2=Math.pow,$10=Math.sign||function(r){return r>0?1:r<0?-1:0;},R13=Math.sin,I15=Math.tan,P14=1e-6,Sr3=1e-12,k12=Math.PI,M10=k12/2,C13=k12/4,b8=Math.SQRT1_2,K15=S15(2),x11=S15(k12),rr2=k12*2,W15=180/k12,H13=k12/180;function Kt6(r){return r?r/Math.sin(r):1;}function q16(r){return r>1?M10:r<-1?-M10:Math.asin(r);}function J15(r){return r>1?0:r<-1?k12:Math.acos(r);}function S15(r){return r>0?Math.sqrt(r):0;}function Tt7(r){return r=tr2(2*r),(r-1)/(r+1);}function un9(r){return(tr2(r)-tr2(-r))/2;}function Ee3(r){return(tr2(r)+tr2(-r))/2;}function yt5(r){return Y14(r+S15(r*r+1));}function Ut5(r){return Y14(r+S15(r*r-1));}function $r3(r,n){var e=w12(n),t=Kt6(J15(e*w12(r/=2)));return[2*e*R13(r)*t,R13(n)*t];}$r3.invert=function(r,n){if(r*r+4*n*n>k12*k12+P14)return;var e=r,t=n,u=25;do{var o=R13(e),i=R13(e/2),a=w12(e/2),f=R13(t),c=w12(t),l=R13(2*t),s=f*f,v=c*c,g=i*i,h=1-v*a*a,m=h?J15(c*a)*S15(E=1/h):E=0,E,z=2*m*c*i-r,G=m*f-n,F=E*(v*g+m*c*a*s),p=E*(.5*o*l-m*2*f*i),N=E*.25*(l*i-m*f*v*o),Q=E*(s*a+m*g*c),T=p*N-Q*F;if(!T)break;var O=(G*p-z*Q)/T,U=(z*N-G*F)/T;e-=O,t-=U;}while((d7(O)>P14||d7(U)>P14)&&--u>0)return[e,t];};function Ir2(r,n){var e=I15(n/2),t=S15(1-e*e),u=1+t*w12(r/=2),o=R13(r)*t/u,i=e/u,a=o*o,f=i*i;return[4/3*o*(3+a-3*f),4/3*i*(3+3*a-f)];}Ir2.invert=function(r,n){if(r*=3/8,n*=3/8,!r&&d7(n)>1)return null;var e=r*r,t=n*n,u=1+e+t,o=S15((u-S15(u*u-4*n*n))/2),i=q16(o)/3,a=o?Ut5(d7(n/o))/3:yt5(d7(r))/3,f=w12(i),c=Ee3(a),l=c*c-f*f;return[$10(r)*2*V11(un9(a)*f,.25-l),$10(n)*2*V11(c*R13(i),.25+l)];};var an8=S15(8),Zt7=Y14(1+K15);function cn8(r,n){var e=d7(n);return e<C13?[r,Y14(I15(C13+n/2))]:[r*w12(e)*(2*K15-1/R13(e)),$10(n)*(2*K15*(e-C13)-Y14(I15(e/2)))];}cn8.invert=function(r,n){if((o=d7(n))<Zt7)return[r,2*y9(tr2(n))-M10];var e=C13,t=25,u,o;do{var i=w12(e/2),a=I15(e/2);e-=u=(an8*(e-C13)-Y14(a)-o)/(an8-i*i/(2*a));}while(d7(u)>Sr3&&--t>0)return[r/(w12(e)*(an8-1/R13(e))),$10(n)*e];};function Ge4(r,n){return[r*w12(n)/w12(n/=2),2*R13(n)];}Ge4.invert=function(r,n){var e=2*q16(n/2);return[r*w12(e/2)/w12(e),e];};function Vr3(r,n,e){var t=100,u,o,i;e=e===void 0?0:+e,n=+n;do o=r(e),i=r(e+P14),o===i&&(i=o+P14),e-=u=-1*P14*(o-n)/(o-i);while(t-- >0&&d7(u)>P14)return t<0?NaN:e;}function Fe5(r,n){var e=r*R13(n),t=30,u;do n-=u=(n+R13(n)-e)/(1+w12(n));while(d7(u)>P14&&--t>0)return n/2;}function ln9(r,n,e){function t(u,o){return[r*u*w12(o=Fe5(e,o)),n*R13(o)];}return t.invert=function(u,o){return o=q16(o/n),[u/(r*w12(o)),q16((2*o+R13(2*o))/e)];},t;}var gr1=ln9(K15/M10,K15,k12);function jt6(){return pn6(gr1).scale(169.529);}var Wr3=2.00276,qe4=1.11072;function Qr3(r,n){var e=Fe5(k12,n);return[Wr3*r/(1/w12(n)+qe4/w12(e)),(n+K15*R13(e))/Wr3];}Qr3.invert=function(r,n){var e=Wr3*n,t=n<0?-C13:C13,u=25,o,i;do i=e-K15*R13(t),t-=o=(R13(2*t)+2*t-k12*R13(i))/(2*w12(2*t)+2+k12*w12(i)*K15*w12(t));while(d7(o)>P14&&--u>0)return i=e-K15*R13(t),[r*(1/w12(i)+qe4/w12(t))/Wr3,i];};function lr2(r,n){return[r*w12(n),n];}lr2.invert=function(r,n){return[r/w12(n),n];};ln9(1,4/k12,k12);function or2(r,n){var e=S15(1-R13(n));return[2/x11*r*e,x11*(1-e)];}or2.invert=function(r,n){var e=(e=n/x11-1)*e;return[e>0?r*S15(k12/e)/2:0,q16(1-e)];};var Kr3=S15(3);function gn6(r,n){return[Kr3*r*(2*w12(2*n/3)-1)/x11,Kr3*x11*R13(n/3)];}gn6.invert=function(r,n){var e=3*q16(n/(Kr3*x11));return[x11*r/(Kr3*(2*w12(2*e/3)-1)),e];};function wn8(r){var n=w12(r);function e(t,u){return[t*n,R13(u)/n];}return e.invert=function(t,u){return[t/n,q16(u*n)];},e;}function Rn7(r,n){var e=S15(8/(3*k12));return[e*r*(1-d7(n)/k12),e*n];}Rn7.invert=function(r,n){var e=S15(8/(3*k12)),t=n/e;return[r/(e*(1-d7(t)/k12)),t];};function kn4(r,n){var e=S15(4-3*R13(d7(n)));return[2/S15(6*k12)*r*e,$10(n)*S15(2*k12/3)*(2-e)];}kn4.invert=function(r,n){var e=2-d7(n)/S15(2*k12/3);return[r*S15(6*k12)/(2*e),$10(n)*q16((4-e*e)/3)];};function hn7(r,n){var e=S15(k12*(4+k12));return[2/e*r*(1+S15(1-4*n*n/(k12*k12))),4/e*n];}hn7.invert=function(r,n){var e=S15(k12*(4+k12))/2;return[r*e/(1+S15(1-n*n*(4+k12)/(4*k12))),n*e/2];};function mn7(r,n){var e=(2+M10)*R13(n);n/=2;for(var t=0,u=Infinity;t<10&&d7(u)>P14;t++){var o=w12(n);n-=u=(n+R13(n)*(o+2)-e)/(2*o*(1+o));}return[2/S15(k12*(4+k12))*r*(1+w12(n)),2*S15(k12/(4+k12))*R13(n)];}mn7.invert=function(r,n){var e=n*S15((4+k12)/k12)/2,t=q16(e),u=w12(t);return[r/(2/S15(k12*(4+k12))*(1+u)),q16((t+e*(u+2))/(2+M10))];};function Sn6(r,n){return[r*(1+w12(n))/S15(2+k12),2*n/S15(2+k12)];}Sn6.invert=function(r,n){var e=S15(2+k12),t=n*e/2;return[e*r/(1+w12(t)),t];};function dn8(r,n){for(var e=(1+M10)*R13(n),t=0,u=Infinity;t<10&&d7(u)>P14;t++)n-=u=(n+R13(n)-e)/(1+w12(n));return e=S15(2+k12),[r*(1+w12(n))/e,2*n/e];}dn8.invert=function(r,n){var e=1+M10,t=S15(e/2);return[r*2*t/(1+w12(n*=t)),q16((n+R13(n))/e)];};var Tr1=3+2*K15;function En5(r,n){var e=R13(r/=2),t=w12(r),u=S15(w12(n)),o=w12(n/=2),i=R13(n)/(o+K15*t*u),a=S15(2/(1+i*i)),f=S15((K15*o+(t+e)*u)/(K15*o+(t-e)*u));return[Tr1*(a*(f-1/f)-2*Y14(f)),Tr1*(a*i*(f+1/f)-2*y9(i))];}En5.invert=function(r,n){if(!(o=Ir2.invert(r/1.2,n*1.065)))return null;var e=o[0],t=o[1],u=20,o;r/=Tr1,n/=Tr1;do{var i=e/2,a=t/2,f=R13(i),c=w12(i),l=R13(a),s=w12(a),v=w12(t),g=S15(v),h=l/(s+K15*c*g),m=h*h,E=S15(2/(1+m)),z=K15*s+(c+f)*g,G=K15*s+(c-f)*g,F=z/G,p=S15(F),N=p-1/p,Q=p+1/p,T=E*N-2*Y14(p)-r,O=E*h*Q-2*y9(h)-n,U=l&&b8*g*f*m/l,_=(K15*c*s+g)/(2*(s+K15*c*g)*(s+K15*c*g)*g),nr=-.5*h*E*E*E,kr=nr*U,hr=nr*_,D=(D=2*s+K15*g*(c-f))*D*p,B=(K15*c*s*g+v)/D,er=-(K15*f*l)/(g*D),ir=N*kr-2*B/p+E*(B+B/F),ar=N*hr-2*er/p+E*(er+er/F),cr=h*Q*kr-2*U/(1+m)+E*Q*U+E*h*(B-B/F),sr=h*Q*hr-2*_/(1+m)+E*Q*_+E*h*(er-er/F),vr=ar*cr-sr*ir;if(!vr)break;var mr=(O*ar-T*sr)/vr,zr=(T*cr-O*ir)/vr;e-=mr,t=fr2(-M10,X16(M10,t-zr));}while((d7(mr)>P14||d7(zr)>P14)&&--u>0)return d7(d7(t)-M10)<P14?[0,t]:u&&[e,t];};var yr2=w12(35*H13);function Pn5(r,n){var e=I15(n/2);return[r*yr2*S15(1-e*e),(1+yr2)*e];}Pn5.invert=function(r,n){var e=n/(1+yr2);return[r&&r/(yr2*S15(1-e*e)),2*y9(e)];};function Mn5(r,n){var e=n/2,t=w12(e);return[2*r/x11*w12(n)*t*t,x11*I15(e)];}Mn5.invert=function(r,n){var e=y9(n/x11),t=w12(e),u=2*e;return[r*x11/2/(w12(u)*t*t),u];};function Or3(r,n,e,t,u,o,i,a){arguments.length<8&&(a=0);function f(c,l){if(!l)return[r*c/k12,0];var s=l*l,v=r+s*(n+s*(e+s*t)),g=l*(u-1+s*(o-a+s*i)),h=(v*v+g*g)/(2*g),m=c*q16(v/h)/k12;return[h*R13(m),l*(1+s*a)+h*(1-w12(m))];}return f.invert=function(c,l){var s=k12*c/r,v=l,g,h,m=50;do{var E=v*v,z=r+E*(n+E*(e+E*t)),G=v*(u-1+E*(o-a+E*i)),F=z*z+G*G,p=2*G,N=F/p,Q=N*N,T=q16(z/N)/k12,O=s*T,U=z*z,_=(2*n+E*(4*e+E*6*t))*v,nr=u+E*(3*o+E*5*i),kr=2*(z*_+G*(nr-1)),hr=2*(nr-1),D=(kr*p-F*hr)/(p*p),B=w12(O),er=R13(O),ir=N*B,ar=N*er,cr=s/k12*(1/S15(1-U/Q))*(_*N-z*D)/Q,sr=ar-c,vr=v*(1+E*a)+N-ir-l,mr=D*er+ir*cr,zr=ir*T,ke=1+D-(D*B-ar*cr),he=ar*T,nn=mr*he-ke*zr;if(!nn)break;s-=g=(vr*mr-sr*ke)/nn,v-=h=(sr*he-vr*zr)/nn;}while((d7(g)>P14||d7(h)>P14)&&--m>0)return[s,v];},f;}Or3(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);Or3(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);Or3(5/6*k12,-.62636,-.0344,0,1.3493,-.05524,0,.045);function zn3(r,n){var e=r*r,t=n*n;return[r*(1-.162388*t)*(.87-952426e-9*e*e),n*(1+t/12)];}zn3.invert=function(r,n){var e=r,t=n,u=50,o;do{var i=t*t;t-=o=(t*(1+i/12)-n)/(1+i/4);}while(d7(o)>P14&&--u>0)u=50,r/=1-.162388*i;do{var a=(a=e*e)*a;e-=o=(e*(.87-952426e-9*a)-r)/(.87-.00476213*a);}while(d7(o)>P14&&--u>0)return[e,t];};Or3(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Yr3(r,n){var e=$10(r),t=$10(n),u=w12(n),o=w12(r)*u,i=R13(r)*u,a=R13(t*n);r=d7(V11(i,a)),n=q16(o),d7(r-M10)>P14&&(r%=M10);var f=p0(r>k12/4?M10-r:r,n);return r>k12/4&&(a=f[0],f[0]=-f[1],f[1]=-a),f[0]*=e,f[1]*=-t,f;}Yr3.invert=function(r,n){d7(r)>1&&(r=$10(r)*2-r),d7(n)>1&&(n=$10(n)*2-n);var e=$10(r),t=$10(n),u=-e*r,o=-t*n,i=o/u<1,a=F0(i?o:u,i?u:o),f=a[0],c=a[1],l=w12(c);return i&&(f=-M10-f),[e*(V11(R13(f)*l,-R13(c))+k12),t*q16(w12(f)*l)];};function p0(r,n){if(n===M10)return[0,0];var e=R13(n),t=e*e,u=t*t,o=1+u,i=1+3*u,a=1-u,f=q16(1/S15(o)),c=a+t*o*f,l=(1-e)/c,s=S15(l),v=l*o,g=S15(v),h=s*a,m,E;if(r===0)return[0,-(h+t*g)];var z=w12(n),G=1/z,F=2*e*z,p=(-3*t+f*i)*F,N=(-c*z-(1-e)*p)/(c*c),Q=.5*N/s,T=a*Q-2*t*s*F,O=t*o*N+l*i*F,U=-G*F,_=-G*O,nr=-2*G*T,kr=4*r/k12,hr;if(r>.222*k12||n<k12/4&&r>.175*k12){if(m=(h+t*S15(v*(1+u)-h*h))/(1+u),r>k12/4)return[m,m];var D=m,B=.5*m;m=.5*(B+D),E=50;do{var er=S15(v-m*m),ir=m*(nr+U*er)+_*q16(m/g)-kr;if(!ir)break;ir<0?B=m:D=m,m=.5*(B+D);}while(d7(D-B)>P14&&--E>0)}else{m=P14,E=25;do{var ar=m*m,cr=S15(v-ar),sr=nr+U*cr,vr=m*sr+_*q16(m/g)-kr,mr=sr+(_-U*ar)/cr;m-=hr=cr?vr/mr:0;}while(d7(hr)>P14&&--E>0)}return[m,-h-t*S15(v-m*m)];}function F0(r,n){for(var e=0,t=1,u=.5,o=50;;){var i=u*u,a=S15(u),f=q16(1/S15(1+i)),c=1-i+u*(1+i)*f,l=(1-a)/c,s=S15(l),v=l*(1+i),g=s*(1-i),h=v-r*r,m=S15(h),E=n+g+u*m;if(d7(t-e)<Sr3||--o===0||E===0)break;E>0?e=u:t=u,u=.5*(e+t);}if(!o)return null;var z=q16(a),G=w12(z),F=1/G,p=2*a*G,N=(-3*u+f*(1+3*i))*p,Q=(-c*G-(1-a)*N)/(c*c),T=.5*Q/s,O=(1-i)*T-2*u*s*p,U=-2*F*O,_=-F*p,nr=-F*(u*(1+i)*Q+l*(1+3*i)*p);return[k12/4*(r*(U+_*m)+nr*q16(r/S15(v))),z];}function A0(r,n,e){var t,u,o;return r?(t=Gn4(r,e),n?(u=Gn4(n,1-e),o=u[1]*u[1]+e*t[0]*t[0]*u[0]*u[0],[[t[0]*u[2]/o,t[1]*t[2]*u[0]*u[1]/o],[t[1]*u[1]/o,-t[0]*t[2]*u[0]*u[2]/o],[t[2]*u[1]*u[2]/o,-e*t[0]*t[1]*u[0]/o]]):[[t[0],0],[t[1],0],[t[2],0]]):(u=Gn4(n,1-e),[[0,u[0]/u[1]],[1/u[1],0],[u[2]/u[1],0]]);}function Gn4(r,n){var e,t,u,o,i;if(n<P14)return o=R13(r),t=w12(r),e=n*(r-o*t)/4,[o-e*t,t+e*o,1-n*o*o/2,r-e];if(n>=1-P14)return e=(1-n)/4,t=Ee3(r),o=Tt7(r),u=1/t,i=t*un9(r),[o+e*(i-r)/(t*t),u-e*o*u*(i-r),u+e*o*u*(i+r),2*y9(tr2(r))-M10+e*(i-r)/t];var a=[1,0,0,0,0,0,0,0,0],f=[S15(n),0,0,0,0,0,0,0,0],c=0;for(t=S15(1-n),i=1;d7(f[c]/a[c])>P14&&c<8;)e=a[c++],f[c]=(e-t)/2,a[c]=(e+t)/2,t=S15(e*t),i*=2;u=i*a[c]*r;do o=f[c]*R13(t=u)/a[c],u=(q16(o)+u)/2;while(--c)return[R13(u),o=w12(u),o/w12(u-t),u];}function N0(r,n,e){var t=d7(r),u=d7(n),o=un9(u);if(t){var i=1/R13(t),a=1/(I15(t)*I15(t)),f=-(a+e*(o*o*i*i)-1+e),c=(e-1)*a,l=(-f+S15(f*f-4*c))/2;return[qr3(y9(1/S15(l)),e)*$10(r),qr3(y9(S15((l/a-1)/e)),1-e)*$10(n)];}return[0,qr3(y9(o),1-e)*$10(n)];}function qr3(r,n){if(!n)return r;if(n===1)return Y14(I15(r/2+C13));for(var e=1,t=S15(1-n),u=S15(n),o=0;d7(u)>P14;o++){if(r%k12){var i=y9(t*I15(r)/e);i<0&&(i+=k12),r+=i+~~(r/k12)*k12;}else r+=r;u=(e+t)/2,t=S15(e*t),u=((e=u)-t)/2;}return r/(Fr2(2,o)*e);}function Jr3(r,n){var e=(K15-1)/(K15+1),t=S15(1-e*e),u=qr3(M10,t*t),o=-1,i=Y14(I15(k12/4+d7(n)/2)),a=tr2(o*i)/S15(e),f=$0(a*w12(o*r),a*R13(o*r)),c=N0(f[0],f[1],t*t);return[-c[1],(n>=0?1:-1)*(.5*u-c[0])];}function $0(r,n){var e=r*r,t=n+1,u=1-e-n*n;return[.5*((r>=0?M10:-M10)-V11(u,2*r)),-.25*Y14(u*u+4*e)+.5*Y14(t*t+e)];}function I0(r,n){var e=n[0]*n[0]+n[1]*n[1];return[(r[0]*n[0]+r[1]*n[1])/e,(r[1]*n[0]-r[0]*n[1])/e];}Jr3.invert=function(r,n){var e=(K15-1)/(K15+1),t=S15(1-e*e),u=qr3(M10,t*t),o=-1,i=A0(.5*u-n,-r,t*t),a=I0(i[0],i[1]),f=V11(a[1],a[0])/o;return[f,2*y9(tr2(.5/o*Y14(e*a[0]*a[0]+e*a[1]*a[1])))-M10];};var W0=3,pn7=q16(1-1/W0)*W15,Fn4=wn8(0);var Lr2=.7109889596207567,Pr3=.0528035274542;function Zr3(r,n){return n>-Lr2?(r=gr1(r,n),r[1]+=Pr3,r):lr2(r,n);}Zr3.invert=function(r,n){return n>-Lr2?gr1.invert(r,n-Pr3):lr2.invert(r,n);};function Xr3(r,n){return d7(n)>Lr2?(r=gr1(r,n),r[1]-=n>0?Pr3:-Pr3,r):lr2(r,n);}Xr3.invert=function(r,n){return d7(n)>Lr2?gr1.invert(r,n+(n>0?Pr3:-Pr3)):lr2.invert(r,n);};function An7(r,n){return[3/rr2*r*S15(k12*k12/3-n*n),n];}An7.invert=function(r,n){return[rr2/3*r/S15(k12*k12/3-n*n),n];};var Nn6=k12/K15;function $n5(r,n){return[r*(1+S15(w12(n)))/2,n/(w12(n/2)*w12(r/6))];}$n5.invert=function(r,n){var e=d7(r),t=d7(n),u=P14,o=M10;t<Nn6?o*=t/Nn6:u+=6*J15(Nn6/t);for(var i=0;i<25;i++){var a=R13(o),f=S15(w12(o)),c=R13(o/2),l=w12(o/2),s=R13(u/6),v=w12(u/6),g=.5*u*(1+f)-e,h=o/(l*v)-t,m=f?-.25*u*a/f:0,E=.5*(1+f),z=(1+.5*o*c/l)/(l*v),G=o/l*(s/6)/(v*v),F=m*G-z*E,p=(g*G-h*E)/F,N=(h*m-g*z)/F;if(o-=p,u-=N,d7(p)<P14&&d7(N)<P14)break;}return[r<0?-u:u,n<0?-o:o];};function In3(r,n){var e=r*r,t=n*n;return[r*(.975534+t*(-.119161+e*-.0143059+t*-.0547009)),n*(1.00384+e*(.0802894+t*-.02855+e*199025e-9)+t*(.0998909+t*-.0491032))];}In3.invert=function(r,n){var e=$10(r)*k12,t=n/2,u=50;do{var o=e*e,i=t*t,a=e*t,f=e*(.975534+i*(-.119161+o*-.0143059+i*-.0547009))-r,c=t*(1.00384+o*(.0802894+i*-.02855+o*199025e-9)+i*(.0998909+i*-.0491032))-n,l=.975534-i*(.119161+3*o*.0143059+i*.0547009),s=-a*(2*.119161+4*.0547009*i+2*.0143059*o),v=a*(2*.0802894+4*199025e-9*o+2*-.02855*i),g=1.00384+o*(.0802894+199025e-9*o)+i*(3*(.0998909-.02855*o)-5*.0491032*i),h=s*v-g*l,m=(c*s-f*g)/h,E=(f*v-c*l)/h;e-=m,t-=E;}while((d7(m)>P14||d7(E)>P14)&&--u>0)return u&&[e,t];};function Hn4(r,n){return[R13(r)/w12(n),I15(n)*w12(r)];}Hn4.invert=function(r,n){var e=r*r,t=n*n,u=t+1,o=e+u,i=r?b8*S15((o-S15(o*o-4*e))/e):1/S15(u);return[q16(r*i),$10(n)*J15(i)];};function Vn3(r,n){return[r,1.25*Y14(I15(C13+.4*n))];}Vn3.invert=function(r,n){return[r,2.5*y9(tr2(.8*n))-.625*k12];};var Dr2=S15(6),Cr2=S15(7);function Wn4(r,n){var e=q16(7*R13(n)/(3*Dr2));return[Dr2*r*(2*w12(2*e/3)-1)/Cr2,9*R13(e/3)/Cr2];}Wn4.invert=function(r,n){var e=3*q16(n*Cr2/9);return[r*Cr2/(Dr2*(2*w12(2*e/3)-1)),q16(R13(e)*3*Dr2/7)];};function Qn3(r,n){for(var e=(1+b8)*R13(n),t=n,u=0,o;u<25&&!(t-=o=(R13(t/2)+R13(t)-e)/(.5*w12(t/2)+w12(t)),d7(o)<P14);u++);return[r*(1+2*w12(t)/w12(t/2))/(3*K15),2*S15(3)*R13(t/2)/S15(2+K15)];}Qn3.invert=function(r,n){var e=n*S15(2+K15)/(2*S15(3)),t=2*q16(e);return[3*K15*r/(1+2*w12(t)/w12(t/2)),q16((e+R13(t))/(1+b8))];};function Kn3(r,n){for(var e=S15(6/(4+k12)),t=(1+k12/4)*R13(n),u=n/2,o=0,i;o<25&&!(u-=i=(u/2+R13(u)-t)/(.5+w12(u)),d7(i)<P14);o++);return[e*(.5+w12(u))*r/1.5,e*u];}Kn3.invert=function(r,n){var e=S15(6/(4+k12)),t=n/e;return d7(d7(t)-M10)<P14&&(t=t<0?-M10:M10),[1.5*r/(e*(.5+w12(t))),q16((t/2+R13(t))/(1+k12/4))];};function Tn3(r,n){var e=n*n,t=e*e,u=e*t;return[r*(.84719-.13063*e+u*u*(-.04515+.05494*e-.02326*t+.00331*u)),n*(1.01183+t*t*(-.02625+.01926*e-.00396*t))];}Tn3.invert=function(r,n){var e=n,t=25,u,o,i,a;do o=e*e,i=o*o,e-=u=(e*(1.01183+i*i*(-.02625+.01926*o-.00396*i))-n)/(1.01183+i*i*(9*-.02625+11*.01926*o+13*-.00396*i));while(d7(u)>Sr3&&--t>0)return o=e*e,i=o*o,a=o*i,[r/(.84719-.13063*o+a*a*(-.04515+.05494*o-.02326*i+.00331*a)),e];};function yn5(r,n){return[r*(1+w12(n))/2,2*(n-I15(n/2))];}yn5.invert=function(r,n){for(var e=n/2,t=0,u=Infinity;t<10&&d7(u)>P14;++t){var o=w12(n/2);n-=u=(n-I15(n/2)-e)/(1-.5/(o*o));}return[2*r/(1+w12(n)),n];};function Un4(r,n){var e=R13(n),t=w12(n),u=$10(r);if(r===0||d7(n)===M10)return[0,n];if(n===0)return[r,0];if(d7(r)===M10)return[r*t,M10*e];var o=k12/(2*r)-2*r/k12,i=2*n/k12,a=(1-i*i)/(e-i),f=o*o,c=a*a,l=1+f/c,s=1+c/f,v=(o*e/a-o/2)/l,g=(c*e/f+a/2)/s,h=v*v+t*t/l,m=g*g-(c*e*e/f+a*e-1)/s;return[M10*(v+S15(h)*u),M10*(g+S15(m<0?0:m)*$10(-n*o)*u)];}Un4.invert=function(r,n){r/=M10,n/=M10;var e=r*r,t=n*n,u=e+t,o=k12*k12;return[r?(u-1+S15((1-u)*(1-u)+4*e))/(2*r)*M10:0,Vr3(function(i){return u*(k12*R13(i)-2*i)*k12+4*i*i*(n-R13(i))+2*k12*i-o*n;},0)];};var On3=1.0148,Yn3=.23185,Jn4=-.14499,Ln3=.02406,Ho1=On3,Vo1=5*Yn3,Wo1=7*Jn4,Qo1=9*Ln3,Br2=1.790857183;function Zn3(r,n){var e=n*n;return[r,n*(On3+e*e*(Yn3+e*(Jn4+Ln3*e)))];}Zn3.invert=function(r,n){n>Br2?n=Br2:n<-Br2&&(n=-Br2);var e=n,t;do{var u=e*e;e-=t=(e*(On3+u*u*(Yn3+u*(Jn4+Ln3*u)))-n)/(Ho1+u*u*(Vo1+u*(Wo1+Qo1*u)));}while(d7(t)>P14)return[r,e];};function Xn5(r,n){if(d7(n)<P14)return[r,0];var e=I15(n),t=r*R13(n);return[R13(t)/e,n+(1-w12(t))/e];}Xn5.invert=function(r,n){if(d7(n)<P14)return[r,0];var e=r*r+n*n,t=n*.5,u=10,o;do{var i=I15(t),a=1/w12(t),f=e-2*n*t+t*t;t-=o=(i*f+2*(t-n))/(2+f*a*a+2*(t-n)*i);}while(d7(o)>P14&&--u>0)return i=I15(t),[(d7(n)<d7(t+1/i)?q16(r*i):$10(n)*$10(r)*(J15(d7(r*i))+M10))/R13(t),t];};var Lo1=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],br2=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(r){return r.map(function(n){return Lo1[n];});});var at9=2/S15(3);function ct9(r,n){var e=or2(r,n);return[e[0]*at9,e[1]];}ct9.invert=function(r,n){return or2.invert(r/at9,n);};var j15=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];j15.forEach(function(r){r[1]*=1.593415793900743;});function bn3(r,n){var e=X16(18,d7(n)*36/k12),t=dr1(e),u=e-t,o=(s=j15[t])[0],i=s[1],a=(s=j15[++t])[0],f=s[1],c=(s=j15[X16(19,++t)])[0],l=s[1],s;return[r*(a+u*(c-o)/2+u*u*(c-2*a+o)/2),$10(n)*(f+u*(l-i)/2+u*u*(l-2*f+i)/2)];}bn3.invert=function(r,n){var e=n*90,t=X16(18,d7(e/5)),u=fr2(0,dr1(t));do{var o=j15[u][1],i=j15[u+1][1],a=j15[X16(19,u+2)][1],f=a-o,c=a-2*i+o,l=2*(d7(n)-i)/f,s=c/f,v=l*(1-s*l*(1-2*s*l));if(v>=0||u===1){e=(n>=0?5:-5)*(v+t);var g=50,h;do t=X16(18,d7(e)/5),u=dr1(t),v=t-u,o=j15[u][1],i=j15[u+1][1],a=j15[X16(19,u+2)][1],e-=(h=$10(n)*(i+v*(a-o)/2+v*v*(a-2*i+o)/2)-n)*W15;while(d7(h)>Sr3&&--g>0)break;}}while(--u>=0)var m=j15[u][0],E=j15[u+1][0],z=j15[X16(19,u+2)][0];return[r/(E+v*(z-m)/2+v*v*(z-2*E+m)/2),e*H13];};function ce4(r,n){var e=I15(n/2),t=R13(C13*e);return[r*(.74482-.34588*t*t),1.70711*e];}ce4.invert=function(r,n){var e=n/1.70711,t=R13(C13*e);return[r/(.74482-.34588*t*t),2*y9(e)];};function fe6(r,n){if(d7(n)<P14)return[r,0];var e=d7(n/M10),t=q16(e);if(d7(r)<P14||d7(d7(n)-M10)<P14)return[0,$10(n)*k12*I15(t/2)];var u=w12(t),o=d7(k12/r-r/k12)/2,i=o*o,a=u/(e+u-1),f=a*(2/e-1),c=f*f,l=c+i,s=a-c,v=i+a;return[$10(r)*k12*(o*s+S15(i*s*s-l*(a*a-c)))/l,$10(n)*k12*(f*v-o*S15((i+1)*l-v*v))/l];}fe6.invert=function(r,n){if(d7(n)<P14)return[r,0];if(d7(r)<P14)return[0,M10*R13(2*y9(n/k12))];var e=(r/=k12)*r,t=(n/=k12)*n,u=e+t,o=u*u,i=-d7(n)*(1+u),a=i-2*t+e,f=-2*i+1+2*t+o,c=t/f+(2*a*a*a/(f*f*f)-9*i*a/(f*f))/27,l=(i-a*a/(3*f))/f,s=2*S15(-l/3),v=J15(3*c/(l*s))/3;return[k12*(u-1+S15(1+2*(e-t)+o))/(2*r),$10(n)*k12*(-s*w12(v+k12/3)-a/(3*f))];};function le8(r,n){if(d7(n)<P14)return[r,0];var e=d7(n/M10),t=q16(e);if(d7(r)<P14||d7(d7(n)-M10)<P14)return[0,$10(n)*k12*I15(t/2)];var u=w12(t),o=d7(k12/r-r/k12)/2,i=o*o,a=u*(S15(1+i)-o*u)/(1+i*e*e);return[$10(r)*k12*a,$10(n)*k12*S15(1-a*(2*o+a))];}le8.invert=function(r,n){if(!r)return[0,M10*R13(2*y9(n/k12))];var e=d7(r/k12),t=(1-e*e-(n/=k12)*n)/(2*e),u=t*t,o=S15(u+1);return[$10(r)*k12*(o-t),$10(n)*M10*R13(2*V11(S15((1-2*t*e)*(t+o)-e),S15(o+t+e)))];};function se8(r,n){if(d7(n)<P14)return[r,0];var e=n/M10,t=q16(e);if(d7(r)<P14||d7(d7(n)-M10)<P14)return[0,k12*I15(t/2)];var u=(k12/r-r/k12)/2,o=e/(1+w12(t));return[k12*($10(r)*S15(u*u+1-o*o)-u),k12*o];}se8.invert=function(r,n){if(!n)return[r,0];var e=n/k12,t=(k12*k12*(1-e*e)-r*r)/(2*k12*r);return[r?k12*($10(r)*S15(t*t+1)-t):0,M10*R13(2*y9(e))];};function ve5(r,n){if(!n)return[r,0];var e=d7(n);if(!r||e===M10)return[0,n];var t=e/M10,u=t*t,o=(8*t-u*(u+2)-5)/(2*u*(t-1)),i=o*o,a=t*o,f=u+i+2*a,c=t+3*o,l=r/M10,s=l+1/l,v=$10(d7(r)-M10)*S15(s*s-4),g=v*v,h=f*(u+i*g-1)+(1-u)*(u*(c*c+4*i)+12*a*i+4*i*i),m=(v*(f+i-1)+2*S15(h))/(4*f+g);return[$10(r)*M10*m,$10(n)*M10*S15(1+v*d7(m)-m*m)];}ve5.invert=function(r,n){var e;if(!r||!n)return[r,n];var t=$10(n);n=d7(n)/k12;var u=$10(r)*r/M10,o=(u*u-1+4*n*n)/d7(u),i=o*o,a=n*(2-(n>.5?X16(n,d7(r)):0)),f=r*r+n*n,c=50;do{var l=a*a,s=(8*a-l*(l+2)-5)/(2*l*(a-1)),v=(3*a-l*a-10)/(2*l*a),g=s*s,h=a*s,m=a+s,E=m*m,z=a+3*s,G=E*(l+g*i-1)+(1-l)*(l*(z*z+4*g)+g*(12*h+4*g)),F=-2*m*(4*h*g+(1-4*l+3*l*l)*(1+v)+g*(-6+14*l-i+(-8+8*l-2*i)*v)+h*(-8+12*l+(-10+10*l-i)*v)),p=S15(G),N=o*(E+g-1)+2*p-u*(4*E+i),Q=o*(2*s*v+2*m*(1+v))+F/p-8*m*(o*(-1+g+E)+2*p)*(1+v)/(i+4*E);a-=e=N/Q;}while(e*f*f>P14&&--c>0)return[$10(r)*(S15(o*o+4)+o)*k12/4,t*M10*a];};var At7=4*k12+3*S15(3),Nt6=2*S15(2*k12*S15(3)/At7),$t4=ln9(Nt6*S15(3)/k12,Nt6,At7/6);function ge5(r,n){return[r*S15(1-3*n*n/(k12*k12)),n];}ge5.invert=function(r,n){return[r/S15(1-3*n*n/(k12*k12)),n];};function we7(r,n){var e=w12(n),t=w12(r)*e,u=1-t,o=w12(r=V11(R13(r)*e,-R13(n))),i=R13(r);return e=S15(1-t*t),[i*e-o*u,-o*e-i*u];}we7.invert=function(r,n){var e=(r*r+n*n)/-2,t=S15(-e*(2+e)),u=n*e+r*t,o=r*e-n*t,i=S15(o*o+u*u);return[V11(t*u,i*(1+e)),i?-q16(t*o/i):0];};function Re6(r,n){var e=$r3(r,n);return[(e[0]+r/M10)/2,(e[1]+n)/2];}Re6.invert=function(r,n){var e=r,t=n,u=25;do{var o=w12(t),i=R13(t),a=R13(2*t),f=i*i,c=o*o,l=R13(e),s=w12(e/2),v=R13(e/2),g=v*v,h=1-c*s*s,m=h?J15(o*s)*S15(E=1/h):E=0,E,z=.5*(2*m*o*v+e/M10)-r,G=.5*(m*i+t)-n,F=.5*E*(c*g+m*o*s*f)+.5/M10,p=E*(l*a/4-m*i*v),N=.125*E*(a*v-m*i*c*l),Q=.5*E*(f*s+m*g*o)+.5,T=p*N-Q*F,O=(G*p-z*Q)/T,U=(z*N-G*F)/T;e-=O,t-=U;}while((d7(O)>P14||d7(U)>P14)&&--u>0)return[e,t];};const y10=qe3(),c2=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function H14(e,r){return function l(){const o=r();return o.type=e,o.path=qe3().projection(o),o.copy=o.copy||function(){const i=l();return c2.forEach(a=>{o[a]&&i[a](o[a]());}),i.path.pointRadius(o.path.pointRadius()),i;},ne8(o);};}function s3(e,r){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(t[e]=H14(e,r),this):t[e]||null;}function M11(e){return e&&e.path||y10;}const t={albers:Fi,albersusa:Ze3,azimuthalequalarea:We4,azimuthalequidistant:Be3,conicconformal:ke4,conicequalarea:It4,conicequidistant:Ke4,equalEarth:Qe5,equirectangular:Ue4,gnomonic:Ve4,identity:je5,mercator:He4,mollweide:jt6,naturalEarth1:_e4,orthographic:be5,stereographic:no1,transversemercator:to1};for(const e in t)s3(e,t[e]);function je6(){}const R14=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function re11(){var e=1,t=1,n=o;function i(r,m){return m.map(f=>a(r,f));}function a(r,m){var f=[],l=[];return s(r,m,d=>{n(d,r,m),Me7(d)>0?f.push([d]):l.push(d);}),l.forEach(d=>{for(var g=0,h=f.length,y;g<h;++g)if(Ce5((y=f[g])[0],d)!==-1){y.push(d);return;}}),{type:"MultiPolygon",value:m,coordinates:f};}function s(r,m,f){var l=new Array,d=new Array,g,h,y,c,p,z;for(g=h=-1,c=r[0]>=m,R14[c<<1].forEach(w);++g<e-1;)y=c,c=r[g+1]>=m,R14[y|c<<1].forEach(w);for(R14[c<<0].forEach(w);++h<t-1;){for(g=-1,c=r[h*e+e]>=m,p=r[h*e]>=m,R14[c<<1|p<<2].forEach(w);++g<e-1;)y=c,c=r[h*e+e+g+1]>=m,z=p,p=r[h*e+g+1]>=m,R14[y|c<<1|p<<2|z<<3].forEach(w);R14[c|p<<3].forEach(w);}for(g=-1,p=r[h*e]>=m,R14[p<<2].forEach(w);++g<e-1;)z=p,p=r[h*e+g+1]>=m,R14[p<<2|z<<3].forEach(w);R14[p<<3].forEach(w);function w(E){var b=[E[0][0]+g,E[0][1]+h],O=[E[1][0]+g,E[1][1]+h],P=u(b),N=u(O),v,D;(v=d[P])?(D=l[N])?(delete d[v.end],delete l[D.start],v===D?(v.ring.push(O),f(v.ring)):l[v.start]=d[D.end]={start:v.start,end:D.end,ring:v.ring.concat(D.ring)}):(delete d[v.end],v.ring.push(O),d[v.end=N]=v):(v=l[N])?(D=d[P])?(delete l[v.start],delete d[D.end],v===D?(v.ring.push(O),f(v.ring)):l[D.start]=d[v.end]={start:D.start,end:v.end,ring:D.ring.concat(v.ring)}):(delete l[v.start],v.ring.unshift(b),l[v.start=P]=v):l[P]=d[N]={start:P,end:N,ring:[b,O]};}}function u(r){return r[0]*2+r[1]*(e+1)*4;}function o(r,m,f){r.forEach(l=>{var d=l[0],g=l[1],h=d|0,y=g|0,c,p=m[y*e+h];d>0&&d<e&&h===d&&(c=m[y*e+h-1],l[0]=d+(f-c)/(p-c)-.5),g>0&&g<t&&y===g&&(c=m[(y-1)*e+h],l[1]=g+(f-c)/(p-c)-.5);});}return i.contour=a,i.size=function(r){if(!arguments.length)return[e,t];var m=Math.floor(r[0]),f=Math.floor(r[1]);return m>=0&&f>=0||b("invalid size"),e=m,t=f,i;},i.smooth=function(r){return arguments.length?(n=r?o:je6,i):n===o;},i;}function Me7(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i;}function Ce5(e,t){for(var n=-1,i=t.length,a;++n<i;)if(a=Pe4(e,t[n]))return a;return 0;}function Pe4(e,t){for(var n=t[0],i=t[1],a=-1,s=0,u=e.length,o=u-1;s<u;o=s++){var r=e[s],m=r[0],f=r[1],l=e[o],d=l[0],g=l[1];if(Ne6(r,l,t))return 0;f>i!==g>i&&n<(d-m)*(i-f)/(g-f)+m&&(a=-a);}return a;}function Ne6(e,t,n){var i;return Ae5(e,t,n)&&Ge5(e[i=+(e[0]===t[0])],n[i],t[i]);}function Ae5(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1]);}function Ge5(e,t,n){return e<=t&&t<=n||n<=t&&t<=e;}function ie8(e,t,n){return function(i){var a=Nn(i),s=n?Math.min(a[0],0):a[0],u=a[1],o=u-s,r=t?kn(s,u,e):o/(e+1);return ie(s+r,u,r);};}function k13(e){dt2.call(this,null,e);}k13.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},Pn(k13,dt2,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,a=e.field||A1,s=re11().smooth(e.smooth!==!1),u=e.thresholds||Le4(i,a,e),o=e.as===null?null:e.as||"contour",r=[];return i.forEach(m=>{const f=a(m),l=s.size([f.width,f.height])(f.values,w1(u)?u:u(f.values));Fe6(l,f,m,e),l.forEach(d=>{r.push(nt2(m,V4(o!=null?{[o]:d}:d)));});}),this.value&&(n.rem=this.value),this.value=n.source=n.add=r,n;}});function Le4(e,t,n){const i=ie8(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(a=>_4(t(a).values)));}function Fe6(e,t,n,i){let a=i.scale||t.scale,s=i.translate||t.translate;if(O1(a)&&(a=a(n,i)),O1(s)&&(s=s(n,i)),(a===1||a==null)&&!s)return;const u=(V(a)?a:a[0])||1,o=(V(a)?a:a[1])||1,r=s&&s[0]||0,m=s&&s[1]||0;e.forEach(ae8(t,u,o,r,m));}function ae8(e,t,n,i,a){const s=e.x1||0,u=e.y1||0,o=t*n<0;function r(l){l.forEach(m);}function m(l){o&&l.reverse(),l.forEach(f);}function f(l){l[0]=(l[0]-s)*t+i,l[1]=(l[1]-u)*n+a;}return function(l){return l.coordinates.forEach(r),l;};}function oe10(e,t,n){const i=e>=0?e:Z7(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2);}function q17(e){return O1(e)?e:On(+e);}function se9(){var e=r=>r[0],t=r=>r[1],n=v,i=[-1,-1],a=960,s=500,u=2;function o(r,m){const f=oe10(i[0],r,e)>>u,l=oe10(i[1],r,t)>>u,d=f?f+2:0,g=l?l+2:0,h=2*d+(a>>u),y=2*g+(s>>u),c=new Float32Array(h*y),p=new Float32Array(h*y);let z=c;r.forEach(E=>{const b=d+(+e(E)>>u),O=g+(+t(E)>>u);b>=0&&b<h&&O>=0&&O<y&&(c[b+O*h]+=+n(E));}),f>0&&l>0?(M12(h,y,c,p,f),C14(h,y,p,c,l),M12(h,y,c,p,f),C14(h,y,p,c,l),M12(h,y,c,p,f),C14(h,y,p,c,l)):f>0?(M12(h,y,c,p,f),M12(h,y,p,c,f),M12(h,y,c,p,f),z=p):l>0&&(C14(h,y,c,p,l),C14(h,y,p,c,l),C14(h,y,c,p,l),z=p);const w=m?Math.pow(2,-2*u):1/de(z);for(let E=0,b=h*y;E<b;++E)z[E]*=w;return{values:z,scale:1<<u,width:h,height:y,x1:d,y1:g,x2:d+(a>>u),y2:g+(s>>u)};}return o.x=function(r){return arguments.length?(e=q17(r),o):e;},o.y=function(r){return arguments.length?(t=q17(r),o):t;},o.weight=function(r){return arguments.length?(n=q17(r),o):n;},o.size=function(r){if(!arguments.length)return[a,s];var m=+r[0],f=+r[1];return m>=0&&f>=0||b("invalid size"),a=m,s=f,o;},o.cellSize=function(r){return arguments.length?((r=+r)>=1||b("invalid cell size"),u=Math.floor(Math.log(r)/Math.LN2),o):1<<u;},o.bandwidth=function(r){return arguments.length?(r=p(r),r.length===1&&(r=[+r[0],+r[0]]),r.length!==2&&b("invalid bandwidth"),i=r,o):i;},o;}function M12(e,t,n,i,a){const s=(a<<1)+1;for(let u=0;u<t;++u)for(let o=0,r=0;o<e+a;++o)o<e&&(r+=n[o+u*e]),o>=a&&(o>=s&&(r-=n[o-s+u*e]),i[o-a+u*e]=r/Math.min(o+1,e-1+s-o,s));}function C14(e,t,n,i,a){const s=(a<<1)+1;for(let u=0;u<e;++u)for(let o=0,r=0;o<t+a;++o)o<t&&(r+=n[u+o*e]),o>=a&&(o>=s&&(r-=n[u+(o-s)*e]),i[u+(o-a)*e]=r/Math.min(o+1,t-1+s-o,s));}function X17(e){dt2.call(this,null,e);}X17.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Ue5=["x","y","weight","size","cellSize","bandwidth"];function ue9(e,t){return Ue5.forEach(n=>t[n]!=null?e[n](t[n]):0),e;}Pn(X17,dt2,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,a=$e6(i,e.groupby),s=(e.groupby||[]).map(H1),u=ue9(se9(),e),o=e.as||"grid",r=[];function m(f,l){for(let d=0;d<s.length;++d)f[s[d]]=l[d];return f;}return r=a.map(f=>V4(m({[o]:u(f,e.counts)},f.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=r,n;}});function $e6(e,t){var n=[],i=f=>f(o),a,s,u,o,r,m;if(t==null)n.push(e);else for(a={},s=0,u=e.length;s<u;++s)o=e[s],r=t.map(i),m=a[r],m||(a[r]=m=[],m.dims=r,n.push(m)),m.push(o);return n;}function B14(e){dt2.call(this,null,e);}B14.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},Pn(B14,dt2,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=re11().smooth(e.smooth!==!1),a=e.values,s=e.thresholds||ie8(e.count||10,e.nice,!!a),u=e.size,o,r;return a||(a=t.materialize(t.SOURCE).source,o=ue9(se9(),e)(a,!0),r=ae8(o,o.scale||1,o.scale||1,0,0),u=[o.width,o.height],a=o.values),s=w1(s)?s:s(a),a=i.size(u)(a,s),r&&a.forEach(r),this.value&&(n.rem=this.value),this.value=n.source=n.add=(a||[]).map(V4),n;}});const H15="Feature",K16="FeatureCollection",Ie4="MultiPoint";function T10(e){dt2.call(this,null,e);}T10.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},Pn(T10,dt2,{transform(e,t){var n=this._features,i=this._points,a=e.fields,s=a&&a[0],u=a&&a[1],o=e.geojson||!a&&A1,r=t.ADD,m;m=e.modified()||t.changed(t.REM)||t.modified(R1(o))||s&&t.modified(R1(s))||u&&t.modified(R1(u)),(!this.value||m)&&(r=t.SOURCE,this._features=n=[],this._points=i=[]),o&&t.visit(r,f=>n.push(o(f))),s&&u&&(t.visit(r,f=>{var l=s(f),d=u(f);l!=null&&d!=null&&(l=+l)===l&&(d=+d)===d&&i.push([l,d]);}),n=n.concat({type:H15,geometry:{type:Ie4,coordinates:i}})),this.value={type:K16,features:n};}});function V12(e){dt2.call(this,null,e);}V12.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},Pn(V12,dt2,{transform(e,t){var n=t.fork(t.ALL),i=this.value,a=e.field||A1,s=e.as||"path",u=n.SOURCE;!i||e.modified()?(this.value=i=M11(e.projection),n.materialize().reflow()):u=a===A1||t.modified(a.fields)?n.ADD_MOD:n.ADD;const o=ke5(i,e.pointRadius);return n.visit(u,r=>r[s]=i(a(r))),i.pointRadius(o),n.modifies(s);}});function ke5(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n;}function Y15(e){dt2.call(this,null,e);}Y15.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},Pn(Y15,dt2,{transform(e,t){var n=e.projection,i=e.fields[0],a=e.fields[1],s=e.as||["x","y"],u=s[0],o=s[1],r;function m(f){const l=n([i(f),a(f)]);l?(f[u]=l[0],f[o]=l[1]):(f[u]=void 0,f[o]=void 0);}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,m):(r=t.modified(i.fields)||t.modified(a.fields),t.visit(r?t.ADD_MOD:t.ADD,m)),t.modifies(s);}});function Z16(e){dt2.call(this,null,e);}Z16.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},Pn(Z16,dt2,{transform(e,t){var n=t.fork(t.ALL),i=this.value,a=e.as||"shape",s=n.ADD;return(!i||e.modified())&&(this.value=i=qe5(M11(e.projection),e.field||z1("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,u=>u[a]=i),n.modifies(a);}});function qe5(e,t,n){const i=n==null?a=>e(t(a)):a=>{var s=e.pointRadius(),u=e.pointRadius(n)(t(a));return e.pointRadius(s),u;};return i.context=a=>(e.context(a),i),i;}function J16(e){dt2.call(this,[],e),this.generator=di2();}J16.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},Pn(J16,dt2,{transform(e,t){var n=this.value,i=this.generator,a;if(!n.length||e.modified())for(const s in e)O1(i[s])&&i[s](e[s]);return a=i(),n.length?t.mod.push(At2(n[0],a)):t.add.push(V4(a)),n[0]=a,t;}});function W16(e){dt2.call(this,null,e);}W16.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},Pn(W16,dt2,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",a=e.field||A1,s=Be4(e.opacity,e),u=Xe5(e.color,e),o=e.as||"image",r={$x:0,$y:0,$value:0,$max:i?_4(n.map(m=>_4(a(m).values))):0};return n.forEach(m=>{const f=a(m),l=J1({},m,r);i||(l.$max=_4(f.values||[])),m[o]=He5(f,l,u.dep?u:On(u(l)),s.dep?s:On(s(l)));}),t.reflow(!0).modifies(o);}});function Xe5(e,t){let n;return O1(e)?(n=i=>Y9(e(i,t)),n.dep=fe7(e)):n=On(Y9(e||"#888")),n;}function Be4(e,t){let n;return O1(e)?(n=i=>e(i,t),n.dep=fe7(e)):e?n=On(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n;}function fe7(e){if(!O1(e))return!1;const t=Xn(R1(e));return t.$x||t.$y||t.$value||t.$max;}function He5(e,t,n,i){const a=e.width,s=e.height,u=e.x1||0,o=e.y1||0,r=e.x2||a,m=e.y2||s,f=e.values,l=f?c=>f[c]:y1,d=n1(r-u,m-o),g=d.getContext("2d"),h=g.getImageData(0,0,r-u,m-o),y=h.data;for(let c=o,p=0;c<m;++c){t.$y=c-o;for(let z=u,w=c*a;z<r;++z,p+=4){t.$x=z-u,t.$value=l(z+w);const E=n(t);y[p+0]=E.r,y[p+1]=E.g,y[p+2]=E.b,y[p+3]=~~(255*i(t));}}return g.putImageData(h,0,0),d;}function le9(e){dt2.call(this,null,e),this.modified(!0);}Pn(le9,dt2,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=Te5(e.type),c2.forEach(i=>{e[i]!=null&&me7(n,i,e[i]);})):c2.forEach(i=>{e.modified(i)&&me7(n,i,e[i]);}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Ke5(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS);}});function Ke5(e,t){const n=Ve5(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n);}function Te5(e){const t=s3((e||"mercator").toLowerCase());return t||b("Unrecognized projection type: "+e),t();}function me7(e,t,n){O1(e[t])&&e[t](n);}function Ve5(e){return e=p(e),e.length===1?e[0]:{type:K16,features:e.reduce((t,n)=>t.concat(Ye5(n)),[])};}function Ye5(e){return e.type===K16?e.features:p(e).filter(t=>t!=null).map(t=>t.type===H15?t:{type:H15,geometry:t});}const mod4=function(){return{contour:B14,geojson:T10,geopath:V12,geopoint:Y15,geoshape:Z16,graticule:J16,heatmap:W16,isocontour:k13,kde2d:X17,projection:le9,default:null};}();function j16(e){const t=+this._x.call(null,e),i=+this._y.call(null,e);return k14(this.cover(t,i),t,i,e);}function k14(e,t,i,r){if(isNaN(t)||isNaN(i))return e;var n,s=e._root,h={data:r},a=e._x0,o=e._y0,l=e._x1,u=e._y1,f,_,c,y,g,x,v,N;if(!s)return e._root=h,e;for(;s.length;)if((g=t>=(f=(a+l)/2))?a=f:l=f,(x=i>=(_=(o+u)/2))?o=_:u=_,n=s,!(s=s[v=x<<1|g]))return n[v]=h,e;if(c=+e._x.call(null,s.data),y=+e._y.call(null,s.data),t===c&&i===y)return h.next=s,n?n[v]=h:e._root=h,e;do n=n?n[v]=new Array(4):e._root=new Array(4),(g=t>=(f=(a+l)/2))?a=f:l=f,(x=i>=(_=(o+u)/2))?o=_:u=_;while((v=x<<1|g)===(N=(y>=_)<<1|c>=f))return n[N]=s,n[v]=h,e;}function Q14(e){var t,i,r=e.length,n,s,h=new Array(r),a=new Array(r),o=Infinity,l=Infinity,u=-Infinity,f=-Infinity;for(i=0;i<r;++i){if(isNaN(n=+this._x.call(null,t=e[i]))||isNaN(s=+this._y.call(null,t)))continue;h[i]=n,a[i]=s,n<o&&(o=n),n>u&&(u=n),s<l&&(l=s),s>f&&(f=s);}if(o>u||l>f)return this;for(this.cover(o,l).cover(u,f),i=0;i<r;++i)k14(this,h[i],a[i],e[i]);return this;}function P15(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var i=this._x0,r=this._y0,n=this._x1,s=this._y1;if(isNaN(i))n=(i=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var h=n-i||1,a=this._root,o,l;i>e||e>=n||r>t||t>=s;){l=(t<r)<<1|e<i,o=new Array(4),o[l]=a,a=o,h*=2;switch(l){case 0:n=i+h,s=r+h;break;case 1:i=n-h,s=r+h;break;case 2:n=i+h,r=s-h;break;case 3:i=n-h,r=s-h;break;}}this._root&&this._root.length&&(this._root=a);}return this._x0=i,this._y0=r,this._x1=n,this._y1=s,this;}function X18(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e;}function Y16(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]];}function p7(e,t,i,r,n){this.node=e,this.x0=t,this.y0=i,this.x1=r,this.y1=n;}function B15(e,t,i){var r,n=this._x0,s=this._y0,h,a,o,l,u=this._x1,f=this._y1,_=[],c=this._root,y,g;for(c&&_.push(new p7(c,n,s,u,f)),i==null?i=Infinity:(n=e-i,s=t-i,u=e+i,f=t+i,i*=i);y=_.pop();){if(!(c=y.node)||(h=y.x0)>u||(a=y.y0)>f||(o=y.x1)<n||(l=y.y1)<s)continue;if(c.length){var x=(h+o)/2,v=(a+l)/2;_.push(new p7(c[3],x,v,o,l),new p7(c[2],h,v,x,l),new p7(c[1],x,a,o,v),new p7(c[0],h,a,x,v)),(g=(t>=v)<<1|e>=x)&&(y=_[_.length-1],_[_.length-1]=_[_.length-1-g],_[_.length-1-g]=y);}else{var N=e-+this._x.call(null,c.data),q=t-+this._y.call(null,c.data),b=N*N+q*q;if(b<i){var d=Math.sqrt(i=b);n=e-d,s=t-d,u=e+d,f=t+d,r=c.data;}}}return r;}function C15(e){if(isNaN(u=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,i=this._root,r,n,s,h=this._x0,a=this._y0,o=this._x1,l=this._y1,u,f,_,c,y,g,x,v;if(!i)return this;if(i.length)for(;;){if((y=u>=(_=(h+o)/2))?h=_:o=_,(g=f>=(c=(a+l)/2))?a=c:l=c,!(t=i,i=i[x=g<<1|y]))return this;if(!i.length)break;(t[x+1&3]||t[x+2&3]||t[x+3&3])&&(r=t,v=x);}for(;i.data!==e;)if(!(n=i,i=i.next))return this;return(s=i.next)&&delete i.next,n?(s?n.next=s:delete n.next,this):t?(s?t[x]=s:delete t[x],(i=t[0]||t[1]||t[2]||t[3])&&i===(t[3]||t[2]||t[1]||t[0])&&!i.length&&(r?r[v]=i:this._root=i),this):(this._root=s,this);}function D9(e){for(var t=0,i=e.length;t<i;++t)this.remove(e[t]);return this;}function E15(){return this._root;}function F15(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e;}function G16(e){var t=[],i,r=this._root,n,s,h,a,o;for(r&&t.push(new p7(r,this._x0,this._y0,this._x1,this._y1));i=t.pop();)if(!e(r=i.node,s=i.x0,h=i.y0,a=i.x1,o=i.y1)&&r.length){var l=(s+a)/2,u=(h+o)/2;(n=r[3])&&t.push(new p7(n,l,u,a,o)),(n=r[2])&&t.push(new p7(n,s,u,l,o)),(n=r[1])&&t.push(new p7(n,l,h,a,u)),(n=r[0])&&t.push(new p7(n,s,h,l,u));}return this;}function H16(e){var t=[],i=[],r;for(this._root&&t.push(new p7(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var n=r.node;if(n.length){var s,h=r.x0,a=r.y0,o=r.x1,l=r.y1,u=(h+o)/2,f=(a+l)/2;(s=n[0])&&t.push(new p7(s,h,a,u,f)),(s=n[1])&&t.push(new p7(s,u,a,o,f)),(s=n[2])&&t.push(new p7(s,h,f,u,l)),(s=n[3])&&t.push(new p7(s,u,f,o,l));}i.push(r);}for(;r=i.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this;}function J17(e){return e[0];}function K17(e){return arguments.length?(this._x=e,this):this._x;}function L18(e){return e[1];}function O14(e){return arguments.length?(this._y=e,this):this._y;}function I16(e,t,i){var r=new A14(t??J17,i??L18,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e);}function A14(e,t,i,r,n,s){this._x=e,this._y=t,this._x0=i,this._y0=r,this._x1=n,this._y1=s,this._root=void 0;}function M13(e){for(var t={data:e.data},i=t;e=e.next;)i=i.next={data:e.data};return t;}var w13=I16.prototype=A14.prototype;w13.copy=function(){var e=new A14(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,i,r;if(!t)return e;if(!t.length)return e._root=M13(t),e;for(i=[{source:t,target:e._root=new Array(4)}];t=i.pop();)for(var n=0;n<4;++n)(r=t.source[n])&&(r.length?i.push({source:r,target:t.target[n]=new Array(4)}):t.target[n]=M13(r));return e;},w13.add=j16,w13.addAll=Q14,w13.cover=P15,w13.data=X18,w13.extent=Y16,w13.find=B15,w13.remove=C15,w13.removeAll=D9,w13.root=E15,w13.size=F15,w13.visit=G16,w13.visitAfter=H16,w13.x=K17,w13.y=O14;var a4={value:()=>{}};function l5(){for(var n=0,t=arguments.length,r={},e;n<t;++n){if(!(e=arguments[n]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[];}return new f8(r);}function f8(n){this._=n;}function h6(n,t){return n.trim().split(/^|\s+/).map(function(r){var e="",o=r.indexOf(".");if(o>=0&&(e=r.slice(o+1),r=r.slice(0,o)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:e};});}f8.prototype=l5.prototype={constructor:f8,on:function(n,t){var r=this._,e=h6(n+"",r),o,u=-1,i=e.length;if(arguments.length<2){for(;++u<i;)if((o=(n=e[u]).type)&&(o=w14(r[o],n.name)))return o;return;}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++u<i;)if(o=(n=e[u]).type)r[o]=s4(r[o],n.name,t);else if(t==null)for(o in r)r[o]=s4(r[o],n.name,null);return this;},copy:function(){var n={},t=this._;for(var r in t)n[r]=t[r].slice();return new f8(n);},call:function(n,t){if((o=arguments.length-2)>0)for(var r=new Array(o),e=0,o,u;e<o;++e)r[e]=arguments[e+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(u=this._[n],e=0,o=u.length;e<o;++e)u[e].value.apply(t,r);},apply:function(n,t,r){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var e=this._[n],o=0,u=e.length;o<u;++o)e[o].value.apply(t,r);}};function w14(n,t){for(var r=0,e=n.length,o;r<e;++r)if((o=n[r]).name===t)return o.value;}function s4(n,t,r){for(var e=0,o=n.length;e<o;++e)if(n[e].name===t){n[e]=a4,n=n.slice(0,e).concat(n.slice(e+1));break;}return r!=null&&n.push({name:t,value:r}),n;}var o4=0,a5=0,l6=0,T11=1e3,p8,u5,h7=0,r=0,m6=0,c3=typeof performance=="object"&&performance.now?performance:Date,I17=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17);};function v11(){return r||(I17(A15),r=c3.now()+m6);}function A15(){r=0;}function s5(){this._call=this._time=this._next=null;}s5.prototype=F16.prototype={constructor:s5,restart:function(n,t,i){if(typeof n!="function")throw new TypeError("callback is not a function");i=(i==null?v11():+i)+(t==null?0:+t),!this._next&&u5!==this&&(u5?u5._next=this:p8=this,u5=this),this._call=n,this._time=i,k15();},stop:function(){this._call&&(this._call=null,this._time=Infinity,k15());}};function F16(n,t,i){var e=new s5;return e.restart(n,t,i),e;}function y11(){v11(),++o4;for(var n=p8,t;n;)(t=r-n._time)>=0&&n._call.call(void 0,t),n=n._next;--o4;}function b9(){r=(h7=c3.now())+m6,o4=a5=0;try{y11();}finally{o4=0,N14(),r=0;}}function D10(){var n=c3.now(),t=n-h7;t>T11&&(m6-=t,h7=n);}function N14(){for(var n,t=p8,i,e=Infinity;t;)t._call?(e>t._time&&(e=t._time),n=t,t=t._next):(i=t._next,t._next=null,t=n?n._next=i:p8=i);u5=n,k15(e);}function k15(n){if(o4)return;a5&&(a5=clearTimeout(a5));var t=n-r;t>24?(n<Infinity&&(a5=setTimeout(b9,n-c3.now()-m6)),l6&&(l6=clearInterval(l6))):(l6||(h7=c3.now(),l6=setInterval(D10,T11)),o4=1,I17(b9));}function E16(n,t,i){var e=new s5,w=t;return t==null?(e.restart(n,t,i),e):(e._restart=e.restart,e.restart=function(j,_,f){_=+_,f=f==null?v11():+f,e._restart(function q(x){x+=w,e._restart(q,w+=_,f),j(x);},_,f);},e.restart(n,t,i),e);}function F17(n,f){var a,y=1;n==null&&(n=0),f==null&&(f=0);function m(){var c,g=a.length,t,h=0,e=0;for(c=0;c<g;++c)t=a[c],h+=t.x,e+=t.y;for(h=(h/g-n)*y,e=(e/g-f)*y,c=0;c<g;++c)t=a[c],t.x-=h,t.y-=e;}return m.initialize=function(c){a=c;},m.x=function(c){return arguments.length?(n=+c,m):n;},m.y=function(c){return arguments.length?(f=+c,m):f;},m.strength=function(c){return arguments.length?(y=+c,m):y;},m;}function M14(n){return function(){return n;};}function O15(n){return(n()-.5)*1e-6;}function Q15(n){return n.x+n.vx;}function R15(n){return n.y+n.vy;}function b10(n){var f,a,y,m=1,c=1;typeof n!="function"&&(n=M14(n==null?1:+n));function g(){for(var e,v=f.length,A,p,o,x,i,r,u=0;u<c;++u)for(A=I16(f,Q15,R15).visitAfter(t),e=0;e<v;++e)p=f[e],i=a[p.index],r=i*i,o=p.x+p.vx,x=p.y+p.vy,A.visit(s);function s(d,l,N,j,D){var z=d.data,E=d.r,w=i+E;if(z){if(z.index>p.index){var B=o-z.x-z.vx,I=x-z.y-z.vy,S=B*B+I*I;S<w*w&&(B===0&&(B=O15(y),S+=B*B),I===0&&(I=O15(y),S+=I*I),S=(w-(S=Math.sqrt(S)))/S*m,p.vx+=(B*=S)*(w=(E*=E)/(r+E)),p.vy+=(I*=S)*w,z.vx-=B*(w=1-w),z.vy-=I*w);}return;}return l>o+w||j<o-w||N>x+w||D<x-w;}}function t(e){if(e.data)return e.r=a[e.data.index];for(var v=e.r=0;v<4;++v)e[v]&&e[v].r>e.r&&(e.r=e[v].r);}function h(){if(!f)return;var e,v=f.length,A;for(a=new Array(v),e=0;e<v;++e)A=f[e],a[A.index]=+n(A,e,f);}return g.initialize=function(e,v){f=e,y=v,h();},g.iterations=function(e){return arguments.length?(c=+e,g):c;},g.strength=function(e){return arguments.length?(m=+e,g):m;},g.radius=function(e){return arguments.length?(n=typeof e=="function"?e:M14(+e),h(),g):n;},g;}function G17(n){return n.index;}function $11(n,f){var a=n.get(f);if(!a)throw new Error("node not found: "+f);return a;}function J18(n){var f=G17,a=A,y,m=M14(30),c,g,t,h,e,v=1;n==null&&(n=[]);function A(r){return 1/Math.min(t[r.source.index],t[r.target.index]);}function p(r){for(var u=0,s=n.length;u<v;++u)for(var d=0,l,N,j,D,z,E,w;d<s;++d)l=n[d],N=l.source,j=l.target,D=j.x+j.vx-N.x-N.vx||O15(e),z=j.y+j.vy-N.y-N.vy||O15(e),E=Math.sqrt(D*D+z*z),E=(E-c[d])/E*r*y[d],D*=E,z*=E,j.vx-=D*(w=h[d]),j.vy-=z*w,N.vx+=D*(w=1-w),N.vy+=z*w;}function o(){if(!g)return;var r,u=g.length,s=n.length,d=new Map(g.map((N,j)=>[f(N,j,g),N])),l;for(r=0,t=new Array(u);r<s;++r)l=n[r],l.index=r,typeof l.source!="object"&&(l.source=$11(d,l.source)),typeof l.target!="object"&&(l.target=$11(d,l.target)),t[l.source.index]=(t[l.source.index]||0)+1,t[l.target.index]=(t[l.target.index]||0)+1;for(r=0,h=new Array(s);r<s;++r)l=n[r],h[r]=t[l.source.index]/(t[l.source.index]+t[l.target.index]);y=new Array(s),x(),c=new Array(s),i();}function x(){if(!g)return;for(var r=0,u=n.length;r<u;++r)y[r]=+a(n[r],r,n);}function i(){if(!g)return;for(var r=0,u=n.length;r<u;++r)c[r]=+m(n[r],r,n);}return p.initialize=function(r,u){g=r,e=u,o();},p.links=function(r){return arguments.length?(n=r,o(),p):n;},p.id=function(r){return arguments.length?(f=r,p):f;},p.iterations=function(r){return arguments.length?(v=+r,p):v;},p.strength=function(r){return arguments.length?(a=typeof r=="function"?r:M14(+r),x(),p):a;},p.distance=function(r){return arguments.length?(m=typeof r=="function"?r:M14(+r),i(),p):m;},p;}const K18=1664525,P16=1013904223,C16=4294967296;function U16(){let n=1;return()=>(n=(K18*n+P16)%C16)/4294967296;}function W17(n){return n.x;}function X19(n){return n.y;}var Z17=10,H17=Math.PI*(3-Math.sqrt(5));function V13(n){var f,a=1,y=.001,m=1-Math.pow(y,1/300),c=0,g=.6,t=new Map,h=F16(A),e=l5("tick","end"),v=U16();n==null&&(n=[]);function A(){p(),e.call("tick",f),a<y&&(h.stop(),e.call("end",f));}function p(i){var r,u=n.length,s;i===void 0&&(i=1);for(var d=0;d<i;++d)for(a+=(c-a)*m,t.forEach(function(l){l(a);}),r=0;r<u;++r)s=n[r],s.fx==null?s.x+=s.vx*=g:(s.x=s.fx,s.vx=0),s.fy==null?s.y+=s.vy*=g:(s.y=s.fy,s.vy=0);return f;}function o(){for(var i=0,r=n.length,u;i<r;++i){if(u=n[i],u.index=i,u.fx!=null&&(u.x=u.fx),u.fy!=null&&(u.y=u.fy),isNaN(u.x)||isNaN(u.y)){var s=Z17*Math.sqrt(.5+i),d=i*H17;u.x=s*Math.cos(d),u.y=s*Math.sin(d);}(isNaN(u.vx)||isNaN(u.vy))&&(u.vx=u.vy=0);}}function x(i){return i.initialize&&i.initialize(n,v),i;}return o(),f={tick:p,restart:function(){return h.restart(A),f;},stop:function(){return h.stop(),f;},nodes:function(i){return arguments.length?(n=i,o(),t.forEach(x),f):n;},alpha:function(i){return arguments.length?(a=+i,f):a;},alphaMin:function(i){return arguments.length?(y=+i,f):y;},alphaDecay:function(i){return arguments.length?(m=+i,f):+m;},alphaTarget:function(i){return arguments.length?(c=+i,f):c;},velocityDecay:function(i){return arguments.length?(g=1-i,f):1-g;},randomSource:function(i){return arguments.length?(v=i,t.forEach(x),f):v;},force:function(i,r){return arguments.length>1?(r==null?t.delete(i):t.set(i,x(r)),f):t.get(i);},find:function(i,r,u){var s=0,d=n.length,l,N,j,D,z;for(u==null?u=Infinity:u*=u,s=0;s<d;++s)D=n[s],l=i-D.x,N=r-D.y,j=l*l+N*N,j<u&&(z=D,u=j);return z;},on:function(i,r){return arguments.length>1?(e.on(i,r),f):e.on(i);}};}function q18(){var n,f,a,y,m=M14(-30),c,g=1,t=Infinity,h=.81;function e(o){var x,i=n.length,r=I16(n,W17,X19).visitAfter(A);for(y=o,x=0;x<i;++x)f=n[x],r.visit(p);}function v(){if(!n)return;var o,x=n.length,i;for(c=new Array(x),o=0;o<x;++o)i=n[o],c[i.index]=+m(i,o,n);}function A(o){var x=0,i,r,u=0,s,d,l;if(o.length){for(s=d=l=0;l<4;++l)(i=o[l])&&(r=Math.abs(i.value))&&(x+=i.value,u+=r,s+=r*i.x,d+=r*i.y);o.x=s/u,o.y=d/u;}else{i=o,i.x=i.data.x,i.y=i.data.y;do x+=c[i.data.index];while(i=i.next)}o.value=x;}function p(o,x,i,r){if(!o.value)return!0;var u=o.x-f.x,s=o.y-f.y,d=r-x,l=u*u+s*s;if(d*d/h<l)return l<t&&(u===0&&(u=O15(a),l+=u*u),s===0&&(s=O15(a),l+=s*s),l<g&&(l=Math.sqrt(g*l)),f.vx+=u*o.value*y/l,f.vy+=s*o.value*y/l),!0;if(o.length||l>=t)return;(o.data!==f||o.next)&&(u===0&&(u=O15(a),l+=u*u),s===0&&(s=O15(a),l+=s*s),l<g&&(l=Math.sqrt(g*l)));do o.data!==f&&(d=c[o.data.index]*y/l,f.vx+=u*d,f.vy+=s*d);while(o=o.next)}return e.initialize=function(o,x){n=o,a=x,v();},e.strength=function(o){return arguments.length?(m=typeof o=="function"?o:M14(+o),v(),e):m;},e.distanceMin=function(o){return arguments.length?(g=o*o,e):Math.sqrt(g);},e.distanceMax=function(o){return arguments.length?(t=o*o,e):Math.sqrt(t);},e.theta=function(o){return arguments.length?(h=o*o,e):Math.sqrt(h);},e;}function _15(n){var f=M14(.1),a,y,m;typeof n!="function"&&(n=M14(n==null?0:+n));function c(t){for(var h=0,e=a.length,v;h<e;++h)v=a[h],v.vx+=(m[h]-v.x)*y[h]*t;}function g(){if(!a)return;var t,h=a.length;for(y=new Array(h),m=new Array(h),t=0;t<h;++t)y[t]=isNaN(m[t]=+n(a[t],t,a))?0:+f(a[t],t,a);}return c.initialize=function(t){a=t,g();},c.strength=function(t){return arguments.length?(f=typeof t=="function"?t:M14(+t),g(),c):f;},c.x=function(t){return arguments.length?(n=typeof t=="function"?t:M14(+t),g(),c):n;},c;}function nn8(n){var f=M14(.1),a,y,m;typeof n!="function"&&(n=M14(n==null?0:+n));function c(t){for(var h=0,e=a.length,v;h<e;++h)v=a[h],v.vy+=(m[h]-v.y)*y[h]*t;}function g(){if(!a)return;var t,h=a.length;for(y=new Array(h),m=new Array(h),t=0;t<h;++t)y[t]=isNaN(m[t]=+n(a[t],t,a))?0:+f(a[t],t,a);}return c.initialize=function(t){a=t,g();},c.strength=function(t){return arguments.length?(f=typeof t=="function"?t:M14(+t),g(),c):f;},c.y=function(t){return arguments.length?(n=typeof t=="function"?t:M14(+t),g(),c):n;},c;}const y12={center:F17,collide:b10,nbody:q18,link:J18,x:_15,y:nn8},s6="forces",u6=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],X20=["static","iterations"],h8=["x","y","vx","vy"];function l7(e){dt2.call(this,null,e);}l7.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:h8}]},Pn(l7,dt2,{transform(e,t){var r=this.value,n=t.changed(t.ADD_REM),o=e.modified(u6),a=e.iterations||300;if(r?(n&&(t.modifies("index"),r.nodes(t.source)),(o||t.changed(t.MOD))&&g7(r,e,0,t)):(this.value=r=L19(t.source,e),r.on("tick",C17(t.dataflow,this)),e.static||(n=!0,r.tick()),t.modifies("index")),o||n||e.modified(X20)||t.changed()&&e.restart){if(r.alpha(Math.max(r.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(r.alphaMin(),1/a)),e.static)for(r.stop();--a>=0;)r.tick();else if(r.stopped()&&r.restart(),!n)return t.StopPropagation;}return this.finish(e,t);},finish(e,t){const r=t.dataflow;for(let i=this._argops,m=0,b=i.length,c;m<b;++m){if(c=i[m],c.name!==s6||c.op._argval.force!=="link")continue;for(var n=c.op._argops,o=0,a=n.length,f;o<a;++o)if(n[o].name==="links"&&(f=n[o].op.source)){r.pulse(f,r.changeset().reflow());break;}}return t.reflow(e.modified()).modifies(h8);}});function C17(e,t){return()=>e.touch(t).run();}function L19(e,t){const r=V13(e),n=r.stop,o=r.restart;let a=!1;return r.stopped=()=>a,r.restart=()=>(a=!1,o()),r.stop=()=>(a=!0,n()),g7(r,t,!0).on("end",()=>a=!0);}function g7(e,t,r,n){var o=p(t.forces),a,f,i,m;for(a=0,f=u6.length;a<f;++a)i=u6[a],i!==s6&&t.modified(i)&&e[i](t[i]);for(a=0,f=o.length;a<f;++a)m=s6+a,i=r||t.modified(s6,a)?Y17(o[a]):n&&T12(o[a],n)?e.force(m):null,i&&e.force(m,i);for(f=e.numForces||0;a<f;++a)e.force(s6+a,null);return e.numForces=o.length,e;}function T12(e,t){var r,n;for(r in e)if(O1(n=e[r])&&t.modified(R1(n)))return 1;return 0;}function Y17(e){var t,r;g(y12,e.force)||b("Unrecognized force: "+e.force),t=y12[e.force]();for(r in e)O1(t[r])&&q19(t[r],e[r],e);return t;}function q19(e,t,r){e(O1(t)?n=>t(n,r):t);}const mod5=function(){return{force:l7,default:null};}();function dn9(n,e){return n.parent===e.parent?1:2;}function pn8(n){return n.reduce(gn7,0)/n.length;}function gn7(n,e){return n+e.x;}function yn6(n){return 1+n.reduce(xn6,0);}function xn6(n,e){return Math.max(n,e.y);}function mn8(n){for(var e;e=n.children;)n=e[0];return n;}function vn5(n){for(var e;e=n.children;)n=e[e.length-1];return n;}function wn9(){var n=dn9,e=1,t=1,r=!1;function i(u){var l,s=0;u.eachAfter(function(a){var d=a.children;d?(a.x=pn8(d),a.y=yn6(d)):(a.x=l?s+=n(a,l):0,a.y=0,l=a);});var c=mn8(u),f=vn5(u),h=c.x-n(c,f)/2,o=f.x+n(f,c)/2;return u.eachAfter(r?function(a){a.x=(a.x-u.x)*e,a.y=(u.y-a.y)*t;}:function(a){a.x=(a.x-h)/(o-h)*e,a.y=(1-(u.y?a.y/u.y:1))*t;});}return i.separation=function(u){return arguments.length?(n=u,i):n;},i.size=function(u){return arguments.length?(r=!1,e=+u[0],t=+u[1],i):r?null:[e,t];},i.nodeSize=function(u){return arguments.length?(r=!0,e=+u[0],t=+u[1],i):r?[e,t]:null;},i;}function _n4(n){var e=0,t=n.children,r=t&&t.length;if(!r)e=1;else for(;--r>=0;)e+=t[r].value;n.value=e;}function zn4(){return this.eachAfter(_n4);}function An8(n,e){let t=-1;for(const r of this)n.call(e,r,++t,this);return this;}function Mn6(n,e){for(var t=this,r=[t],i,u,l=-1;t=r.pop();)if(n.call(e,t,++l,this),i=t.children)for(u=i.length-1;u>=0;--u)r.push(i[u]);return this;}function kn5(n,e){for(var t=this,r=[t],i=[],u,l,s,c=-1;t=r.pop();)if(i.push(t),u=t.children)for(l=0,s=u.length;l<s;++l)r.push(u[l]);for(;t=i.pop();)n.call(e,t,++c,this);return this;}function Rn8(n,e){let t=-1;for(const r of this)if(n.call(e,r,++t,this))return r;}function Sn7(n){return this.eachAfter(function(e){for(var t=+n(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)t+=r[i].value;e.value=t;});}function qn6(n){return this.eachBefore(function(e){e.children&&e.children.sort(n);});}function In4(n){for(var e=this,t=Nn7(e,n),r=[e];e!==t;)e=e.parent,r.push(e);for(var i=r.length;n!==t;)r.splice(i,0,n),n=n.parent;return r;}function Nn7(n,e){if(n===e)return n;var t=n.ancestors(),r=e.ancestors(),i=null;for(n=t.pop(),e=r.pop();n===e;)i=n,n=t.pop(),e=r.pop();return i;}function En6(){for(var n=this,e=[n];n=n.parent;)e.push(n);return e;}function Bn5(){return Array.from(this);}function Ln4(){var n=[];return this.eachBefore(function(e){e.children||n.push(e);}),n;}function bn4(){var n=this,e=[];return n.each(function(t){t!==n&&e.push({source:t.parent,target:t});}),e;}function*Cn6(){var n=this,e,t=[n],r,i,u;do for(e=t.reverse(),t=[];n=e.pop();)if(yield n,r=n.children)for(i=0,u=r.length;i<u;++i)t.push(r[i]);while(t.length)}function O16(n,e){n instanceof Map?(n=[void 0,n],e===void 0&&(e=Dn4)):e===void 0&&(e=$n6);for(var t=new S16(n),r,i=[t],u,l,s,c;r=i.pop();)if((l=e(r.data))&&(c=(l=Array.from(l)).length))for(r.children=l,s=c-1;s>=0;--s)i.push(u=l[s]=new S16(l[s])),u.parent=r,u.depth=r.depth+1;return t.eachBefore(Z18);}function Tn4(){return O16(this).eachBefore(On4);}function $n6(n){return n.children;}function Dn4(n){return Array.isArray(n)?n[1]:null;}function On4(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data;}function Z18(n){var e=0;do n.height=e;while((n=n.parent)&&n.height<++e)}function S16(n){this.data=n,this.depth=this.height=0,this.parent=null;}S16.prototype=O16.prototype={constructor:S16,count:zn4,each:An8,eachAfter:kn5,eachBefore:Mn6,find:Rn8,sum:Sn7,sort:qn6,path:In4,ancestors:En6,descendants:Bn5,leaves:Ln4,links:bn4,copy:Tn4,[Symbol.iterator]:Cn6};function L20(n){return n==null?null:F18(n);}function F18(n){if(typeof n!="function")throw new Error;return n;}function q20(){return 0;}function N15(n){return function(){return n;};}const Vn4=1664525,Wn5=1013904223,G18=4294967296;function V14(){let n=1;return()=>(n=(Vn4*n+Wn5)%G18)/4294967296;}function Pn6(n){return typeof n=="object"&&"length"in n?n:Array.from(n);}function jn5(n,e){let t=n.length,r,i;for(;t;)i=e()*t--|0,r=n[t],n[t]=n[i],n[i]=r;return n;}function J19(n,e){for(var t=0,r=(n=jn5(Array.from(n),e)).length,i=[],u,l;t<r;)u=n[t],l&&Q16(l,u)?++t:(l=Yn4(i=Xn6(i,u)),t=0);return l;}function Xn6(n,e){var t,r;if(W18(e,n))return[e];for(t=0;t<n.length;++t)if(b11(e,n[t])&&W18(E17(n[t],e),n))return[n[t],e];for(t=0;t<n.length-1;++t)for(r=t+1;r<n.length;++r)if(b11(E17(n[t],n[r]),e)&&b11(E17(n[t],e),n[r])&&b11(E17(n[r],e),n[t])&&W18(U17(n[t],n[r],e),n))return[n[t],n[r],e];throw new Error;}function b11(n,e){var t=n.r-e.r,r=e.x-n.x,i=e.y-n.y;return t<0||t*t<r*r+i*i;}function Q16(n,e){var t=n.r-e.r+Math.max(n.r,e.r,1)*1e-9,r=e.x-n.x,i=e.y-n.y;return t>0&&t*t>r*r+i*i;}function W18(n,e){for(var t=0;t<e.length;++t)if(!Q16(n,e[t]))return!1;return!0;}function Yn4(n){switch(n.length){case 1:return Hn5(n[0]);case 2:return E17(n[0],n[1]);case 3:return U17(n[0],n[1],n[2]);}}function Hn5(n){return{x:n.x,y:n.y,r:n.r};}function E17(n,e){var t=n.x,r=n.y,i=n.r,u=e.x,l=e.y,s=e.r,c=u-t,f=l-r,h=s-i,o=Math.sqrt(c*c+f*f);return{x:(t+u+c/o*h)/2,y:(r+l+f/o*h)/2,r:(o+i+s)/2};}function U17(n,e,t){var r=n.x,i=n.y,u=n.r,l=e.x,s=e.y,c=e.r,f=t.x,h=t.y,o=t.r,a=r-l,d=r-f,p=i-s,g=i-h,y=c-u,x=o-u,m=r*r+i*i-u*u,_=m-l*l-s*s+c*c,w=m-f*f-h*h+o*o,v=d*p-a*g,z=(p*w-g*_)/(v*2)-r,k=(g*y-p*x)/v,A=(d*_-a*w)/(v*2)-i,M=(a*x-d*y)/v,I=k*k+M*M-1,R=2*(u+z*k+A*M),H=z*z+A*A-u*u,D=-(Math.abs(I)>1e-6?(R+Math.sqrt(R*R-4*I*H))/(2*I):H/R);return{x:r+z+k*D,y:i+A+M*D,r:D};}function nn9(n,e,t){var r=n.x-e.x,i,u,l=n.y-e.y,s,c,f=r*r+l*l;f?(u=e.r+t.r,u*=u,c=n.r+t.r,c*=c,u>c?(i=(f+c-u)/(2*f),s=Math.sqrt(Math.max(0,c/f-i*i)),t.x=n.x-i*r-s*l,t.y=n.y-i*l+s*r):(i=(f+u-c)/(2*f),s=Math.sqrt(Math.max(0,u/f-i*i)),t.x=e.x+i*r-s*l,t.y=e.y+i*l+s*r)):(t.x=e.x+t.r,t.y=e.y);}function en7(n,e){var t=n.r+e.r-1e-6,r=e.x-n.x,i=e.y-n.y;return t>0&&t*t>r*r+i*i;}function tn8(n){var e=n._,t=n.next._,r=e.r+t.r,i=(e.x*t.r+t.x*e.r)/r,u=(e.y*t.r+t.y*e.r)/r;return i*i+u*u;}function C18(n){this._=n,this.next=null,this.previous=null;}function rn9(n,e){if(!(u=(n=Pn6(n)).length))return 0;var t,r,i,u,l,s,c,f,h,o,a;if(t=n[0],t.x=0,t.y=0,!(u>1))return t.r;if(r=n[1],t.x=-r.r,r.x=t.r,r.y=0,!(u>2))return t.r+r.r;nn9(r,t,i=n[2]),t=new C18(t),r=new C18(r),i=new C18(i),t.next=i.previous=r,r.next=t.previous=i,i.next=r.previous=t;n:for(c=3;c<u;++c){nn9(t._,r._,i=n[c]),i=new C18(i),f=r.next,h=t.previous,o=r._.r,a=t._.r;do if(o<=a){if(en7(f._,i._)){r=f,t.next=r,r.previous=t,--c;continue n;}o+=f._.r,f=f.next;}else{if(en7(h._,i._)){t=h,t.next=r,r.previous=t,--c;continue n;}a+=h._.r,h=h.previous;}while(f!==h.next)for(i.previous=t,i.next=r,t.next=r.previous=r=i,l=tn8(t);(i=i.next)!==r;)(s=tn8(i))<l&&(t=i,l=s);r=t.next;}for(t=[r._],i=r;(i=i.next)!==r;)t.push(i._);for(i=J19(t,e),c=0;c<u;++c)t=n[c],t.x-=i.x,t.y-=i.y;return i.r;}function Fn5(n){return Math.sqrt(n.value);}function Gn5(){var n=null,e=1,t=1,r=q20;function i(u){const l=V14();return u.x=e/2,u.y=t/2,n?u.eachBefore(un10(n)).eachAfter(P17(r,.5,l)).eachBefore(an9(1)):u.eachBefore(un10(Fn5)).eachAfter(P17(q20,1,l)).eachAfter(P17(r,u.r/Math.min(e,t),l)).eachBefore(an9(Math.min(e,t)/(2*u.r))),u;}return i.radius=function(u){return arguments.length?(n=L20(u),i):n;},i.size=function(u){return arguments.length?(e=+u[0],t=+u[1],i):[e,t];},i.padding=function(u){return arguments.length?(r=typeof u=="function"?u:N15(+u),i):r;},i;}function un10(n){return function(e){e.children||(e.r=Math.max(0,+n(e)||0));};}function P17(n,e,t){return function(r){if(i=r.children){var i,u,l=i.length,s=n(r)*e||0,c;if(s)for(u=0;u<l;++u)i[u].r+=s;if(c=rn9(i,t),s)for(u=0;u<l;++u)i[u].r-=s;r.r=c+s;}};}function an9(n){return function(e){var t=e.parent;e.r*=n,t&&(e.x=t.x+n*e.x,e.y=t.y+n*e.y);};}function fn8(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1);}function B16(n,e,t,r,i){for(var u=n.children,l,s=-1,c=u.length,f=n.value&&(r-e)/n.value;++s<c;)l=u[s],l.y0=t,l.y1=i,l.x0=e,l.x1=e+=l.value*f;}function Jn5(){var n=1,e=1,t=0,r=!1;function i(l){var s=l.height+1;return l.x0=l.y0=t,l.x1=n,l.y1=e/s,l.eachBefore(u(e,s)),r&&l.eachBefore(fn8),l;}function u(l,s){return function(c){c.children&&B16(c,c.x0,l*(c.depth+1)/s,c.x1,l*(c.depth+2)/s);var f=c.x0,h=c.y0,o=c.x1-t,a=c.y1-t;o<f&&(f=o=(f+o)/2),a<h&&(h=a=(h+a)/2),c.x0=f,c.y0=h,c.x1=o,c.y1=a;};}return i.round=function(l){return arguments.length?(r=!!l,i):r;},i.size=function(l){return arguments.length?(n=+l[0],e=+l[1],i):[n,e];},i.padding=function(l){return arguments.length?(t=+l,i):t;},i;}var Qn4={depth:-1},ln10={},j17={};function Un5(n){return n.id;}function ne12(n){return n.parentId;}function ee11(){var n=Un5,e=ne12,t;function r(i){var u=Array.from(i),l=n,s=e,c,f,h,o,a,d,p,g,y=new Map;if(t!=null){const x=u.map((w,v)=>te11(t(w,v,i))),m=x.map(cn9),_=new Set(x).add("");for(const w of m)_.has(w)||(_.add(w),x.push(w),m.push(cn9(w)),u.push(j17));l=(w,v)=>x[v],s=(w,v)=>m[v];}for(h=0,c=u.length;h<c;++h)f=u[h],d=u[h]=new S16(f),(p=l(f,h,i))!=null&&(p+="")&&(g=d.id=p,y.set(g,y.has(g)?ln10:d)),(p=s(f,h,i))!=null&&(p+="")&&(d.parent=p);for(h=0;h<c;++h)if(d=u[h],p=d.parent){if(a=y.get(p),!a)throw new Error("missing: "+p);if(a===ln10)throw new Error("ambiguous: "+p);a.children?a.children.push(d):a.children=[d],d.parent=a;}else{if(o)throw new Error("multiple roots");o=d;}if(!o)throw new Error("no root");if(t!=null){for(;o.data===j17&&o.children.length===1;)o=o.children[0],--c;for(let x=u.length-1;x>=0&&!(d=u[x],d.data!==j17);--x)d.data=null;}if(o.parent=Qn4,o.eachBefore(function(x){x.depth=x.parent.depth+1,--c;}).eachBefore(Z18),o.parent=null,c>0)throw new Error("cycle");return o;}return r.id=function(i){return arguments.length?(n=L20(i),r):n;},r.parentId=function(i){return arguments.length?(e=L20(i),r):e;},r.path=function(i){return arguments.length?(t=L20(i),r):t;},r;}function te11(n){n=`${n}`;let e=n.length;return K19(n,e-1)&&!K19(n,e-2)&&(n=n.slice(0,-1)),n[0]==="/"?n:`/${n}`;}function cn9(n){let e=n.length;if(e<2)return"";for(;--e>1&&!K19(n,e););return n.slice(0,e);}function K19(n,e){if(n[e]==="/"){let t=0;for(;e>0&&n[--e]==="\\";)++t;if((t&1)===0)return!0;}return!1;}function re12(n,e){return n.parent===e.parent?1:2;}function X21(n){var e=n.children;return e?e[0]:n.t;}function Y18(n){var e=n.children;return e?e[e.length-1]:n.t;}function ie9(n,e,t){var r=t/(e.i-n.i);e.c-=r,e.s+=t,n.c+=r,e.z+=t,e.m+=t;}function ue10(n){for(var e=0,t=0,r=n.children,i=r.length,u;--i>=0;)u=r[i],u.z+=e,u.m+=e,e+=u.s+(t+=u.c);}function ae9(n,e,t){return n.a.parent===e.parent?n.a:t;}function T13(n,e){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e;}T13.prototype=Object.create(S16.prototype);function fe8(n){for(var e=new T13(n,0),t,r=[e],i,u,l,s;t=r.pop();)if(u=t._.children)for(t.children=new Array(s=u.length),l=s-1;l>=0;--l)r.push(i=t.children[l]=new T13(u[l],l)),i.parent=t;return(e.parent=new T13(null,0)).children=[e],e;}function le10(){var n=re12,e=1,t=1,r=null;function i(f){var h=fe8(f);if(h.eachAfter(u),h.parent.m=-h.z,h.eachBefore(l),r)f.eachBefore(c);else{var o=f,a=f,d=f;f.eachBefore(function(m){m.x<o.x&&(o=m),m.x>a.x&&(a=m),m.depth>d.depth&&(d=m);});var p=o===a?1:n(o,a)/2,g=p-o.x,y=e/(a.x+p+g),x=t/(d.depth||1);f.eachBefore(function(m){m.x=(m.x+g)*y,m.y=m.depth*x;});}return f;}function u(f){var h=f.children,o=f.parent.children,a=f.i?o[f.i-1]:null;if(h){ue10(f);var d=(h[0].z+h[h.length-1].z)/2;a?(f.z=a.z+n(f._,a._),f.m=f.z-d):f.z=d;}else a&&(f.z=a.z+n(f._,a._));f.parent.A=s(f,a,f.parent.A||o[0]);}function l(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m;}function s(f,h,o){if(h){for(var a=f,d=f,p=h,g=a.parent.children[0],y=a.m,x=d.m,m=p.m,_=g.m,w;p=Y18(p),a=X21(a),p&&a;)g=X21(g),d=Y18(d),d.a=f,w=p.z+m-a.z-y+n(p._,a._),w>0&&(ie9(ae9(p,f,o),f,w),y+=w,x+=w),m+=p.m,y+=a.m,_+=g.m,x+=d.m;p&&!Y18(d)&&(d.t=p,d.m+=m-x),a&&!X21(g)&&(g.t=a,g.m+=y-_,o=f);}return o;}function c(f){f.x*=e,f.y=f.depth*t;}return i.separation=function(f){return arguments.length?(n=f,i):n;},i.size=function(f){return arguments.length?(r=!1,e=+f[0],t=+f[1],i):r?null:[e,t];},i.nodeSize=function(f){return arguments.length?(r=!0,e=+f[0],t=+f[1],i):r?[e,t]:null;},i;}function $12(n,e,t,r,i){for(var u=n.children,l,s=-1,c=u.length,f=n.value&&(i-t)/n.value;++s<c;)l=u[s],l.x0=e,l.x1=r,l.y0=t,l.y1=t+=l.value*f;}var hn8=(1+Math.sqrt(5))/2;function sn7(n,e,t,r,i,u){for(var l=[],s=e.children,c,f,h=0,o=0,a=s.length,d,p,g=e.value,y,x,m,_,w,v,z;h<a;){d=i-t,p=u-r;do y=s[o++].value;while(!y&&o<a)for(x=m=y,v=Math.max(p/d,d/p)/(g*n),z=y*y*v,w=Math.max(m/z,z/x);o<a;++o){if(y+=f=s[o].value,f<x&&(x=f),f>m&&(m=f),z=y*y*v,_=Math.max(m/z,z/x),_>w){y-=f;break;}w=_;}l.push(c={value:y,dice:d<p,children:s.slice(h,o)}),c.dice?B16(c,t,r,i,g?r+=p*y/g:u):$12(c,t,r,g?t+=d*y/g:i,u),g-=y,h=o;}return l;}var on8=function n(e){function t(r,i,u,l,s){sn7(e,r,i,u,l,s);}return t.ratio=function(r){return n((r=+r)>1?r:1);},t;}(hn8);function ce5(){var n=on8,e=!1,t=1,r=1,i=[0],u=q20,l=q20,s=q20,c=q20,f=q20;function h(a){return a.x0=a.y0=0,a.x1=t,a.y1=r,a.eachBefore(o),i=[0],e&&a.eachBefore(fn8),a;}function o(a){var d=i[a.depth],p=a.x0+d,g=a.y0+d,y=a.x1-d,x=a.y1-d;y<p&&(p=y=(p+y)/2),x<g&&(g=x=(g+x)/2),a.x0=p,a.y0=g,a.x1=y,a.y1=x,a.children&&(d=i[a.depth+1]=u(a)/2,p+=f(a)-d,g+=l(a)-d,y-=s(a)-d,x-=c(a)-d,y<p&&(p=y=(p+y)/2),x<g&&(g=x=(g+x)/2),n(a,p,g,y,x));}return h.round=function(a){return arguments.length?(e=!!a,h):e;},h.size=function(a){return arguments.length?(t=+a[0],r=+a[1],h):[t,r];},h.tile=function(a){return arguments.length?(n=F18(a),h):n;},h.padding=function(a){return arguments.length?h.paddingInner(a).paddingOuter(a):h.paddingInner();},h.paddingInner=function(a){return arguments.length?(u=typeof a=="function"?a:N15(+a),h):u;},h.paddingOuter=function(a){return arguments.length?h.paddingTop(a).paddingRight(a).paddingBottom(a).paddingLeft(a):h.paddingTop();},h.paddingTop=function(a){return arguments.length?(l=typeof a=="function"?a:N15(+a),h):l;},h.paddingRight=function(a){return arguments.length?(s=typeof a=="function"?a:N15(+a),h):s;},h.paddingBottom=function(a){return arguments.length?(c=typeof a=="function"?a:N15(+a),h):c;},h.paddingLeft=function(a){return arguments.length?(f=typeof a=="function"?a:N15(+a),h):f;},h;}function he7(n,e,t,r,i){var u=n.children,l,s=u.length,c,f=new Array(s+1);for(f[0]=c=l=0;l<s;++l)f[l+1]=c+=u[l].value;h(0,s,n.value,e,t,r,i);function h(o,a,d,p,g,y,x){if(o>=a-1){var m=u[o];m.x0=p,m.y0=g,m.x1=y,m.y1=x;return;}for(var _=f[o],w=d/2+_,v=o+1,z=a-1;v<z;){var k=v+z>>>1;f[k]<w?v=k+1:z=k;}w-f[v-1]<f[v]-w&&o+1<v&&--v;var A=f[v]-_,M=d-A;if(y-p>x-g){var I=d?(p*M+y*A)/d:y;h(o,v,A,p,g,I,x),h(v,a,M,I,g,y,x);}else{var R=d?(g*M+x*A)/d:x;h(o,v,A,p,g,y,R),h(v,a,M,p,R,y,x);}}}function se10(n,e,t,r,i){(n.depth&1?$12:B16)(n,e,t,r,i);}var oe11=function n(e){function t(r,i,u,l,s){if((c=r._squarify)&&c.ratio===e)for(var c,f,h,o,a=-1,d,p=c.length,g=r.value;++a<p;){for(f=c[a],h=f.children,o=f.value=0,d=h.length;o<d;++o)f.value+=h[o].value;f.dice?B16(f,i,u,l,g?u+=(s-u)*f.value/g:s):$12(f,i,u,g?i+=(l-i)*f.value/g:l,s),g-=f.value;}else r._squarify=c=sn7(e,r,i,u,l,s),c.ratio=e;}return t.ratio=function(r){return n((r=+r)>1?r:1);},t;}(hn8);function h9(e,t,n){const s={};return e.each(a=>{const r=a.data;n(r)&&(s[t(r)]=a);}),e.lookup=s,e;}function g8(e){dt2.call(this,null,e);}g8.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const _16=e=>e.values;Pn(g8,dt2,{transform(e,t){t.source||b("Nest transform requires an upstream data source.");var n=e.generate,s=e.modified(),a=t.clone(),r=this.value;return(!r||s||t.changed())&&(r&&r.each(i=>{i.children&&Et(i.data)&&a.rem.push(i.data);}),this.value=r=O16({values:p(e.keys).reduce((i,o)=>(i.key(o),i),ee12()).entries(a.source)},_16),n&&r.each(i=>{i.children&&(i=V4(i.data),a.add.push(i),a.source.push(i));}),h9(r,d4,d4)),a.source.root=r,a;}});function ee12(){const e=[],t={entries:a=>s(n(a,0),0),key:a=>(e.push(a),t)};function n(a,r){if(r>=e.length)return a;const i=a.length,o=e[r++],d={},x={};let R=-1,p,y,w;for(;++R<i;)p=o(y=a[R])+"",(w=d[p])?w.push(y):d[p]=[y];for(p in d)x[p]=n(d[p],r);return x;}function s(a,r){if(++r>e.length)return a;const i=[];for(const o in a)i.push({key:o,values:s(a[o],r)});return i;}return t;}function u7(e){dt2.call(this,null,e);}const te12=(e,t)=>e.parent===t.parent?1:2;Pn(u7,dt2,{transform(e,t){(!t.source||!t.source.root)&&b(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),s=this.fields,a=t.source.root,r=e.as||s;e.field?a.sum(e.field):a.count(),e.sort&&a.sort(Mt1(e.sort,i=>i.data)),ae10(n,this.params,e),n.separation&&n.separation(e.separation!==!1?te12:v);try{this.value=n(a);}catch(i){b(i);}return a.each(i=>re13(i,s,r)),t.reflow(e.modified()).modifies(r).modifies("leaf");}});function ae10(e,t,n){for(let s,a=0,r=t.length;a<r;++a)s=t[a],s in n&&e[s](n[s]);}function re13(e,t,n){const s=e.data,a=t.length-1;for(let r=0;r<a;++r)s[n[r]]=e[t[r]];s[n[a]]=e.children?e.children.length:0;}const k16=["x","y","r","depth","children"];function v12(e){u7.call(this,e);}v12.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:k16.length,default:k16}]},Pn(v12,u7,{layout:Gn5,params:["radius","size","padding"],fields:k16});const b12=["x0","y0","x1","y1","depth","children"];function z14(e){u7.call(this,e);}z14.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:b12.length,default:b12}]},Pn(z14,u7,{layout:Jn5,params:["size","round","padding"],fields:b12});function D11(e){dt2.call(this,null,e);}D11.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},Pn(D11,dt2,{transform(e,t){t.source||b("Stratify transform requires an upstream data source.");let n=this.value;const s=e.modified(),a=t.fork(t.ALL).materialize(t.SOURCE),r=!n||s||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return a.source=a.source.slice(),r&&(n=a.source.length?h9(ee11().id(e.key).parentId(e.parentKey)(a.source),e.key,_1):h9(ee11()([{}]),e.key,e.key)),a.source.root=this.value=n,a;}});const C19={tidy:le10,cluster:wn9},O17=["x","y","depth","children"];function q21(e){u7.call(this,e);}q21.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:O17.length,default:O17}]},Pn(q21,u7,{layout(e){const t=e||"tidy";if(g(C19,t))return C19[t]();b("Unrecognized Tree layout method: "+t);},params:["size","nodeSize"],fields:O17});function S17(e){dt2.call(this,[],e);}S17.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},Pn(S17,dt2,{transform(e,t){const n=this.value,s=t.source&&t.source.root,a=t.fork(t.NO_SOURCE),r={};return s||b("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(a.rem=n,t.visit(t.SOURCE,i=>r[d4(i)]=1),s.each(i=>{const o=i.data,d=i.parent&&i.parent.data;d&&r[d4(o)]&&r[d4(d)]&&a.add.push(V4({source:d,target:o}));}),this.value=a.add):t.changed(t.MOD)&&(t.visit(t.MOD,i=>r[d4(i)]=1),n.forEach(i=>{(r[d4(i.source)]||r[d4(i.target)])&&a.mod.push(i);})),a;}});const E18={binary:he7,dice:B16,slice:$12,slicedice:se10,squarify:on8,resquarify:oe11},T14=["x0","y0","x1","y1","depth","children"];function L21(e){u7.call(this,e);}L21.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:T14.length,default:T14}]},Pn(L21,u7,{layout(){const e=ce5();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t));},e.method=t=>{g(E18,t)?e.tile(E18[t]):b("Unrecognized Treemap layout method: "+t);},e;},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:T14});const mod6=function(){return{nest:g8,pack:v12,partition:z14,stratify:D11,tree:q21,treelinks:S17,treemap:L21,default:null};}();const K20=4278190080;function mt6(t,a){const f=t.bitmap();return(a||[]).forEach(l=>f.set(t(l.boundary[0]),t(l.boundary[3]))),[f,void 0];}function ct10(t,a,f,l,i){const n=t.width,e=t.height,m=l||i,A=n1(n,e).getContext("2d"),r=n1(n,e).getContext("2d"),s=m&&n1(n,e).getContext("2d");f.forEach(y=>H18(A,y,!1)),H18(r,a,!1),m&&H18(s,a,!0);const d=Y19(A,n,e),o=Y19(r,n,e),u=m&&Y19(s,n,e),c=t.bitmap(),b=m&&t.bitmap();let g,v,x,p,w,k,R,h;for(v=0;v<e;++v)for(g=0;g<n;++g)w=v*n+g,k=d[w]&K20,h=o[w]&K20,R=m&&u[w]&K20,(k||R||h)&&(x=t(g),p=t(v),!i&&(k||h)&&c.set(x,p),m&&(k||R)&&b.set(x,p));return[c,b];}function Y19(t,a,f){return new Uint32Array(t.getImageData(0,0,a,f).data.buffer);}function H18(t,a,f){if(!a.length)return;const l=a[0].mark.marktype;l==="group"?a.forEach(i=>{i.items.forEach(n=>H18(t,n.items,f));}):$8[l].draw(t,{items:f?a.map(dt7):a});}function dt7(t){const a=nt2(t,{});return a.stroke&&a.strokeOpacity!==0||a.fill&&a.fillOpacity!==0?{...a,strokeOpacity:1,stroke:"#000",fillOpacity:0}:a;}const L22=5,j18=32,C20=new Uint32Array(j18+1),B17=new Uint32Array(j18+1);B17[0]=0,C20[0]=~B17[0];for(let t=1;t<=32;++t)B17[t]=B17[t-1]<<1|1,C20[t]=~B17[t];function ht6(t,a){const f=new Uint32Array(~~((t*a+32)/32));function l(n,e){f[n]|=e;}function i(n,e){f[n]&=e;}return{array:f,get:(n,e)=>{const m=e*t+n;return f[m>>>5]&1<<(m&31);},set:(n,e)=>{const m=e*t+n;l(m>>>5,1<<(m&31));},clear:(n,e)=>{const m=e*t+n;i(m>>>5,~(1<<(m&31)));},getRange:(n,e,m,A)=>{let r=A,s,d,o,u;for(;r>=e;--r)if(s=r*t+n,d=r*t+m,o=s>>>L22,u=d>>>L22,o===u){if(f[o]&C20[s&31]&B17[(d&31)+1])return!0;}else{if(f[o]&C20[s&31])return!0;if(f[u]&B17[(d&31)+1])return!0;for(let c=o+1;c<u;++c)if(f[c])return!0;}return!1;},setRange:(n,e,m,A)=>{let r,s,d,o,u;for(;e<=A;++e)if(r=e*t+n,s=e*t+m,d=r>>>L22,o=s>>>L22,d===o)l(d,C20[r&31]&B17[(s&31)+1]);else for(l(d,C20[r&31]),l(o,B17[(s&31)+1]),u=d+1;u<o;++u)l(u,4294967295);},clearRange:(n,e,m,A)=>{let r,s,d,o,u;for(;e<=A;++e)if(r=e*t+n,s=e*t+m,d=r>>>L22,o=s>>>L22,d===o)i(d,B17[r&31]|C20[(s&31)+1]);else for(i(d,B17[r&31]),i(o,C20[(s&31)+1]),u=d+1;u<o;++u)i(u,0);},outOfBounds:(n,e,m,A)=>n<0||e<0||A>=a||m>=t};}function yt6(t,a,f){const l=Math.max(1,Math.sqrt(t*a/1e6)),i=~~((t+2*f+l)/l),n=~~((a+2*f+l)/l),e=m=>~~((m+f)/l);return e.invert=m=>m*l-f,e.bitmap=()=>ht6(i,n),e.ratio=l,e.padding=f,e.width=t,e.height=a,e;}function xt7(t,a,f,l){const i=t.width,n=t.height;return function(e){const m=e.datum.datum.items[l].items,A=m.length,r=e.datum.fontSize,s=Y11.width(e.datum,e.datum.text);let d=0,o,u,c,b,g,v,x;for(let p=0;p<A;++p)o=m[p].x,c=m[p].y,u=m[p].x2===void 0?o:m[p].x2,b=m[p].y2===void 0?c:m[p].y2,g=(o+u)/2,v=(c+b)/2,x=Math.abs(u-o+b-c),x>=d&&(d=x,e.x=g,e.y=v);return g=s/2,v=r/2,o=e.x-g,u=e.x+g,c=e.y-v,b=e.y+v,e.align="center",o<0&&u<=i?e.align="left":0<=o&&i<u&&(e.align="right"),e.baseline="middle",c<0&&b<=n?e.baseline="top":0<=c&&n<b&&(e.baseline="bottom"),!0;};}function q22(t,a,f,l,i,n){let e=f/2;return t-e<0||t+e>i||a-(e=l/2)<0||a+e>n;}function P18(t,a,f,l,i,n,e,m){const A=i*n/(l*2),r=t(a-A),s=t(a+A),d=t(f-(n=n/2)),o=t(f+n);return e.outOfBounds(r,d,s,o)||e.getRange(r,d,s,o)||m&&m.getRange(r,d,s,o);}function gt6(t,a,f,l){const i=t.width,n=t.height,e=a[0],m=a[1];function A(r,s,d,o,u){const c=t.invert(r),b=t.invert(s);let g=d,v=n,x;if(!q22(c,b,o,u,i,n)&&!P18(t,c,b,u,o,g,e,m)&&!P18(t,c,b,u,o,u,e,null)){for(;v-g>=1;)x=(g+v)/2,P18(t,c,b,u,o,x,e,m)?v=x:g=x;if(g>d)return[c,b,g,!0];}}return function(r){const s=r.datum.datum.items[l].items,d=s.length,o=r.datum.fontSize,u=Y11.width(r.datum,r.datum.text);let c=f?o:0,b=!1,g=!1,v=0,x,p,w,k,R,h,y,z,M,E,O,I,F,T,W,N,G;for(let D=0;D<d;++D){for(x=s[D].x,w=s[D].y,p=s[D].x2===void 0?x:s[D].x2,k=s[D].y2===void 0?w:s[D].y2,x>p&&(G=x,x=p,p=G),w>k&&(G=w,w=k,k=G),M=t(x),O=t(p),E=~~((M+O)/2),I=t(w),T=t(k),F=~~((I+T)/2),y=E;y>=M;--y)for(z=F;z>=I;--z)N=A(y,z,c,u,o),N&&([r.x,r.y,c,b]=N);for(y=E;y<=O;++y)for(z=F;z<=T;++z)N=A(y,z,c,u,o),N&&([r.x,r.y,c,b]=N);!b&&!f&&(W=Math.abs(p-x+k-w),R=(x+p)/2,h=(w+k)/2,W>=v&&!q22(R,h,u,o,i,n)&&!P18(t,R,h,o,u,o,e,null)&&(v=W,r.x=R,r.y=h,g=!0));}return b||g?(R=u/2,h=o/2,e.setRange(t(r.x-R),t(r.y-h),t(r.x+R),t(r.y+h)),r.align="center",r.baseline="middle",!0):!1;};}const pt7=[-1,-1,1,1],bt8=[-1,1,-1,1];function vt5(t,a,f,l){const i=t.width,n=t.height,e=a[0],m=a[1],A=t.bitmap();return function(r){const s=r.datum.datum.items[l].items,d=s.length,o=r.datum.fontSize,u=Y11.width(r.datum,r.datum.text),c=[];let b=f?o:0,g=!1,v=!1,x=0,p,w,k,R,h,y,z,M,E,O,I,F;for(let T=0;T<d;++T){for(p=s[T].x,k=s[T].y,w=s[T].x2===void 0?p:s[T].x2,R=s[T].y2===void 0?k:s[T].y2,c.push([t((p+w)/2),t((k+R)/2)]);c.length;){if([z,M]=c.pop(),e.get(z,M)||m.get(z,M)||A.get(z,M))continue;A.set(z,M);for(let W=0;W<4;++W)h=z+pt7[W],y=M+bt8[W],A.outOfBounds(h,y,h,y)||c.push([h,y]);if(h=t.invert(z),y=t.invert(M),E=b,O=n,!q22(h,y,u,o,i,n)&&!P18(t,h,y,o,u,E,e,m)&&!P18(t,h,y,o,u,o,e,null)){for(;O-E>=1;)I=(E+O)/2,P18(t,h,y,o,u,I,e,m)?O=I:E=I;E>b&&(r.x=h,r.y=y,b=E,g=!0);}}!g&&!f&&(F=Math.abs(w-p+R-k),h=(p+w)/2,y=(k+R)/2,F>=x&&!q22(h,y,u,o,i,n)&&!P18(t,h,y,o,u,o,e,null)&&(x=F,r.x=h,r.y=y,v=!0));}return g||v?(h=u/2,y=o/2,e.setRange(t(r.x-h),t(r.y-y),t(r.x+h),t(r.y+y)),r.align="center",r.baseline="middle",!0):!1;};}const At8=["right","center","left"],Mt7=["bottom","middle","top"];function wt5(t,a,f,l){const i=t.width,n=t.height,e=a[0],m=a[1],A=l.length;return function(r){const s=r.boundary,d=r.datum.fontSize;if(s[2]<0||s[5]<0||s[0]>i||s[3]>n)return!1;let o=r.textWidth??0,u,c,b,g,v,x,p,w,k,R,h,y,z,M,E;for(let O=0;O<A;++O){if(u=(f[O]&3)-1,c=(f[O]>>>2&3)-1,b=u===0&&c===0||l[O]<0,g=u&&c?Math.SQRT1_2:1,v=l[O]<0?-1:1,x=s[1+u]+l[O]*u*g,h=s[4+c]+v*d*c/2+l[O]*c*g,w=h-d/2,k=h+d/2,y=t(x),M=t(w),E=t(k),!o)if(at10(y,y,M,E,e,m,x,x,w,k,s,b))o=Y11.width(r.datum,r.datum.text);else continue;if(R=x+v*o*u/2,x=R-o/2,p=R+o/2,y=t(x),z=t(p),at10(y,z,M,E,e,m,x,p,w,k,s,b))return r.x=u?u*v<0?p:x:R,r.y=c?c*v<0?k:w:h,r.align=At8[u*v+1],r.baseline=Mt7[c*v+1],e.setRange(y,M,z,E),!0;}return!1;};}function at10(t,a,f,l,i,n,e,m,A,r,s,d){return!(i.outOfBounds(t,f,a,l)||(d&&n||i).getRange(t,f,a,l));}const V15=0,Z19=4,J20=8,Q17=0,_17=1,$13=2,kt7={"top-left":V15+Q17,top:V15+_17,"top-right":V15+$13,left:Z19+Q17,middle:Z19+_17,right:Z19+$13,"bottom-left":J20+Q17,bottom:J20+_17,"bottom-right":J20+$13},Rt7={naive:xt7,"reduced-search":gt6,floodfill:vt5};function Ot5(t,a,f,l,i,n,e,m,A,r,s){if(!t.length)return t;const d=Math.max(l.length,i.length),o=zt6(l,d),u=Et5(i,d),c=St6(t[0].datum),b=c==="group"&&t[0].datum.items[A].marktype,g=b==="area",v=Tt8(c,b,m,A),x=r===null||r===Infinity,p=g&&s==="naive";let w=-1,k=-1;const R=t.map(M=>{const E=x?Y11.width(M,M.text):void 0;return w=Math.max(w,E),k=Math.max(k,M.fontSize),{datum:M,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(M),textWidth:E};});r=r===null||r===Infinity?Math.max(w,k)+Math.max(...l):r;const h=yt6(a[0],a[1],r);let y;if(!p){f&&R.sort((O,I)=>f(O.datum,I.datum));let M=!1;for(let O=0;O<u.length&&!M;++O)M=u[O]===5||o[O]<0;const E=(c&&e||g)&&t.map(O=>O.datum);y=n.length||E?ct10(h,E||[],n,M,g):mt6(h,e&&R);}const z=g?Rt7[s](h,y,e,A):wt5(h,y,u,o);return R.forEach(M=>M.opacity=+z(M)),R;}function zt6(t,a){const f=new Float64Array(a),l=t.length;for(let i=0;i<l;++i)f[i]=t[i]||0;for(let i=l;i<a;++i)f[i]=f[l-1];return f;}function Et5(t,a){const f=new Int8Array(a),l=t.length;for(let i=0;i<l;++i)f[i]|=kt7[t[i]];for(let i=l;i<a;++i)f[i]=f[l-1];return f;}function St6(t){return t&&t.mark&&t.mark.marktype;}function Tt8(t,a,f,l){const i=n=>[n.x,n.x,n.x,n.y,n.y,n.y];return t?t==="line"||t==="area"?n=>i(n.datum):a==="line"?n=>{const e=n.datum.items[l].items;return i(e.length?e[f==="start"?0:e.length-1]:{x:NaN,y:NaN});}:n=>{const e=n.datum.bounds;return[e.x1,(e.x1+e.x2)/2,e.x2,e.y1,(e.y1+e.y2)/2,e.y2];}:i;}const tt6=["x","y","opacity","align","baseline"],it8=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function et8(t){dt2.call(this,null,t);}et8.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:it8},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:tt6.length,default:tt6}]},Pn(et8,dt2,{transform(t,a){function f(n){const e=t[n];return O1(e)&&a.modified(e.fields);}const l=t.modified();if(!(l||a.changed(a.ADD_REM)||f("sort")))return;(!t.size||t.size.length!==2)&&b("Size parameter should be specified as a [width, height] array.");const i=t.as||tt6;return Ot5(a.materialize(a.SOURCE).source||[],t.size,t.sort,p(t.offset==null?1:t.offset),p(t.anchor||it8),t.avoidMarks||[],t.avoidBaseMark!==!1,t.lineAnchor||"end",t.markIndex||0,t.padding===void 0?0:t.padding,t.method||"naive").forEach(n=>{const e=n.datum;e[i[0]]=n.x,e[i[1]]=n.y,e[i[2]]=n.opacity,e[i[3]]=n.align,e[i[4]]=n.baseline;}),a.reflow(l).modifies(i);}});const mod7=function(){return{label:et8,default:null};}();function k17(e,r){var t=[],p=function(l){return l(i);},u,o,a,i,n,s;if(r==null)t.push(e);else for(u={},o=0,a=e.length;o<a;++o)i=e[o],n=r.map(p),s=u[n],s||(u[n]=s=[],s.dims=n,t.push(s)),s.push(i);return t;}function b13(e){dt2.call(this,null,e);}b13.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},Pn(b13,dt2,{transform(e,r){const t=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||e.modified()){const p=r.materialize(r.SOURCE).source,u=k17(p,e.groupby),o=(e.groupby||[]).map(H1),a=o.length,i=e.as||[H1(e.x),H1(e.y)],n=[];u.forEach(s=>{Re1(s,e.x,e.y,e.bandwidth||.3).forEach(l=>{const d={};for(let m=0;m<a;++m)d[o[m]]=s.dims[m];d[i[0]]=l[0],d[i[1]]=l[1],n.push(V4(d));});}),this.value&&(t.rem=this.value),this.value=t.add=t.source=n;}return t;}});const E19={constant:re4,linear:oe3,log:Fe1,exp:Se1,pow:ke1,quad:le2,poly:Ie1},V16=(e,r)=>e==="poly"?r:e==="quad"?2:1;function O18(e){dt2.call(this,null,e);}O18.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(E19)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},Pn(O18,dt2,{transform(e,r){const t=r.fork(r.NO_SOURCE|r.NO_FIELDS);if(!this.value||r.changed()||e.modified()){const p=r.materialize(r.SOURCE).source,u=k17(p,e.groupby),o=(e.groupby||[]).map(H1),a=e.method||"linear",i=e.order==null?3:e.order,n=V16(a,i),s=e.as||[H1(e.x),H1(e.y)],l=E19[a],d=[];let m=e.extent;g(E19,a)||b("Invalid regression method: "+a),m!=null&&a==="log"&&m[0]<=0&&(r.dataflow.warn("Ignoring extent with values <= 0 for log regression."),m=null),u.forEach(g=>{const C=g.length;if(C<=n){r.dataflow.warn("Skipping regression with more parameters than data points.");return;}const h=l(g,e.x,e.y,i);if(e.params){d.push(V4({keys:g.dims,coef:h.coef,rSquared:h.rSquared}));return;}const S=m||Nn(g,e.x),q=c=>{const y={};for(let v=0;v<o.length;++v)y[o[v]]=g.dims[v];y[s[0]]=c[0],y[s[1]]=c[1],d.push(V4(y));};a==="linear"||a==="constant"?S.forEach(c=>q([c,h.predict(c)])):Ue1(h.predict,S,25,200).forEach(q);}),this.value&&(t.rem=this.value),this.value=t.add=t.source=d;}return t;}});const mod8=function(){return{loess:b13,regression:O18,default:null};}();const rt8=11102230246251565e-32,b14=134217729,_n5=(3+8*rt8)*rt8;function it9(I,J,V,S,R){let K,j,D,E,e=J[0],f=S[0],a=0,r=0;f>e===f>-e?(K=e,e=J[++a]):(K=f,f=S[++r]);let i=0;if(a<I&&r<V)for(f>e===f>-e?(j=e+K,D=K-(j-e),e=J[++a]):(j=f+K,D=K-(j-f),f=S[++r]),K=j,D!==0&&(R[i++]=D);a<I&&r<V;)f>e===f>-e?(j=K+e,E=j-K,D=K-(j-E)+(e-E),e=J[++a]):(j=K+f,E=j-K,D=K-(j-E)+(f-E),f=S[++r]),K=j,D!==0&&(R[i++]=D);for(;a<I;)j=K+e,E=j-K,D=K-(j-E)+(e-E),e=J[++a],K=j,D!==0&&(R[i++]=D);for(;r<V;)j=K+f,E=j-K,D=K-(j-E)+(f-E),f=S[++r],K=j,D!==0&&(R[i++]=D);return(K!==0||i===0)&&(R[i++]=K),i;}function Mn7(I,J){let V=J[0];for(let S=1;S<I;S++)V+=J[S];return V;}function N16(I){return new Float64Array(I);}const Bc=(3+16*11102230246251565e-32)*11102230246251565e-32,Qc=(2+12*11102230246251565e-32)*11102230246251565e-32,gc=(9+64*11102230246251565e-32)*11102230246251565e-32*11102230246251565e-32,kt8=N16(4),cc=N16(8),sc=N16(12),oc=N16(16),$t5=N16(4);function Dc(I,J,V,S,R,K,j){let D,E,e,f,a,r,i,v,t,o,l,C,M,Q,d,F,$,A;const H=I-R,O=V-R,U=J-K,P=S-K;Q=H*P,r=b14*H,i=r-(r-H),v=H-i,r=b14*P,t=r-(r-P),o=P-t,d=v*o-(Q-i*t-v*t-i*o),F=U*O,r=b14*U,i=r-(r-U),v=U-i,r=b14*O,t=r-(r-O),o=O-t,$=v*o-(F-i*t-v*t-i*o),l=d-$,a=d-l,kt8[0]=d-(l+a)+(a-$),C=Q+l,a=C-Q,M=Q-(C-a)+(l-a),l=M-F,a=M-l,kt8[1]=M-(l+a)+(a-F),A=C+l,a=A-C,kt8[2]=C-(A-a)+(l-a),kt8[3]=A;let Y=Mn7(4,kt8),n=Qc*j;if(Y>=n||-Y>=n)return Y;if(a=I-H,D=I-(H+a)+(a-R),a=V-O,e=V-(O+a)+(a-R),a=J-U,E=J-(U+a)+(a-K),a=S-P,f=S-(P+a)+(a-K),D===0&&E===0&&e===0&&f===0)return Y;if(n=gc*j+_n5*Math.abs(Y),Y+=H*f+P*D-(U*e+O*E),Y>=n||-Y>=n)return Y;Q=D*P,r=b14*D,i=r-(r-D),v=D-i,r=b14*P,t=r-(r-P),o=P-t,d=v*o-(Q-i*t-v*t-i*o),F=E*O,r=b14*E,i=r-(r-E),v=E-i,r=b14*O,t=r-(r-O),o=O-t,$=v*o-(F-i*t-v*t-i*o),l=d-$,a=d-l,$t5[0]=d-(l+a)+(a-$),C=Q+l,a=C-Q,M=Q-(C-a)+(l-a),l=M-F,a=M-l,$t5[1]=M-(l+a)+(a-F),A=C+l,a=A-C,$t5[2]=C-(A-a)+(l-a),$t5[3]=A;const u=it9(4,kt8,4,$t5,cc);Q=H*f,r=b14*H,i=r-(r-H),v=H-i,r=b14*f,t=r-(r-f),o=f-t,d=v*o-(Q-i*t-v*t-i*o),F=U*e,r=b14*U,i=r-(r-U),v=U-i,r=b14*e,t=r-(r-e),o=e-t,$=v*o-(F-i*t-v*t-i*o),l=d-$,a=d-l,$t5[0]=d-(l+a)+(a-$),C=Q+l,a=C-Q,M=Q-(C-a)+(l-a),l=M-F,a=M-l,$t5[1]=M-(l+a)+(a-F),A=C+l,a=A-C,$t5[2]=C-(A-a)+(l-a),$t5[3]=A;const h=it9(u,cc,4,$t5,sc);Q=D*f,r=b14*D,i=r-(r-D),v=D-i,r=b14*f,t=r-(r-f),o=f-t,d=v*o-(Q-i*t-v*t-i*o),F=E*e,r=b14*E,i=r-(r-E),v=E-i,r=b14*e,t=r-(r-e),o=e-t,$=v*o-(F-i*t-v*t-i*o),l=d-$,a=d-l,$t5[0]=d-(l+a)+(a-$),C=Q+l,a=C-Q,M=Q-(C-a)+(l-a),l=M-F,a=M-l,$t5[1]=M-(l+a)+(a-F),A=C+l,a=A-C,$t5[2]=C-(A-a)+(l-a),$t5[3]=A;const q=it9(h,sc,4,$t5,oc);return oc[q-1];}function Fc(I,J,V,S,R,K){const j=(J-K)*(V-R),D=(I-R)*(S-K),E=j-D;if(j===0||D===0||j>0!==D>0)return E;const e=Math.abs(j+D);return Math.abs(E)>=Bc*e?E:-Dc(I,J,V,S,R,K,e);}N16(4),N16(4),N16(4),N16(4),N16(4),N16(4),N16(4),N16(4),N16(4),N16(8),N16(8),N16(8),N16(4),N16(8),N16(8),N16(8),N16(12);N16(192),N16(192);N16(4),N16(4),N16(4),N16(4),N16(4),N16(4),N16(4),N16(4),N16(8),N16(8),N16(8),N16(8),N16(8),N16(8),N16(8),N16(8),N16(8),N16(4),N16(4),N16(4),N16(8),N16(16),N16(16),N16(16),N16(32),N16(32),N16(48),N16(64);N16(1152),N16(1152);N16(4),N16(4),N16(4),N16(4),N16(4),N16(4),N16(4),N16(4),N16(4),N16(4),N16(24),N16(24),N16(24),N16(24),N16(24),N16(24),N16(24),N16(24),N16(24),N16(24),N16(1152),N16(1152),N16(1152),N16(1152),N16(1152),N16(2304),N16(2304),N16(3456),N16(5760),N16(8),N16(8),N16(8),N16(16),N16(24),N16(48),N16(48),N16(96),N16(192),N16(384),N16(384),N16(384),N16(768);N16(96),N16(96),N16(96),N16(1152);const F19=Math.pow(2,-52),q23=new Uint32Array(512);class Y20{static from(t,i=Q18,l=V17){const r=t.length,h=new Float64Array(r*2);for(let n=0;n<r;n++){const o=t[n];h[2*n]=i(o),h[2*n+1]=l(o);}return new Y20(h);}constructor(t){const i=t.length>>1;if(i>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const l=Math.max(2*i-5,0);this._triangles=new Uint32Array(l*3),this._halfedges=new Int32Array(l*3),this._hashSize=Math.ceil(Math.sqrt(i)),this._hullPrev=new Uint32Array(i),this._hullNext=new Uint32Array(i),this._hullTri=new Uint32Array(i),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(i),this._dists=new Float64Array(i),this.update();}update(){const{coords:t,_hullPrev:i,_hullNext:l,_hullTri:r,_hullHash:h}=this,n=t.length>>1;let o=Infinity,_=Infinity,f=-Infinity,x=-Infinity;for(let s=0;s<n;s++){const c=t[2*s],g=t[2*s+1];c<o&&(o=c),g<_&&(_=g),c>f&&(f=c),g>x&&(x=g),this._ids[s]=s;}const m=(o+f)/2,b=(_+x)/2;let d=Infinity,u,y,p;for(let s=0;s<n;s++){const c=C21(m,b,t[2*s],t[2*s+1]);c<d&&(u=s,d=c);}const T=t[2*u],U=t[2*u+1];d=Infinity;for(let s=0;s<n;s++){if(s===u)continue;const c=C21(T,U,t[2*s],t[2*s+1]);c<d&&c>0&&(y=s,d=c);}let k=t[2*y],L=t[2*y+1],G=Infinity;for(let s=0;s<n;s++){if(s===u||s===y)continue;const c=Z20(T,U,k,L,t[2*s],t[2*s+1]);c<G&&(p=s,G=c);}let E=t[2*p],N=t[2*p+1];if(G===Infinity){for(let g=0;g<n;g++)this._dists[g]=t[2*g]-t[0]||t[2*g+1]-t[1];v13(this._ids,this._dists,0,n-1);const s=new Uint32Array(n);let c=0;for(let g=0,w=-Infinity;g<n;g++){const A=this._ids[g];this._dists[A]>w&&(s[c++]=A,w=this._dists[A]);}this.hull=s.subarray(0,c),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return;}if(Fc(T,U,k,L,E,N)<0){const s=y,c=k,g=L;y=p,k=E,L=N,p=s,E=c,N=g;}const D=B18(T,U,k,L,E,N);this._cx=D.x,this._cy=D.y;for(let s=0;s<n;s++)this._dists[s]=C21(t[2*s],t[2*s+1],D.x,D.y);v13(this._ids,this._dists,0,n-1),this._hullStart=u;let P=3;l[u]=i[p]=y,l[y]=i[u]=p,l[p]=i[y]=u,r[u]=0,r[y]=1,r[p]=2,h.fill(-1),h[this._hashKey(T,U)]=u,h[this._hashKey(k,L)]=y,h[this._hashKey(E,N)]=p,this.trianglesLen=0,this._addTriangle(u,y,p,-1,-1,-1);for(let s=0,c,g;s<this._ids.length;s++){const w=this._ids[s],A=t[2*w],M=t[2*w+1];if(s>0&&Math.abs(A-c)<=F19&&Math.abs(M-g)<=F19)continue;if(c=A,g=M,w===u||w===y||w===p)continue;let I=0;for(let H=0,J=this._hashKey(A,M);H<this._hashSize&&!(I=h[(J+H)%this._hashSize],I!==-1&&I!==l[I]);H++);I=i[I];let a=I,S;for(;S=l[a],Fc(A,M,t[2*a],t[2*a+1],t[2*S],t[2*S+1])>=0;)if(a=S,a===I){a=-1;break;}if(a===-1)continue;let K=this._addTriangle(a,w,l[a],-1,-1,r[a]);r[w]=this._legalize(K+2),r[a]=K,P++;let z=l[a];for(;S=l[z],Fc(A,M,t[2*z],t[2*z+1],t[2*S],t[2*S+1])<0;)K=this._addTriangle(z,w,S,r[w],-1,r[z]),r[w]=this._legalize(K+2),l[z]=z,P--,z=S;if(a===I)for(;S=i[a],Fc(A,M,t[2*S],t[2*S+1],t[2*a],t[2*a+1])<0;)K=this._addTriangle(S,w,a,-1,r[a],r[S]),this._legalize(K+2),r[S]=K,l[a]=a,P--,a=S;this._hullStart=i[w]=a,l[a]=i[z]=w,l[w]=z,h[this._hashKey(A,M)]=w,h[this._hashKey(t[2*a],t[2*a+1])]=a;}this.hull=new Uint32Array(P);for(let s=0,c=this._hullStart;s<P;s++)this.hull[s]=c,c=l[c];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen);}_hashKey(t,i){return Math.floor(O19(t-this._cx,i-this._cy)*this._hashSize)%this._hashSize;}_legalize(t){const{_triangles:i,_halfedges:l,coords:r}=this;let h=0,n=0;for(;;){const o=l[t],_=t-t%3;if(n=_+(t+2)%3,o===-1){if(h===0)break;t=q23[--h];continue;}const f=o-o%3,x=_+(t+1)%3,m=f+(o+2)%3,b=i[n],d=i[t],u=i[x],y=i[m],p=R16(r[2*b],r[2*b+1],r[2*d],r[2*d+1],r[2*u],r[2*u+1],r[2*y],r[2*y+1]);if(p){i[t]=y,i[o]=b;const T=l[m];if(T===-1){let k=this._hullStart;do{if(this._hullTri[k]===m){this._hullTri[k]=t;break;}k=this._hullPrev[k];}while(k!==this._hullStart)}this._link(t,T),this._link(o,l[n]),this._link(n,m);const U=f+(o+1)%3;h<q23.length&&(q23[h++]=U);}else{if(h===0)break;t=q23[--h];}}return n;}_link(t,i){this._halfedges[t]=i,i!==-1&&(this._halfedges[i]=t);}_addTriangle(t,i,l,r,h,n){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=i,this._triangles[o+2]=l,this._link(o,r),this._link(o+1,h),this._link(o+2,n),this.trianglesLen+=3,o;}}function O19(e,t){const i=e/(Math.abs(e)+Math.abs(t));return(t>0?3-i:1+i)/4;}function C21(e,t,i,l){const r=e-i,h=t-l;return r*r+h*h;}function R16(e,t,i,l,r,h,n,o){const _=e-n,f=t-o,x=i-n,m=l-o,b=r-n,d=h-o,u=_*_+f*f,y=x*x+m*m,p=b*b+d*d;return _*(m*p-y*d)-f*(x*p-y*b)+u*(x*d-m*b)<0;}function Z20(e,t,i,l,r,h){const n=i-e,o=l-t,_=r-e,f=h-t,x=n*n+o*o,m=_*_+f*f,b=.5/(n*f-o*_),d=(f*x-o*m)*b,u=(n*m-_*x)*b;return d*d+u*u;}function B18(e,t,i,l,r,h){const n=i-e,o=l-t,_=r-e,f=h-t,x=n*n+o*o,m=_*_+f*f,b=.5/(n*f-o*_),d=e+(f*x-o*m)*b,u=t+(n*m-_*x)*b;return{x:d,y:u};}function v13(e,t,i,l){if(l-i<=20)for(let r=i+1;r<=l;r++){const h=e[r],n=t[h];let o=r-1;for(;o>=i&&t[e[o]]>n;)e[o+1]=e[o--];e[o+1]=h;}else{const r=i+l>>1;let h=i+1,n=l;j19(e,r,h),t[e[i]]>t[e[l]]&&j19(e,i,l),t[e[h]]>t[e[l]]&&j19(e,h,l),t[e[i]]>t[e[h]]&&j19(e,i,h);const o=e[h],_=t[o];for(;;){do h++;while(t[e[h]]<_)do n--;while(t[e[n]]>_)if(n<h)break;j19(e,h,n);}e[i+1]=e[n],e[n]=o,l-h+1>=n-i?(v13(e,t,h,l),v13(e,t,i,n-1)):(v13(e,t,i,n-1),v13(e,t,h,l));}}function j19(e,t,i){const l=e[t];e[t]=e[i],e[i]=l;}function Q18(e){return e[0];}function V17(e){return e[1];}class y13{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._="";}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`;}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z");}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`;}arc(t,e,n){t=+t,e=+e,n=+n;const i=t+n,s=e;if(n<0)throw new Error("negative radius");if(this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-s)>1e-6)&&(this._+="L"+i+","+s),!n)return;this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=i},${this._y1=s}`;}rect(t,e,n,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+i}h${-n}Z`;}value(){return this._||null;}}class S18{constructor(){this._=[];}moveTo(t,e){this._.push([t,e]);}closePath(){this._.push(this._[0].slice());}lineTo(t,e){this._.push([t,e]);}value(){return this._.length?this._:null;}}class Y21{constructor(t,[e,n,i,s]=[0,0,960,500]){if(!((i=+i)>=(e=+e))||!((s=+s)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=e,this.ymax=s,this.ymin=n,this._init();}update(){return this.delaunay.update(),this._init(),this;}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:i}=this;let s,l;const r=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let d=0,m=0,b=n.length,p,k;d<b;d+=3,m+=2){const H=n[d]*2,L=n[d+1]*2,N=n[d+2]*2,T=t[H],$=t[H+1],Z=t[L],q=t[L+1],B=t[N],C=t[N+1],I=Z-T,A=q-$,w=B-T,x=C-$,E=(I*x-A*w)*2;if(Math.abs(E)<1e-9){if(s===void 0){s=l=0;for(const j of e)s+=t[j*2],l+=t[j*2+1];s/=e.length,l/=e.length;}const M=1e9*Math.sign((s-T)*x-(l-$)*w);p=(T+B)/2-M*x,k=($+C)/2+M*w;}else{const M=1/E,j=I*I+A*A,O=w*w+x*x;p=T+(x*j-A*O)*M,k=$+(I*O-w*j)*M;}r[m]=p,r[m+1]=k;}let h=e[e.length-1],o,a=h*4,u,c=t[2*h],f,g=t[2*h+1];i.fill(0);for(let d=0;d<e.length;++d)h=e[d],o=a,u=c,f=g,a=h*4,c=t[2*h],g=t[2*h+1],i[o+2]=i[a]=f-g,i[o+3]=i[a+1]=c-u;}render(t){const e=t==null?t=new y13:void 0,{delaunay:{halfedges:n,inedges:i,hull:s},circumcenters:l,vectors:r}=this;if(s.length<=1)return null;for(let a=0,u=n.length;a<u;++a){const c=n[a];if(c<a)continue;const f=Math.floor(a/3)*2,g=Math.floor(c/3)*2,d=l[f],m=l[f+1],b=l[g],p=l[g+1];this._renderSegment(d,m,b,p,t);}let h,o=s[s.length-1];for(let a=0;a<s.length;++a){h=o,o=s[a];const u=Math.floor(i[o]/3)*2,c=l[u],f=l[u+1],g=h*4,d=this._project(c,f,r[g+2],r[g+3]);d&&this._renderSegment(c,f,d[0],d[1],t);}return e&&e.value();}renderBounds(t){const e=t==null?t=new y13:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value();}renderCell(t,e){const n=e==null?e=new y13:void 0,i=this._clip(t);if(i===null||!i.length)return;e.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let l=2;l<s;l+=2)(i[l]!==i[l-2]||i[l+1]!==i[l-1])&&e.lineTo(i[l],i[l+1]);return e.closePath(),n&&n.value();}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const i=this.cellPolygon(e);i&&(i.index=e,yield i);}}cellPolygon(t){const e=new S18;return this.renderCell(t,e),e.value();}_renderSegment(t,e,n,i,s){let l;const r=this._regioncode(t,e),h=this._regioncode(n,i);r===0&&h===0?(s.moveTo(t,e),s.lineTo(n,i)):(l=this._clipSegment(t,e,n,i,r,h))&&(s.moveTo(l[0],l[1]),s.lineTo(l[2],l[3]));}contains(t,e,n){return(e=+e,e!==e)||(n=+n,n!==n)?!1:this.delaunay._step(t,e,n)===t;}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const i=this._clip(n);if(i){t:for(let s=0,l=e.length;s<l;s+=2)for(let r=0,h=i.length;r<h;r+=2)if(e[s]===i[r]&&e[s+1]===i[r+1]&&e[(s+2)%l]===i[(r+h-2)%h]&&e[(s+3)%l]===i[(r+h-1)%h]){yield n;break t;}}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:i,triangles:s}}=this,l=n[t];if(l===-1)return null;const r=[];let h=l;do{const o=Math.floor(h/3);if(r.push(e[o*2],e[o*2+1]),h=h%3===2?h-2:h+1,s[h]!==t)break;h=i[h];}while(h!==l&&h!==-1)return r;}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(e===null)return null;const{vectors:n}=this,i=t*4;return this._simplify(n[i]||n[i+1]?this._clipInfinite(t,e,n[i],n[i+1],n[i+2],n[i+3]):this._clipFinite(t,e));}_clipFinite(t,e){const n=e.length;let i=null,s,l,r=e[n-2],h=e[n-1],o,a=this._regioncode(r,h),u,c=0;for(let f=0;f<n;f+=2)if(s=r,l=h,r=e[f],h=e[f+1],o=a,a=this._regioncode(r,h),o===0&&a===0)u=c,c=0,i?i.push(r,h):i=[r,h];else{let g,d,m,b,p;if(o===0){if((g=this._clipSegment(s,l,r,h,o,a))===null)continue;[d,m,b,p]=g;}else{if((g=this._clipSegment(r,h,s,l,a,o))===null)continue;[b,p,d,m]=g,u=c,c=this._edgecode(d,m),u&&c&&this._edge(t,u,c,i,i.length),i?i.push(d,m):i=[d,m];}u=c,c=this._edgecode(b,p),u&&c&&this._edge(t,u,c,i,i.length),i?i.push(b,p):i=[b,p];}if(i)u=c,c=this._edgecode(i[0],i[1]),u&&c&&this._edge(t,u,c,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i;}_clipSegment(t,e,n,i,s,l){const r=s<l;for(r&&([t,e,n,i,s,l]=[n,i,t,e,l,s]);;){if(s===0&&l===0)return r?[n,i,t,e]:[t,e,n,i];if(s&l)return null;let h,o,a=s||l;a&8?(h=t+(n-t)*(this.ymax-e)/(i-e),o=this.ymax):a&4?(h=t+(n-t)*(this.ymin-e)/(i-e),o=this.ymin):a&2?(o=e+(i-e)*(this.xmax-t)/(n-t),h=this.xmax):(o=e+(i-e)*(this.xmin-t)/(n-t),h=this.xmin),s?(t=h,e=o,s=this._regioncode(t,e)):(n=h,i=o,l=this._regioncode(n,i));}}_clipInfinite(t,e,n,i,s,l){let r=Array.from(e),h;if((h=this._project(r[0],r[1],n,i))&&r.unshift(h[0],h[1]),(h=this._project(r[r.length-2],r[r.length-1],s,l))&&r.push(h[0],h[1]),r=this._clipFinite(t,r))for(let o=0,a=r.length,u,c=this._edgecode(r[a-2],r[a-1]);o<a;o+=2)u=c,c=this._edgecode(r[o],r[o+1]),u&&c&&(o=this._edge(t,u,c,r,o),a=r.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(r=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return r;}_edge(t,e,n,i,s){for(;e!==n;){let l,r;switch(e){case 5:e=4;continue;case 4:e=6,l=this.xmax,r=this.ymin;break;case 6:e=2;continue;case 2:e=10,l=this.xmax,r=this.ymax;break;case 10:e=8;continue;case 8:e=9,l=this.xmin,r=this.ymax;break;case 9:e=1;continue;case 1:e=5,l=this.xmin,r=this.ymin;break;}(i[s]!==l||i[s+1]!==r)&&this.contains(t,l,r)&&(i.splice(s,0,l,r),s+=2);}return s;}_project(t,e,n,i){let s=Infinity,l,r,h;if(i<0){if(e<=this.ymin)return null;(l=(this.ymin-e)/i)<s&&(h=this.ymin,r=t+(s=l)*n);}else if(i>0){if(e>=this.ymax)return null;(l=(this.ymax-e)/i)<s&&(h=this.ymax,r=t+(s=l)*n);}if(n>0){if(t>=this.xmax)return null;(l=(this.xmax-t)/n)<s&&(r=this.xmax,h=e+(s=l)*i);}else if(n<0){if(t<=this.xmin)return null;(l=(this.xmin-t)/n)<s&&(r=this.xmin,h=e+(s=l)*i);}return[r,h];}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0);}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0);}_simplify(t){if(t&&t.length>4){for(let e=0;e<t.length;e+=2){const n=(e+2)%t.length,i=(e+4)%t.length;(t[e]===t[n]&&t[n]===t[i]||t[e+1]===t[n+1]&&t[n+1]===t[i+1])&&(t.splice(n,2),e-=2);}t.length||(t=null);}return t;}}const z15=2*Math.PI,v14=Math.pow;function D12(_){return _[0];}function G19(_){return _[1];}function R17(_){const{triangles:t,coords:e}=_;for(let n=0;n<t.length;n+=3){const i=2*t[n],s=2*t[n+1],l=2*t[n+2],r=(e[l]-e[i])*(e[s+1]-e[i+1])-(e[s]-e[i])*(e[l+1]-e[i+1]);if(r>1e-10)return!1;}return!0;}function J21(_,t,e){return[_+Math.sin(_+t)*e,t+Math.cos(_-t)*e];}class F20{static from(t,e=D12,n=G19,i){return new F20("length"in t?K21(t,e,n,i):Float64Array.from(P19(t,e,n,i)));}constructor(t){this._delaunator=new Y20(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init();}update(){return this._delaunator.update(),this._init(),this;}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&R17(t)){this.collinear=Int32Array.from({length:e.length/2},(c,f)=>f).sort((c,f)=>e[2*c]-e[2*f]||e[2*c+1]-e[2*f+1]);const h=this.collinear[0],o=this.collinear[this.collinear.length-1],a=[e[2*h],e[2*h+1],e[2*o],e[2*o+1]],u=1e-8*Math.hypot(a[3]-a[1],a[2]-a[0]);for(let c=0,f=e.length/2;c<f;++c){const g=J21(e[2*c],e[2*c+1],u);e[2*c]=g[0],e[2*c+1]=g[1];}this._delaunator=new Y20(e);}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,l=this.inedges.fill(-1),r=this._hullIndex.fill(-1);for(let h=0,o=n.length;h<o;++h){const a=s[h%3===2?h-2:h+1];(n[h]===-1||l[a]===-1)&&(l[a]=h);}for(let h=0,o=i.length;h<o;++h)r[i[h]]=h;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],l[i[0]]=1,i.length===2&&(l[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]));}voronoi(t){return new Y21(this,t);}*neighbors(t){const{inedges:e,hull:n,_hullIndex:i,halfedges:s,triangles:l,collinear:r}=this;if(r){const u=r.indexOf(t);u>0&&(yield r[u-1]),u<r.length-1&&(yield r[u+1]);return;}const h=e[t];if(h===-1)return;let o=h,a=-1;do{if(yield a=l[o],o=o%3===2?o-2:o+1,l[o]!==t)return;if(o=s[o],o===-1){const u=n[(i[t]+1)%n.length];u!==a&&(yield u);return;}}while(o!==h)}find(t,e,n=0){if((t=+t,t!==t)||(e=+e,e!==e))return-1;const i=n;let s;for(;(s=this._step(n,t,e))>=0&&s!==n&&s!==i;)n=s;return s;}_step(t,e,n){const{inedges:i,hull:s,_hullIndex:l,halfedges:r,triangles:h,points:o}=this;if(i[t]===-1||!o.length)return(t+1)%(o.length>>1);let a=t,u=v14(e-o[t*2],2)+v14(n-o[t*2+1],2);const c=i[t];let f=c;do{let g=h[f];const d=v14(e-o[g*2],2)+v14(n-o[g*2+1],2);if(d<u&&(u=d,a=g),f=f%3===2?f-2:f+1,h[f]!==t)break;if(f=r[f],f===-1){if(f=s[(l[t]+1)%s.length],f!==g&&v14(e-o[f*2],2)+v14(n-o[f*2+1],2)<u)return f;break;}}while(f!==c)return a;}render(t){const e=t==null?t=new y13:void 0,{points:n,halfedges:i,triangles:s}=this;for(let l=0,r=i.length;l<r;++l){const h=i[l];if(h<l)continue;const o=s[l]*2,a=s[h]*2;t.moveTo(n[o],n[o+1]),t.lineTo(n[a],n[a+1]);}return this.renderHull(t),e&&e.value();}renderPoints(t,e){e===void 0&&(!t||typeof t.moveTo!="function")&&(e=t,t=null),e=e==null?2:+e;const n=t==null?t=new y13:void 0,{points:i}=this;for(let s=0,l=i.length;s<l;s+=2){const r=i[s],h=i[s+1];t.moveTo(r+e,h),t.arc(r,h,e,0,z15);}return n&&n.value();}renderHull(t){const e=t==null?t=new y13:void 0,{hull:n,points:i}=this,s=n[0]*2,l=n.length;t.moveTo(i[s],i[s+1]);for(let r=1;r<l;++r){const h=2*n[r];t.lineTo(i[h],i[h+1]);}return t.closePath(),e&&e.value();}hullPolygon(){const t=new S18;return this.renderHull(t),t.value();}renderTriangle(t,e){const n=e==null?e=new y13:void 0,{points:i,triangles:s}=this,l=s[t*=3]*2,r=s[t+1]*2,h=s[t+2]*2;return e.moveTo(i[l],i[l+1]),e.lineTo(i[r],i[r+1]),e.lineTo(i[h],i[h+1]),e.closePath(),n&&n.value();}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e);}trianglePolygon(t){const e=new S18;return this.renderTriangle(t,e),e.value();}}function K21(_,t,e,n){const i=_.length,s=new Float64Array(i*2);for(let l=0;l<i;++l){const r=_[l];s[l*2]=t.call(n,r,l,_),s[l*2+1]=e.call(n,r,l,_);}return s;}function*P19(_,t,e,n){let i=0;for(const s of _)yield t.call(n,s,i,_),yield e.call(n,s,i,_),++i;}function l8(e){dt2.call(this,null,e);}l8.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const y14=[-1e5,-1e5,1e5,1e5];Pn(l8,dt2,{transform(e,n){const r=e.as||"path",t=n.source;if(!t||!t.length)return n;let o=e.size;o=o?[0,0,o[0],o[1]]:(o=e.extent)?[o[0][0],o[0][1],o[1][0],o[1][1]]:y14;const m=this.value=F20.from(t,e.x,e.y).voronoi(o);for(let i=0,d=t.length;i<d;++i){const a=m.cellPolygon(i);t[i][r]=a&&!h10(a)?g9(a):null;}return n.reflow(e.modified()).modifies(r);}});function g9(e){const n=e[0][0],r=e[0][1];let t=e.length-1;for(;e[t][0]===n&&e[t][1]===r;--t);return"M"+e.slice(0,t+1).join("L")+"Z";}function h10(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1];}const mod9=function(){return{voronoi:l8,default:null};}();var E20=Math.PI/180,D13=1<<11>>5,C22=1<<11;function _18(){var e=[256,256],t,o,m,f,x,a,c,p=U18,v=[],s=Math.random,i={};i.layout=function(){for(var r=l(n1()),n=at11((e[0]>>5)*e[1]),u=null,b=v.length,z=-1,d=[],w=v.map(h=>({text:t(h),font:o(h),style:f(h),weight:x(h),rotate:a(h),size:~~(m(h)+1e-14),padding:c(h),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:h})).sort((h,S)=>S.size-h.size);++z<b;){var y=w[z];y.x=e[0]*(s()+.5)>>1,y.y=e[1]*(s()+.5)>>1,tt7(r,y,w,z),y.hasText&&g(n,y,u)&&(d.push(y),u?rt9(u,y):u=[{x:y.x+y.x0,y:y.y+y.y0},{x:y.x+y.x1,y:y.y+y.y1}],y.x-=e[0]>>1,y.y-=e[1]>>1);}return d;};function l(r){r.width=r.height=1;var n=Math.sqrt(r.getContext("2d").getImageData(0,0,1,1).data.length>>2);r.width=(D13<<5)/n,r.height=C22/n;var u=r.getContext("2d");return u.fillStyle=u.strokeStyle="red",u.textAlign="center",{context:u,ratio:n};}function g(r,n,u){for(var b=n.x,z=n.y,d=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=p(e),y=s()<.5?1:-1,h=-y,S,W,T;(S=w(h+=y))&&!(W=~~S[0],T=~~S[1],Math.min(Math.abs(W),Math.abs(T))>=d);){if(n.x=b+W,n.y=z+T,n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>e[0]||n.y+n.y1>e[1])continue;if((!u||!et9(n,r,e[0]))&&(!u||nt7(n,u))){for(var R=n.sprite,q=n.width>>5,O=e[0]>>5,X=n.x-(q<<4),B=X&127,j=32-B,F=n.y1-n.y0,L=(n.y+n.y0)*O+(X>>5),I,A=0;A<F;A++){I=0;for(var k=0;k<=q;k++)r[L+k]|=I<<j|(k<q?(I=R[A*q+k])>>>B:0);L+=O;}return n.sprite=null,!0;}}return!1;}return i.words=function(r){return arguments.length?(v=r,i):v;},i.size=function(r){return arguments.length?(e=[+r[0],+r[1]],i):e;},i.font=function(r){return arguments.length?(o=M15(r),i):o;},i.fontStyle=function(r){return arguments.length?(f=M15(r),i):f;},i.fontWeight=function(r){return arguments.length?(x=M15(r),i):x;},i.rotate=function(r){return arguments.length?(a=M15(r),i):a;},i.text=function(r){return arguments.length?(t=M15(r),i):t;},i.spiral=function(r){return arguments.length?(p=ot9[r]||r,i):p;},i.fontSize=function(r){return arguments.length?(m=M15(r),i):m;},i.padding=function(r){return arguments.length?(c=M15(r),i):c;},i.random=function(r){return arguments.length?(s=r,i):s;},i;}function tt7(e,t,o,m){if(t.sprite)return;var f=e.context,x=e.ratio;f.clearRect(0,0,(D13<<5)/x,C22/x);var a=0,c=0,p=0,v=o.length,s,i,l,g,r;for(--m;++m<v;){if(t=o[m],f.save(),f.font=t.style+" "+t.weight+" "+~~((t.size+1)/x)+"px "+t.font,s=f.measureText(t.text+"m").width*x,l=t.size<<1,t.rotate){var n=Math.sin(t.rotate*E20),u=Math.cos(t.rotate*E20),b=s*u,z=s*n,d=l*u,w=l*n;s=Math.max(Math.abs(b+w),Math.abs(b-w))+31>>5<<5,l=~~Math.max(Math.abs(z+d),Math.abs(z-d));}else s=s+31>>5<<5;if(l>p&&(p=l),a+s>=D13<<5&&(a=0,c+=p,p=0),c+l>=C22)break;f.translate((a+(s>>1))/x,(c+(l>>1))/x),t.rotate&&f.rotate(t.rotate*E20),f.fillText(t.text,0,0),t.padding&&(f.lineWidth=2*t.padding,f.strokeText(t.text,0,0)),f.restore(),t.width=s,t.height=l,t.xoff=a,t.yoff=c,t.x1=s>>1,t.y1=l>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=s;}for(var y=f.getImageData(0,0,(D13<<5)/x,C22/x).data,h=[];--m>=0;){if(t=o[m],!t.hasText)continue;for(s=t.width,i=s>>5,l=t.y1-t.y0,g=0;g<l*i;g++)h[g]=0;if(a=t.xoff,a==null)return;c=t.yoff;var S=0,W=-1;for(r=0;r<l;r++){for(g=0;g<s;g++){var T=i*r+(g>>5),R=y[(c+r)*(D13<<5)+(a+g)<<2]?1<<31-g%32:0;h[T]|=R,S|=R;}S?W=r:(t.y0++,l--,r--,c++);}t.y1=t.y0+W,t.sprite=h.slice(0,(t.y1-t.y0)*i);}}function et9(e,t,o){o>>=5;for(var m=e.sprite,f=e.width>>5,x=e.x-(f<<4),a=x&127,c=32-a,p=e.y1-e.y0,v=(e.y+e.y0)*o+(x>>5),s,i=0;i<p;i++){s=0;for(var l=0;l<=f;l++)if((s<<c|(l<f?(s=m[i*f+l])>>>a:0))&t[v+l])return!0;v+=o;}return!1;}function rt9(e,t){var o=e[0],m=e[1];t.x+t.x0<o.x&&(o.x=t.x+t.x0),t.y+t.y0<o.y&&(o.y=t.y+t.y0),t.x+t.x1>m.x&&(m.x=t.x+t.x1),t.y+t.y1>m.y&&(m.y=t.y+t.y1);}function nt7(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y;}function U18(e){var t=e[0]/e[1];return function(o){return[t*(o*=.1)*Math.cos(o),o*Math.sin(o)];};}function it10(e){var t=4,o=t*e[0]/e[1],m=0,f=0;return function(x){var a=x<0?-1:1;switch(Math.sqrt(1+4*a*x)-a&3){case 0:m+=o;break;case 1:f+=t;break;case 2:m-=o;break;default:f-=t;break;}return[m,f];};}function at11(e){for(var t=[],o=-1;++o<e;)t[o]=0;return t;}function M15(e){return typeof e=="function"?e:function(){return e;};}var ot9={archimedean:U18,rectangular:it10};const Y22=["x","y","font","fontSize","fontStyle","fontWeight","angle"],ft9=["text","font","rotate","fontSize","fontStyle","fontWeight"];function N17(e){dt2.call(this,_18(),e);}N17.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:Y22}]},Pn(N17,dt2,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&b("Wordcloud size dimensions must be non-zero.");function o(r){const n=e[r];return O1(n)&&t.modified(n.fields);}const m=e.modified();if(!(m||t.changed(t.ADD_REM)||ft9.some(o)))return;const f=t.materialize(t.SOURCE).source,x=this.value,a=e.as||Y22;let c=e.fontSize||14,p;if(O1(c)?p=e.fontSizeRange:c=On(c),p){const r=c,n=i1("sqrt")().domain(Nn(f,r)).range(p);c=u=>n(r(u));}f.forEach(r=>{r[a[0]]=NaN,r[a[1]]=NaN,r[a[3]]=0;});const v=x.words(f).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(c).random(N7).layout(),s=x.size(),i=s[0]>>1,l=s[1]>>1,g=v.length;for(let r=0,n,u;r<g;++r)n=v[r],u=n.datum,u[a[0]]=n.x+i,u[a[1]]=n.y+l,u[a[2]]=n.font,u[a[3]]=n.size,u[a[4]]=n.style,u[a[5]]=n.weight,u[a[6]]=n.rotate;return t.reflow(m).modifies(a);}});const mod10=function(){return{wordcloud:N17,default:null};}();const E21=e=>new Uint8Array(e),P20=e=>new Uint16Array(e),b15=e=>new Uint32Array(e);function U19(){let e=8,t=[],r=b15(0),o=k18(0,e),d=k18(0,e);return{data:()=>t,seen:()=>r=_19(r,t.length),add(s){for(let a=0,f=t.length,l=s.length,n;a<l;++a)n=s[a],n._index=f++,t.push(n);},remove(s,a){const f=t.length,l=Array(f-s),n=t;let m,i,c;for(i=0;!a[i]&&i<f;++i)l[i]=t[i],n[i]=i;for(c=i;i<f;++i)m=t[i],a[i]?n[i]=-1:(n[i]=c,o[c]=o[i],d[c]=d[i],l[c]=m,m._index=c++),o[i]=0;return t=l,n;},size:()=>t.length,curr:()=>o,prev:()=>d,reset:s=>d[s]=o[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,a){o[s]|=a;},clear(s,a){o[s]&=~a;},resize(s,a){const f=o.length;(s>f||a>e)&&(e=Math.max(a,e),o=k18(s,e,o),d=k18(s,e));}};}function _19(e,t,r){return e.length>=t?e:(r=r||new e.constructor(t),r.set(e),r);}function k18(e,t,r){const o=(t<257?E21:t<65537?P20:b15)(e);return r&&o.set(r),o;}function F21(e,t,r){const o=1<<t;return{one:o,zero:~o,range:r.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(d,s){const a=this,f=a.bisect(a.range,d.value),l=d.index,n=f[0],m=f[1],i=l.length;let c;for(c=0;c<n;++c)s[l[c]]|=o;for(c=m;c<i;++c)s[l[c]]|=o;return a;}};}function L23(){let e=b15(0),t=[],r=0;function o(f,l,n){if(!l.length)return[];const m=r,i=l.length,c=b15(i);let u=Array(i),g,v,h;for(h=0;h<i;++h)u[h]=f(l[h]),c[h]=h;if(u=X22(u,c),m)g=t,v=e,t=Array(m+i),e=b15(m+i),Y23(n,g,v,m,u,c,i,t,e);else{if(n>0)for(h=0;h<i;++h)c[h]+=n;t=u,e=c;}return r=m+i,{index:c,value:u};}function d(f,l){const n=r;let m,i,c;for(i=0;!l[e[i]]&&i<n;++i);for(c=i;i<n;++i)l[m=e[i]]||(e[c]=m,t[c]=t[i],++c);r=n-f;}function s(f){for(let l=0,n=r;l<n;++l)e[l]=f[e[l]];}function a(f,l){let n;return l?n=l.length:(l=t,n=r),[An1(l,f[0],0,n),U2(l,f[1],0,n)];}return{insert:o,remove:d,bisect:a,reindex:s,index:()=>e,size:()=>r};}function X22(e,t){return e.sort.call(t,(r,o)=>{const d=e[r],s=e[o];return d<s?-1:d>s?1:0;}),un1(e,t);}function Y23(e,t,r,o,d,s,a,f,l){let n=0,m=0,i;for(i=0;n<o&&m<a;++i)t[n]<d[m]?(f[i]=t[n],l[i]=r[n++]):(f[i]=d[m],l[i]=s[m++]+e);for(;n<o;++n,++i)f[i]=t[n],l[i]=r[n];for(;m<a;++m,++i)f[i]=d[m],l[i]=s[m]+e;}function j20(e){dt2.call(this,U19(),e),this._indices=null,this._dims=null;}j20.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},Pn(j20,dt2,{transform(e,t){if(this._dims){var r=e.modified("fields")||e.fields.some(o=>t.modified(o.fields));return r?this.reinit(e,t):this.eval(e,t);}else return this.init(e,t);},init(e,t){const r=e.fields,o=e.query,d=this._indices={},s=this._dims=[],a=o.length;let f=0,l,n;for(;f<a;++f)l=r[f].fname,n=d[l]||(d[l]=L23()),s.push(F21(n,f,o[f]));return this.eval(e,t);},reinit(e,t){const r=t.materialize().fork(),o=e.fields,d=e.query,s=this._indices,a=this._dims,f=this.value,l=f.curr(),n=f.prev(),m=f.all(),i=r.rem=r.add,c=r.mod,u=d.length,g={};let v,h,y,p,D,q,x,z,M;if(n.set(l),t.rem.length&&(D=this.remove(e,t,r)),t.add.length&&f.add(t.add),t.mod.length)for(q={},p=t.mod,x=0,z=p.length;x<z;++x)q[p[x]._index]=1;for(x=0;x<u;++x)M=o[x],(!a[x]||e.modified("fields",x)||t.modified(M.fields))&&(y=M.fname,(v=g[y])||(s[y]=h=L23(),g[y]=v=h.insert(M,t.source,0)),a[x]=F21(h,x,d[x]).onAdd(v,l));for(x=0,z=f.data().length;x<z;++x){if(D[x])continue;n[x]!==l[x]?i.push(x):q[x]&&l[x]!==m&&c.push(x);}return f.mask=(1<<u)-1,r;},eval(e,t){const r=t.materialize().fork(),o=this._dims.length;let d=0;return t.rem.length&&(this.remove(e,t,r),d|=(1<<o)-1),e.modified("query")&&!e.modified("fields")&&(d|=this.update(e,t,r)),t.add.length&&(this.insert(e,t,r),d|=(1<<o)-1),t.mod.length&&(this.modify(t,r),d|=(1<<o)-1),this.value.mask=d,r;},insert(e,t,r){const o=t.add,d=this.value,s=this._dims,a=this._indices,f=e.fields,l={},n=r.add,m=d.size()+o.length,i=s.length;let c=d.size(),u,g,v;d.resize(m,i),d.add(o);const h=d.curr(),y=d.prev(),p=d.all();for(u=0;u<i;++u)g=f[u].fname,v=l[g]||(l[g]=a[g].insert(f[u],o,c)),s[u].onAdd(v,h);for(;c<m;++c)y[c]=p,h[c]!==p&&n.push(c);},modify(e,t){const r=t.mod,o=this.value,d=o.curr(),s=o.all(),a=e.mod;let f,l,n;for(f=0,l=a.length;f<l;++f)n=a[f]._index,d[n]!==s&&r.push(n);},remove(e,t,r){const o=this._indices,d=this.value,s=d.curr(),a=d.prev(),f=d.all(),l={},n=r.rem,m=t.rem;let i,c,u,g;for(i=0,c=m.length;i<c;++i)u=m[i]._index,l[u]=1,a[u]=g=s[u],s[u]=f,g!==f&&n.push(u);for(u in o)o[u].remove(c,l);return this.reindex(t,c,l),l;},reindex(e,t,r){const o=this._indices,d=this.value;e.runAfter(()=>{const s=d.remove(t,r);for(const a in o)o[a].reindex(s);});},update(e,t,r){const o=this._dims,d=e.query,s=t.stamp,a=o.length;let f=0,l,n;for(r.filters=0,n=0;n<a;++n)e.modified("query",n)&&(l=n,++f);if(f===1)f=o[l].one,this.incrementOne(o[l],d[l],r.add,r.rem);else for(n=0,f=0;n<a;++n){if(!e.modified("query",n))continue;f|=o[n].one,this.incrementAll(o[n],d[n],s,r.add),r.rem=r.add;}return f;},incrementAll(e,t,r,o){const d=this.value,s=d.seen(),a=d.curr(),f=d.prev(),l=e.index(),n=e.bisect(e.range),m=e.bisect(t),i=m[0],c=m[1],u=n[0],g=n[1],v=e.one;let h,y,p;if(i<u)for(h=i,y=Math.min(u,c);h<y;++h)p=l[h],s[p]!==r&&(f[p]=a[p],s[p]=r,o.push(p)),a[p]^=v;else if(i>u)for(h=u,y=Math.min(i,g);h<y;++h)p=l[h],s[p]!==r&&(f[p]=a[p],s[p]=r,o.push(p)),a[p]^=v;if(c>g)for(h=Math.max(i,g),y=c;h<y;++h)p=l[h],s[p]!==r&&(f[p]=a[p],s[p]=r,o.push(p)),a[p]^=v;else if(c<g)for(h=Math.max(u,c),y=g;h<y;++h)p=l[h],s[p]!==r&&(f[p]=a[p],s[p]=r,o.push(p)),a[p]^=v;e.range=t.slice();},incrementOne(e,t,r,o){const d=this.value,s=d.curr(),a=e.index(),f=e.bisect(e.range),l=e.bisect(t),n=l[0],m=l[1],i=f[0],c=f[1],u=e.one;let g,v,h;if(n<i)for(g=n,v=Math.min(i,m);g<v;++g)h=a[g],s[h]^=u,r.push(h);else if(n>i)for(g=i,v=Math.min(n,c);g<v;++g)h=a[g],s[h]^=u,o.push(h);if(m>c)for(g=Math.max(n,c),v=m;g<v;++g)h=a[g],s[h]^=u,r.push(h);else if(m<c)for(g=Math.max(i,m),v=c;g<v;++g)h=a[g],s[h]^=u,o.push(h);e.range=t.slice();}});function w15(e){dt2.call(this,null,e);}w15.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},Pn(w15,dt2,{transform(e,t){const r=~(e.ignore||0),o=e.filter,d=o.mask;if((d&r)===0)return t.StopPropagation;const s=t.fork(t.ALL),a=o.data(),f=o.curr(),l=o.prev(),n=m=>f[m]&r?null:a[m];return s.filter(s.MOD,n),d&d-1?(s.filter(s.ADD,m=>{const i=f[m]&r,c=!i&&i^l[m]&r;return c?a[m]:null;}),s.filter(s.REM,m=>{const i=f[m]&r,c=i&&!(i^(i^l[m]&r));return c?a[m]:null;})):(s.filter(s.ADD,n),s.filter(s.REM,m=>(f[m]&r)===d?a[m]:null)),s.filter(s.SOURCE,m=>n(m._index));}});const mod11=function(){return{crossfilter:j20,resolvefilter:w15,default:null};}();const au="RawCode",su="Literal",Au="Property",ou="Identifier",Fu="ArrayExpression",Cu="BinaryExpression",cu="CallExpression",lu="ConditionalExpression",Du="LogicalExpression",Bu="MemberExpression",Eu="ObjectExpression",fu="UnaryExpression";function m7(u){this.type=u;}m7.prototype.visit=function(u){let e,t,n;if(u(this))return 1;for(e=Tu(this),t=0,n=e.length;t<n;++t)if(e[t].visit(u))return 1;};function Tu(u){switch(u.type){case Fu:return u.elements;case Cu:case Du:return[u.left,u.right];case cu:return[u.callee].concat(u.arguments);case lu:return[u.test,u.consequent,u.alternate];case Bu:return[u.object,u.property];case Eu:return u.properties;case Au:return[u.key,u.value];case fu:return[u.argument];case ou:case su:case au:default:return[];}}var w16,i2,r1,p9,F22,_20=1,T15=2,L24=3,S19=4,K22=5,U20=6,g10=7,N18=8,Nu=9;w16={},w16[_20]="Boolean",w16[T15]="<end>",w16[L24]="Identifier",w16[S19]="Keyword",w16[K22]="Null",w16[U20]="Numeric",w16[g10]="Punctuator",w16[N18]="String",w16[Nu]="RegularExpression";var Ru="ArrayExpression",Pu="BinaryExpression",ju="CallExpression",Gu="ConditionalExpression",pu="Identifier",qu="Literal",Hu="LogicalExpression",_u="MemberExpression",Ku="ObjectExpression",Qu="Property",zu="UnaryExpression",D14="Unexpected token %0",Vu="Unexpected number",Xu="Unexpected string",$u="Unexpected identifier",Wu="Unexpected reserved word",Yu="Unexpected end of input",W19="Invalid regular expression",Y24="Invalid regular expression: missing /",xu="Octal literals are not allowed in strict mode.",Ju="Duplicate data property in object literal not allowed in strict mode",f9="ILLEGAL",R18="Disabled.",Zu=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),u0=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Q19(u,e){if(!u)throw new Error("ASSERT: "+e);}function v15(u){return u>=48&&u<=57;}function J22(u){return"0123456789abcdefABCDEF".indexOf(u)>=0;}function P21(u){return"01234567".indexOf(u)>=0;}function e0(u){return u===32||u===9||u===11||u===12||u===160||u>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(u)>=0;}function j21(u){return u===10||u===13||u===8232||u===8233;}function G20(u){return u===36||u===95||u>=65&&u<=90||u>=97&&u<=122||u===92||u>=128&&Zu.test(String.fromCharCode(u));}function z16(u){return u===36||u===95||u>=65&&u<=90||u>=97&&u<=122||u>=48&&u<=57||u===92||u>=128&&u0.test(String.fromCharCode(u));}const t0={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function du(){for(;r1<p9;){const u=i2.charCodeAt(r1);if(e0(u)||j21(u))++r1;else break;}}function Z21(u){var e,t,n,a=0;for(t=u==="u"?4:2,e=0;e<t;++e)r1<p9&&J22(i2[r1])?(n=i2[r1++],a=a*16+"0123456789abcdef".indexOf(n.toLowerCase())):o5({},D14,f9);return String.fromCharCode(a);}function r0(){var u,e,t,n;for(u=i2[r1],e=0,u==="}"&&o5({},D14,f9);r1<p9&&!(u=i2[r1++],!J22(u));)e=e*16+"0123456789abcdef".indexOf(u.toLowerCase());return(e>1114111||u!=="}")&&o5({},D14,f9),e<=65535?String.fromCharCode(e):(t=(e-65536>>10)+55296,n=(e-65536&1023)+56320,String.fromCharCode(t,n));}function hu(){var u,e;for(u=i2.charCodeAt(r1++),e=String.fromCharCode(u),u===92&&(i2.charCodeAt(r1)!==117&&o5({},D14,f9),++r1,u=Z21("u"),(!u||u==="\\"||!G20(u.charCodeAt(0)))&&o5({},D14,f9),e=u);r1<p9&&!(u=i2.charCodeAt(r1),!z16(u));)++r1,e+=String.fromCharCode(u),u===92&&(e=e.substr(0,e.length-1),i2.charCodeAt(r1)!==117&&o5({},D14,f9),++r1,u=Z21("u"),(!u||u==="\\"||!z16(u.charCodeAt(0)))&&o5({},D14,f9),e+=u);return e;}function n0(){var u,e;for(u=r1++;r1<p9;){if(e=i2.charCodeAt(r1),e===92)return r1=u,hu();if(z16(e))++r1;else break;}return i2.slice(u,r1);}function i0(){var u,e,t;return u=r1,e=i2.charCodeAt(r1)===92?hu():n0(),e.length===1?t=L24:t0.hasOwnProperty(e)?t=S19:e==="null"?t=K22:e==="true"||e==="false"?t=_20:t=L24,{type:t,value:e,start:u,end:r1};}function uu(){var u=r1,e=i2.charCodeAt(r1),t,n=i2[r1],a,A,C;switch(e){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++r1,{type:g10,value:String.fromCharCode(e),start:u,end:r1};default:if(t=i2.charCodeAt(r1+1),t===61)switch(e){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return r1+=2,{type:g10,value:String.fromCharCode(e)+String.fromCharCode(t),start:u,end:r1};case 33:case 61:return r1+=2,i2.charCodeAt(r1)===61&&++r1,{type:g10,value:i2.slice(u,r1),start:u,end:r1};}}if(C=i2.substr(r1,4),C===">>>=")return r1+=4,{type:g10,value:C,start:u,end:r1};if(A=C.substr(0,3),A===">>>"||A==="<<="||A===">>=")return r1+=3,{type:g10,value:A,start:u,end:r1};if(a=A.substr(0,2),n===a[1]&&"+-<>&|".indexOf(n)>=0||a==="=>")return r1+=2,{type:g10,value:a,start:u,end:r1};if(a==="//"&&o5({},D14,f9),"<>=!+-*%&|^/".indexOf(n)>=0)return++r1,{type:g10,value:n,start:u,end:r1};o5({},D14,f9);}function a0(u){let e="";for(;r1<p9&&J22(i2[r1]);)e+=i2[r1++];return e.length===0&&o5({},D14,f9),G20(i2.charCodeAt(r1))&&o5({},D14,f9),{type:U20,value:parseInt("0x"+e,16),start:u,end:r1};}function s0(u){let e="0"+i2[r1++];for(;r1<p9&&P21(i2[r1]);)e+=i2[r1++];return(G20(i2.charCodeAt(r1))||v15(i2.charCodeAt(r1)))&&o5({},D14,f9),{type:U20,value:parseInt(e,8),octal:!0,start:u,end:r1};}function gu(){var u,e,t;if(t=i2[r1],Q19(v15(t.charCodeAt(0))||t===".","Numeric literal must start with a decimal digit or a decimal point"),e=r1,u="",t!=="."){if(u=i2[r1++],t=i2[r1],u==="0"){if(t==="x"||t==="X")return++r1,a0(e);if(P21(t))return s0(e);t&&v15(t.charCodeAt(0))&&o5({},D14,f9);}for(;v15(i2.charCodeAt(r1));)u+=i2[r1++];t=i2[r1];}if(t==="."){for(u+=i2[r1++];v15(i2.charCodeAt(r1));)u+=i2[r1++];t=i2[r1];}if(t==="e"||t==="E")if(u+=i2[r1++],t=i2[r1],(t==="+"||t==="-")&&(u+=i2[r1++]),v15(i2.charCodeAt(r1)))for(;v15(i2.charCodeAt(r1));)u+=i2[r1++];else o5({},D14,f9);return G20(i2.charCodeAt(r1))&&o5({},D14,f9),{type:U20,value:parseFloat(u),start:e,end:r1};}function A01(){var u="",e,t,n,a,A=!1;for(e=i2[r1],Q19(e==="'"||e==='"',"String literal must starts with a quote"),t=r1,++r1;r1<p9;)if(n=i2[r1++],n===e){e="";break;}else if(n==="\\")if(n=i2[r1++],!n||!j21(n.charCodeAt(0)))switch(n){case"u":case"x":i2[r1]==="{"?(++r1,u+=r0()):u+=Z21(n);break;case"n":u+=`
`;break;case"r":u+="\r";break;case"t":u+="	";break;case"b":u+="\b";break;case"f":u+="\f";break;case"v":u+="\v";break;default:P21(n)?(a="01234567".indexOf(n),a!==0&&(A=!0),r1<p9&&P21(i2[r1])&&(A=!0,a=a*8+"01234567".indexOf(i2[r1++]),"0123".indexOf(n)>=0&&r1<p9&&P21(i2[r1])&&(a=a*8+"01234567".indexOf(i2[r1++]))),u+=String.fromCharCode(a)):u+=n;break;}else n==="\r"&&i2[r1]===`
`&&++r1;else{if(j21(n.charCodeAt(0)))break;u+=n;}return e!==""&&o5({},D14,f9),{type:N18,value:u,octal:A,start:t,end:r1};}function o0(u,e){let t=u;e.indexOf("u")>=0&&(t=t.replace(/\\u\{([0-9a-fA-F]+)\}/g,(n,a)=>{if(parseInt(a,16)<=1114111)return"x";o5({},W19);}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(t);}catch(n){o5({},W19);}try{return new RegExp(u,e);}catch(n){return null;}}function F01(){var u,e,t,n,a;for(u=i2[r1],Q19(u==="/","Regular expression literal must start with a slash"),e=i2[r1++],t=!1,n=!1;r1<p9;)if(u=i2[r1++],e+=u,u==="\\")u=i2[r1++],j21(u.charCodeAt(0))&&o5({},Y24),e+=u;else if(j21(u.charCodeAt(0)))o5({},Y24);else if(t)u==="]"&&(t=!1);else if(u==="/"){n=!0;break;}else u==="["&&(t=!0);return n||o5({},Y24),a=e.substr(1,e.length-2),{value:a,literal:e};}function C0(){var u,e,t;for(e="",t="";r1<p9&&!(u=i2[r1],!z16(u.charCodeAt(0)));)++r1,u==="\\"&&r1<p9?o5({},D14,f9):(t+=u,e+=u);return t.search(/[^gimuy]/g)>=0&&o5({},W19,t),{value:t,literal:e};}function c0(){var u,e,t,n;return F22=null,du(),u=r1,e=F01(),t=C0(),n=o0(e.value,t.value),{literal:e.literal+t.literal,value:n,regex:{pattern:e.value,flags:t.value},start:u,end:r1};}function l0(u){return u.type===L24||u.type===S19||u.type===_20||u.type===K22;}function yu(){if(du(),r1>=p9)return{type:T15,start:r1,end:r1};const u=i2.charCodeAt(r1);return G20(u)?i0():u===40||u===41||u===59?uu():u===39||u===34?A01():u===46?v15(i2.charCodeAt(r1+1))?gu():uu():v15(u)?gu():uu();}function y15(){const u=F22;return r1=u.end,F22=yu(),r1=u.end,u;}function mu(){const u=r1;F22=yu(),r1=u;}function D0(u){const e=new m7(Ru);return e.elements=u,e;}function bu(u,e,t){const n=new m7(u==="||"||u==="&&"?Hu:Pu);return n.operator=u,n.left=e,n.right=t,n;}function B0(u,e){const t=new m7(ju);return t.callee=u,t.arguments=e,t;}function E0(u,e,t){const n=new m7(Gu);return n.test=u,n.consequent=e,n.alternate=t,n;}function eu(u){const e=new m7(pu);return e.name=u,e;}function q24(u){const e=new m7(qu);return e.value=u.value,e.raw=i2.slice(u.start,u.end),u.regex&&(e.raw==="//"&&(e.raw="/(?:)/"),e.regex=u.regex),e;}function wu(u,e,t){const n=new m7(_u);return n.computed=u==="[",n.object=e,n.property=t,n.computed||(t.member=!0),n;}function f0(u){const e=new m7(Ku);return e.properties=u,e;}function vu(u,e,t){const n=new m7(Qu);return n.key=e,n.value=t,n.kind=u,n;}function p01(u,e){const t=new m7(zu);return t.operator=u,t.argument=e,t.prefix=!0,t;}function o5(u,e){var t,n=Array.prototype.slice.call(arguments,2),a=e.replace(/%(\d)/g,(A,C)=>(Q19(C<n.length,"Message reference must be in range"),n[C]));throw t=new Error(a),t.index=r1,t.description=a,t;}function V18(u){u.type===T15&&o5(u,Yu),u.type===U20&&o5(u,Vu),u.type===N18&&o5(u,Xu),u.type===L24&&o5(u,$u),u.type===S19&&o5(u,Wu),o5(u,D14,u.value);}function x12(u){const e=y15();(e.type!==g10||e.value!==u)&&V18(e);}function c4(u){return F22.type===g10&&F22.value===u;}function tu(u){return F22.type===S19&&F22.value===u;}function x0(){const u=[];for(r1=F22.start,x12("[");!c4("]");)c4(",")?(y15(),u.push(null)):(u.push(I18()),c4("]")||x12(","));return y15(),D0(u);}function Mu(){r1=F22.start;const u=y15();return u.type===N18||u.type===U20?(u.octal&&o5(u,xu),q24(u)):eu(u.value);}function d0(){var u,e,t,n;if(r1=F22.start,u=F22,u.type===L24)return t=Mu(),x12(":"),n=I18(),vu("init",t,n);if(u.type===T15||u.type===g10)V18(u);else return e=Mu(),x12(":"),n=I18(),vu("init",e,n);}function h0(){var u=[],e,t,n,a={},A=String;for(r1=F22.start,x12("{");!c4("}");)e=d0(),e.key.type===pu?t=e.key.name:t=A(e.key.value),n="$"+t,Object.prototype.hasOwnProperty.call(a,n)?o5({},Ju):a[n]=!0,u.push(e),c4("}")||x12(",");return x12("}"),f0(u);}function g0(){x12("(");const u=ru();return x12(")"),u;}const y0={if:1};function m0(){var u,e,t;if(c4("("))return g0();if(c4("["))return x0();if(c4("{"))return h0();if(u=F22.type,r1=F22.start,u===L24||y0[F22.value])t=eu(y15().value);else if(u===N18||u===U20)F22.octal&&o5(F22,xu),t=q24(y15());else{if(u===S19)throw new Error(R18);u===_20?(e=y15(),e.value=e.value==="true",t=q24(e)):u===K22?(e=y15(),e.value=null,t=q24(e)):c4("/")||c4("/=")?(t=q24(c0()),mu()):V18(y15());}return t;}function b0(){const u=[];if(x12("("),!c4(")"))for(;r1<p9&&!(u.push(I18()),c4(")"));)x12(",");return x12(")"),u;}function w0(){r1=F22.start;const u=y15();return l0(u)||V18(u),eu(u.value);}function v0(){return x12("."),w0();}function M0(){x12("[");const u=ru();return x12("]"),u;}function k0(){var u,e,t;for(u=m0();;)if(c4("."))t=v0(),u=wu(".",u,t);else if(c4("("))e=b0(),u=B0(u,e);else if(c4("["))t=M0(),u=wu("[",u,t);else break;return u;}function ku(){const u=k0();if(F22.type===g10&&(c4("++")||c4("--")))throw new Error(R18);return u;}function X23(){var u,e;if(F22.type!==g10&&F22.type!==S19)e=ku();else{if(c4("++")||c4("--"))throw new Error(R18);if(c4("+")||c4("-")||c4("~")||c4("!"))u=y15(),e=X23(),e=p01(u.value,e);else{if(tu("delete")||tu("void")||tu("typeof"))throw new Error(R18);e=ku();}}return e;}function Su(u){let e=0;if(u.type!==g10&&u.type!==S19)return 0;switch(u.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11;break;}return e;}function S0(){var u,e,t,n,a,A,C,B,d,h;if(u=F22,d=X23(),n=F22,a=Su(n),a===0)return d;for(n.prec=a,y15(),e=[u,F22],C=X23(),A=[d,n,C];(a=Su(F22))>0;){for(;A.length>2&&a<=A[A.length-2].prec;)C=A.pop(),B=A.pop().value,d=A.pop(),e.pop(),t=bu(B,d,C),A.push(t);n=y15(),n.prec=a,A.push(n),e.push(F22),t=X23(),A.push(t);}for(h=A.length-1,t=A[h],e.pop();h>1;)e.pop(),t=bu(A[h-1].value,A[h-2],t),h-=2;return t;}function I18(){var u,e,t;return u=S0(),c4("?")&&(y15(),e=I18(),x12(":"),t=I18(),u=E0(u,e,t)),u;}function ru(){const u=I18();if(c4(","))throw new Error(R18);return u;}function L0(u){i2=u,r1=0,p9=i2.length,F22=null,mu();const e=ru();if(F22.type!==T15)throw new Error("Unexpect token after expression.");return e;}var Lu={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function Uu(u){function e(C,B,d,h){let b=u(B[0]);return d&&(b=d+"("+b+")",d.lastIndexOf("new ",0)===0&&(b="("+b+")")),b+"."+C+(h<0?"":h===0?"()":"("+B.slice(1).map(u).join(",")+")");}function t(C,B,d){return h=>e(C,h,B,d);}const n="new Date",a="String",A="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(C){C.length<3&&b("Missing arguments to clamp function."),C.length>3&&b("Too many arguments to clamp function.");const B=C.map(u);return"Math.max("+B[1]+", Math.min("+B[2]+","+B[0]+"))";},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",a,0),lower:t("toLowerCase",a,0),substring:t("substring",a),split:t("split",a),trim:t("trim",a,0),regexp:A,test:t("test",A),if:function(C){C.length<3&&b("Missing arguments to if function."),C.length>3&&b("Too many arguments to if function.");const B=C.map(u);return"("+B[0]+"?"+B[1]+":"+B[2]+")";}};}function U0(u){const e=u&&u.length-1;return e&&(u[0]==='"'&&u[e]==='"'||u[0]==="'"&&u[e]==="'")?u.slice(1,-1):u;}function I01(u){u=u||{};const e=u.allowed?Xn(u.allowed):{},t=u.forbidden?Xn(u.forbidden):{},n=u.constants||Lu,a=(u.functions||Uu)(E),A=u.globalvar,C=u.fieldvar,B=O1(A)?A:s=>`${A}["${s}"]`;let d={},h={},b1=0;function E(s){if(X1(s))return s;const l=Iu[s.type];return l==null&&b("Unsupported type: "+s.type),l(s);}const Iu={Literal:s=>s.raw,Identifier:s=>{const l=s.name;return b1>0?l:g(t,l)?b("Illegal identifier: "+l):g(n,l)?n[l]:g(e,l)?l:(d[l]=1,B(l));},MemberExpression:s=>{const l=!s.computed,O=E(s.object);l&&(b1+=1);const M=E(s.property);return O===C&&(h[U0(M)]=1),l&&(b1-=1),O+(l?"."+M:"["+M+"]");},CallExpression:s=>{s.callee.type!=="Identifier"&&b("Illegal callee type: "+s.callee.type);const l=s.callee.name,O=s.arguments,M=g(a,l)&&a[l];return M||b("Unrecognized function: "+l),O1(M)?M(O):M+"("+O.map(E).join(",")+")";},ArrayExpression:s=>"["+s.elements.map(E).join(",")+"]",BinaryExpression:s=>"("+E(s.left)+" "+s.operator+" "+E(s.right)+")",UnaryExpression:s=>"("+s.operator+E(s.argument)+")",ConditionalExpression:s=>"("+E(s.test)+"?"+E(s.consequent)+":"+E(s.alternate)+")",LogicalExpression:s=>"("+E(s.left)+s.operator+E(s.right)+")",ObjectExpression:s=>"{"+s.properties.map(E).join(",")+"}",Property:s=>{b1+=1;const l=E(s.key);return b1-=1,l+":"+E(s.value);}};function $(s){const l={code:E(s),globals:Object.keys(d),fields:Object.keys(h)};return d={},h={},l;}return $.functions=a,$.constants=n,$;}const U21=Symbol("vega_selection_getter");function S20(t){return(!t.getter||!t.getter[U21])&&(t.getter=z1(t.field),t.getter[U21]=!0),t.getter;}const j22="intersect",V19="union",K23="vlMulti",Z22="vlPoint",C23="or",b16="and",g11="_vgsid_",R19=z1(g11),ee13="E",te13="R",ie10="R-E",ne13="R-LE",re14="R-RE",T16="index:unit";function F23(t,i){for(var n=i.fields,e=i.values,u=n.length,r=0,s,f;r<u;++r)if(f=n[r],s=S20(f)(t),K1(s)&&(s=L2(s)),K1(e[r])&&(e[r]=L2(e[r])),w1(e[r])&&K1(e[r][0])&&(e[r]=e[r].map(L2)),f.type===ee13){if(w1(e[r])?e[r].indexOf(s)<0:s!==e[r])return!1;}else if(f.type===te13){if(!Rn(s,e[r]))return!1;}else if(f.type===re14){if(!Rn(s,e[r],!0,!1))return!1;}else if(f.type===ie10){if(!Rn(s,e[r],!1,!1))return!1;}else if(f.type===ne13&&!Rn(s,e[r],!1,!0))return!1;return!0;}function se11(t,i,n){for(var e=this.context.data[t],u=e?e.values.value:[],r=e?e[T16]&&e[T16].value:void 0,s=n===j22,f=u.length,d=0,c,m,p,l,o;d<f;++d)if(c=u[d],r&&s){if(m=m||{},p=m[l=c.unit]||0,p===-1)continue;if(o=F23(i,c),m[l]=o?-1:++p,o&&r.size===1)return!0;if(!o&&p===r.get(l).count)return!1;}else if(o=F23(i,c),s^o)return o;return f&&s;}const w17=G4(R19),fe9=w17.left,ue11=w17.right;function oe12(t,i,n){const e=this.context.data[t],u=e?e.values.value:[],r=e?e[T16]&&e[T16].value:void 0,s=n===j22,f=R19(i),d=fe9(u,f);if(d===u.length)return!1;if(R19(u[d])!==f)return!1;if(r&&s){if(r.size===1)return!0;if(ue11(u,f)-d<r.size)return!1;}return!0;}function le11(t,i){return t.map(n=>J1(i.fields?{values:i.fields.map(e=>S20(e)(n.datum))}:{[g11]:R19(n.datum)},i));}function de7(t,i,n,e){for(var u=this.context.data[t],r=u?u.values.value:[],s={},f={},d={},c,m,p1,l,o,N,E,v,A,Y,M=r.length,I=0,x,k;I<M;++I)if(c=r[I],l=c.unit,m=c.fields,p1=c.values,m&&p1){for(x=0,k=m.length;x<k;++x)o=m[x],E=s[o.field]||(s[o.field]={}),v=E[l]||(E[l]=[]),d[o.field]=A=o.type.charAt(0),Y=$14[`${A}_union`],E[l]=Y(v,p(p1[x]));n&&(v=f[l]||(f[l]=[]),v.push(p(p1).reduce((h,a,y)=>(h[m[y].field]=a,h),{})));}else o=g11,N=R19(c),E=s[o]||(s[o]={}),v=E[l]||(E[l]=[]),v.push(N),n&&(v=f[l]||(f[l]=[]),v.push({[g11]:N}));if(i=i||V19,s[g11]?s[g11]=$14[`${g11}_${i}`](...Object.values(s[g11])):Object.keys(s).forEach(h=>{s[h]=Object.keys(s[h]).map(a=>s[h][a]).reduce((a,y)=>a===void 0?y:$14[`${d[h]}_${i}`](a,y));}),r=Object.keys(f),n&&r.length){const h=e?Z22:K23;s[h]=i===V19?{[C23]:r.reduce((a,y)=>(a.push(...f[y]),a),[])}:{[b16]:r.map(a=>({[C23]:f[a]}))};}return s;}var $14={[`${g11}_union`]:Ne,[`${g11}_intersect`]:Ae,E_union:function(t,i){if(!t.length)return i;for(var n=0,e=i.length;n<e;++n)t.indexOf(i[n])<0&&t.push(i[n]);return t;},E_intersect:function(t,i){return t.length?t.filter(n=>i.indexOf(n)>=0):i;},R_union:function(t,i){var n=L2(i[0]),e=L2(i[1]);return n>e&&(n=i[1],e=i[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<e&&(t[1]=e),t):[n,e];},R_intersect:function(t,i){var n=L2(i[0]),e=L2(i[1]);return n>e&&(n=i[1],e=i[0]),t.length?e<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>e&&(t[1]=e),t):[n,e];}};const ae11=":",ce6="@";function me8(t,i,n,e){i[0].type!==su&&b("First argument to selection functions must be a string literal.");const u=i[0].value,r=i.length>=2&&a(i).value,s="unit",f=ce6+s,d=ae11+u;r===j22&&!g(e,f)&&(e[f]=n.getData(u).indataRef(n,s)),g(e,d)||(e[d]=n.getData(u).tuplesRef());}function I19(t){const e=this.context.data[t];return e?e.values.value:[];}function K24(t,e,n){const r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i&&i.count;}function J23(t,e){const n=this.context.dataflow,r=this.context.data[t],i=r.input;return n.pulse(i,n.changeset().remove(_1).insert(e)),1;}function _21(t,e,n){if(t){const r=this.context.dataflow,i=t.mark.source;r.pulse(i,r.changeset().encode(t,e));}return n!==void 0?n:t;}const x13=t=>function(e,n){const r=this.context.dataflow.locale();return r[t](n)(e);},tt8=x13("format"),L25=x13("timeFormat"),et10=x13("utcFormat"),nt8=x13("timeParse"),rt10=x13("utcParse"),P22=new Date(2e3,0,1);function A16(t,e,n){return!Number.isInteger(t)||!Number.isInteger(e)?"":(P22.setYear(2e3),P22.setMonth(t),P22.setDate(e),L25.call(this,P22,n));}function it11(t){return A16.call(this,t,1,"%B");}function ot10(t){return A16.call(this,t,1,"%b");}function at12(t){return A16.call(this,0,2+t,"%A");}function st7(t){return A16.call(this,0,2+t,"%a");}const ct11=":",ut8="@",E22="%",V20="$";function F24(t,e,n,r){e[0].type!==su&&b("First argument to data functions must be a string literal.");const i=e[0].value,o=ct11+i;if(!g(o,r))try{r[o]=n.getData(i).tuplesRef();}catch(a){}}function ft10(t,e,n,r){e[0].type!==su&&b("First argument to indata must be a string literal."),e[1].type!==su&&b("Second argument to indata must be a string literal.");const i=e[0].value,o=e[1].value,a=ut8+o;g(a,r)||(r[a]=n.getData(i).indataRef(n,o));}function f10(t,e,n,r){if(e[0].type===su)lt8(n,r,e[0].value);else for(t in n.scales)lt8(n,r,t);}function lt8(t,e,n){const r=E22+n;if(!g(e,r))try{e[r]=t.scaleRef(n);}catch(i){}}function m8(t,e){if(O1(t))return t;if(X1(t)){const n=e.scales[t];return n&&mf(n.value)?n.value:void 0;}return;}function Sn8(t,e,n){e.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=f10,n._range=f10,n._scale=f10;const r=i=>"_["+(i.type===su?Z1(E22+i.value):Z1(E22)+"+"+t(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${t(i[1])})`};}function q25(t,e){return function(n,r,i){if(n){const o=m8(n,(i||this).context);return o&&o.path[t](r);}else return e(r);};}const dt8=q25("area",Ui1),mt7=q25("bounds",Vi1),pt8=q25("centroid",re10);function gt7(t,e){const n=m8(t,(e||this).context);return n&&n.scale();}function ht7(t){const e=this.context.group;let n=!1;if(e)for(;t;){if(t===e){n=!0;break;}t=t.mark.group;}return n;}function C24(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)));}catch(r){t.warn(r);}return n[n.length-1];}function vt6(){return C24(this.context.dataflow,"warn",arguments);}function xt8(){return C24(this.context.dataflow,"info",arguments);}function wt6(){return C24(this.context.dataflow,"debug",arguments);}function B19(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4);}function $15(t){const e=Y9(t),n=B19(e.r),r=B19(e.g),i=B19(e.b);return .2126*n+.7152*r+.0722*i;}function yt7(t,e){const n=$15(t),r=$15(e),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05);}function bt9(){const t=[].slice.call(arguments);return t.unshift({}),J1(...t);}function St7(t,e){return t===e||t!==t&&e!==e?!0:w1(t)?w1(e)&&t.length===e.length?Nn8(t,e):!1:M1(t)&&M1(e)?Nt7(t,e):!1;}function Nn8(t,e){for(let n=0,r=t.length;n<r;++n)if(!St7(t[n],e[n]))return!1;return!0;}function Nt7(t,e){for(const n in t)if(!St7(t[n],e[n]))return!1;return!0;}function Pt7(t){return e=>Nt7(t,e);}function At9(t,e,n,r,i,o){const a=this.context.dataflow,u=this.context.data[t],c=u.input,l=a.stamp();let d=u.changes,g,M;if(a._trigger===!1||!(c.value.length||e||r))return 0;if((!d||d.stamp<l)&&(u.changes=d=a.changeset(),d.stamp=l,a.runAfter(()=>{u.modified=!0,a.pulse(c,d).run();},!0,1)),n&&(g=n===!0?_1:w1(n)||Et(n)?n:Pt7(n),d.remove(g)),e&&d.insert(e),r&&(g=Pt7(r),c.value.some(g)?d.remove(g):d.insert(r)),i)for(M in o)d.modify(i,M,o[M]);return 1;}function Et6(t){const e=t.touches,n=e[0].clientX-e[1].clientX,r=e[0].clientY-e[1].clientY;return Math.hypot(n,r);}function Ft5(t){const e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX);}const $t6={};function jt7(t,e){const n=$t6[e]||($t6[e]=z1(e));return w1(t)?t.map(n):n(t);}function O20(t){return w1(t)||ArrayBuffer.isView(t)?t:null;}function X24(t){return O20(t)||(X1(t)?t:null);}function Mt8(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return O20(t).join(...n);}function zt7(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return X24(t).indexOf(...n);}function Dt6(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return X24(t).lastIndexOf(...n);}function Rt8(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return X24(t).slice(...n);}function Tt9(t,e,n){return O1(n)&&b("Function argument passed to replace."),String(t).replace(e,n);}function It5(t){return O20(t).slice().reverse();}function Lt7(t,e,n){return W11(t||0,e||0,n||0);}function Vt6(t,e){const n=m8(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0;}function qt7(t,e){const n=m8(t,(e||this).context);return n?n.copy():void 0;}function Ct6(t,e){const n=m8(t,(e||this).context);return n?n.domain():[];}function Bt6(t,e,n){const r=m8(t,(n||this).context);return r?w1(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0;}function Ot6(t,e){const n=m8(t,(e||this).context);return n&&n.range?n.range():[];}function Xt7(t,e,n){const r=m8(t,(n||this).context);return r?r(e):void 0;}function Yt7(t,e,n,r,i){t=m8(t,(i||this).context);const o=Cr1(e,n);let a1=t.domain(),u=a1[0],c=a(a1),l=A1;return c-u?l=Sf(t,u,c):t=(t.interpolator?i1("sequential")().interpolator(t.interpolator()):i1("linear")().interpolate(t.interpolate()).range(t.range())).domain([u=0,c=1]),t.ticks&&(a1=t.ticks(+r||15),u!==a1[0]&&a1.unshift(u),c!==a(a1)&&a1.push(c)),a1.forEach(d=>o.stop(l(d),t(d))),o;}function Gt5(t,e,n){const r=m8(t,(n||this).context);return function(i){return r?r.path.context(i)(e):"";};}function Qt6(t){let e=null;return function(n){return n?Dt2(n,e=e||yt1(t)):t;};}const Ut6=t=>t.data;function kt9(t,e){const n=I19.call(e,t);return n.root&&n.root.lookup||{};}function Ht5(t,e,n){const r=kt9(t,this),i=r[e],o=r[n];return i&&o?i.path(o).map(Ut6):void 0;}function Wt6(t,e){const n=kt9(t,this)[e];return n?n.ancestors().map(Ut6):void 0;}const Zt8=()=>typeof window!="undefined"&&window||null;function Kt7(){const t=Zt8();return t?t.screen:{};}function Jt6(){const t=Zt8();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0];}function _t5(){const t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0];}function te14(t,e,n){if(!t)return[];const[r,i]=t,o=new E13().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return na(a,o,Pn7(e));}function Pn7(t){let e=null;if(t){const n=p(t.marktype),r=p(t.markname);e=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o));}return e;}function An9(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;t=p(t);const i=t[t.length-1];return i===void 0||Math.hypot(i[0]-e,i[1]-n)>r?[...t,[e,n]]:t;}function En7(t){return p(t).reduce((e,n,r)=>{let[i,o]=n;return e+=r==0?`M ${i},${o} `:r===t.length-1?" Z":`L ${i},${o} `;},"");}function Fn6(t,e,n){const{x:r,y:i,mark:o}=n,a=new E13().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[c,l]of e)c<a.x1&&(a.x1=c),c>a.x2&&(a.x2=c),l<a.y1&&(a.y1=l),l>a.y2&&(a.y2=l);a.translate(r,i);const u=te14([[a.x1,a.y1],[a.x2,a.y2]],t,o);return u.filter(c=>$n7(c.x,c.y,e));}function $n7(t,e,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[a,u]=n[o],[c,l]=n[i];l>e!=u>e&&t<(a-c)*(e-l)/(u-l)+c&&r++;}return r&1;}const w18={random(){return N7();},cumulativeNormal:z10,cumulativeLogNormal:$4,cumulativeUniform:ne5,densityNormal:H5,densityLogNormal:V5,densityUniform:ee4,quantileNormal:P6,quantileLogNormal:_9,quantileUniform:te4,sampleNormal:j10,sampleLogNormal:O7,sampleUniform:x7,isArray:w1,isBoolean:In,isDate:K1,isDefined(t){return t!==void 0;},isNumber:V,isObject:M1,isRegExp:$n,isString:X1,isTuple:Et,isValid(t){return t!=null&&t===t;},toBoolean:xn,toDate(t){return Kn(t);},toNumber:L2,toString:Vn,indexof:zt7,join:Mt8,lastindexof:Dt6,replace:Tt9,reverse:It5,slice:Rt8,flush:Ln,lerp:Fn,merge:bt9,pad:Gn,peek:a,pluck:jt7,span:Wn,inrange:Rn,truncate:Zn,rgb:Y9,lab:ae3,hcl:se3,hsl:Q7,luminance:$15,contrast:yt7,sequence:ie,format:tt8,utcFormat:et10,utcParse:rt10,utcOffset:Jt,utcSequence:ee1,timeFormat:L25,timeParse:nt8,timeOffset:Zt,timeSequence:te1,timeUnitSpecifier:xt,monthFormat:it11,monthAbbrevFormat:ot10,dayFormat:at12,dayAbbrevFormat:st7,quarter:pn,utcquarter:mn,week:Rt,utcweek:jt,dayofyear:Wt,utcdayofyear:At,warn:vt6,info:xt8,debug:wt6,extent(t){return Nn(t);},inScope:ht7,intersect:te14,clampRange:bn,pinchDistance:Et6,pinchAngle:Ft5,screen:Kt7,containerSize:_t5,windowSize:Jt6,bandspace:Lt7,setdata:J23,pathShape:Qt6,panLinear:un,panLog:cn,panPow:sn,panSymlog:ln,zoomLinear:fn,zoomLog:gn,zoomPow:an,zoomSymlog:hn,encode:_21,modify:At9,lassoAppend:An9,lassoPath:En7,intersectLasso:Fn6},jn6=["view","item","group","xy","x","y"],Mn8="event.vega.",ee14="this.",Y25={},G21={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>`_[${Z1(V20+t)}]`,functions:zn5,constants:Lu,visitors:Y25},j23=I01(G21);function zn5(t){const e=Uu(t);jn6.forEach(n=>e[n]=Mn8+n);for(const n in w18)e[n]=ee14+n;return J1(e,Sn8(t,w18,Y25)),e;}function s7(t,e,n){return arguments.length===1?w18[t]:(w18[t]=e,n&&(Y25[t]=n),j23&&(j23.functions[t]=ee14+t),this);}s7("bandwidth",Vt6,f10),s7("copy",qt7,f10),s7("domain",Ct6,f10),s7("range",Ot6,f10),s7("invert",Bt6,f10),s7("scale",Xt7,f10),s7("gradient",Yt7,f10),s7("geoArea",dt8,f10),s7("geoBounds",mt7,f10),s7("geoCentroid",pt8,f10),s7("geoShape",Gt5,f10),s7("geoScale",gt7,f10),s7("indata",K24,ft10),s7("data",I19,F24),s7("treePath",Ht5,F24),s7("treeAncestors",Wt6,F24),s7("vlSelectionTest",se11,me8),s7("vlSelectionIdTest",oe12,me8),s7("vlSelectionResolve",de7,me8),s7("vlSelectionTuples",le11);function Dn5(t,e){const n={};let r;try{t=X1(t)?t:Z1(t)+"",r=L0(t);}catch(o){b("Expression parse error: "+t);}r.visit(o=>{if(o.type!==cu)return;const a=o.callee.name,u=G21.visitors[a];u&&u(a,o.arguments,e,n);});const i=j23(r);return i.globals.forEach(o=>{const a=V20+o;!g(n,a)&&e.getSignal(o)&&(n[a]=e.signalRef(o));}),{$expr:J1({code:i.code},e.options.ast?{ast:r}:null),$fields:i.fields,$params:n};}function F25(t){const e=this,r=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),r.forEach(n=>e.parseOperator(n)),r.forEach(n=>e.parseOperatorParameters(n)),(t.streams||[]).forEach(n=>e.parseStream(n)),(t.updates||[]).forEach(n=>e.parseUpdate(n)),e.resolve();}const I20=Xn(["rule"]),v16=Xn(["group","image","rect"]);function q26(t,e){let r="";return I20[e]||(t.x2&&(t.x?(v16[e]&&(r+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),r+="o.width=o.x2-o.x;"):r+="o.x=o.x2-(o.width||0);"),t.xc&&(r+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(v16[e]&&(r+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),r+="o.height=o.y2-o.y;"):r+="o.y=o.y2-(o.height||0);"),t.yc&&(r+="o.y=o.yc-(o.height||0)/2;")),r;}function c5(t){return(t+"").toLowerCase();}function z17(t){return c5(t)==="operator";}function D15(t){return c5(t)==="collect";}function f11(t,e,r){r.endsWith(";")||(r="return("+r+");");const n=Function(...e.concat(r));return t&&t.functions?n.bind(t.functions):n;}function K25(t,e,r,n){return`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${r}
  : (u > v || v == null) && u != null ? ${n}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${r}
  : v !== v && u === u ? ${n} : `;}var L26={operator:(t,e)=>f11(t,["_"],e.code),parameter:(t,e)=>f11(t,["datum","_"],e.code),event:(t,e)=>f11(t,["event"],e.code),handler:(t,e)=>{const r=`var datum=event.item&&event.item.datum;return ${e.code};`;return f11(t,["_","event"],r);},encode:(t,e)=>{const{marktype:r,channels:n}=e;let o="var o=item,datum=o.datum,m=0,$;";for(const a in n){const i="o["+Z1(a)+"]";o+=`$=${n[a].code};if(${i}!==$)${i}=$,m=1;`;}return o+=q26(n,r),o+="return m;",f11(t,["item","_"],o);},codegen:{get(t){const e=`[${t.map(Z1).join("][")}]`,r=Function("_",`return _${e};`);return r.path=e,r;},comparator(t,e){let r;const n=(a,i)=>{const s=e[i];let u,l;return a.path?(u=`a${a.path}`,l=`b${a.path}`):((r=r||{})["f"+i]=a,u=`this.f${i}(a)`,l=`this.f${i}(b)`),K25(u,l,-s,s);},o=Function("a","b","var u, v; return "+t.map(n).join("")+"0;");return r?o.bind(r):o;}}};function R20(t){const e=this;z17(t.type)||!t.type?e.operator(t,t.update?e.operatorExpression(t.update):null):e.transform(t,t.type);}function A17(t){const e=this;if(t.params){const r=e.get(t.id);r||b("Invalid operator id: "+t.id),e.dataflow.connect(r,r.parameters(e.parseParameters(t.params),t.react,t.initonly));}}function T17(t,e){e=e||{};const r=this;for(const n in t){const o=t[n];e[n]=w1(o)?o.map(a=>x14(a,r,e)):x14(o,r,e);}return e;}function x14(t,e,r){if(!t||!M1(t))return t;for(let n=0,o=y16.length,a;n<o;++n)if(a=y16[n],g(t,a.key))return a.parse(t,e,r);return t;}var y16=[{key:"$ref",parse:U22},{key:"$key",parse:Y26},{key:"$expr",parse:X25},{key:"$field",parse:B20},{key:"$encode",parse:M16},{key:"$compare",parse:J24},{key:"$context",parse:N19},{key:"$subflow",parse:V21},{key:"$tupleid",parse:W20}];function U22(t,e){return e.get(t.$ref)||b("Operator not defined: "+t.$ref);}function X25(t,e,r){t.$params&&e.parseParameters(t.$params,r);const n="e:"+t.$expr.code;return e.fn[n]||(e.fn[n]=f(e.parameterExpression(t.$expr),t.$fields));}function Y26(t,e){const r="k:"+t.$key+"_"+!!t.$flat;return e.fn[r]||(e.fn[r]=qn(t.$key,t.$flat,e.expr.codegen));}function B20(t,e){if(!t.$field)return null;const r="f:"+t.$field+"_"+t.$name;return e.fn[r]||(e.fn[r]=z1(t.$field,t.$name,e.expr.codegen));}function J24(t,e){const r="c:"+t.$compare+"_"+t.$order,n=p(t.$compare).map(o=>o&&o.$tupleid?d4:o);return e.fn[r]||(e.fn[r]=Mn(n,t.$order,e.expr.codegen));}function M16(t,e){const r=t.$encode,n={};for(const o in r){const a=r[o];n[o]=f(e.encodeExpression(a.$expr),a.$fields),n[o].output=a.$output;}return n;}function N19(t,e){return e;}function V21(t,e){const r=t.$subflow;return function(n,o,a){const i=e.fork().parse(r),s=i.get(r.operators[0].id),u=i.signals.parent;return u&&u.set(a),s.detachSubflow=()=>e.detach(i),s;};}function W20(){return d4;}function Z23(t){var e=this,r=t.filter!=null?e.eventExpression(t.filter):void 0,n=t.stream!=null?e.get(t.stream):void 0,o;t.source?n=e.events(t.source,t.type,r):t.merge&&(o=t.merge.map(a=>e.get(a)),n=o[0].merge.apply(o[0],o.slice(1))),t.between&&(o=t.between.map(a=>e.get(a)),n=n.between(o[0],o[1])),t.filter&&(n=n.filter(r)),t.throttle!=null&&(n=n.throttle(+t.throttle)),t.debounce!=null&&(n=n.debounce(+t.debounce)),n==null&&b("Invalid stream definition: "+JSON.stringify(t)),t.consume&&n.consume(!0),e.stream(t,n);}function G22(t){var e=this,r=M1(r=t.source)?r.$ref:r,n=e.get(r),o=null,a=t.update,i=void 0;n||b("Source not defined: "+t.source),o=t.target&&t.target.$expr?e.eventExpression(t.target.$expr):e.get(t.target),a&&a.$expr&&(a.$params&&(i=e.parseParameters(a.$params)),a=e.handlerExpression(a.$expr)),e.update(t,n,o,a,i);}const H19={skip:!0};function Q20(t){var e=this,r={};if(t.signals){var n=r.signals={};Object.keys(e.signals).forEach(a=>{const i=e.signals[a];t.signals(a,i)&&(n[a]=i.value);});}if(t.data){var o=r.data={};Object.keys(e.data).forEach(a=>{const i=e.data[a];t.data(a,i)&&(o[a]=i.input.value);});}return e.subcontext&&t.recurse!==!1&&(r.subcontext=e.subcontext.map(a=>a.getState(t))),r;}function _22(t){var e=this,r=e.dataflow,n=t.data,o=t.signals;Object.keys(o||{}).forEach(a=>{r.update(e.signals[a],o[a],H19);}),Object.keys(n||{}).forEach(a=>{r.pulse(e.data[a].input,r.changeset().remove(_1).insert(n[a]));}),(t.subcontext||[]).forEach((a,i)=>{const s=e.subcontext[i];s&&s.setState(a);});}function tt9(t,e,r,n){return new b17(t,e,r,n);}function b17(t,e,r,n){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=n||L26,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},r&&(this.functions=Object.create(r),this.functions.context=this);}function k19(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this);}b17.prototype=k19.prototype={fork(){const t=new k19(this);return(this.subcontext||(this.subcontext=[])).push(t),t;},detach(t){this.subcontext=this.subcontext.filter(r=>r!==t);const e=Object.keys(t.nodes);for(const r of e)t.nodes[r]._targets=null;for(const r of e)t.nodes[r].detach();t.nodes=null;},get(t){return this.nodes[t];},set(t,e){return this.nodes[t]=e;},add(t,e){const r=this,n=r.dataflow,o=t.value;if(r.set(t.id,e),D15(t.type)&&o&&(o.$ingest?n.ingest(e,o.$ingest,o.$format):o.$request?n.preload(e,o.$request,o.$format):n.pulse(e,n.changeset().insert(o))),t.root&&(r.root=e),t.parent){let a=r.get(t.parent.$ref);a?(n.connect(a,[e]),e.targets().add(a)):(r.unresolved=r.unresolved||[]).push(()=>{a=r.get(t.parent.$ref),n.connect(a,[e]),e.targets().add(a);});}if(t.signal&&(r.signals[t.signal]=e),t.scale&&(r.scales[t.scale]=e),t.data)for(const a in t.data){const i=r.data[a]||(r.data[a]={});t.data[a].forEach(s=>i[s]=e);}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this;},operator(t,e){this.add(t,this.dataflow.add(t.value,e));},transform(t,e){this.add(t,this.dataflow.add(this.transforms[c5(e)]));},stream(t,e){this.set(t.id,e);},update(t,e,r,n,o){this.dataflow.on(e,r,n,o,t.options);},operatorExpression(t){return this.expr.operator(this,t);},parameterExpression(t){return this.expr.parameter(this,t);},eventExpression(t){return this.expr.event(this,t);},handlerExpression(t){return this.expr.handler(this,t);},encodeExpression(t){return this.expr.encode(this,t);},parse:F25,parseOperator:R20,parseOperatorParameters:A17,parseParameters:T17,parseStream:Z23,parseUpdate:G22,getState:Q20,setState:_22};function ye6(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),M17(t,e.description()));}function M17(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t));}function Ce6(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background});}const S21="default";function xe5(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:S21,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?X1(i)?i:i.user:S21,a=r.item&&r.item.cursor||null;return i&&s===i.user&&a==i.item?i:{user:s,item:a};}),e.add(null,function(n){let r=n.cursor,i=this.value;return X1(r)||(i=r.item,r=r.user),T18(e,r&&r!==S21?r:i||r),i;},{cursor:t});}function T18(e,t){const n=e.globalCursor()?typeof document!="undefined"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t;}function v17(e,t){var n=e._runtime.data;return g(n,t)||b("Unrecognized data set: "+t),n[t];}function Le5(e,t){return arguments.length<2?v17(this,e).values.value:z18.call(this,e,I8().remove(_1).insert(t));}function z18(e,t){it2(t)||b("Second argument to changes must be a changeset.");const n=v17(this,e);return n.modified=!0,this.pulse(n.input,t);}function Ee4(e,t){return z18.call(this,e,I8().insert(t));}function Re7(e,t){return z18.call(this,e,I8().remove(t));}function I21(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right);}function w19(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom);}function b18(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]];}function Ae6(e){var t=b18(e),n=I21(e),r=w19(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r);}catch(s){e.error(s);}});}function Se5(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,a,o;return i&&(o=b18(e),a=t.changedTouches?t.changedTouches[0]:t,s=Je2(a,i),s[0]-=o[0],s[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=Te6(e,n,s),t;}function Te6(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(a){var o=r,u;if(a){for(u=t;u;u=u.mark.group)if(u.mark.name===a){o=u;break;}}return o&&o.mark&&o.mark.interactive?o:{};}function s(a){if(!a)return n;X1(a)&&(a=i(a));const o=n.slice();for(;a;)o[0]-=a.x||0,o[1]-=a.y||0,a=a.mark&&a.mark.group;return o;}return{view:On(e),item:On(t||{}),group:i,xy:s,x:a=>s(a)[0],y:a=>s(a)[1]};}const G23="view",De4="timer",Oe2="window",je7={trap:!1};function Pe5(e){const t=J1({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{w1(r[s])&&(r[s]=Xn(r[s]));});};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t;}function q27(e,t,n,r){e._eventListeners.push({type:n,sources:p(t),handler:r});}function Ue6(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault();}function k20(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||M1(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0;}function We5(e,t,n){var r=this,i=new Y6(n),s=function(l,c){r.runAsync(null,()=>{e===G23&&Ue6(r,t)&&l.preventDefault(),i.receive(Se5(r,l,c));});},a;if(e===De4)k20(r,"timer",t)&&r.timer(s,t);else if(e===G23)k20(r,"view",t)&&r.addEventListener(t,s,je7);else if(e===Oe2?k20(r,"window",t)&&typeof window!="undefined"&&(a=[window]):typeof document!="undefined"&&k20(r,"selector",t)&&(a=Array.from(document.querySelectorAll(e))),!a)r.warn("Can not resolve event source: "+e);else{for(var o=0,u=a.length;o<u;++o)a[o].addEventListener(t,s);q27(r,a,t,s);}return i;}function B21(e){return e.item;}function K26(e){return e.item.mark.source;}function N20(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e);};}function Ve6(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",B21),K26,N20(e)),this.on(this.events("view","pointerout",B21),K26,N20(t)),this;}function He6(){var e=this._tooltip,t=this._timers,n=this._eventListeners,r,i,s;for(r=t.length;--r>=0;)t[r].stop();for(r=n.length;--r>=0;)for(s=n[r],i=s.sources.length;--i>=0;)s.sources[i].removeEventListener(s.type,s.handler);return e&&e.call(this,this._handler,null,null,null),this;}function d8(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r;}const Me8="vega-bind",Ie5="vega-bind-name",we8="vega-bind-radio";function Ge6(e,t,n){if(!t)return;const r=n.param;let i=n.state;i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,a);});}},r.debounce&&(i.update=Dn(r.debounce,i.update)));const s=r.input==null&&r.element?qe6:Ke6;return s(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal));}),i.active=!0),i;}function qe6(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),q27(r,t,i,s),e.set=a=>{t.value=a,t.dispatchEvent(Be5(i));};}function Be5(e){return typeof Event!="undefined"?new Event(e):{type:e};}function Ke6(e,t,n,r){const i=r.signal(n.signal),s=d8("div",{class:Me8}),a=n.input==="radio"?s:s.appendChild(d8("label"));a.appendChild(d8("span",{class:Ie5},n.name||n.signal)),t.appendChild(s);let o=Ne7;switch(n.input){case"checkbox":o=Fe7;break;case"select":o=Qe6;break;case"radio":o=Ye6;break;case"range":o=$e7;break;}o(e,a,n,i);}function Ne7(e,t,n,r){const i=d8("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s;}function Fe7(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=d8("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=a=>s.checked=!!a||null;}function Qe6(e,t,n,r){const i=d8("select",{name:n.signal}),s=n.labels||[];n.options.forEach((a,o)=>{const u={value:a};y17(a,r)&&(u.selected=!0),i.appendChild(d8("option",u,(s[o]||a)+""));}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex]);}),e.elements=[i],e.set=a=>{for(let o=0,u=n.options.length;o<u;++o)if(y17(n.options[o],a)){i.selectedIndex=o;return;}};}function Ye6(e,t,n,r){const i=d8("span",{class:we8}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((a,o)=>{const u={type:"radio",name:n.signal,value:a};y17(a,r)&&(u.checked=!0);const l=d8("input",u);l.addEventListener("change",()=>e.update(a));const c=d8("label",{},(s[o]||a)+"");return c.prepend(l),i.appendChild(c),l;}),e.set=a=>{const o=e.elements,u=o.length;for(let l=0;l<u;++l)y17(o[l].value,a)&&(o[l].checked=!0);};}function $e7(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,a=n.step||kn(s,i,100),o=d8("input",{type:"range",name:n.signal,min:s,max:i,step:a});o.value=r;const u=d8("span",{},+r);t.appendChild(o),t.appendChild(u);const l=()=>{u.textContent=o.value,e.update(+o.value);};o.addEventListener("input",l),o.addEventListener("change",l),e.elements=[o],e.set=c=>{o.value=c,u.textContent=c;};}function y17(e,t){return e===t||e+""===t+"";}function F26(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,I21(e),w19(e),b18(e),i,s).background(e.background());}function D16(e,t){return t?function(){try{t.apply(this,arguments);}catch(n){e.error(n);}}:null;}function Ze4(e,t,n,r){const i=new r(e.loader(),D16(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,b18(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler);}),i;}function Je5(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=ea(r);e=n._el=e?O21(n,e,!0):null,ye6(n),s||n.error("Unrecognized renderer type: "+r);const a=s.handler||gt2,o=e?s.renderer:s.headless;return n._renderer=o?F26(n,n._renderer,e,o):null,n._handler=Ze4(n,n._handler,e,a),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=O21(n,t,!0):e.appendChild(d8("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=O21(n,u.param.element,!!u.param.input));}),n._bind.forEach(u=>{Ge6(n,u.element||t,u);})),n;}function O21(e,t,n){if(typeof t=="string")if(typeof document!="undefined"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null;}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent="";}catch(r){t=null,e.error(r);}return t;}const p10=e=>+e||0,Xe6=e=>({top:e,bottom:e,left:e,right:e});function Q21(e){return M1(e)?{top:p10(e.top),bottom:p10(e.bottom),left:p10(e.left),right:p10(e.right)}:Xe6(p10(e));}async function j24(e,t,n,r){const i=ea(t),s=i&&i.headless;return s||b("Unrecognized renderer type: "+t),await e.runAsync(),F26(e,null,null,s,n,r).renderAsync(e._scenegraph.root);}async function et11(e,t){e!==ta.Canvas&&e!==ta.SVG&&e!==ta.PNG&&b("Unrecognized image type: "+e);const n=await j24(this,e,t);return e===ta.SVG?tt10(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png");}function tt10(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n);}async function nt9(e,t){const n=await j24(this,ta.Canvas,e,t);return n.canvas();}async function rt11(e){const t=await j24(this,ta.SVG,e);return t.svg();}function it12(e,t,n){return tt9(e,X9,w18,n).parse(t);}function st8(e){var t=this._runtime.scales;return g(t,e)||b("Unrecognized scale or projection: "+e),t[e].value;}var Y27="width",$16="height",P23="padding",Z24={skip:!0};function J25(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===P23?r.left+r.right:0);}function X26(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===P23?r.top+r.bottom:0);}function at13(e){var t=e._signals,n=t[Y27],r=t[$16],i=t[P23];function s(){e._autosize=e._resize=1;}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=J25(e,o.size),s();},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=X26(e,o.size),s();},{size:r});const a=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1;}function ot11(e,t,n,r,i,s){this.runAfter(a=>{let o=0;a._autosize=0,a.width()!==n&&(o=1,a.signal(Y27,n,Z24),a._resizeWidth.skip(!0)),a.height()!==r&&(o=1,a.signal($16,r,Z24),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),o&&a.run("enter"),s&&a.runAfter(u=>u.resize());},!1,1);}function ut9(e){return this._runtime.getState(e||{data:lt9,signals:dt9,recurse:!0});}function lt9(e,t){return t.modified&&w1(t.input.value)&&!e.startsWith("_:vega:_");}function dt9(e,t){return!(e==="parent"||t instanceof X9.proxy);}function ct12(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e);},t=>{t._trigger=!0;}),this;}function ht8(e,t){function n(r){e({timestamp:Date.now(),elapsed:r});}this._timers.push(E16(n,t));}function ft11(e,t,n,r){const i=e.element();i&&i.setAttribute("title",gt8(r));}function gt8(e){return e==null?"":w1(e)?ee15(e):M1(e)&&!K1(e)?pt9(e):e+"";}function pt9(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(w1(n)?ee15(n):te15(n));}).join(`
`);}function ee15(e){return"["+e.map(te15).join(", ")+"]";}function te15(e){return w1(e)?"[…]":M1(e)&&!K1(e)?"{…}":e;}function mt8(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t);},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync();};t();}}function ne14(e,t){const n=this;if(t=t||{},ct3.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=J1({},e.locale,t.locale);n.locale(lt1(s.number,s.time));}n._el=null,n._elBind=null,n._renderType=t.renderer||ta.Canvas,n._scenegraph=new hi2;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||ft11,n._redraw=!0,n._handler=new gt2().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Pe5(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=it12(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:J1({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=J25(n,n._width),n._viewHeight=X26(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,at13(n),Ce6(n),xe5(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio();}function C25(e,t){return g(e._signals,t)?e._signals[t]:b("Unrecognized signal name: "+Z1(t));}function re15(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null;}function ie11(e,t,n,r){let i=re15(n,r);return i||(i=D16(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e;}function se12(e,t,n){const r=re15(t,n);return r&&t._targets.remove(r),e;}Pn(ne14,ct3,{async evaluate(e,t,n){if(await ct3.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Ae6(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1;}catch(r){this.error(r);}return n&&C6(this,n),this;},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e);},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&M17(this._el,this._desc=t),this;}return this._desc;},container(){return this._el;},scenegraph(){return this._scenegraph;},origin(){return this._origin.slice();},signal(e,t,n){const r=C25(this,e);return arguments.length===1?r.value:this.update(r,t,n);},width(e){return arguments.length?this.signal("width",e):this.signal("width");},height(e){return arguments.length?this.signal("height",e):this.signal("height");},padding(e){return arguments.length?this.signal("padding",Q21(e)):Q21(this.signal("padding"));},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize");},background(e){return arguments.length?this.signal("background",e):this.signal("background");},renderer(e){return arguments.length?(ea(e)||b("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType;},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip;},loader(e){return arguments.length?(e!==this._loader&&(ct3.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader;},resize(){return this._autosize=1,this.touch(C25(this,"autosize"));},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind));},_resizeView:ot11,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=D16(this,t),r.raw=t),this._handler.on(e,r),this;},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break;}return this;},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this;},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this;},addSignalListener(e,t){return ie11(this,e,C25(this,e),t);},removeSignalListener(e,t){return se12(this,C25(this,e),t);},addDataListener(e,t){return ie11(this,e,v17(this,e).values,t);},removeDataListener(e,t){return se12(this,v17(this,e).values,t);},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=T18(this,null);this._globalCursor=!!e,t&&T18(this,t);}return this;}else return this._globalCursor;},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault;},timer:ht8,events:We5,finalize:He6,hover:Ve6,data:Le5,change:z18,insert:Ee4,remove:Re7,scale:st8,initialize:Je5,toImageURL:et11,toCanvas:nt9,toSVG:rt11,getState:ut9,setState:ct12,_watchPixelRatio:mt8});const y18="view",h11="[",m9="]",s8="{",w20="}",A18=":",g12=",",x15="@",R21=">",L27=/[[\]{}]/,k21={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let b19,d9;function v18(e,t,n){return b19=t||y18,d9=n||k21,E23(e.trim()).map(p11);}function M18(e){return d9[e];}function f12(e,t,n,i,o){const c=e.length;let l=0,r;for(;t<c;++t){if(r=e[t],!l&&r===n)return t;o&&o.indexOf(r)>=0?--l:i&&i.indexOf(r)>=0&&++l;}return t;}function E23(e){const t=[],n=e.length;let i=0,o=0;for(;o<n;)o=f12(e,o,g12,h11+s8,m9+w20),t.push(e.substring(i,o).trim()),i=++o;if(t.length===0)throw"Empty event selector: "+e;return t;}function p11(e){return e[0]==="["?O22(e):S22(e);}function O22(e){const t=e.length;let n=1,i;if(n=f12(e,n,m9,h11,m9),n===t)throw"Empty between selector: "+e;if(i=E23(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==R21)throw"Expected '>' after between selector: "+e;i=i.map(p11);const o=p11(e.slice(1).trim());return o.between?{between:i,stream:o}:(o.between=i,o);}function S22(e){const t={source:b19},n=[];let i=[0,0],o=0,c=0,l=e.length,r=0,u,a;if(e[l-1]===w20){if(r=e.lastIndexOf(s8),r>=0){try{i=B22(e.substring(r+1,l-1));}catch(U){throw"Invalid throttle specification: "+e;}e=e.slice(0,r).trim(),l=e.length;}else throw"Unmatched right brace: "+e;r=0;}if(!l)throw e;if(e[0]===x15&&(o=++r),u=f12(e,r,A18),u<l&&(n.push(e.substring(c,u).trim()),c=r=++u),r=f12(e,r,h11),r===l)n.push(e.substring(c,l).trim());else if(n.push(e.substring(c,r).trim()),a=[],c=++r,c===l)throw"Unmatched left bracket: "+e;for(;r<l;){if(r=f12(e,r,m9),r===l)throw"Unmatched left bracket: "+e;if(a.push(e.substring(c,r).trim()),r<l-1&&e[++r]!==h11)throw"Expected left bracket: "+e;c=++r;}if(!(l=n.length)||L27.test(n[l-1]))throw"Invalid event selector: "+e;return l>1?(t.type=n[1],o?t.markname=n[0].slice(1):M18(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),a!=null&&(t.filter=a),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t;}function B22(e){const t=e.split(g12);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i;});}function vn6(t){return M1(t)?t:{type:t||"pad"};}const gt9=t=>+t||0,En8=t=>({top:t,bottom:t,left:t,right:t});function On5(t){return M1(t)?t.signal?t:{top:gt9(t.top),bottom:gt9(t.bottom),left:gt9(t.left),right:gt9(t.right)}:En8(gt9(t));}const z19=t=>M1(t)&&!w1(t)?J1({},t):{value:t};function ce7(t,e,n,i){if(n!=null){const a=M1(n)&&!w1(n)||w1(n)&&n.length&&M1(n[0]);return a?t.update[e]=n:t[i||"enter"][e]={value:n},1;}else return 0;}function L28(t,e,n){for(const i in e)ce7(t,i,e[i]);for(const i in n)ce7(t,i,n[i],"update");}function nt10(t,e,n){for(const i in e){if(n&&g(n,i))continue;t[i]=J1(t[i]||{},e[i]);}return t;}function it13(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t]);}const St8="mark",$t7="frame",Rt9="scope",he8="axis",me9="axis-domain",ye7="axis-grid",pe6="axis-label",be6="axis-tick",xe6="axis-title",ke6="legend",zn6="legend-band",Se6="legend-entry",Dn6="legend-gradient",Vt7="legend-label",$e8="legend-symbol",Re8="legend-title",Ln5="title",wn10="title-text",Pn8="title-subtitle";function jn7(t,e,n,i,a){const l={},r={};let o,s,u,f;s="lineBreak",e==="text"&&a[s]!=null&&!it13(s,t)&&Ut7(l,s,a[s]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),f=n===$t7?a.group:n===St8?J1({},a.mark,a[e]):null;for(s in f)u=it13(s,t)||(s==="fill"||s==="stroke")&&(it13("fill",t)||it13("stroke",t)),u||Ut7(l,s,f[s]);p(i).forEach(d=>{const c=a.style&&a.style[d];for(const m in c)it13(m,t)||Ut7(l,m,c[m]);}),t=J1({},t);for(s in l)f=l[s],f.signal?(o=o||{})[s]=f:r[s]=f;return t.enter=J1(r,t.enter),o&&(t.update=J1(o,t.update)),t;}function Ut7(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n};}const ve6=t=>X1(t)?Z1(t):t.signal?`(${t.signal})`:Ee5(t);function vt7(t){if(t.gradient!=null)return Cn7(t);let e=t.signal?`(${t.signal})`:t.color?Wn6(t.color):t.field!=null?Ee5(t.field):t.value!==void 0?Z1(t.value):void 0;return t.scale!=null&&(e=Fn7(t,e)),e===void 0&&(e=null),t.exponent!=null&&(e=`pow(${e},${Ot7(t.exponent)})`),t.mult!=null&&(e+=`*${Ot7(t.mult)}`),t.offset!=null&&(e+=`+${Ot7(t.offset)}`),t.round&&(e=`round(${e})`),e;}const Et7=(t,e,n,i)=>`(${t}(${[e,n,i].map(vt7).join(",")})+'')`;function Wn6(t){return t.c?Et7("hcl",t.h,t.c,t.l):t.h||t.s?Et7("hsl",t.h,t.s,t.l):t.l||t.a?Et7("lab",t.l,t.a,t.b):t.r||t.g||t.b?Et7("rgb",t.r,t.g,t.b):null;}function Cn7(t){const e=[t.start,t.stop,t.count].map(n=>n==null?null:Z1(n));for(;e.length&&a(e)==null;)e.pop();return e.unshift(ve6(t.gradient)),`gradient(${e.join(",")})`;}function Ot7(t){return M1(t)?"("+vt7(t)+")":t;}function Ee5(t){return Oe3(M1(t)?t:{datum:t});}function Oe3(t){let e,n,i;if(t.signal)e="datum",i=t.signal;else if(t.group||t.parent){for(n=Math.max(1,t.level||1),e="item";n-- >0;)e+=".mark.group";t.parent?(i=t.parent,e+=".datum"):i=t.group;}else t.datum?(e="datum",i=t.datum):b("Invalid field reference: "+Z1(t));return t.signal||(i=X1(i)?N1(i).map(Z1).join("]["):Oe3(i)),e+"["+i+"]";}function Fn7(t,e){const n=ve6(t.scale);return t.range!=null?e=`lerp(_range(${n}), ${+t.range})`:(e!==void 0&&(e=`_scale(${n}, ${e})`),t.band&&(e=(e?e+"+":"")+`_bandwidth(${n})`+(+t.band===1?"":"*"+Ot7(t.band)),t.extra&&(e=`(datum.extra ? _scale(${n}, datum.extra.value) : ${e})`)),e==null&&(e="0")),e;}function Tn5(t){let e="";return t.forEach(n=>{const i=vt7(n);e+=n.test?`(${n.test})?${i}:`:i;}),a(e)===":"&&(e+="null"),e;}function ze6(t,e,n,i,a,l){const r={};l=l||{},l.encoders={$encode:r},t=jn7(t,e,n,i,a.config);for(const o in t)r[o]=An10(t[o],e,l,a);return l;}function An10(t,e,n,i){const a={},l={};for(const r in t)t[r]!=null&&(a[r]=Bn6(Mn9(t[r]),i,n,l));return{$expr:{marktype:e,channels:a},$fields:Object.keys(l),$output:Object.keys(t)};}function Mn9(t){return w1(t)?Tn5(t):vt7(t);}function Bn6(t,e,n,i){const a=Dn5(t,e);return a.$fields.forEach(l=>i[l]=1),J1(n,a.$params),a.$expr;}const Vn5="outer",Un6=["value","update","init","react","bind"];function De5(t,e){b(t+' for "outer" push: '+Z1(e));}function Gt6(t,e){const n=t.name;if(t.push===Vn5)e.signals[n]||De5("No prior signal definition",n),Un6.forEach(i=>{t[i]!==void 0&&De5("Invalid property ",i);});else{const i=e.addSignal(n,t.value);t.react===!1&&(i.react=!1),t.bind&&e.addBinding(n,t.bind);}}function It6(t,e,n,i){this.id=-1,this.type=t,this.value=e,this.params=n,i&&(this.parent=i);}function zt8(t,e,n,i){return new It6(t,e,n,i);}function Dt7(t,e){return zt8("operator",t,e);}function g13(t){const e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e;}function ct13(t,e){return e?{$field:t,$name:e}:{$field:t};}const Ht6=ct13("key");function Le6(t,e){return{$compare:t,$order:e};}function Gn6(t,e){const n={$key:t};return e&&(n.$flat=!0),n;}const In5="ascending",Hn6="descending";function qn7(t){return M1(t)?(t.order===Hn6?"-":"+")+Lt8(t.op,t.field):"";}function Lt8(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"");}const qt8="scope",Xt8="view";function O23(t){return t&&t.signal;}function Xn7(t){return t&&t.expr;}function wt7(t){if(O23(t))return!0;if(M1(t)){for(const e in t)if(wt7(t[e]))return!0;}return!1;}function U23(t,e){return t??e;}function Z25(t){return t&&t.signal||t;}const we9="timer";function at14(t,e){const n=t.merge?Yn5:t.stream?Nn9:t.type?Jn6:b("Invalid stream specification: "+Z1(t));return n(t,e);}function Kn4(t){return t===qt8?Xt8:t||Xt8;}function Yn5(t,e){const n=t.merge.map(a=>at14(a,e)),i=Kt8({merge:n},t,e);return e.addStream(i).id;}function Nn9(t,e){const n=at14(t.stream,e),i=Kt8({stream:n},t,e);return e.addStream(i).id;}function Jn6(t,e){let n;t.type===we9?(n=e.event(we9,t.throttle),t={between:t.between,filter:t.filter}):n=e.event(Kn4(t.source),t.type);const i=Kt8({stream:n},t,e);return Object.keys(i).length===1?n:e.addStream(i).id;}function Kt8(t,e,n){let i=e.between;return i&&(i.length!==2&&b('Stream "between" parameter must have 2 entries: '+Z1(e)),t.between=[at14(i[0],n),at14(i[1],n)]),i=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&i.push(Qn5(e.marktype,e.markname,e.markrole)),e.source===qt8&&i.push("inScope(event.item)"),i.length&&(t.filter=Dn5("("+i.join(")&&(")+")",n).$expr),(i=e.throttle)!=null&&(t.throttle=+i),(i=e.debounce)!=null&&(t.debounce=+i),e.consume&&(t.consume=!0),t;}function Qn5(t,e,n){const i="event.item";return i+(t&&t!=="*"?"&&"+i+".mark.marktype==='"+t+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(e?"&&"+i+".mark.name==='"+e+"'":"");}const Zn4={code:"_.$value",ast:{type:"Identifier",value:"value"}};function _n6(t,e,n){const i=t.encode,a={target:n};let l=t.events,r=t.update,o=[];l||b("Signal update missing events specification."),X1(l)&&(l=v18(l,e.isSubscope()?qt8:Xt8)),l=p(l).filter(s=>s.signal||s.scale?(o.push(s),0):1),o.length>1&&(o=[ei4(o)]),l.length&&o.push(l.length>1?{merge:l}:l[0]),i!=null&&(r&&b("Signal encode and update are mutually exclusive."),r="encode(item(),"+Z1(i)+")"),a.update=X1(r)?Dn5(r,e):r.expr!=null?Dn5(r.expr,e):r.value!=null?r.value:r.signal!=null?{$expr:Zn4,$params:{$value:e.signalRef(r.signal)}}:b("Invalid signal update specification."),t.force&&(a.options={force:!0}),o.forEach(s=>e.addUpdate(J1(ti4(s,e),a)));}function ti4(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):at14(t,e)};}function ei4(t){return{signal:"["+t.map(e=>e.scale?'scale("'+e.scale+'")':e.signal)+"]"};}function Pe6(t,e){const n=e.getSignal(t.name);let i=t.update;t.init&&(i?b("Signals can not include both init and update expressions."):(i=t.init,n.initonly=!0)),i&&(i=Dn5(i,e),n.update=i.$expr,n.params=i.$params),t.on&&t.on.forEach(a=>_n6(a,e,n.id));}const x16=t=>(e,n,i)=>zt8(t,n,e||void 0,i),je8=x16("aggregate"),ni4=x16("axisticks"),We6=x16("bound"),G24=x16("collect"),Ce7=x16("compare"),ii4=x16("datajoin"),Fe8=x16("encode"),ai4=x16("expression"),li4=x16("facet"),ri4=x16("field"),oi4=x16("key"),si4=x16("legendentries"),ui4=x16("load"),fi4=x16("mark"),di3=x16("multiextent"),gi3=x16("multivalues"),ci2=x16("overlap"),hi4=x16("params"),Te7=x16("prefacet"),mi3=x16("projection"),yi4=x16("proxy"),pi4=x16("relay"),Ae7=x16("render"),bi3=x16("scale"),_23=x16("sieve"),xi3=x16("sortitems"),Me9=x16("viewlayout"),ki2=x16("values");let Si2=0;const Be6={min:"min",max:"max",count:"sum"};function $i2(t,e){const n=t.type||"linear";ce2(n)||b("Unrecognized scale type: "+Z1(n)),e.addScale(t.name,{type:n,domain:void 0});}function Ri2(t,e){const n=e.getScale(t.name).params;let i;n.domain=Ve7(t.domain,t,e),t.range!=null&&(n.range=Ge7(t,e,n)),t.interpolate!=null&&Wi2(t.interpolate,n),t.nice!=null&&(n.nice=ji2(t.nice,e)),t.bins!=null&&(n.bins=Pi2(t.bins,e));for(i in t){if(g(n,i)||i==="name")continue;n[i]=A19(t[i],e);}}function A19(t,e){return M1(t)?t.signal?e.signalRef(t.signal):b("Unsupported object: "+Z1(t)):t;}function Pt8(t,e){return t.signal?e.signalRef(t.signal):t.map(n=>A19(n,e));}function jt8(t){b("Can not find data set: "+Z1(t));}function Ve7(t,e,n){if(!t){(e.domainMin!=null||e.domainMax!=null)&&b("No scale domain defined for domainMin/domainMax to override.");return;}return t.signal?n.signalRef(t.signal):(w1(t)?vi3:t.fields?Oi2:Ei2)(t,e,n);}function vi3(t,e,n){return t.map(i=>A19(i,n));}function Ei2(t,e,n){const i=n.getData(t.data);return i||jt8(t.data),te7(e.type)?i.valuesRef(n,t.field,Ue7(t.sort,!1)):yf(e.type)?i.domainRef(n,t.field):i.extentRef(n,t.field);}function Oi2(t,e,n){const i=t.data,a=t.fields.reduce((l,r)=>(r=X1(r)?{data:i,field:r}:w1(r)||r.signal?zi2(r,n):r,l.push(r),l),[]);return(te7(e.type)?Di2:yf(e.type)?Li2:wi2)(t,n,a);}function zi2(t,e){const n="_:vega:_"+Si2++,i=G24({});if(w1(t))i.value={$ingest:t};else if(t.signal){const a="setdata("+Z1(n)+","+t.signal+")";i.params.input=e.signalRef(a);}return e.addDataPipeline(n,[i,_23({})]),{data:n,field:"data"};}function Di2(t,e,n){const i=Ue7(t.sort,!0);let a,l;const r=n.map(u=>{const f=e.getData(u.data);return f||jt8(u.data),f.countsRef(e,u.field,i);}),o={groupby:Ht6,pulse:r};i&&(a=i.op||"count",l=i.field?Lt8(a,i.field):"count",o.ops=[Be6[a]],o.fields=[e.fieldRef(l)],o.as=[l]),a=e.add(je8(o));const s=e.add(G24({pulse:g13(a)}));return l=e.add(ki2({field:Ht6,sort:e.sortRef(i),pulse:g13(s)})),g13(l);}function Ue7(t,e){return t&&(!t.field&&!t.op?M1(t)?t.field="key":t={field:"key"}:!t.field&&t.op!=="count"?b("No field provided for sort aggregate op: "+t.op):e&&t.field&&t.op&&!Be6[t.op]&&b("Multiple domain scales can not be sorted using "+t.op)),t;}function Li2(t,e,n){const i=n.map(a=>{const l=e.getData(a.data);return l||jt8(a.data),l.domainRef(e,a.field);});return g13(e.add(gi3({values:i})));}function wi2(t,e,n){const i=n.map(a=>{const l=e.getData(a.data);return l||jt8(a.data),l.extentRef(e,a.field);});return g13(e.add(di3({extents:i})));}function Pi2(t,e){return t.signal||w1(t)?Pt8(t,e):e.objectProperty(t);}function ji2(t,e){return t.signal?e.signalRef(t.signal):M1(t)?{interval:A19(t.interval),step:A19(t.step)}:A19(t);}function Wi2(t,e){e.interpolate=A19(t.type||t),t.gamma!=null&&(e.interpolateGamma=A19(t.gamma));}function Ge7(t,e,n){const i=e.config.range;let a=t.range;if(a.signal)return e.signalRef(a.signal);if(X1(a)){if(i&&g(i,a))return t=J1({},t,{range:i[a]}),Ge7(t,e,n);a==="width"?a=[0,{signal:"width"}]:a==="height"?a=te7(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:b("Unrecognized scale range value: "+Z1(a));}else if(a.scheme){n.scheme=w1(a.scheme)?Pt8(a.scheme,e):A19(a.scheme,e),a.extent&&(n.schemeExtent=Pt8(a.extent,e)),a.count&&(n.schemeCount=A19(a.count,e));return;}else if(a.step){n.rangeStep=A19(a.step,e);return;}else{if(te7(t.type)&&!w1(a))return Ve7(a,t,e);w1(a)||b("Unsupported range type: "+Z1(a));}return a.map(l=>(w1(l)?Pt8:A19)(l,e));}function Ci2(t,e){const n=e.config.projection||{},i={};for(const a in t){if(a==="name")continue;i[a]=Yt8(t[a],a,e);}for(const a in n)i[a]==null&&(i[a]=Yt8(n[a],a,e));e.addProjection(t.name,i);}function Yt8(t,e,n){return w1(t)?t.map(i=>Yt8(i,e,n)):M1(t)?t.signal?n.signalRef(t.signal):e==="fit"?t:b("Unsupported parameter object: "+Z1(t)):t;}const I22="top",lt10="left",rt12="right",J26="bottom",Ie6="center",Fi1="vertical",Ti2="start",Ai2="middle",Mi2="end",Nt8="index",Jt7="label",Bi2="offset",ot12="perc",Vi2="perc2",M19="value",ht9="guide-label",Qt7="guide-title",Ui2="group-title",Gi2="group-subtitle",He7="symbol",Wt7="gradient",Zt9="discrete",_t6="size",Ii2="shape",Hi2="fill",qi2="stroke",Xi2="strokeWidth",Ki1="strokeDash",Yi2="opacity",te16=[_t6,Ii2,Hi2,qi2,Xi2,Ki1,Yi2],mt9={name:1,style:1,interactive:1},b20={value:0},B23={value:1},Ct7="group",qe7="rect",ee16="rule",Ni2="symbol",tt11="text";function yt8(t){return t.type=Ct7,t.interactive=t.interactive||!1,t;}function W21(t,e){const n=(i,a)=>U23(t[i],U23(e[i],a));return n.isVertical=i=>Fi1===U23(t.direction,e.direction||(i?e.symbolDirection:e.gradientDirection)),n.gradientLength=()=>U23(t.gradientLength,e.gradientLength||e.gradientWidth),n.gradientThickness=()=>U23(t.gradientThickness,e.gradientThickness||e.gradientHeight),n.entryColumns=()=>U23(t.columns,U23(e.columns,+n.isVertical(!0))),n;}function Xe7(t,e){const n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null;}function Ji1(t,e,n){const i=e.config.style[n];return i&&i[t];}function Ft6(t,e,n){return`item.anchor === '${Ti2}' ? ${t} : item.anchor === '${Mi2}' ? ${e} : ${n}`;}const ne15=Ft6(Z1(lt10),Z1(rt12),Z1(Ie6));function Qi1(t){const e=t("tickBand");let n=t("tickOffset"),i,a;return e?e.signal?(i={signal:`(${e.signal}) === 'extent' ? 1 : 0.5`},a={signal:`(${e.signal}) === 'extent'`},M1(n)||(n={signal:`(${e.signal}) === 'extent' ? 0 : ${n}`})):e==="extent"?(i=1,a=!0,n=0):(i=.5,a=!1):(i=t("bandPosition"),a=t("tickExtra")),{extra:a,band:i,offset:n};}function Ke7(t,e){return e?t?M1(t)?Object.assign({},t,{offset:Ke7(t.offset,e)}):{value:t,offset:e}:e:t;}function T19(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=nt10(t.encode,e,mt9)):t.interactive=!1,t;}function Zi1(t,e,n,i){const a=W21(t,n),l=a.isVertical(),r=a.gradientThickness(),o=a.gradientLength();let s,u,f,d,c;l?(u=[0,1],f=[0,0],d=r,c=o):(u=[0,0],f=[1,0],d=o,c=r);const m={enter:s={opacity:b20,x:b20,y:b20,width:z19(d),height:z19(c)},update:J1({},s,{opacity:B23,fill:{gradient:e,start:u,stop:f}}),exit:{opacity:b20}};return L28(m,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),T19({type:qe7,role:Dn6,encode:m},i);}function _i3(t,e,n,i,a){const l=W21(t,n),r=l.isVertical(),o=l.gradientThickness(),s=l.gradientLength();let u,f,d,c,m="";r?(u="y",d="y2",f="x",c="width",m="1-"):(u="x",d="x2",f="y",c="height");const h={opacity:b20,fill:{scale:e,field:M19}};h[u]={signal:m+"datum."+ot12,mult:s},h[f]=b20,h[d]={signal:m+"datum."+Vi2,mult:s},h[c]=z19(o);const k={enter:h,update:J1({},h,{opacity:B23}),exit:{opacity:b20}};return L28(k,{stroke:l("gradientStrokeColor"),strokeWidth:l("gradientStrokeWidth")},{opacity:l("gradientOpacity")}),T19({type:qe7,role:zn6,key:M19,from:a,encode:k},i);}const ta1=`datum.${ot12}<=0?"${lt10}":datum.${ot12}>=1?"${rt12}":"${Ie6}"`,ea1=`datum.${ot12}<=0?"${J26}":datum.${ot12}>=1?"${I22}":"${Ai2}"`;function Ye7(t,e,n,i){const a=W21(t,e),l=a.isVertical(),r=z19(a.gradientThickness()),o=a.gradientLength();let s=a("labelOverlap"),u,f,d,c,m="";const h={enter:u={opacity:b20},update:f={opacity:B23,text:{field:Jt7}},exit:{opacity:b20}};return L28(h,{fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:U23(t.labelLimit,e.gradientLabelLimit)}),l?(u.align={value:"left"},u.baseline=f.baseline={signal:ea1},d="y",c="x",m="1-"):(u.align=f.align={signal:ta1},u.baseline={value:"top"},d="x",c="y"),u[d]=f[d]={signal:m+"datum."+ot12,mult:o},u[c]=f[c]=r,r.offset=U23(t.labelOffset,e.gradientLabelOffset)||0,s=s?{separation:a("labelSeparation"),method:s,order:"datum."+Nt8}:void 0,T19({type:tt11,role:Vt7,style:ht9,key:M19,from:i,encode:h,overlap:s},n);}function na1(t,e,n,i,a){const l=W21(t,e),r=n.entries,o=!!(r&&r.interactive),s=r?r.name:void 0,u=l("clipHeight"),f=l("symbolOffset"),d={data:"value"},c=`(${a}) ? datum.${Bi2} : datum.${_t6}`,m=u?z19(u):{field:_t6},h=`datum.${Nt8}`,k=`max(1, ${a})`;let S,E,$,P,Y;m.mult=.5,S={enter:E={opacity:b20,x:{signal:c,mult:.5,offset:f},y:m},update:$={opacity:B23,x:E.x,y:E.y},exit:{opacity:b20}};let q=null,C=null;t.fill||(q=e.symbolBaseFillColor,C=e.symbolBaseStrokeColor),L28(S,{fill:l("symbolFillColor",q),shape:l("symbolType"),size:l("symbolSize"),stroke:l("symbolStrokeColor",C),strokeDash:l("symbolDash"),strokeDashOffset:l("symbolDashOffset"),strokeWidth:l("symbolStrokeWidth")},{opacity:l("symbolOpacity")}),te16.forEach(xt=>{t[xt]&&($[xt]=E[xt]={scale:t[xt],field:M19});});const N=T19({type:Ni2,role:$e8,key:M19,from:d,clip:u?!0:void 0,encode:S},n.symbols),V=z19(f);V.offset=l("labelOffset"),S={enter:E={opacity:b20,x:{signal:c,offset:V},y:m},update:$={opacity:B23,text:{field:Jt7},x:E.x,y:E.y},exit:{opacity:b20}},L28(S,{align:l("labelAlign"),baseline:l("labelBaseline"),fill:l("labelColor"),fillOpacity:l("labelOpacity"),font:l("labelFont"),fontSize:l("labelFontSize"),fontStyle:l("labelFontStyle"),fontWeight:l("labelFontWeight"),limit:l("labelLimit")});const pn=T19({type:tt11,role:Vt7,style:ht9,key:M19,from:d,encode:S},n.labels);return S={enter:{noBound:{value:!u},width:b20,height:u?z19(u):b20,opacity:b20},exit:{opacity:b20},update:$={opacity:B23,row:{signal:null},column:{signal:null}}},l.isVertical(!0)?(P=`ceil(item.mark.items.length / ${k})`,$.row.signal=`${h}%${P}`,$.column.signal=`floor(${h} / ${P})`,Y={field:["row",h]}):($.row.signal=`floor(${h} / ${k})`,$.column.signal=`${h} % ${k}`,Y={field:h}),$.column.signal=`(${a})?${$.column.signal}:${h}`,i={facet:{data:i,name:"value",groupby:Nt8}},yt8({role:Rt9,from:i,encode:nt10(S,r,mt9),marks:[N,pn],name:s,interactive:o,sort:Y});}function ia1(t,e){const n=W21(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}};}const ie12='item.orient === "left"',ae12='item.orient === "right"',Tt10=`(${ie12} || ${ae12})`,aa1=`datum.vgrad && ${Tt10}`,la=Ft6('"top"','"bottom"','"middle"'),ra1=Ft6('"right"','"left"','"center"'),oa1=`datum.vgrad && ${ae12} ? (${ra1}) : (${Tt10} && !(datum.vgrad && ${ie12})) ? "left" : ${ne15}`,sa=`item._anchor || (${Tt10} ? "middle" : "start")`,ua=`${aa1} ? (${ie12} ? -90 : 90) : 0`,fa=`${Tt10} ? (datum.vgrad ? (${ae12} ? "bottom" : "top") : ${la}) : "top"`;function da(t,e,n,i){const a=W21(t,e),l={enter:{opacity:b20},update:{opacity:B23,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:b20}};return L28(l,{orient:a("titleOrient"),_anchor:a("titleAnchor"),anchor:{signal:sa},angle:{signal:ua},align:{signal:oa1},baseline:{signal:fa},text:t.title,fill:a("titleColor"),fillOpacity:a("titleOpacity"),font:a("titleFont"),fontSize:a("titleFontSize"),fontStyle:a("titleFontStyle"),fontWeight:a("titleFontWeight"),limit:a("titleLimit"),lineHeight:a("titleLineHeight")},{align:a("titleAlign"),baseline:a("titleBaseline")}),T19({type:tt11,role:Re8,style:Qt7,from:i,encode:l},n);}function ga(t,e){let n;return M1(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+Ne8(t.path)+")":t.sphere&&(n="geoShape("+Ne8(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t;}function Ne8(t){return M1(t)&&t.signal?t.signal:Z1(t);}function Je6(t){const e=t.role||"";return e.startsWith("axis")||e.startsWith("legend")||e.startsWith("title")?e:t.type===Ct7?Rt9:e||St8;}function ca(t){return{marktype:t.type,name:t.name||void 0,role:t.role||Je6(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description};}function ha(t,e){return t&&t.signal?e.signalRef(t.signal):!(t===!1);}function le12(t,e){const n=he1(t.type);n||b("Unrecognized transform type: "+Z1(t.type));const i=zt8(n.type.toLowerCase(),null,Qe7(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(i)),i.metadata=n.metadata||{},i;}function Qe7(t,e,n){const i={},a=t.params.length;for(let l=0;l<a;++l){const r=t.params[l];i[r.name]=ma(r,e,n);}return i;}function ma(t,e,n){const i=t.type,a=e[t.name];if(i==="index")return ya(t,e,n);if(a===void 0){t.required&&b("Missing required "+Z1(e.type)+" parameter: "+Z1(t.name));return;}else{if(i==="param")return pa(t,e,n);if(i==="projection")return n.projectionRef(e[t.name]);}return t.array&&!O23(a)?a.map(l=>Ze5(t,l,n)):Ze5(t,a,n);}function Ze5(t,e,n){const i=t.type;if(O23(e))return tn9(i)?b("Expression references can not be signals."):re16(i)?n.fieldRef(e):en8(i)?n.compareRef(e):n.signalRef(e.signal);{const a=t.expr||re16(i);return a&&ba(e)?n.exprRef(e.expr,e.as):a&&xa(e)?ct13(e.field,e.as):tn9(i)?Dn5(e,n):ka(i)?g13(n.getData(e).values):re16(i)?ct13(e):en8(i)?n.compareRef(e):e;}}function ya(t,e,n){return X1(e.from)||b('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key);}function pa(t,e,n){const i=e[t.name];return t.array?(w1(i)||b("Expected an array of sub-parameters. Instead: "+Z1(i)),i.map(a=>_e5(t,a,n))):_e5(t,i,n);}function _e5(t,e,n){const i=t.params.length;let a;for(let r=0;r<i;++r){a=t.params[r];for(const o in a.key)if(a.key[o]!==e[o]){a=null;break;}if(a)break;}a||b("Unsupported parameter: "+Z1(e));const l=J1(Qe7(a,e,n),a.key);return g13(n.add(hi4(l)));}const ba=t=>t&&t.expr,xa=t=>t&&t.field,ka=t=>t==="data",tn9=t=>t==="expr",re16=t=>t==="field",en8=t=>t==="compare";function Sa(t,e,n){let i,a,l,r,o;return t?(i=t.facet)&&(e||b("Only group marks can be faceted."),i.field!=null?r=o=At10(i,n):(t.data?o=g13(n.getData(t.data).aggregate):(l=le12(J1({type:"aggregate",groupby:p(i.groupby)},i.aggregate),n),l.params.key=n.keyRef(i.groupby),l.params.pulse=At10(i,n),r=o=g13(n.add(l))),a=n.keyRef(i.groupby,!0))):r=g13(n.add(G24(null,[{}]))),r||(r=At10(t,n)),{key:a,pulse:r,parent:o};}function At10(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:g13(e.getData(t.data).output);}function Q22(t,e,n,i,a){this.scope=t,this.input=e,this.output=n,this.values=i,this.aggregate=a,this.index={};}Q22.fromEntries=function(t,e){const n=e.length,i=e[n-1],a=e[n-2];let l=e[0],r=null,o=1;for(l&&l.type==="load"&&(l=e[1]),t.add(e[0]);o<n;++o)e[o].params.pulse=g13(e[o-1]),t.add(e[o]),e[o].type==="aggregate"&&(r=e[o]);return new Q22(t,l,a,i,r);};function nn10(t){return X1(t)?t:null;}function an10(t,e,n){const i=Lt8(n.op,n.field);let a;if(e.ops){for(let l=0,r=e.as.length;l<r;++l)if(e.as[l]===i)return;}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((a=n.op.signal)?t.signalRef(a):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i));}function pt10(t,e,n,i,a,l,r){const o=e[n]||(e[n]={}),s=qn7(l);let u=nn10(a),f,d;if(u!=null&&(t=e.scope,u=u+(s?"|"+s:""),f=o[u]),!f){const c=l?{field:Ht6,pulse:e.countsRef(t,a,l)}:{field:t.fieldRef(a),pulse:g13(e.output)};s&&(c.sort=t.sortRef(l)),d=t.add(zt8(i,void 0,c)),r&&(e.index[a]=d),f=g13(d),u!=null&&(o[u]=f);}return f;}Q22.prototype={countsRef(t,e,n){const i=this,a=i.counts||(i.counts={}),l=nn10(e);let r,o,s;return l!=null&&(t=i.scope,r=a[l]),r?n&&n.field&&an10(t,r.agg.params,n):(s={groupby:t.fieldRef(e,"key"),pulse:g13(i.output)},n&&n.field&&an10(t,s,n),o=t.add(je8(s)),r=t.add(G24({pulse:g13(o)})),r={agg:o,ref:g13(r)},l!=null&&(a[l]=r)),r.ref;},tuplesRef(){return g13(this.values);},extentRef(t,e){return pt10(t,this,"extent","extent",e,!1);},domainRef(t,e){return pt10(t,this,"domain","values",e,!1);},valuesRef(t,e,n){return pt10(t,this,"vals","values",e,n||!0);},lookupRef(t,e){return pt10(t,this,"lookup","tupleindex",e,!1);},indataRef(t,e){return pt10(t,this,"indata","tupleindex",e,!0,!0);}};function $a(t,e,n){const i=t.from.facet,a=i.name,l=At10(i,e);let r;i.name||b("Facet must have a name: "+Z1(i)),i.data||b("Facet must reference a data set: "+Z1(i)),i.field?r=e.add(Te7({field:e.fieldRef(i.field),pulse:l})):i.groupby?r=e.add(li4({key:e.keyRef(i.groupby),group:g13(e.proxy(n.parent)),pulse:l})):b("Facet must specify groupby or field: "+Z1(i));const o=e.fork(),s=o.add(G24()),u=o.add(_23({pulse:g13(s)}));o.addData(a,new Q22(o,s,s,u)),o.addSignal("parent",null),r.params.subflow={$subflow:o.parse(t).toRuntime()};}function Ra(t,e,n){const i=e.add(Te7({pulse:n.pulse})),a=e.fork();a.add(_23()),a.addSignal("parent",null),i.params.subflow={$subflow:a.parse(t).toRuntime()};}function ln11(t,e,n){const i=t.remove,a=t.insert,l=t.toggle,r=t.modify,o=t.values,s=e.add(Dt7()),u="if("+t.trigger+',modify("'+n+'",'+[a,i,l,r,o].map(d=>d??"null").join(",")+"),0)",f=Dn5(u,e);s.update=f.$expr,s.params=f.$params;}function Mt9(t,e){const n=Je6(t),i=t.type===Ct7,a=t.from&&t.from.facet,l=t.overlap;let r=t.layout||n===Rt9||n===$t7,o,s,u,f,d,c,m;const h=n===St8||r||a,k=Sa(t.from,i,e);s=e.add(ii4({key:k.key||(t.key?ct13(t.key):void 0),pulse:k.pulse,clean:!i}));const S=g13(s);s=u=e.add(G24({pulse:S})),s=e.add(fi4({markdef:ca(t),interactive:ha(t.interactive,e),clip:ga(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:g13(s)}));const E=g13(s);s=f=e.add(Fe8(ze6(t.encode,t.type,n,t.style,e,{mod:!1,pulse:E}))),s.params.parent=e.encode(),t.transform&&t.transform.forEach(C=>{const N=le12(C,e),V=N.metadata;(V.generates||V.changes)&&b("Mark transforms should not generate new data."),V.nomod||(f.params.mod=!0),N.params.pulse=g13(s),e.add(s=N);}),t.sort&&(s=e.add(xi3({sort:e.compareRef(t.sort),pulse:g13(s)})));const $=g13(s);(a||r)&&(r=e.add(Me9({layout:e.objectProperty(t.layout),legends:e.legends,mark:E,pulse:$})),c=g13(r));const P=e.add(We6({mark:E,pulse:c||$}));m=g13(P),i&&(h&&(o=e.operators,o.pop(),r&&o.pop()),e.pushState($,c||m,S),a?$a(t,e,k):h?Ra(t,e,k):e.parse(t),e.popState(),h&&(r&&o.push(r),o.push(P))),l&&(m=va(l,m,e));const Y=e.add(Ae7({pulse:m})),q=e.add(_23({pulse:g13(Y)},void 0,e.parent()));t.name!=null&&(d=t.name,e.addData(d,new Q22(e,u,Y,q)),t.on&&t.on.forEach(C=>{(C.insert||C.remove||C.toggle)&&b("Marks only support modify triggers."),ln11(C,e,d);}));}function va(t,e,n){const i=t.method,a=t.bound,l=t.separation,r={separation:O23(l)?n.signalRef(l.signal):l,method:O23(i)?n.signalRef(i.signal):i,pulse:e};if(t.order&&(r.sort=n.compareRef({field:t.order})),a){const o=a.tolerance;r.boundTolerance=O23(o)?n.signalRef(o.signal):+o,r.boundScale=n.scaleRef(a.scale),r.boundOrient=a.orient;}return g13(n.add(ci2(r)));}function Ea(t,e){const n=e.config.legend,i=t.encode||{},a=W21(t,n),l=i.legend||{},r=l.name||void 0,o=l.interactive,s=l.style,u={};let f=0,d,c,m;te16.forEach(P=>t[P]?(u[P]=t[P],f=f||t[P]):0),f||b("Missing valid scale for legend.");const h=Oa(t,e.scaleType(f)),k={title:t.title!=null,scales:u,type:h,vgrad:h!=="symbol"&&a.isVertical()},S=g13(e.add(G24(null,[k]))),E={enter:{x:{value:0},y:{value:0}}},$=g13(e.add(si4(c={type:h,scale:e.scaleRef(f),count:e.objectProperty(a("tickCount")),limit:e.property(a("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return h===Wt7?(m=[Zi1(t,f,n,i.gradient),Ye7(t,n,i.labels,$)],c.count=c.count||e.signalRef(`max(2,2*floor((${Z25(a.gradientLength())})/100))`)):h===Zt9?m=[_i3(t,f,n,i.gradient,$),Ye7(t,n,i.labels,$)]:(d=ia1(t,n),m=[na1(t,n,i,$,Z25(d.columns))],c.size=La(t,e,m[0].marks)),m=[yt8({role:Se6,from:S,encode:E,marks:m,layout:d,interactive:o})],k.title&&m.push(da(t,n,i.title,S)),Mt9(yt8({role:ke6,from:S,encode:nt10(Da(a,t,n),l,mt9),marks:m,aria:a("aria"),description:a("description"),zindex:a("zindex"),name:r,interactive:o,style:s}),e);}function Oa(t,e){let n=t.type||He7;return!t.type&&za(t)===1&&(t.fill||t.stroke)&&(n=pf(e)?Wt7:de4(e)?Zt9:He7),n!==Wt7?n:de4(e)?Zt9:Wt7;}function za(t){return te16.reduce((e,n)=>e+(t[n]?1:0),0);}function Da(t,e,n){const i={enter:{},update:{}};return L28(i,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),i;}function La(t,e,n){const i=Z25(rn10("size",t,n)),a=Z25(rn10("strokeWidth",t,n)),l=Z25(wa(n[1].encode,e,ht9));return Dn5(`max(ceil(sqrt(${i})+${a}),${l})`,e);}function rn10(t,e,n){return e[t]?`scale("${e[t]}",datum)`:Xe7(t,n[0].encode);}function wa(t,e,n){return Xe7("fontSize",t)||Ji1("fontSize",e,n);}const Pa=`item.orient==="${lt10}"?-90:item.orient==="${rt12}"?90:0`;function ja(t,e){t=X1(t)?{text:t}:t;const n=W21(t,e.config.title),i=t.encode||{},a=i.group||{},l=a.name||void 0,r=a.interactive,o=a.style,s=[],u={},f=g13(e.add(G24(null,[u])));return s.push(Fa(t,n,Wa(t),f)),t.subtitle&&s.push(Ta(t,n,i.subtitle,f)),Mt9(yt8({role:Ln5,from:f,encode:Ca(n,a),marks:s,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:l,interactive:r,style:o}),e);}function Wa(t){const e=t.encode;return e&&e.title||J1({name:t.name,interactive:t.interactive,style:t.style},e);}function Ca(t,e){const n={enter:{},update:{}};return L28(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:ne15},angle:{signal:Pa},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),nt10(n,e,mt9);}function Fa(t,e,n,i){const a={value:0},l=t.text,r={enter:{opacity:a},update:{opacity:{value:1}},exit:{opacity:a}};return L28(r,{text:l,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),T19({type:tt11,role:wn10,style:Ui2,from:i,encode:r},n);}function Ta(t,e,n,i){const a={value:0},l=t.subtitle,r={enter:{opacity:a},update:{opacity:{value:1}},exit:{opacity:a}};return L28(r,{text:l,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),T19({type:tt11,role:Pn8,style:Gi2,from:i,encode:r},n);}function Aa(t,e){const n=[];t.transform&&t.transform.forEach(i=>{n.push(le12(i,e));}),t.on&&t.on.forEach(i=>{ln11(i,e,t.name);}),e.addDataPipeline(t.name,Ma(t,e,n));}function Ma(t,e,n){const i=[];let a=null,l=!1,r=!1,o,s,u,f,d;for(t.values?O23(t.values)||wt7(t.format)?(i.push(on9(e,t)),i.push(a=et12())):i.push(a=et12({$ingest:t.values,$format:t.format})):t.url?wt7(t.url)||wt7(t.format)?(i.push(on9(e,t)),i.push(a=et12())):i.push(a=et12({$request:t.url,$format:t.format})):t.source&&(a=o=p(t.source).map(c=>g13(e.getData(c).output)),i.push(null)),s=0,u=n.length;s<u;++s)f=n[s],d=f.metadata,!a&&!d.source&&i.push(a=et12()),i.push(f),d.generates&&(r=!0),d.modifies&&!r&&(l=!0),d.source?a=f:d.changes&&(a=null);return o&&(u=o.length-1,i[0]=pi4({derive:l,pulse:u?o:o[0]}),(l||u)&&i.splice(1,0,et12())),a||i.push(et12()),i.push(_23({})),i;}function et12(t){const e=G24({},t);return e.metadata={source:!0},e;}function on9(t,e){return ui4({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)});}const sn8=t=>t===J26||t===I22,Bt7=(t,e,n)=>O23(t)?Ga(t.signal,e,n):t===lt10||t===I22?e:n,D17=(t,e,n)=>O23(t)?Va(t.signal,e,n):sn8(t)?e:n,H20=(t,e,n)=>O23(t)?Ua(t.signal,e,n):sn8(t)?n:e,un11=(t,e,n)=>O23(t)?Ia(t.signal,e,n):t===I22?{value:e}:{value:n},Ba=(t,e,n)=>O23(t)?Ha(t.signal,e,n):t===rt12?{value:e}:{value:n},Va=(t,e,n)=>fn9(`${t} === '${I22}' || ${t} === '${J26}'`,e,n),Ua=(t,e,n)=>fn9(`${t} !== '${I22}' && ${t} !== '${J26}'`,e,n),Ga=(t,e,n)=>oe13(`${t} === '${lt10}' || ${t} === '${I22}'`,e,n),Ia=(t,e,n)=>oe13(`${t} === '${I22}'`,e,n),Ha=(t,e,n)=>oe13(`${t} === '${rt12}'`,e,n),fn9=(t,e,n)=>(e=e!=null?z19(e):e,n=n!=null?z19(n):n,dn10(e)&&dn10(n)?(e=e?e.signal||Z1(e.value):null,n=n?n.signal||Z1(n.value):null,{signal:`${t} ? (${e}) : (${n})`}):[J1({test:t},e)].concat(n||[])),dn10=t=>t==null||Object.keys(t).length===1,oe13=(t,e,n)=>({signal:`${t} ? (${st9(e)}) : (${st9(n)})`}),qa=(t,e,n,i,a)=>({signal:(i!=null?`${t} === '${lt10}' ? (${st9(i)}) : `:"")+(n!=null?`${t} === '${J26}' ? (${st9(n)}) : `:"")+(a!=null?`${t} === '${rt12}' ? (${st9(a)}) : `:"")+(e!=null?`${t} === '${I22}' ? (${st9(e)}) : `:"")+"(null)"}),st9=t=>O23(t)?t.signal:t==null?null:Z1(t),Xa=(t,e)=>e===0?0:O23(t)?{signal:`(${t.signal}) * ${e}`}:{value:t*e},ut10=(t,e)=>{const n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+e.signal}:t;};function ft12(t,e,n,i){let a;if(e&&g(e,t))return e[t];if(g(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":a="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":a=t[5].toLowerCase()+t.slice(6);}return i[Qt7][a];}else if(t.startsWith("label")){switch(t){case"labelColor":a="fill";break;case"labelFont":case"labelFontSize":a=t[5].toLowerCase()+t.slice(6);}return i[ht9][a];}return null;}function gn8(t){const e={};for(const n of t){if(!n)continue;for(const i in n)e[i]=1;}return Object.keys(e);}function Ka(t,e){var n=e.config,i=n.style,a=n.axis,l=e.scaleType(t.scale)==="band"&&n.axisBand,r=t.orient,o,s,u;if(O23(r)){const d=gn8([n.axisX,n.axisY]),c=gn8([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);o={};for(u of d)o[u]=D17(r,ft12(u,n.axisX,a,i),ft12(u,n.axisY,a,i));s={};for(u of c)s[u]=qa(r.signal,ft12(u,n.axisTop,a,i),ft12(u,n.axisBottom,a,i),ft12(u,n.axisLeft,a,i),ft12(u,n.axisRight,a,i));}else o=r===I22||r===J26?n.axisX:n.axisY,s=n["axis"+r[0].toUpperCase()+r.slice(1)];const f=o||s||l?J1({},a,o,s,l):a;return f;}function Ya(t,e,n,i){const a=W21(t,e),l=t.orient;let r,o;const s={enter:r={opacity:b20},update:o={opacity:B23},exit:{opacity:b20}};L28(s,{stroke:a("domainColor"),strokeCap:a("domainCap"),strokeDash:a("domainDash"),strokeDashOffset:a("domainDashOffset"),strokeWidth:a("domainWidth"),strokeOpacity:a("domainOpacity")});const u=cn10(t,0),f=cn10(t,1);return r.x=o.x=D17(l,u,b20),r.x2=o.x2=D17(l,f),r.y=o.y=H20(l,u,b20),r.y2=o.y2=H20(l,f),T19({type:ee16,role:me9,from:i,encode:s},n);}function cn10(t,e){return{scale:t.scale,range:e};}function Na(t,e,n,i,a){const l=W21(t,e),r=t.orient,o=t.gridScale,s=Bt7(r,1,-1),u=Ja(t.offset,s);let f,d,c;const m={enter:f={opacity:b20},update:c={opacity:B23},exit:d={opacity:b20}};L28(m,{stroke:l("gridColor"),strokeCap:l("gridCap"),strokeDash:l("gridDash"),strokeDashOffset:l("gridDashOffset"),strokeOpacity:l("gridOpacity"),strokeWidth:l("gridWidth")});const h={scale:t.scale,field:M19,band:a.band,extra:a.extra,offset:a.offset,round:l("tickRound")},k=D17(r,{signal:"height"},{signal:"width"}),S=o?{scale:o,range:0,mult:s,offset:u}:{value:0,offset:u},E=o?{scale:o,range:1,mult:s,offset:u}:J1(k,{mult:s,offset:u});return f.x=c.x=D17(r,h,S),f.y=c.y=H20(r,h,S),f.x2=c.x2=H20(r,E),f.y2=c.y2=D17(r,E),d.x=D17(r,h),d.y=H20(r,h),T19({type:ee16,role:ye7,key:M19,from:i,encode:m},n);}function Ja(t,e){if(!(e===1))if(!M1(t))t=O23(e)?{signal:`(${e.signal}) * (${t||0})`}:e*(t||0);else{let n=t=J1({},t);for(;n.mult!=null;)if(M1(n.mult))n=n.mult=J1({},n.mult);else return n.mult=O23(e)?{signal:`(${n.mult}) * (${e.signal})`}:n.mult*e,t;n.mult=e;}return t;}function Qa(t,e,n,i,a,l){const r=W21(t,e),o=t.orient,s=Bt7(o,-1,1);let u,f,d;const c={enter:u={opacity:b20},update:d={opacity:B23},exit:f={opacity:b20}};L28(c,{stroke:r("tickColor"),strokeCap:r("tickCap"),strokeDash:r("tickDash"),strokeDashOffset:r("tickDashOffset"),strokeOpacity:r("tickOpacity"),strokeWidth:r("tickWidth")});const m=z19(a);m.mult=s;const h={scale:t.scale,field:M19,band:l.band,extra:l.extra,offset:l.offset,round:r("tickRound")};return d.y=u.y=D17(o,b20,h),d.y2=u.y2=D17(o,m),f.x=D17(o,h),d.x=u.x=H20(o,b20,h),d.x2=u.x2=H20(o,m),f.y=H20(o,h),T19({type:ee16,role:be6,key:M19,from:i,encode:c},n);}function se13(t,e,n,i,a){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+i+","+a+")"};}function Za(t,e,n,i,a,l){const r=W21(t,e),o=t.orient,s=t.scale,u=Bt7(o,-1,1),f=Z25(r("labelFlush")),d=Z25(r("labelFlushOffset")),c=r("labelAlign"),m=r("labelBaseline");let h=f===0||!!f,k;const S=z19(a);S.mult=u,S.offset=z19(r("labelPadding")||0),S.offset.mult=u;const E={scale:s,field:M19,band:.5,offset:Ke7(l.offset,r("labelOffset"))},$=D17(o,h?se13(s,f,'"left"','"right"','"center"'):{value:"center"},Ba(o,"left","right")),P=D17(o,un11(o,"bottom","top"),h?se13(s,f,'"top"','"bottom"','"middle"'):{value:"middle"}),Y=se13(s,f,`-(${d})`,d,0);h=h&&d;const q={opacity:b20,x:D17(o,E,S),y:H20(o,E,S)},C={enter:q,update:k={opacity:B23,text:{field:Jt7},x:q.x,y:q.y,align:$,baseline:P},exit:{opacity:b20,x:q.x,y:q.y}};L28(C,{dx:!c&&h?D17(o,Y):null,dy:!m&&h?H20(o,Y):null}),L28(C,{angle:r("labelAngle"),fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontWeight:r("labelFontWeight"),fontStyle:r("labelFontStyle"),limit:r("labelLimit"),lineHeight:r("labelLineHeight")},{align:c,baseline:m});const N=r("labelBound");let V=r("labelOverlap");return V=V||N?{separation:r("labelSeparation"),method:V,order:"datum.index",bound:N?{scale:s,orient:o,tolerance:N}:null}:void 0,k.align!==$&&(k.align=ut10(k.align,$)),k.baseline!==P&&(k.baseline=ut10(k.baseline,P)),T19({type:tt11,role:pe6,style:ht9,key:M19,from:i,encode:C,overlap:V},n);}function _a(t,e,n,i){const a=W21(t,e),l=t.orient,r=Bt7(l,-1,1);let o,s;const u={enter:o={opacity:b20,anchor:z19(a("titleAnchor",null)),align:{signal:ne15}},update:s=J1({},o,{opacity:B23,text:z19(t.title)}),exit:{opacity:b20}},f={signal:`lerp(range("${t.scale}"), ${Ft6(0,1,.5)})`};return s.x=D17(l,f),s.y=H20(l,f),o.angle=D17(l,b20,Xa(r,90)),o.baseline=D17(l,un11(l,J26,I22),{value:J26}),s.angle=o.angle,s.baseline=o.baseline,L28(u,{fill:a("titleColor"),fillOpacity:a("titleOpacity"),font:a("titleFont"),fontSize:a("titleFontSize"),fontStyle:a("titleFontStyle"),fontWeight:a("titleFontWeight"),limit:a("titleLimit"),lineHeight:a("titleLineHeight")},{align:a("titleAlign"),angle:a("titleAngle"),baseline:a("titleBaseline")}),tl(a,l,u,n),u.update.align=ut10(u.update.align,o.align),u.update.angle=ut10(u.update.angle,o.angle),u.update.baseline=ut10(u.update.baseline,o.baseline),T19({type:tt11,role:xe6,style:Qt7,from:i,encode:u},n);}function tl(t,e,n,i){const a=(o,s)=>o!=null?(n.update[s]=ut10(z19(o),n.update[s]),!1):!it13(s,i),l=a(t("titleX"),"x"),r=a(t("titleY"),"y");n.enter.auto=r===l?z19(r):D17(e,z19(r),z19(l));}function el(t,e){const n=Ka(t,e),i=t.encode||{},a=i.axis||{},l=a.name||void 0,r=a.interactive,o=a.style,s=W21(t,n),u=Qi1(s),f={scale:t.scale,ticks:!!s("ticks"),labels:!!s("labels"),grid:!!s("grid"),domain:!!s("domain"),title:t.title!=null},d=g13(e.add(G24({},[f]))),c=g13(e.add(ni4({scale:e.scaleRef(t.scale),extra:e.property(u.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),m=[];let h;return f.grid&&m.push(Na(t,n,i.grid,c,u)),f.ticks&&(h=s("tickSize"),m.push(Qa(t,n,i.ticks,c,h,u))),f.labels&&(h=f.ticks?h:0,m.push(Za(t,n,i.labels,c,h,u))),f.domain&&m.push(Ya(t,n,i.domain,d)),f.title&&m.push(_a(t,n,i.title,d)),Mt9(yt8({role:he8,from:d,encode:nt10(nl(s,t),a,mt9),marks:m,aria:s("aria"),description:s("description"),zindex:s("zindex"),name:l,interactive:r,style:o}),e);}function nl(t,e){const n={enter:{},update:{}};return L28(n,{orient:t("orient"),offset:t("offset")||0,position:U23(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:`abs(span(range("${e.scale}")))`},translate:t("translate"),format:e.format,formatType:e.formatType}),n;}function hn9(t,e,n){const i=p(t.signals),a=p(t.scales);return n||i.forEach(l=>Gt6(l,e)),p(t.projections).forEach(l=>Ci2(l,e)),a.forEach(l=>$i2(l,e)),p(t.data).forEach(l=>Aa(l,e)),a.forEach(l=>Ri2(l,e)),(n||i).forEach(l=>Pe6(l,e)),p(t.axes).forEach(l=>el(l,e)),p(t.marks).forEach(l=>Mt9(l,e)),p(t.legends).forEach(l=>Ea(l,e)),t.title&&ja(t.title,e),e.parseLambdas(),e;}const il=t=>nt10({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t);function al(t,e){const n=e.config,i=g13(e.root=e.add(Dt7())),a=ll(t,n);a.forEach(u=>Gt6(u,e)),e.description=t.description||n.description,e.eventConfig=n.events,e.legends=e.objectProperty(n.legend&&n.legend.layout),e.locale=n.locale;const l=e.add(G24()),r=e.add(Fe8(ze6(il(t.encode),Ct7,$t7,t.style,e,{pulse:g13(l)}))),o=e.add(Me9({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:i,pulse:g13(r)}));e.operators.pop(),e.pushState(g13(r),g13(o),null),hn9(t,e,a),e.operators.push(o);let s=e.add(We6({mark:i,pulse:g13(o)}));return s=e.add(Ae7({pulse:g13(s)})),s=e.add(_23({pulse:g13(s)})),e.addData("root",new Q22(e,l,l,s)),e;}function bt10(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e};}function ll(t,e){const n=r=>U23(t[r],e[r]),i=[bt10("background",n("background")),bt10("autosize",vn6(n("autosize"))),bt10("padding",On5(n("padding"))),bt10("width",n("width")||0),bt10("height",n("height")||0)],a=i.reduce((r,o)=>(r[o.name]=o,r),{}),l={};return p(t.signals).forEach(r=>{g(a,r.name)?r=J1(a[r.name],r):i.push(r),l[r.name]=r;}),p(e.signals).forEach(r=>{!g(l,r.name)&&!g(a,r.name)&&i.push(r);}),i;}function ue12(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[];}function mn9(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath;}ue12.prototype=mn9.prototype={parse(t){return hn9(t,this);},fork(){return new mn9(this);},isSubscope(){return this._subid>0;},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale};},id(){return(this._subid?this._subid+":":0)+this._id++;},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(e=>{e.$ref=t.id;}),t.refs=null),t;},proxy(t){const e=t instanceof It6?g13(t):t;return this.add(yi4({value:e}));},addStream(t){return this.streams.push(t),t.id=this.id(),t;},addUpdate(t){return this.updates.push(t),t;},finish(){let t,e;this.root&&(this.root.root=!0);for(t in this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(i,a,l){let r,o;i&&(r=i.data||(i.data={}),o=r[a]||(r[a]=[]),o.push(l));}for(t in this.data){e=this.data[t],n(e.input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values");for(const i in e.index)n(e.index[i],t,"index:"+i);}return this;},pushState(t,e,n){this._encode.push(g13(this.add(_23({pulse:t})))),this._parent.push(e),this._lookup.push(n?g13(this.proxy(n)):null),this._markpath.push(-1);},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop();},parent(){return a(this._parent);},encode(){return a(this._encode);},lookup(){return a(this._lookup);},markpath(){const t=this._markpath;return++t[t.length-1];},fieldRef(t,e){if(X1(t))return ct13(t,e);t.signal||b("Unsupported field reference: "+Z1(t));const n=t.signal;let i=this.field[n];if(!i){const a={name:this.signalRef(n)};e&&(a.as=e),this.field[n]=i=g13(this.add(ri4(a)));}return i;},compareRef(t){let e=!1;const n=l=>O23(l)?(e=!0,this.signalRef(l.signal)):Xn7(l)?(e=!0,this.exprRef(l.expr)):l,i=p(t.field).map(n),a=p(t.order).map(n);return e?g13(this.add(Ce7({fields:i,orders:a}))):Le6(i,a);},keyRef(t,e){let n=!1;const i=l=>O23(l)?(n=!0,g13(a[l.signal])):l,a=this.signals;return t=p(t).map(i),n?g13(this.add(oi4({fields:t,flat:e}))):Gn6(t,e);},sortRef(t){if(!t)return t;const e=Lt8(t.op,t.field),n=t.order||In5;return n.signal?g13(this.add(Ce7({fields:e,orders:this.signalRef(n.signal)}))):Le6(e,n);},event(t,e){const n=t+":"+e;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:t,type:e}),this.events[n]=i;}return this.events[n];},hasOwnSignal(t){return g(this.signals,t);},addSignal(t,e){this.hasOwnSignal(t)&&b("Duplicate signal name: "+Z1(t));const n=e instanceof It6?e:this.add(Dt7(e));return this.signals[t]=n;},getSignal(t){return this.signals[t]||b("Unrecognized signal name: "+Z1(t)),this.signals[t];},signalRef(t){return this.signals[t]?g13(this.signals[t]):(g(this.lambdas,t)||(this.lambdas[t]=this.add(Dt7(null))),g13(this.lambdas[t]));},parseLambdas(){const t=Object.keys(this.lambdas);for(let e=0,n=t.length;e<n;++e){const i=t[e],a=Dn5(i,this),l=this.lambdas[i];l.params=a.$params,l.update=a.$expr;}},property(t){return t&&t.signal?this.signalRef(t.signal):t;},objectProperty(t){return!t||!M1(t)?t:this.signalRef(t.signal||fe10(t));},exprRef(t,e){const n={expr:Dn5(t,this)};return e&&(n.expr.$name=e),g13(this.add(ai4(n)));},addBinding(t,e){this.bindings||b("Nested signals do not support binding: "+Z1(t)),this.bindings.push(J1({signal:t},e));},addScaleProj(t,e){g(this.scales,t)&&b("Duplicate scale or projection name: "+Z1(t)),this.scales[t]=this.add(e);},addScale(t,e){this.addScaleProj(t,bi3(e));},addProjection(t,e){this.addScaleProj(t,mi3(e));},getScale(t){return this.scales[t]||b("Unrecognized scale name: "+Z1(t)),this.scales[t];},scaleRef(t){return g13(this.getScale(t));},scaleType(t){return this.getScale(t).params.type;},projectionRef(t){return this.scaleRef(t);},projectionType(t){return this.scaleType(t);},addData(t,e){return g(this.data,t)&&b("Duplicate data set name: "+Z1(t)),this.data[t]=e;},getData(t){return this.data[t]||b("Undefined data set name: "+Z1(t)),this.data[t];},addDataPipeline(t,e){return g(this.data,t)&&b("Duplicate data set name: "+Z1(t)),this.addData(t,Q22.fromEntries(this,e));}};function fe10(t){return(w1(t)?rl:ol)(t);}function rl(t){const e=t.length;let n="[";for(let i=0;i<e;++i){const a=t[i];n+=(i>0?",":"")+(M1(a)?a.signal||fe10(a):Z1(a));}return n+"]";}function ol(t){let e="{",n=0,i,a;for(i in t)a=t[i],e+=(++n>1?",":"")+Z1(i)+":"+(M1(a)?a.signal||fe10(a):Z1(a));return e+"}";}function yn7(){const t="sans-serif",i="#4c78a8",a="#000",l="#888",r="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:a},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:a,font:t,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:a,font:t,fontSize:10},"guide-title":{fill:a,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:a,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:a,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:r},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:l,grid:!1,gridWidth:1,gridColor:r,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:l,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:r,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:l,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}};}function sl(t,e,n){return M1(t)||b("Input Vega specification must be an object."),e=rn(yn7(),e,t.config),al(t,new ue12(e,n)).toRuntime();}var f13="5.28.0";J1(X9,mod,mod2,mod3,mod4,mod5,mod7,mod6,mod8,mod9,mod10,mod11);const __default=null;const mod12=function(){return{default:null,Dataflow:ct3,EventStream:Y6,MultiPulse:H4,Operator:g4,Parameters:U7,Pulse:y5,Transform:dt2,changeset:I8,definition:he1,ingest:V4,isTuple:Et,transform:pt1,transforms:X9,tupleid:d4,interpolate:oe6,interpolateColors:ie5,interpolateRange:wf,quantizeInterpolator:Mf,scale:i1,scheme:me4,projection:s3,View:ne14,defaultLocale:R6,formatLocale:l3,locale:lt1,resetDefaultLocale:dt1,timeFormatLocale:d2,expressionFunction:s7,parse:sl,runtimeContext:tt9,codegenExpression:I01,parseExpression:L0,parseSelector:v18,version:f13,bandwidthNRD:Z7,bin:pe1,bootstrapCI:de1,cumulativeLogNormal:$4,cumulativeNormal:z10,cumulativeUniform:ne5,densityLogNormal:V5,densityNormal:H5,densityUniform:ee4,dotbin:me1,quantileLogNormal:_9,quantileNormal:P6,quantileUniform:te4,quantiles:K7,quartiles:W8,random:N7,randomInteger:Ne1,randomKDE:ye1,randomLCG:be1,randomLogNormal:Ye1,randomMixture:Ae1,randomNormal:J6,randomUniform:Le,regressionConstant:re4,regressionExp:Se1,regressionLinear:oe3,regressionLoess:Re1,regressionLog:Fe1,regressionPoly:Ie1,regressionPow:ke1,regressionQuad:le2,sampleCurve:Ue1,sampleLogNormal:O7,sampleNormal:j10,sampleUniform:x7,setRandom:Me1,DATE:g1,DAY:l2,DAYOFYEAR:U5,HOURS:M3,MILLISECONDS:Y5,MINUTES:T2,MONTH:f2,QUARTER:D3,SECONDS:y4,TIME_UNITS:Z5,WEEK:a2,YEAR:s,dayofyear:Wt,timeBin:ue1,timeFloor:Bt,timeInterval:X6,timeOffset:Zt,timeSequence:te1,timeUnitSpecifier:xt,timeUnits:J4,utcFloor:Kt,utcInterval:Q4,utcOffset:Jt,utcSequence:ee1,utcdayofyear:At,utcweek:jt,week:Rt,format:P5,formats:j8,inferType:xr,inferTypes:wr,loader:Dn1,read:Un1,responseType:_n1,typeParsers:O6,path:L11,Bounds:E13,CanvasHandler:gt2,CanvasRenderer:Lt4,Gradient:Cr1,GroupItem:Ce3,Handler:K11,HybridHandler:cn5,HybridRenderer:ue7,Item:Me5,Marks:$8,RenderType:ta,Renderer:P12,ResourceLoader:Re4,SVGHandler:en5,SVGRenderer:le6,SVGStringRenderer:un6,Scenegraph:hi2,boundClip:ra,boundContext:xt4,boundItem:Ye3,boundMark:si2,boundStroke:it4,domChild:w9,domClear:L16,domCreate:F13,domFind:Xe3,font:Qt3,fontFamily:zt3,fontSize:q15,intersect:na,intersectBoxLine:ft5,intersectPath:me5,intersectPoint:Oe,intersectRule:jn3,lineHeight:X14,markup:ln6,multiLineOffset:uo,pathCurves:_e2,pathEqual:Xi,pathParse:yt1,pathRectangle:mn4,pathRender:Dt2,pathSymbols:Ln1,pathTrail:On1,point:Je2,renderModule:ea,resetSVGClipId:In2,resetSVGDefIds:aa,sceneEqual:dn5,sceneFromJSON:ai2,scenePickVisit:Ut2,sceneToJSON:oi2,sceneVisit:O11,sceneZOrder:$e4,serializeXML:Li,setHybridRendererOptions:Zo,textMetrics:Y11,Debug:4,Error:1,Info:3,None:0,Warn:2,accessor:f,accessorFields:R1,accessorName:H1,array:p,ascending:P1,clampRange:bn,compare:Mn,constant:On,debounce:Dn,error:b,extend:J1,extent:Nn,extentIndex:zn,falsy:nn,fastmap:Sn,field:z1,flush:Ln,hasOwnProperty:g,id:k1,identity:A1,inherits:Pn,inrange:Rn,isArray:w1,isBoolean:In,isDate:K1,isFunction:O1,isIterable:Cn,isNumber:V,isObject:M1,isRegExp:$n,isString:X1,key:qn,lerp:Fn,logger:en,lruCache:Un,merge:Bn,mergeConfig:rn,one:v,pad:Gn,panLinear:un,panLog:cn,panPow:sn,panSymlog:ln,peek:a,quarter:pn,repeat:m1,span:Wn,splitAccessPath:N1,stringValue:Z1,toBoolean:xn,toDate:Kn,toNumber:L2,toSet:Xn,toString:Vn,truncate:Zn,truthy:_1,utcquarter:mn,visitArray:Hn,writeConfig:S1,zero:y1,zoomLinear:fn,zoomLog:gn,zoomPow:an,zoomSymlog:hn};}();function g14(e,t,n){let a;t.x2&&(t.x?(n&&e.x>e.x2&&(a=e.x,e.x=e.x2,e.x2=a),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(a=e.y,e.y=e.y2,e.y2=a),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2);}var m10={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},x17={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},M20={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const y19=Array.prototype.slice,u8=(e,t,n)=>{const a=n?n(t[0]):t[0];return a[e].apply(a,y19.call(t,1));},w21=(e,t,n,a,r,o,s)=>new Date(e,t||0,n??1,a||0,r||0,o||0,s||0);var D18={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:w21,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return u8("join",arguments);},indexof:function(){return u8("indexOf",arguments);},lastindexof:function(){return u8("lastIndexOf",arguments);},slice:function(){return u8("slice",arguments);},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return u8("substring",arguments,String);},split:function(){return u8("split",arguments,String);},replace:function(){return u8("replace",arguments,String);},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const E24=["view","item","group","xy","x","y"],h12=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&h12.add(setImmediate);const b21={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:m10[n]||e.params["$"+n];},MemberExpression:(e,t)=>{const n=!t.computed,a=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),h12.has(a[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return;}return a[r];},CallExpression:(e,t)=>{const n=t.arguments;let a=t.callee.name;return a.startsWith("_")&&(a=a.slice(1)),a==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[a]||D18[a]).apply(e.fn,n.map(e));},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>x17[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>M20[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,a)=>{e.memberDepth+=1;const r=e(a.key);return e.memberDepth-=1,h12.has(e(a.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(a.value),n;},{})};function c6(e,t,n,a,r,o){const s=i=>b21[i.type](s,i);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=a,s.event=r,s.item=o,E24.forEach(i=>s.fn[i]=function(){return r.vega[i](...arguments);}),s(e);}var v19={operator(e,t){const n=t.ast,a=e.functions;return r=>c6(n,a,r);},parameter(e,t){const n=t.ast,a=e.functions;return(r,o)=>c6(n,a,o,r);},event(e,t){const n=t.ast,a=e.functions;return r=>c6(n,a,void 0,void 0,r);},handler(e,t){const n=t.ast,a=e.functions;return(r,o)=>{const s=o.item&&o.item.datum;return c6(n,a,r,s,o);};},encode(e,t){const{marktype:n,channels:a}=t,r=e.functions,o=n==="group"||n==="image"||n==="rect";return(s,i)=>{const d=s.datum;let f=0,l;for(const p in a)l=c6(a[p].ast,r,i,d,void 0,s),s[p]!==l&&(s[p]=l,f=1);return n!=="rule"&&g14(s,a,o),f;};}};const jf1="vega-lite",Uf='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',Bf1="5.16.3",Wf=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],Hf="https://vega.github.io/vega-lite/",qf1="Vega-Lite is a concise high-level language for interactive visualization.",Gf1=["vega","chart","visualization"],Vf="build/vega-lite.js",Xf="build/vega-lite.min.js",Yf="build/vega-lite.min.js",Kf="build/src/index",Qf1="build/src/index.d.ts",Jf={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},Zf=["bin","build","src","vega-lite*","tsconfig.json"],ed={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",jest:"NODE_OPTIONS=--experimental-vm-modules npx jest",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk --experimental-vm-modules ./node_modules/.bin/jest --runInBand test","test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"NODE_OPTIONS=--experimental-vm-modules TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},td={type:"git",url:"https://github.com/vega/vega-lite.git"},nd="BSD-3-Clause",id={url:"https://github.com/vega/vega-lite/issues"},rd={"@babel/core":"^7.22.10","@babel/plugin-proposal-class-properties":"^7.18.6","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-alias":"^5.0.0","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^25.0.4","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.2.1","@rollup/plugin-terser":"^0.4.3","@types/chai":"^4.3.5","@types/d3":"^7.4.0","@types/jest":"^29.5.4","@types/pako":"^2.0.0","@typescript-eslint/eslint-plugin":"^6.4.1","@typescript-eslint/parser":"^6.4.1",ajv:"^8.12.0","ajv-formats":"^2.1.1",chai:"^4.3.7",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.0.0",d3:"^7.8.5","del-cli":"^5.0.0",eslint:"^8.47.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.8.0",jest:"^29.6.3","jest-dev-server":"^9.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.0.2",puppeteer:"^15.0.0","release-it":"^16.1.5",rollup:"^3.28.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3",serve:"^14.2.1",terser:"^5.19.2","ts-jest":"^29.1.1","ts-json-schema-generator":"^1.3.0",typescript:"~5.2.2","vega-cli":"^5.25.0","vega-datasets":"^2.7.0","vega-embed":"^6.22.2","vega-tooltip":"^0.33.0","yaml-front-matter":"^4.1.1"},sd={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},od={vega:"^5.24.0"},ad={node:">=18"};var cd={name:jf1,author:Uf,version:Bf1,collaborators:Wf,homepage:Hf,description:qf1,keywords:Gf1,main:Vf,unpkg:Xf,jsdelivr:Yf,module:Kf,types:Qf1,bin:Jf,files:Zf,scripts:ed,repository:td,license:nd,bugs:id,devDependencies:rd,dependencies:sd,peerDependencies:od,engines:ad};function Ar1(e){return!!e.or;}function Or4(e){return!!e.and;}function Pr4(e){return!!e.not;}function bi4(e,t){if(Pr4(e))bi4(e.not,t);else if(Or4(e))for(const n of e.and)bi4(n,t);else if(Ar1(e))for(const n of e.or)bi4(n,t);else t(e);}function fn10(e,t){return Pr4(e)?{not:fn10(e.not,t)}:Or4(e)?{and:e.and.map(n=>fn10(n,t))}:Ar1(e)?{or:e.or.map(n=>fn10(n,t))}:t(e);}const C26=structuredClone;function Zo1(e){throw new Error(e);}function dn11(e,t){const n={};for(const i of t)g(e,i)&&(n[i]=e[i]);return n;}function fe11(e,t){const n={...e};for(const i of t)delete n[i];return n;}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>L29(e)).join(",")})`;};function O24(e){if(V(e))return e;const t=X1(e)?e:L29(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n;}return n;}function zr3(e){return e===!1||e===null;}function P24(e,t){return e.includes(t);}function Lt9(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1;}function Rr2(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0;}function ea2(e,...t){for(const n of t)ud(e,n??{});return e;}function ud(e,t){for(const n of b22(t))S1(e,n,t[n],!0);}function je9(e,t){const n=[],i={};let r;for(const s of e){if(r=t(s),r in i)continue;i[r]=1,n.push(s);}return n;}function ld(e,t){const n=b22(e),i=b22(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0;}function ta2(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0;}function Ir3(e,t){for(const n of e)if(t.has(n))return!0;return!1;}function Lr3(e){const t=new Set;for(const n of e){const i=N1(n),r=i.map((o,a)=>a===0?o:`[${o}]`),s=r.map((o,a)=>r.slice(0,a+1).join(""));for(const o of s)t.add(o);}return t;}function Mr3(e,t){return e===void 0||t===void 0?!0:Ir3(Lr3(e),Lr3(t));}function I23(e){return b22(e).length===0;}const b22=Object.keys,ne16=Object.values,bt11=Object.entries;function Un7(e){return e===!0||e===!1;}function H21(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t;}function Bn7(e,t){return Pr4(e)?`!(${Bn7(e.not,t)})`:Or4(e)?`(${e.and.map(n=>Bn7(n,t)).join(") && (")})`:Ar1(e)?`(${e.or.map(n=>Bn7(n,t)).join(") || (")})`:t(e);}function xi4(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&xi4(e[n],t)&&delete e[n],I23(e);}function Wn7(e){return e.charAt(0).toUpperCase()+e.substr(1);}function Dr3(e,t="datum"){const n=N1(e),i=[];for(let r=1;r<=n.length;r++){const s=`[${n.slice(0,r).map(Z1).join("][")}]`;i.push(`${t}${s}`);}return i.join(" && ");}function na2(e,t="datum"){return`${t}[${Z1(N1(e).join("."))}]`;}function fd(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1");}function $e9(e){return`${N1(e).map(fd).join("\\.")}`;}function Mt10(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n);}function jr3(e){return`${N1(e).join(".")}`;}function pn9(e){return e?N1(e).length:0;}function X27(...e){for(const t of e)if(t!==void 0)return t;return;}let ia2=42;function ra2(e){const t=++ia2;return e?String(e)+t:t;}function dd(){ia2=42;}function sa1(e){return oa2(e)?e:`__${e}`;}function oa2(e){return e.startsWith("__");}function Hn7(e){return e===void 0?void 0:(e%360+360)%360;}function Si3(e){return V(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e));}const aa2=Object.getPrototypeOf(structuredClone({}));function be7(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!be7(e[i],t[i]))return!1;return!0;}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!be7(i[1],t.get(i[0])))return!1;return!0;}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0;}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0;}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==aa2.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==aa2.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!be7(e[s],t[s]))return!1;}return!0;}return e!==e&&t!==t;}function L29(e){const t=[];return function n(i){if(i&&i.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);let r,s;if(Array.isArray(i)){for(s="[",r=0;r<i.length;r++)r&&(s+=","),s+=n(i[r])||"null";return s+"]";}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const o=t.push(i)-1,a=Object.keys(i).sort();for(s="",r=0;r<a.length;r++){const c=a[r],u=n(i[c]);if(!u)continue;s&&(s+=","),s+=JSON.stringify(c)+":"+u;}return t.splice(o,1),`{${s}}`;}(e);}const it14="row",rt13="column",wi3="facet",q28="x",Q23="y",Ce8="x2",Ue8="y2",xt9="xOffset",gn9="yOffset",Fe9="radius",st10="radius2",ve7="theta",ot13="theta2",Ne9="latitude",Te8="longitude",Ae8="latitude2",Ee6="longitude2",de8="color",Be7="fill",We7="stroke",pe7="shape",at15="size",Dt8="angle",ct14="opacity",St9="fillOpacity",wt8="strokeOpacity",$t8="strokeWidth",vt8="strokeDash",qn8="text",mn10="order",Gn7="detail",$i3="key",jt9="tooltip",vi4="href",Ei3="url",_i4="description",pd={x:1,y:1,x2:1,y2:1},ca1={theta:1,theta2:1,radius:1,radius2:1};function ua1(e){return e in ca1;}const Ur2={longitude:1,longitude2:1,latitude:1,latitude2:1};function la1(e){switch(e){case Ne9:return"y";case Ae8:return"y2";case Te8:return"x";case Ee6:return"x2";}}function fa1(e){return e in Ur2;}const gd=b22(Ur2),Br3={...pd,...ca1,...Ur2,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function hn10(e){return e===de8||e===Be7||e===We7;}const da1={row:1,column:1,facet:1},_e6=b22(da1),Wr4={...Br3,...da1},md=b22(Wr4),{order:LS,detail:MS,tooltip:DS,...hd}=Wr4,{row:jS,column:US,facet:BS,...yd}=hd;function bd(e){return!!yd[e];}function pa1(e){return!!Wr4[e];}const xd=[Ce8,Ue8,Ae8,Ee6,ot13,st10];function ga1(e){const t=Ut8(e);return t!==e;}function Ut8(e){switch(e){case Ce8:return q28;case Ue8:return Q23;case Ae8:return Ne9;case Ee6:return Te8;case ot13:return ve7;case st10:return Fe9;}return e;}function Et8(e){if(ua1(e))switch(e){case ve7:return"startAngle";case ot13:return"endAngle";case Fe9:return"outerRadius";case st10:return"innerRadius";}return e;}function He8(e){switch(e){case q28:return Ce8;case Q23:return Ue8;case Ne9:return Ae8;case Te8:return Ee6;case ve7:return ot13;case Fe9:return st10;}return;}function ge6(e){switch(e){case q28:case Ce8:return"width";case Q23:case Ue8:return"height";}return;}function ma1(e){switch(e){case q28:return"xOffset";case Q23:return"yOffset";case Ce8:return"x2Offset";case Ue8:return"y2Offset";case ve7:return"thetaOffset";case Fe9:return"radiusOffset";case ot13:return"theta2Offset";case st10:return"radius2Offset";}return;}function Hr3(e){switch(e){case q28:return"xOffset";case Q23:return"yOffset";}return;}function Sd(e){switch(e){case"xOffset":return"x";case"yOffset":return"y";}}const wd=b22(Br3),{x:WS,y:HS,x2:qS,y2:GS,xOffset:VS,yOffset:XS,latitude:YS,longitude:KS,latitude2:QS,longitude2:JS,theta:ZS,theta2:ew,radius:tw,radius2:nw,...qr4}=Br3,$d=b22(qr4),Gr3={x:1,y:1},qe8=b22(Gr3);function Y28(e){return e in Gr3;}const Vr4={theta:1,radius:1},vd=b22(Vr4);function ki3(e){return e==="width"?q28:Q23;}const ha1={xOffset:1,yOffset:1};function Vn6(e){return e in ha1;}const{text:iw,tooltip:rw,href:sw,url:ow,description:aw,detail:cw,key:uw,order:lw,...ya1}=qr4,Ed=b22(ya1);function _d(e){return!!qr4[e];}function kd(e){switch(e){case de8:case Be7:case We7:case at15:case pe7:case ct14:case $t8:case vt8:return!0;case St9:case wt8:case Dt8:return!1;}}const ba1={...Gr3,...Vr4,...ha1,...ya1},Ci3=b22(ba1);function ut11(e){return!!ba1[e];}function Cd(e,t){return Nd(e)[t];}const xa1={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:fw,...Fd}=xa1;function Nd(e){switch(e){case de8:case Be7:case We7:case _i4:case Gn7:case $i3:case jt9:case vi4:case mn10:case ct14:case St9:case wt8:case $t8:case wi3:case it14:case rt13:return xa1;case q28:case Q23:case xt9:case gn9:case Ne9:case Te8:return Fd;case Ce8:case Ue8:case Ae8:case Ee6:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case at15:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case vt8:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case pe7:return{point:"always",geoshape:"always"};case qn8:return{text:"always"};case Dt8:return{point:"always",square:"always",text:"always"};case Ei3:return{image:"always"};case ve7:return{text:"always",arc:"always"};case Fe9:return{text:"always",arc:"always"};case ot13:case st10:return{arc:"always"};}}function Xr4(e){switch(e){case q28:case Q23:case ve7:case Fe9:case xt9:case gn9:case at15:case Dt8:case $t8:case ct14:case St9:case wt8:case Ce8:case Ue8:case ot13:case st10:return;case wi3:case it14:case rt13:case pe7:case vt8:case qn8:case jt9:case vi4:case Ei3:case _i4:return"discrete";case de8:case Be7:case We7:return"flexible";case Ne9:case Te8:case Ae8:case Ee6:case Gn7:case $i3:case mn10:return;}}const Td={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Ad={count:1,min:1,max:1};function lt11(e){return!!e&&!!e.argmin;}function _t7(e){return!!e&&!!e.argmax;}function Yr4(e){return X1(e)&&!!Td[e];}const Od=new Set(["count","valid","missing","distinct"]);function Sa1(e){return X1(e)&&Od.has(e);}function Pd(e){return X1(e)&&P24(["min","max"],e);}const zd=new Set(["count","sum","distinct","valid","missing"]),Rd=new Set(["mean","average","median","q1","q3","min","max"]);function wa1(e){return In(e)&&(e=Vi3(e,void 0)),"bin"+b22(e).map(t=>Fi2(e[t])?H21(`_${t}_${bt11(e[t])}`):H21(`_${t}_${e[t]}`)).join("");}function j25(e){return e===!0||Bt8(e)&&!e.binned;}function ie13(e){return e==="binned"||Bt8(e)&&e.binned===!0;}function Bt8(e){return M1(e);}function Fi2(e){return e?.param;}function $a1(e){switch(e){case it14:case rt13:case at15:case de8:case Be7:case We7:case $t8:case ct14:case St9:case wt8:case pe7:return 6;case vt8:return 4;default:return 10;}}function Xn8(e){return!!e?.expr;}function me10(e){const t=b22(e||{}),n={};for(const i of t)n[i]=xe7(e[i]);return n;}function va1(e){const{anchor:t,frame:n,offset:i,orient:r,angle:s,limit:o,color:a,subtitleColor:c,subtitleFont:u,subtitleFontSize:l,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:p,subtitlePadding:g,...m}=e,h={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},$={...c?{subtitleColor:c}:{},...u?{subtitleFont:u}:{},...l?{subtitleFontSize:l}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...p?{subtitleLineHeight:p}:{},...g?{subtitlePadding:g}:{}},k=dn11(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:h,subtitleMarkConfig:k,nonMarkTitleProperties:y,subtitle:$};}function kt10(e){return X1(e)||w1(e)&&X1(e[0]);}function v20(e){return!!e?.signal;}function Ct8(e){return!!e.step;}function Id(e){return w1(e)?!1:"fields"in e&&!("data"in e);}function Ld(e){return w1(e)?!1:"fields"in e&&"data"in e;}function ft13(e){return w1(e)?!1:"field"in e&&"data"in e;}const Md={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Dd=b22(Md),jd={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Kr4=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function Ea1(e){const t=w1(e.condition)?e.condition.map(_a1):_a1(e.condition);return{...xe7(e),condition:t};}function xe7(e){if(Xn8(e)){const{expr:t,...n}=e;return{signal:t,...n};}return e;}function _a1(e){if(Xn8(e)){const{expr:t,...n}=e;return{signal:t,...n};}return e;}function W22(e){if(Xn8(e)){const{expr:t,...n}=e;return{signal:t,...n};}return v20(e)?e:e!==void 0?{value:e}:void 0;}function Ud(e){return v20(e)?e.signal:Z1(e);}function ka1(e){return v20(e)?e.signal:Z1(e.value);}function Oe4(e){return v20(e)?e.signal:e==null?null:Z1(e);}function Bd(e,t,n){for(const i of n){const r=dt10(i,t.markDef,t.config);r!==void 0&&(e[i]=W22(r));}return e;}function Ca1(e){return[].concat(e.type,e.style??[]);}function z20(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:s}=i;return r&&t[r]!==void 0?t[r]:t[e]!==void 0?t[e]:s&&(!r||r===e)?void 0:dt10(e,t,n,i);}function dt10(e,t,n,{vgChannel:i}={}){return X27(i?Ni3(e,t,n.style):void 0,Ni3(e,t,n.style),i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e]);}function Ni3(e,t,n){return Fa1(e,Ca1(t),n);}function Fa1(e,t,n){t=p(t);let i;for(const r of t){const s=n[r];s&&s[e]!==void 0&&(i=s[e]);}return i;}function Na1(e,t){return p(e).reduce((n,i)=>(n.field.push(w22(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]});}function Ta1(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(be7(r,i))return;n.push(i);}),n;}function Aa1(e,t){return be7(e,t)||!t?e:e?[...p(e),...p(t)].join(", "):t;}function Oa1(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((kt10(n)||v20(n))&&(kt10(i)||v20(i)))return{explicit:e.explicit,value:Aa1(n,i)};if(kt10(n)||v20(n))return{explicit:e.explicit,value:n};if(kt10(i)||v20(i))return{explicit:e.explicit,value:i};if(!kt10(n)&&!v20(n)&&!kt10(i)&&!v20(i))return{explicit:e.explicit,value:Ta1(n,i)};throw new Error("It should never reach here");}function Qr4(e){return`Invalid specification ${L29(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`;}const Wd='Autosize "fit" only works for single views and layered views.';function Pa1(e){const t=e=="width"?"Width":"Height";return`${t} "container" only works for single views and layered views.`;}function za1(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`;}function Ra1(e){return e?`Dropping "fit-${e}" because spec has discrete ${ge6(e)}.`:'Dropping "fit" because spec has discrete size.';}function Jr4(e){return`Unknown field for ${e}. Cannot calculate view size.`;}function Ia1(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`;}function Hd(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`;}function qd(e){return`The "nearest" transform is not supported for ${e} marks.`;}function La1(e){return`Selection not supported for ${e} yet.`;}function Gd(e){return`Cannot find a selection named "${e}".`;}const Vd="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Xd="Legend bindings are only supported for selections over an individual field or encoding channel.";function Yd(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`;}function Kd(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`;}const Qd="The same selection must be used to override scale domains in a layered view.",Jd='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Zd(e){return`Unknown repeated value "${e}".`;}function Ma1(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`;}const ep="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function tp(e){return`Unrecognized parse "${e}".`;}function Da1(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`;}const np="Attempt to add the same child twice.";function ip(e){return`Ignoring an invalid transform: ${L29(e)}.`;}const rp='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function ja1(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`;}function sp(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${L29(t)} is overridden by a child projection ${L29(n)}.`;}const op="Arc marks uses theta channel rather than angle, replacing angle with theta.";function ap(e){return`${e}Offset dropped because ${e} is continuous`;}function cp(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${L29(n)}}.`;}function Ua1(e){return`Invalid field type "${e}".`;}function up(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`;}function lp(e){return`Invalid aggregation operator "${e}".`;}function Ba1(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`;}function fp(e){return`Position range does not support relative band size for ${e}.`;}function Zr4(e,t){return`Dropping ${L29(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`;}const dp="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Ti3(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`;}function pp(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`;}function gp(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`;}function mp(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`;}function hp(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`;}function es1(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`;}function yp(e){return`The ${e} for range marks cannot be an expression`;}function bp(e,t){const n=e&&t?"x2 and y2":e?"x2":"y2";return`Line mark is for continuous lines and thus cannot be used with ${n}. We will use the rule mark (line segments) instead.`;}function xp(e,t){return`Specified orient "${e}" overridden with "${t}".`;}function Sp(e){return`Cannot use the scale property "${e}" with non-color channel.`;}function wp(e){return`Cannot use the relative band size with ${e} scale.`;}function $p(e){return`Using unaggregated domain with raw field has no effect (${L29(e)}).`;}function vp(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`;}function Ep(e){return`Unaggregated domain is currently unsupported for log scale (${L29(e)}).`;}function _p(e){return`Cannot apply size to non-oriented mark "${e}".`;}function kp(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`;}function Cp(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`;}function Wa1(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`;}function Ha1(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`;}function Fp(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${L29(n)} and ${L29(i)}). Using ${L29(n)}.`;}function Np(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${L29(n)} and ${L29(i)}). Using the union of the two domains.`;}function Tp(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`;}function Ap(e){return`Dropping sort property ${L29(e)} as unioned domains only support boolean or op "count", "min", and "max".`;}const qa1="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Op="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Pp="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",zp="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Rp(e){return`Cannot stack "${e}" if there is already "${e}2".`;}function Ip(e){return`Cannot stack non-linear scale (${e}).`;}function Lp(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`;}function Ai3(e,t){return`Invalid ${e}: ${L29(t)}.`;}function Mp(e){return`Dropping day from datetime ${L29(e)} as day cannot be combined with other units.`;}function Dp(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`;}function jp(e,t,n){return`${e} is not usually used with ${t} for ${n}.`;}function Up(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`;}function Ga1(e){return`1D error band does not support ${e}.`;}function Va1(e){return`Channel ${e} is required for "binned" bin.`;}function Bp(e){return`Channel ${e} should not be used with "binned" bin.`;}function Wp(e){return`Domain for ${e} is required for threshold scale.`;}const Xa1=en(2);let yn8=Xa1;function Hp(e){return yn8=e,yn8;}function qp(){return yn8=Xa1,yn8;}function x18(...e){yn8.warn(...e);}function Gp(...e){yn8.debug(...e);}function Wt8(e){if(e&&M1(e)){for(const t of ns1)if(t in e)return!0;}return!1;}const Ya1=["january","february","march","april","may","june","july","august","september","october","november","december"],Vp=Ya1.map(e=>e.substr(0,3)),Ka1=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Xp=Ka1.map(e=>e.substr(0,3));function Yp(e){if(Si3(e)&&(e=+e),V(e))return e>4&&x18(Ai3("quarter",e)),e-1;throw new Error(Ai3("quarter",e));}function Kp(e){if(Si3(e)&&(e=+e),V(e))return e-1;{const t=e.toLowerCase(),n=Ya1.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Vp.indexOf(i);if(r!==-1)return r;throw new Error(Ai3("month",e));}}function Qp(e){if(Si3(e)&&(e=+e),V(e))return e%7;{const t=e.toLowerCase(),n=Ka1.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Xp.indexOf(i);if(r!==-1)return r;throw new Error(Ai3("day",e));}}function ts1(e,t){const n=[];if(t&&e.day!==void 0&&b22(e).length>1&&(x18(Mp(e)),e=C26(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?Kp(e.month):e.month;n.push(i);}else if(e.quarter!==void 0){const i=t?Yp(e.quarter):e.quarter;n.push(V(i)?i*3:`${i}*3`);}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?Qp(e.day):e.day;n.push(V(i)?i+1:`${i}+1`);}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r=="undefined"?0:r);}return n;}function Ht7(e){const t=ts1(e,!0),n=t.join(", ");return e.utc?`utc(${n})`:`datetime(${n})`;}function Jp(e){const t=ts1(e,!1),n=t.join(", ");return e.utc?`utc(${n})`:`datetime(${n})`;}function Zp(e){const t=ts1(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t);}const Qa1={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},ns1=b22(Qa1);function eg(e){return!!Qa1[e];}function qt9(e){return M1(e)?e.binned:Ja1(e);}function Ja1(e){return e&&e.startsWith("binned");}function is1(e){return e.startsWith("utc");}function tg(e){return e.substring(3);}const ng={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Oi3(e){return ns1.filter(t=>ec(e,t));}function Za1(e){const t=Oi3(e);return t[t.length-1];}function ec(e,t){const n=e.indexOf(t);return n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"?!1:!(n>0&&t==="year"&&e.charAt(n-1)==="f");}function ig(e,t,{end:n}={end:!1}){const i=Dr3(t),r=is1(e)?"utc":"";function s(c){return c==="quarter"?`(${r}quarter(${i})-1)`:`${r}${c}(${i})`;}let o;const a={};for(const c of ns1)ec(e,c)&&(a[c]=s(c),o=c);return n&&(a[o]+="+1"),Jp(a);}function tc(e){if(!e)return;const t=Oi3(e);return`timeUnitSpecifier(${L29(t)}, ${L29(ng)})`;}function rg(e,t,n){if(!e)return;const i=tc(e),r=n||is1(e);return`${r?"utc":"time"}Format(${t}, ${i})`;}function J27(e){if(!e)return;let t;return X1(e)?Ja1(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:M1(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),is1(t.unit)&&(t.utc=!0,t.unit=tg(t.unit)),t;}function sg(e){const{utc:t,...n}=J27(e);return n.unit?(t?"utc":"")+b22(n).map(i=>H21(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):(t?"utc":"")+"timeunit"+b22(n).map(i=>H21(`_${i}_${n[i]}`)).join("");}function nc(e,t=n=>n){const n=J27(e),i=Za1(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=ic(i,n.step),a={...r,[o]:+r[o]+s};return`${t(Ht7(a))} - ${t(Ht7(r))}`;}return;}const og={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function ag(e){return!!og[e];}function ic(e,t=1){if(ag(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7};}}function cg(e){return e?.param;}function rs1(e){return!!e?.field&&e.equal!==void 0;}function ss1(e){return!!e?.field&&e.lt!==void 0;}function os1(e){return!!e?.field&&e.lte!==void 0;}function as1(e){return!!e?.field&&e.gt!==void 0;}function cs1(e){return!!e?.field&&e.gte!==void 0;}function us1(e){if(e?.field){if(w1(e.range)&&e.range.length===2)return!0;if(v20(e.range))return!0;}return!1;}function ls1(e){return!!e?.field&&(w1(e.oneOf)||w1(e.in));}function ug(e){return!!e?.field&&e.valid!==void 0;}function rc(e){return ls1(e)||rs1(e)||us1(e)||ss1(e)||as1(e)||os1(e)||cs1(e);}function Ge8(e,t){return Xi3(e,{timeUnit:t,wrapTime:!0});}function lg(e,t){return e.map(n=>Ge8(n,t));}function sc1(e,t=!0){const{field:n}=e,i=J27(e.timeUnit),{unit:r,binned:s}=i||{},o=w22(e,{expr:"datum"}),a=r?`time(${s?o:ig(r,n)})`:o;if(rs1(e))return`${a}===${Ge8(e.equal,r)}`;if(ss1(e)){const c=e.lt;return`${a}<${Ge8(c,r)}`;}else if(as1(e)){const c=e.gt;return`${a}>${Ge8(c,r)}`;}else if(os1(e)){const c=e.lte;return`${a}<=${Ge8(c,r)}`;}else if(cs1(e)){const c=e.gte;return`${a}>=${Ge8(c,r)}`;}else{if(ls1(e))return`indexof([${lg(e.oneOf,r).join(",")}], ${a}) !== -1`;if(ug(e))return fs1(a,e.valid);if(us1(e)){const{range:c}=e,u=v20(c)?{signal:`${c.signal}[0]`}:c[0],l=v20(c)?{signal:`${c.signal}[1]`}:c[1];if(u!==null&&l!==null&&t)return"inrange("+a+", ["+Ge8(u,r)+", "+Ge8(l,r)+"])";const f=[];return u!==null&&f.push(`${a} >= ${Ge8(u,r)}`),l!==null&&f.push(`${a} <= ${Ge8(l,r)}`),f.length>0?f.join(" && "):"true";}}throw new Error(`Invalid field predicate: ${L29(e)}`);}function fs1(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`;}function fg(e){return rc(e)&&e.timeUnit?{...e,timeUnit:J27(e.timeUnit)}:e;}const Yn6={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function dg(e){return e==="quantitative"||e==="temporal";}function oc1(e){return e==="ordinal"||e==="nominal";}const Gt7=Yn6.quantitative,ds1=Yn6.ordinal,bn5=Yn6.temporal,ps1=Yn6.nominal,xn7=Yn6.geojson;function pg(e){if(e){e=e.toLowerCase();switch(e){case"q":case Gt7:return"quantitative";case"t":case bn5:return"temporal";case"o":case ds1:return"ordinal";case"n":case ps1:return"nominal";case xn7:return"geojson";}}return;}const he9={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},gs1={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function gg(e,t){const n=gs1[e],i=gs1[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time";}const mg={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function ac(e){return mg[e];}const cc1=new Set(["linear","log","pow","sqrt","symlog"]),uc=new Set([...cc1,"time","utc"]);function lc(e){return cc1.has(e);}const fc=new Set(["quantile","quantize","threshold"]),hg=new Set([...uc,...fc,"sequential","identity"]),yg=new Set(["ordinal","bin-ordinal","point","band"]);function Z26(e){return yg.has(e);}function Se7(e){return hg.has(e);}function Pe7(e){return uc.has(e);}function Sn9(e){return fc.has(e);}const bg={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function xg(e){return!X1(e)&&!!e.name;}function dc(e){return e?.param;}function Sg(e){return e?.unionWith;}function wg(e){return M1(e)&&"field"in e;}const $g={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:gw,domain:mw,range:hw,rangeMax:yw,rangeMin:bw,scheme:xw,...vg}=$g,Eg=b22(vg);function ms1(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Pe7(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Pe7(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Pe7(e);case"nice":return Pe7(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Se7(e)&&!P24(["log","time","utc","threshold","quantile"],e);}}function pc(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return hn10(e)?void 0:Sp(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return;}}function _g(e,t){return P24([ds1,ps1],t)?e===void 0||Z26(e):t===bn5?P24([he9.TIME,he9.UTC,void 0],e):t===Gt7?lc(e)||Sn9(e)||e===void 0:!0;}function kg(e,t,n=!1){if(!ut11(e))return!1;switch(e){case q28:case Q23:case xt9:case gn9:case ve7:case Fe9:return Pe7(t)||t==="band"?!0:t==="point"?!n:!1;case at15:case $t8:case ct14:case St9:case wt8:case Dt8:return Pe7(t)||Sn9(t)||P24(["band","point","ordinal"],t);case de8:case Be7:case We7:return t!=="band";case vt8:case pe7:return t==="ordinal"||Sn9(t);}}const ae13={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},gc1=ae13.arc,Pi3=ae13.area,zi3=ae13.bar,Cg=ae13.image,Ri3=ae13.line,Ii3=ae13.point,Fg=ae13.rect,Li3=ae13.rule,mc=ae13.text,hs1=ae13.tick,Ng=ae13.trail,ys1=ae13.circle,bs1=ae13.square,hc=ae13.geoshape;function Ft7(e){return["line","area","trail"].includes(e);}function Kn5(e){return["rect","bar","image","arc"].includes(e);}const Tg=new Set(b22(ae13));function Ve8(e){return e.type;}const Ag=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Og=["fill","fillOpacity"],Pg=[...Ag,...Og],zg={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},yc=b22(zg),Rg={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},Ig={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},Lg={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},bc=b22(Lg);function Vt8(e){return e&&e.band!=null;}const Mg={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},xc=5,Dg={binSpacing:1,continuousBandSize:xc,minBandSize:.25,timeUnitBandPosition:.5},jg={binSpacing:0,continuousBandSize:xc,minBandSize:.25,timeUnitBandPosition:.5},Ug={thickness:1};function Bg(e){return Ve8(e)?e.type:e;}function xs1(e){const{channel:t,channelDef:n,markDef:i,scale:r,config:s}=e,o=ws1(e);return S23(n)&&!Sa1(n.aggregate)&&r&&Pe7(r.get("type"))?Wg({fieldDef:n,channel:t,markDef:i,ref:o,config:s}):o;}function Wg({fieldDef:e,channel:t,markDef:n,ref:i,config:r}){if(Ft7(n.type))return i;const s=z20("invalid",n,r);return s===null?[Hg(e,t),i]:i;}function Hg(e,t){const n=Ss1(e,!0),i=Ut8(t),r=i==="y"?{field:{group:"height"}}:{value:0};return{test:n,...r};}function Ss1(e,t=!0){return fs1(X1(e)?e:w22(e,{expr:"datum"}),!t);}function qg(e){const{datum:t}=e;return Wt8(t)?Ht7(t):`${L29(t)}`;}function Xt9(e,t,n,i){const r={};if(t&&(r.scale=t),Ye8(e)){const{datum:s}=e;Wt8(s)?r.signal=Ht7(s):v20(s)?r.signal=s.signal:Xn8(s)?r.signal=s.expr:r.value=s;}else r.field=w22(e,n);if(i){const{offset:s,band:o}=i;s&&(r.offset=s),o&&(r.band=o);}return r;}function Mi3({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:s="end",bandPosition:o=.5}){const a=!v20(o)&&0<o&&o<1?"datum":void 0,c=w22(t,{expr:a,suffix:r}),u=n!==void 0?w22(n,{expr:a}):w22(t,{suffix:s,expr:a}),l={};if(o===0||o===1){l.scale=e;const f=o===0?c:u;l.field=f;}else{const f=v20(o)?`(1-${o.signal}) * ${c} + ${o.signal} * ${u}`:`${1-o} * ${c} + ${o} * ${u}`;l.signal=`scale("${e}", ${f})`;}return i&&(l.offset=i),l;}function Gg({scaleName:e,fieldDef:t}){const n=w22(t,{expr:"datum"}),i=w22(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`;}function ws1({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:s,scale:o,stack:a,offset:c,defaultRef:u,bandPosition:l}){if(t){if(F27(t)){const f=o?.get("type");if(ce8(t)){l??(l=Nt9({fieldDef:t,fieldDef2:n,markDef:i,config:r}));const{bin:d,timeUnit:p,type:g}=t;if(j25(d)||l&&p&&g===bn5)return a?.impute?Xt9(t,s,{binSuffix:"mid"},{offset:c}):l&&!Z26(f)?Mi3({scaleName:s,fieldOrDatumDef:t,bandPosition:l,offset:c}):Xt9(t,s,ti5(t,e)?{binSuffix:"range"}:{},{offset:c});if(ie13(d)){if(S23(n))return Mi3({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:l,offset:c});{const m=e===q28?Ce8:Ue8;x18(Va1(m));}}}return Xt9(t,s,Z26(f)?{binSuffix:"range"}:{},{offset:c,band:f==="band"?l??t.bandPosition??.5:void 0});}else if(Re9(t)){const f=t.value,d=c?{offset:c}:{};return{...Qn6(e,f),...d};}}return O1(u)&&(u=u()),u&&{...u,...c?{offset:c}:{}};}function Qn6(e,t){return P24(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:P24(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:W22(t);}function Yt9(e){return e&&e!=="number"&&e!=="time";}function Sc(e,t,n){return`${e}(${t}${n?`, ${L29(n)}`:""})`;}const Vg=" – ";function $s1({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:s}){if(Yt9(n))return ze7({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:s});const o=wc(e,i,r),a=wn11(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(r&&s.normalizedNumberFormatType)return ze7({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:i,config:s});if(s.numberFormatType)return ze7({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:i,config:s});}if(a==="temporal"&&s.timeFormatType&&S23(e)&&e.timeUnit===void 0)return ze7({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:i,config:s});}if(_n7(e)){const c=Yg({field:o,timeUnit:S23(e)?J27(e.timeUnit)?.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:Kt9(e)&&e.scale?.type===he9.UTC});return c?{signal:c}:void 0;}if(t=vs1({type:a,specifiedFormat:t,config:s,normalizeStack:r}),S23(e)&&j25(e.bin)){const c=w22(e,{expr:i,binSuffix:"end"});return{signal:Jn7(o,c,t,n,s)};}else return t||wn11(e)==="quantitative"?{signal:`${Ec(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`};}function wc(e,t,n){return S23(e)?n?`${w22(e,{expr:t,suffix:"end"})}-${w22(e,{expr:t,suffix:"start"})}`:w22(e,{expr:t}):qg(e);}function ze7({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:s,field:o}){if(o??(o=wc(e,i,r)),o!=="datum.value"&&S23(e)&&j25(e.bin)){const a=w22(e,{expr:i,binSuffix:"end"});return{signal:Jn7(o,a,t,n,s)};}return{signal:Sc(n,o,t)};}function $c(e,t,n,i,r,s){if(X1(i)&&Yt9(i))return;if(n===void 0&&i===void 0&&r.customFormatTypes&&wn11(e)==="quantitative"){if(r.normalizedNumberFormatType&&$n8(e)&&e.stack==="normalize")return;if(r.numberFormatType)return;}if($n8(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return vs1({type:"quantitative",config:r,normalizeStack:!0});if(_n7(e)){const o=S23(e)?J27(e.timeUnit)?.unit:void 0;return o===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:Xg({specifiedFormat:n,timeUnit:o,config:r,omitTimeFormatConfig:s});}return vs1({type:t,specifiedFormat:n,config:r});}function vc(e,t,n){return e&&(v20(e)||e==="number"||e==="time")?e:_n7(t)&&n!=="time"&&n!=="utc"?S23(t)&&J27(t?.timeUnit)?.utc?"utc":"time":void 0;}function vs1({type:e,specifiedFormat:t,config:n,normalizeStack:i}){return X1(t)?t:e===Gt7?i?n.normalizedNumberFormat:n.numberFormat:void 0;}function Xg({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:tc(t)}:i?void 0:n.timeFormat);}function Ec(e,t){return`format(${e}, "${t||""}")`;}function _c(e,t,n,i){return Yt9(n)?Sc(n,e,t):Ec(e,(X1(t)?t:void 0)??i.numberFormat);}function Jn7(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return Jn7(e,t,r.numberFormat,r.numberFormatType,r);const s=_c(e,n,i,r),o=_c(t,n,i,r);return`${fs1(e,!1)} ? "null" : ${s} + "${Vg}" + ${o}`;}function Yg({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:s}){return!t||n?!t&&i?`${i}(${e}, '${n}')`:(n=X1(n)?n:r,`${s?"utc":"time"}Format(${e}, '${n}')`):rg(t,e,s);}const Di3="min",Kg={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function kc(e){return e in Kg;}function Cc(e){return!!e?.encoding;}function Xe8(e){return e&&(e.op==="count"||!!e.field);}function Fc1(e){return e&&w1(e);}function Zn5(e){return"row"in e||"column"in e;}function Es1(e){return!!e&&"header"in e;}function ji3(e){return"facet"in e;}function Qg(e){return e.param;}function Jg(e){return e&&!X1(e)&&"repeat"in e;}function Nc(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t};}function _s1(e){return"sort"in e;}function Nt9({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(F27(e)&&e.bandPosition!==void 0)return e.bandPosition;if(S23(e)){const{timeUnit:r,bin:s}=e;if(r&&!t)return dt10("timeUnitBandPosition",n,i);if(j25(s))return .5;}return;}function Tc({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:s,useVlSizeChannel:o}){const a=ge6(e),c=z20(o?"size":a,i,r,{vgChannel:a});if(c!==void 0)return c;if(S23(t)){const{timeUnit:u,bin:l}=t;if(u&&!n)return{band:dt10("timeUnitBandSize",i,r)};if(j25(l)&&!Z26(s))return{band:1};}return Kn5(i.type)?s?Z26(s)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize:void 0;}function Ac(e,t,n,i){return j25(e.bin)||e.timeUnit&&ce8(e)&&e.type==="temporal"?Nt9({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1;}function Oc(e){return e&&!!e.sort&&!e.field;}function Ui3(e){return e&&"condition"in e;}function Bi3(e){const t=e?.condition;return!!t&&!w1(t)&&S23(t);}function ei5(e){const t=e?.condition;return!!t&&!w1(t)&&F27(t);}function Zg(e){const t=e?.condition;return!!t&&(w1(t)||Re9(t));}function S23(e){return e&&(!!e.field||e.aggregate==="count");}function wn11(e){return e?.type;}function Ye8(e){return e&&"datum"in e;}function Tt11(e){return ce8(e)&&!Hi3(e)||Wi3(e);}function Pc(e){return ce8(e)&&e.type==="quantitative"&&!e.bin||Wi3(e);}function Wi3(e){return Ye8(e)&&V(e.datum);}function F27(e){return S23(e)||Ye8(e);}function ce8(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e;}function Re9(e){return e&&"value"in e&&"value"in e;}function Kt9(e){return e&&("scale"in e||"sort"in e);}function $n8(e){return e&&("axis"in e||"stack"in e||"impute"in e);}function zc(e){return e&&"legend"in e;}function Rc(e){return e&&("format"in e||"formatType"in e);}function em(e){return fe11(e,["legend","axis","header","scale"]);}function tm(e){return"op"in e;}function w22(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,s="";if(im(e))n=sa1("count");else{let o;if(!t.nofn)if(tm(e))o=e.op;else{const{bin:a,aggregate:c,timeUnit:u}=e;j25(a)?(o=wa1(a),r=(t.binSuffix??"")+(t.suffix??"")):c?_t7(c)?(s=`["${n}"]`,n=`argmax_${c.argmax}`):lt11(c)?(s=`["${n}"]`,n=`argmin_${c.argmin}`):o=String(c):u&&!qt9(u)&&(o=sg(u),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""));}o&&(n=n?`${o}_${n}`:o);}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?jr3(n):t.expr?na2(n,t.expr)+s:$e9(n)+s;}function Hi3(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return S23(e)&&!!e.bin;case"temporal":return!1;}throw new Error(Ua1(e.type));}function nm(e){return Kt9(e)&&Sn9(e.scale?.type);}function im(e){return e.aggregate==="count";}function rm(e,t){const{field:n,bin:i,timeUnit:r,aggregate:s}=e;if(s==="count")return t.countTitle;if(j25(i))return`${n} (binned)`;if(r&&!qt9(r)){const o=J27(r)?.unit;if(o)return`${n} (${Oi3(o).join("-")})`;}else if(s)return _t7(s)?`${n} for max ${s.argmax}`:lt11(s)?`${n} for min ${s.argmin}`:`${Wn7(s)} of ${n}`;return n;}function sm(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(_t7(t))return`${r} for argmax(${t.argmax})`;if(lt11(t))return`${r} for argmin(${t.argmin})`;const s=i&&!qt9(i)?J27(i):void 0,o=t||s?.unit||s?.maxbins&&"timeunit"||j25(n)&&"bin";return o?`${o.toUpperCase()}(${r})`:r;}const Ic=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return sm(e);default:return rm(e,t);}};let Lc=Ic;function Mc(e){Lc=e;}function om(){Mc(Ic);}function vn7(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=ks1(e)?.title;if(!S23(e))return r??e.title;const s=e,o=i?Cs1(s,t):void 0;return n?X27(r,s.title,o):r??s.title??o;}function ks1(e){return $n8(e)&&e.axis?e.axis:zc(e)&&e.legend?e.legend:Es1(e)&&e.header?e.header:void 0;}function Cs1(e,t){return Lc(e,t);}function qi3(e){if(Rc(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n};}else{const t=ks1(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i};}}function am(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal";}if(_s1(e)&&w1(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!_t7(n)&&!lt11(n))return"quantitative";if(Kt9(e)&&e.scale?.type)switch(gs1[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal";}return"nominal";}function Ke8(e){return S23(e)?e:Bi3(e)?e.condition:void 0;}function K27(e){return F27(e)?e:ei5(e)?e.condition:void 0;}function Dc1(e,t,n,i={}){if(X1(e)||V(e)||In(e)){const r=X1(e)?"string":V(e)?"number":"boolean";return x18(cp(t,r,e)),{value:e};}return F27(e)?Gi3(e,t,n,i):ei5(e)?{...e,condition:Gi3(e.condition,t,n,i)}:e;}function Gi3(e,t,n,i){if(Rc(e)){const{format:r,formatType:s,...o}=e;if(Yt9(s)&&!n.customFormatTypes)return x18(ja1(t)),Gi3(o,t,n,i);}else{const r=$n8(e)?"axis":zc(e)?"legend":Es1(e)?"header":null;if(r&&e[r]){const{format:s,formatType:o,...a}=e[r];if(Yt9(o)&&!n.customFormatTypes)return x18(ja1(t)),Gi3({...e,[r]:a},t,n,i);}}return S23(e)?Fs1(e,t,i):cm(e);}function cm(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=V(n)?"quantitative":X1(n)?"nominal":Wt8(n)?"temporal":void 0,{...e,type:t};}function Fs1(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:s,field:o}=e,a={...e};if(!n&&i&&!Yr4(i)&&!_t7(i)&&!lt11(i)&&(x18(lp(i)),delete a.aggregate),r&&(a.timeUnit=J27(r)),o&&(a.field=`${o}`),j25(s)&&(a.bin=Vi3(s,t)),ie13(s)&&!Y28(t)&&x18(Bp(t)),ce8(a)){const{type:c}=a,u=pg(c);c!==u&&(a.type=u),c!=="quantitative"&&Sa1(i)&&(x18(up(c,i)),a.type="quantitative");}else if(!ga1(t)){const c=am(a,t);a.type=c;}if(ce8(a)){const{compatible:c,warning:u}=um(a,t)||{};c===!1&&x18(u);}if(_s1(a)&&X1(a.sort)){const{sort:c}=a;if(kc(c))return{...a,sort:{encoding:c}};const u=c.substr(1);if(c.charAt(0)==="-"&&kc(u))return{...a,sort:{encoding:u,order:"descending"}};}if(Es1(a)){const{header:c}=a;if(c){const{orient:u,...l}=c;if(u)return{...a,header:{...l,labelOrient:c.labelOrient||u,titleOrient:c.titleOrient||u}};}}return a;}function Vi3(e,t){return In(e)?{maxbins:$a1(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:$a1(t)}:e;}const En9={compatible:!0};function um(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case it14:case rt13:case wi3:return Hi3(e)?En9:{compatible:!1,warning:gp(t)};case q28:case Q23:case xt9:case gn9:case de8:case Be7:case We7:case qn8:case Gn7:case $i3:case jt9:case vi4:case Ei3:case Dt8:case ve7:case Fe9:case _i4:return En9;case Te8:case Ee6:case Ne9:case Ae8:return n!==Gt7?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:En9;case ct14:case St9:case wt8:case $t8:case at15:case ot13:case st10:case Ce8:case Ue8:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:En9;case pe7:case vt8:return!Hi3(e)&&!nm(e)?{compatible:!1,warning:mp(t)}:En9;case mn10:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:En9;}}function _n7(e){const{formatType:t}=qi3(e);return t==="time"||!t&&lm(e);}function lm(e){return e&&(e.type==="temporal"||S23(e)&&!!e.timeUnit);}function Xi3(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const s=t&&J27(t)?.unit;let o=s||n==="temporal",a;return Xn8(e)?a=e.expr:v20(e)?a=e.signal:Wt8(e)?(o=!0,a=Ht7(e)):(X1(e)||V(e))&&o&&(a=`datetime(${L29(e)})`,eg(s)&&(V(e)&&e<1e4||X1(e)&&isNaN(Date.parse(e)))&&(a=Ht7({[s]:e}))),a?i&&o?`time(${a})`:a:r?void 0:L29(e);}function jc(e,t){const{type:n}=e;return t.map(i=>{const r=S23(e)&&!qt9(e.timeUnit)?e.timeUnit:void 0,s=Xi3(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:i;});}function ti5(e,t){return j25(e.bin)?ut11(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1);}const Uc={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function ni5(e){return e?.condition;}const Bc1=["domain","grid","labels","ticks","title"],fm={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Wc={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},dm={...Wc,style:1,labelExpr:1,encoding:1};function Hc(e){return!!dm[e];}const pm={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},qc=b22(pm);function pt11(e){return"mark"in e;}class Yi3{constructor(t,n){this.name=t,this.run=n;}hasMatchingType(t){return pt11(t)?Bg(t.mark)===this.name:!1;}}function Qt8(e,t){const n=e&&e[t];return n?w1(n)?Lt9(n,i=>!!i.field):S23(n)||Bi3(n):!1;}function Gc(e,t){const n=e&&e[t];return n?w1(n)?Lt9(n,i=>!!i.field):S23(n)||Ye8(n)||ei5(n):!1;}function Vc(e,t){if(Y28(t)){const n=e[t];if((S23(n)||Ye8(n))&&(oc1(n.type)||S23(n)&&n.timeUnit)){const i=Hr3(t);return Gc(e,i);}}return!1;}function Ns1(e){return Lt9(md,t=>{if(Qt8(e,t)){const n=e[t];if(w1(n))return Lt9(n,i=>!!i.aggregate);{const i=Ke8(n);return i&&!!i.aggregate;}}return!1;});}function Xc(e,t){const n=[],i=[],r=[],s=[],o={};return Ts1(e,(a,c)=>{if(S23(a)){const{field:u,aggregate:l,bin:f,timeUnit:d,...p}=a;if(l||d||f){const g=ks1(a),m=g?.title;let h=w22(a,{forAs:!0});const y={...m?[]:{title:vn7(a,t,{allowDisabling:!0})},...p,field:h};if(l){let $;if(_t7(l)?($="argmax",h=w22({op:"argmax",field:l.argmax},{forAs:!0}),y.field=`${h}.${u}`):lt11(l)?($="argmin",h=w22({op:"argmin",field:l.argmin},{forAs:!0}),y.field=`${h}.${u}`):l!=="boxplot"&&l!=="errorbar"&&l!=="errorband"&&($=l),$){const k={op:$,as:h};u&&(k.field=u),s.push(k);}}else if(n.push(h),ce8(a)&&j25(f)){if(i.push({bin:f,field:u,as:h}),n.push(w22(a,{binSuffix:"end"})),ti5(a,c)&&n.push(w22(a,{binSuffix:"range"})),Y28(c)){const $={field:`${h}_end`};o[`${c}2`]=$;}y.bin="binned",ga1(c)||(y.type=Gt7);}else if(d&&!qt9(d)){r.push({timeUnit:d,field:u,as:h});const $=ce8(a)&&a.type!==bn5&&"time";$&&(c===qn8||c===jt9?y.formatType=$:_d(c)?y.legend={formatType:$,...y.legend}:Y28(c)&&(y.axis={formatType:$,...y.axis}));}o[c]=y;}else n.push(u),o[c]=e[c];}else o[c]=e[c];}),{bins:i,timeUnits:r,aggregate:s,groupby:n,encoding:o};}function gm(e,t,n){const i=Cd(t,n);if(i){if(i==="binned"){const r=e[t===Ce8?q28:Q23];return!!(S23(r)&&S23(e[t])&&ie13(r.bin));}}else return!1;return!0;}function mm(e,t,n,i){const r={};for(const s of b22(e))pa1(s)||x18(pp(s));for(let s of wd){if(!e[s])continue;const o=e[s];if(Vn6(s)){const a=Sd(s),c=r[a];if(S23(c)&&dg(c.type)&&S23(o)&&!c.timeUnit){x18(ap(a));continue;}}if(s==="angle"&&t==="arc"&&!e.theta&&(x18(op),s=ve7),!gm(e,s,t)){x18(Ti3(s,t));continue;}if(s===at15&&t==="line"){const a=Ke8(e[s]);if(a?.aggregate){x18(dp);continue;}}if(s===de8&&(n?"fill"in e:"stroke"in e)){x18(Ba1("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue;}if(s===Gn7||s===mn10&&!w1(o)&&!Re9(o)||s===jt9&&w1(o)){if(o){if(s===mn10){const a=e[s];if(Oc(a)){r[s]=a;continue;}}r[s]=p(o).reduce((a,c)=>(S23(c)?a.push(Fs1(c,s)):x18(Zr4(c,s)),a),[]);}}else{if(s===jt9&&o===null)r[s]=null;else if(!S23(o)&&!Ye8(o)&&!Re9(o)&&!Ui3(o)&&!v20(o)){x18(Zr4(o,s));continue;}r[s]=Dc1(o,s,i);}}return r;}function Ki2(e,t){const n={};for(const i of b22(e)){const r=Dc1(e[i],i,t,{compositeMark:!0});n[i]=r;}return n;}function hm(e){const t=[];for(const n of b22(e))if(Qt8(e,n)){const i=e[n],r=p(i);for(const s of r)S23(s)?t.push(s):Bi3(s)&&t.push(s.condition);}return t;}function Ts1(e,t,n){if(!e)return;for(const i of b22(e)){const r=e[i];if(w1(r))for(const s of r)t.call(n,s,i);else t.call(n,r,i);}}function ym(e,t,n,i){return e?b22(e).reduce((r,s)=>{const o=e[s];return w1(o)?o.reduce((a,c)=>t.call(i,a,c,s),r):t.call(i,r,o,s);},n):n;}function Yc(e,t){return b22(t).reduce((n,i)=>{switch(i){case q28:case Q23:case vi4:case _i4:case Ei3:case Ce8:case Ue8:case xt9:case gn9:case ve7:case ot13:case Fe9:case st10:case Ne9:case Te8:case Ae8:case Ee6:case qn8:case pe7:case Dt8:case jt9:return n;case mn10:if(e==="line"||e==="trail")return n;case Gn7:case $i3:{const r=t[i];if(w1(r)||S23(r))for(const s of p(r))s.aggregate||n.push(w22(s,{}));return n;}case at15:if(e==="trail")return n;case de8:case Be7:case We7:case ct14:case St9:case wt8:case vt8:case $t8:{const r=Ke8(t[i]);return r&&!r.aggregate&&n.push(w22(r,{})),n;}}},[]);}function bm(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(w1(t)){for(const s of t)s.aggregate?(i||(i=[]),i.push(s)):(r||(r=[]),r.push(s));i&&(n.tooltip=i);}else t.aggregate?n.tooltip=t:r=t;return w1(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n};}function As1(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:o,titlePrefix:a})=>{const c=i?` of ${Os1(t)}`:"";return{field:o+t.field,type:t.type,title:v20(a)?{signal:`${a}"${escape(c)}"`}:a+c};}),s=hm(n).map(em);return{tooltip:[...r,...je9(s,O24)]};}function Os1(e){const{title:t,field:n}=e;return X27(t,n);}function Ps1(e,t,n,i,r){const{scale:s,axis:o}=n;return({partName:a,mark:c,positionPrefix:u,endPositionPrefix:l=void 0,extraEncoding:f={}})=>{const d=Os1(n);return Kc(e,a,r,{mark:c,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...X1(l)?{[`${t}2`]:{field:`${l}_${n.field}`}}:{},...i,...f}});};}function Kc(e,t,n,i){const{clip:r,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Ve8(i.mark)?i.mark:{type:i.mark},style:`${a}-${String(t)}`,...In(e[t])?{}:e[t]}}]:[];}function Qc1(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",s=i[r],o=i[`${r}2`],a=i[`${r}Error`],c=i[`${r}Error2`];return{continuousAxisChannelDef:Qi2(s,n),continuousAxisChannelDef2:Qi2(o,n),continuousAxisChannelDefError:Qi2(a,n),continuousAxisChannelDefError2:Qi2(c,n),continuousAxis:r};}function Qi2(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&x18(Up(n,t)),i;}else return e;}function Jc(e,t){const{mark:n,encoding:i}=e,{x:r,y:s}=i;if(Ve8(n)&&n.orient)return n.orient;if(Tt11(r)){if(Tt11(s)){const o=S23(r)&&r.aggregate,a=S23(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return _n7(s)&&!_n7(r)?"horizontal":"vertical";}return"horizontal";}else{if(Tt11(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`);}}const Ji2="boxplot",xm=["box","median","outliers","rule","ticks"],Sm=new Yi3(Ji2,eu1);function Zc(e){return V(e)?"tukey":e;}function eu1(e,{config:t}){e={...e,encoding:Ki2(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:s,...o}=e,a=Ve8(n)?n:{type:n};r&&x18(La1("boxplot"));const c=a.extent??t.boxplot.extent,u=z20("size",a,t),l=a.invalid,f=Zc(c),{bins:d,timeUnits:p,transform:g,continuousAxisChannelDef:m,continuousAxis:h,groupby:y,aggregate:$,encodingWithoutContinuousAxis:k,ticksOrient:_,boxOrient:T,customTooltipWithoutAggregatedField:D}=wm(e,c,t),{color:ye,size:re,...tt}=k,le=Of=>Ps1(a,h,m,Of,t.boxplot),nt=le(tt),Nr=le(k),gi=le({...tt,...re?{size:re}:{}}),on=As1([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,k),Dn={type:"tick",color:"black",opacity:1,orient:_,invalid:l,aria:!1},an=f==="min-max"?on:As1([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,k),Mo=[...nt({partName:"rule",mark:{type:"rule",invalid:l,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:an}),...nt({partName:"rule",mark:{type:"rule",invalid:l,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:an}),...nt({partName:"ticks",mark:Dn,positionPrefix:"lower_whisker",extraEncoding:an}),...nt({partName:"ticks",mark:Dn,positionPrefix:"upper_whisker",extraEncoding:an})],Do=[...f!=="tukey"?Mo:[],...Nr({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:T,invalid:l,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:on}),...gi({partName:"median",mark:{type:"tick",invalid:l,...M1(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:_,aria:!1},positionPrefix:"mid_box",extraEncoding:on})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(g),layer:Do};const jo=`datum["lower_box_${m.field}"]`,Uo=`datum["upper_box_${m.field}"]`,Bo=`(${Uo} - ${jo})`,Wo=`${jo} - ${c} * ${Bo}`,Ho=`${Uo} + ${c} * ${Bo}`,mi=`datum["${m.field}"]`,Nf={joinaggregate:tu1(m.field),groupby:y},qo={transform:[{filter:`(${Wo} <= ${mi}) && (${mi} <= ${Ho})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${m.field}`},{op:"max",field:m.field,as:`upper_whisker_${m.field}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${m.field}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${m.field}`},...$],groupby:y}],layer:Mo},{tooltip:OS,...Tf}=tt,{scale:Go,axis:Af}=m,Vo=Os1(m),Xo=fe11(Af,["title"]),Yo=Kc(a,"outliers",t.boxplot,{transform:[{filter:`(${mi} < ${Wo}) || (${mi} > ${Ho})`}],mark:"point",encoding:{[h]:{field:m.field,type:m.type,...Vo!==void 0?{title:Vo}:{},...Go!==void 0?{scale:Go}:{},...I23(Xo)?{}:{axis:Xo}},...Tf,...ye?{color:ye}:{},...D?{tooltip:D}:{}}})[0];let hi;const Ko=[...d,...p,Nf];return Yo?hi={transform:Ko,layer:[Yo,qo]}:(hi=qo,hi.transform.unshift(...Ko)),{...o,layer:[hi,{transform:g,layer:Do}]};}function tu1(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}];}function wm(e,t,n){const i=Jc(e,Ji2),{continuousAxisChannelDef:r,continuousAxis:s}=Qc1(e,i,Ji2),o=r.field,a=Zc(t),c=[...tu1(o),{op:"median",field:o,as:`mid_box_${o}`},{op:"min",field:o,as:(a==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:o,as:(a==="min-max"?"upper_whisker_":"max_")+o}],u=a==="min-max"||a==="tukey"?[]:[{calculate:`datum["upper_box_${o}"] - datum["lower_box_${o}"]`,as:`iqr_${o}`},{calculate:`min(datum["upper_box_${o}"] + datum["iqr_${o}"] * ${t}, datum["max_${o}"])`,as:`upper_whisker_${o}`},{calculate:`max(datum["lower_box_${o}"] - datum["iqr_${o}"] * ${t}, datum["min_${o}"])`,as:`lower_whisker_${o}`}],{[s]:l,...f}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:p}=bm(f),{bins:g,timeUnits:m,aggregate:h,groupby:y,encoding:$}=Xc(p,n),k=i==="vertical"?"horizontal":"vertical",_=i,T=[...g,...m,{aggregate:[...h,...c],groupby:y},...u];return{bins:g,timeUnits:m,transform:T,groupby:y,aggregate:h,continuousAxisChannelDef:r,continuousAxis:s,encodingWithoutContinuousAxis:$,ticksOrient:k,boxOrient:_,customTooltipWithoutAggregatedField:d};}const zs1="errorbar",$m=["ticks","rule"],vm=new Yi3(zs1,nu);function nu(e,{config:t}){e={...e,encoding:Ki2(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:c,tooltipEncoding:u}=iu(e,zs1,t);delete s.size;const l=Ps1(a,r,i,s,t.errorbar),f=a.thickness,d=a.size,p={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},g=[...l({partName:"ticks",mark:p,positionPrefix:"lower",extraEncoding:u}),...l({partName:"ticks",mark:p,positionPrefix:"upper",extraEncoding:u}),...l({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...c,transform:n,...g.length>1?{layer:g}:{...g[0]}};}function Em(e,t){const{encoding:n}=e;if(_m(n))return{orient:Jc(e,t),inputType:"raw"};const i=km(n),r=Cm(n),s=n.x,o=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,c=n.y2;if(F27(a)&&F27(c))throw new Error(`${t} cannot have both x2 and y2`);if(F27(a)){if(Tt11(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`);}else if(F27(c)){if(Tt11(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`);}throw new Error("No ranged axis");}else{const a=n.xError,c=n.xError2,u=n.yError,l=n.yError2;if(F27(c)&&!F27(a))throw new Error(`${t} cannot have xError2 without xError`);if(F27(l)&&!F27(u))throw new Error(`${t} cannot have yError2 without yError`);if(F27(a)&&F27(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(F27(a)){if(Tt11(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative");}else if(F27(u)){if(Tt11(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative");}throw new Error("No ranged axis");}}function _m(e){return(F27(e.x)||F27(e.y))&&!F27(e.x2)&&!F27(e.y2)&&!F27(e.xError)&&!F27(e.xError2)&&!F27(e.yError)&&!F27(e.yError2);}function km(e){return F27(e.x2)||F27(e.y2);}function Cm(e){return F27(e.xError)||F27(e.xError2)||F27(e.yError)||F27(e.yError2);}function iu(e,t,n){const{mark:i,encoding:r,params:s,projection:o,...a}=e,c=Ve8(i)?i:{type:i};s&&x18(La1(t));const{orient:u,inputType:l}=Em(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:g,continuousAxis:m}=Qc1(e,u,t),{errorBarSpecificAggregate:h,postAggregateCalculates:y,tooltipSummary:$,tooltipTitleWithFieldName:k}=Fm(c,f,d,p,g,l,t,n),{[m]:_,[m==="x"?"x2":"y2"]:T,[m==="x"?"xError":"yError"]:D,[m==="x"?"xError2":"yError2"]:ye,...re}=r,{bins:tt,timeUnits:le,aggregate:nt,groupby:Nr,encoding:gi}=Xc(re,n),on=[...nt,...h],Dn=l!=="raw"?[]:Nr,an=As1($,f,gi,k);return{transform:[...a.transform??[],...tt,...le,...on.length===0?[]:[{aggregate:on,groupby:Dn}],...y],groupby:Dn,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:gi,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:a,tooltipEncoding:an};}function Fm(e,t,n,i,r,s,o,a){let c=[],u=[];const l=t.field;let f,d=!1;if(s==="raw"){const p=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,g=e.extent?e.extent:p==="mean"?"stderr":"iqr";if(p==="median"!==(g==="iqr")&&x18(jp(p,g,o)),g==="stderr"||g==="stdev")c=[{op:g,field:l,as:`extent_${l}`},{op:p,field:l,as:`center_${l}`}],u=[{calculate:`datum["center_${l}"] + datum["extent_${l}"]`,as:`upper_${l}`},{calculate:`datum["center_${l}"] - datum["extent_${l}"]`,as:`lower_${l}`}],f=[{fieldPrefix:"center_",titlePrefix:Wn7(p)},{fieldPrefix:"upper_",titlePrefix:ru1(p,g,"+")},{fieldPrefix:"lower_",titlePrefix:ru1(p,g,"-")}],d=!0;else{let m,h,y;g==="ci"?(m="mean",h="ci0",y="ci1"):(m="median",h="q1",y="q3"),c=[{op:h,field:l,as:`lower_${l}`},{op:y,field:l,as:`upper_${l}`},{op:m,field:l,as:`center_${l}`}],f=[{fieldPrefix:"upper_",titlePrefix:vn7({field:l,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:vn7({field:l,aggregate:h,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:vn7({field:l,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}];}}else{(e.center||e.extent)&&x18(Dp(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${l}`},{calculate:`datum["${l}"]`,as:`lower_${l}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:l}],u=[{calculate:`datum["${l}"] + datum["${i.field}"]`,as:`upper_${l}`}],r?u.push({calculate:`datum["${l}"] + datum["${r.field}"]`,as:`lower_${l}`}):u.push({calculate:`datum["${l}"] - datum["${i.field}"]`,as:`lower_${l}`}));for(const p of u)f.push({fieldPrefix:p.as.substring(0,6),titlePrefix:Mt10(Mt10(p.calculate,'datum["',""),'"]',"")});}return{postAggregateCalculates:u,errorBarSpecificAggregate:c,tooltipSummary:f,tooltipTitleWithFieldName:d};}function ru1(e,t,n){return`${Wn7(e)} ${n} ${t}`;}const Rs1="errorband",Nm=["band","borders"],Tm=new Yi3(Rs1,su1);function su1(e,{config:t}){e={...e,encoding:Ki2(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:c}=iu(e,Rs1,t),u=o,l=Ps1(u,r,i,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},p={type:f?"line":"rule"};const g={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return f?(d={...d,...g,ariaRoleDescription:"errorband"},p={...p,...g,aria:!1}):u.interpolate?x18(Ga1("interpolate")):u.tension&&x18(Ga1("tension")),{...a,transform:n,layer:[...l({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c}),...l({partName:"borders",mark:p,positionPrefix:"lower",extraEncoding:c}),...l({partName:"borders",mark:p,positionPrefix:"upper",extraEncoding:c})]};}const ou1={};function Is1(e,t,n){const i=new Yi3(e,t);ou1[e]={normalizer:i,parts:n};}function Am(){return b22(ou1);}Is1(Ji2,eu1,xm),Is1(zs1,nu,$m),Is1(Rs1,su1,Nm);const Om=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],au1={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},cu1={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Pm=b22(au1),zm=b22(cu1),Rm={header:1,headerRow:1,headerColumn:1,headerFacet:1},uu1=b22(Rm),lu1=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Im={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Lm={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ie7="_vgsid_",Mm={point:{on:"click",fields:[Ie7],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Ls1(e){return e==="legend"||!!e?.legend;}function Ms1(e){return Ls1(e)&&M1(e);}function Ds1(e){return!!e?.select;}function fu1(e){const t=[];for(const n of e||[]){if(Ds1(n))continue;const{expr:i,bind:r,...s}=n;if(r&&i){const o={...s,bind:r,init:i};t.push(o);}else{const o={...s,...i?{update:i}:{},...r?{bind:r}:{}};t.push(o);}}return t;}function Dm(e){return Zi2(e)||Us1(e)||js1(e);}function js1(e){return"concat"in e;}function Zi2(e){return"vconcat"in e;}function Us1(e){return"hconcat"in e;}function du1({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position";}function Qe8(e){return M1(e)&&e.step!==void 0;}function pu1(e){return e.view||e.width||e.height;}const jm={align:1,bounds:1,center:1,columns:1,spacing:1},Um=b22(jm);function Bm(e,t,n){const i=n[t],r={},{spacing:s,columns:o}=i;s!==void 0&&(r.spacing=s),o!==void 0&&(ji3(e)&&!Zn5(e.facet)||js1(e))&&(r.columns=o),Zi2(e)&&(r.columns=1);for(const a of Um)if(e[a]!==void 0)if(a==="spacing"){const c=e[a];r[a]=V(c)?c:{row:c.row??s,column:c.column??s};}else r[a]=e[a];return r;}function Bs1(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"];}function er2(e,t){const n=tr3(e,t);return Qe8(n)?n.step:mu1;}function tr3(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return X27(n,{step:e.step});}const mu1=20,Wm={continuousWidth:200,continuousHeight:200,step:mu1},Hm={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Wm,mark:Ig,arc:{},area:{},bar:Dg,circle:{},geoshape:{},image:{},line:{},point:{},rect:jg,rule:{color:"black"},square:{},text:{color:"black"},tick:Ug,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:bg,projection:{},legend:Im,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Mm,style:{},title:{},facet:{spacing:20},concat:{spacing:20},normalizedNumberFormat:".0%"},gt10=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],hu1={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},yu1={blue:gt10[0],orange:gt10[1],red:gt10[2],teal:gt10[3],green:gt10[4],yellow:gt10[5],purple:gt10[6],pink:gt10[7],brown:gt10[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function qm(e={}){return{signals:[{name:"color",value:M1(e)?{...yu1,...e}:yu1}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}};}function Gm(e){return{signals:[{name:"fontSize",value:M1(e)?{...hu1,...e}:hu1}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}};}function Vm(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}};}function bu1(e){const t=b22(e||{}),n={};for(const i of t){const r=e[i];n[i]=ni5(r)?Ea1(r):xe7(r);}return n;}function Xm(e){const t=b22(e),n={};for(const i of t)n[i]=bu1(e[i]);return n;}const Ym=[...bc,...qc,...uu1,"background","padding","legend","lineBreak","scale","style","title","view"];function xu1(e={}){const{color:t,font:n,fontSize:i,selection:r,...s}=e,o=rn({},C26(Hm),n?Vm(n):{},t?qm(t):{},i?Gm(i):{},s||{});r&&S1(o,"selection",r,!0);const a=fe11(o,Ym);for(const c of["background","lineBreak","padding"])o[c]&&(a[c]=xe7(o[c]));for(const c of bc)o[c]&&(a[c]=me10(o[c]));for(const c of qc)o[c]&&(a[c]=bu1(o[c]));for(const c of uu1)o[c]&&(a[c]=me10(o[c]));return o.legend&&(a.legend=me10(o.legend)),o.scale&&(a.scale=me10(o.scale)),o.style&&(a.style=Xm(o.style)),o.title&&(a.title=me10(o.title)),o.view&&(a.view=me10(o.view)),a;}const Km=new Set(["view",...Tg]),Qm=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Jm={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Rg};function Zm(e){e=C26(e);for(const t of Qm)delete e[t];if(e.axis)for(const t in e.axis)ni5(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Om)delete e.legend[t];if(e.mark){for(const t of yc)delete e.mark[t];e.mark.tooltip&&M1(e.mark.tooltip)&&delete e.mark.tooltip;}e.params&&(e.signals=(e.signals||[]).concat(fu1(e.params)),delete e.params);for(const t of Km){for(const i of yc)delete e[t][i];const n=Jm[t];if(n)for(const i of n)delete e[t][i];th(e,t);}for(const t of Am())delete e[t];eh(e);for(const t in e)M1(e[t])&&I23(e[t])&&delete e[t];return I23(e)?void 0:e;}function eh(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=va1(e.title);I23(t)||(e.style["group-title"]={...e.style["group-title"],...t}),I23(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),I23(i)?delete e.title:e.title=i;}function th(e,t,n,i){const r=i?e[t][i]:e[t];t==="view"&&(n="cell");const s={...r,...e.style[n??t]};I23(s)||(e.style[n??t]=s),i||delete e[t];}function nr2(e){return"layer"in e;}function nh(e){return"repeat"in e;}function ih(e){return!w1(e.repeat)&&e.repeat.layer;}class Ws1{map(t,n){return ji3(t)?this.mapFacet(t,n):nh(t)?this.mapRepeat(t,n):Us1(t)?this.mapHConcat(t,n):Zi2(t)?this.mapVConcat(t,n):js1(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n);}mapLayerOrUnit(t,n){if(nr2(t))return this.mapLayer(t,n);if(pt11(t))return this.mapUnit(t,n);throw new Error(Qr4(t));}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))};}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))};}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))};}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(s=>this.map(s,n))};}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)};}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)};}}const rh={zero:1,center:1,normalize:1};function sh(e){return e in rh;}const oh=new Set([gc1,zi3,Pi3,Li3,Ii3,ys1,bs1,Ri3,mc,hs1]),ah=new Set([zi3,Pi3,gc1]);function kn6(e){return S23(e)&&wn11(e)==="quantitative"&&!e.bin;}function Su1(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(i),o=e[t],a=e[r];if(S23(o)&&S23(a))if(kn6(o)&&kn6(a)){if(o.stack)return t;if(a.stack)return r;const c=S23(o)&&!!o.aggregate,u=S23(a)&&!!a.aggregate;if(c!==u)return c?t:r;if(s){if(n==="vertical")return r;if(n==="horizontal")return t;}}else{if(kn6(o))return t;if(kn6(a))return r;}else{if(kn6(o))return s&&n==="vertical"?void 0:t;if(kn6(a))return s&&n==="horizontal"?void 0:r;}return;}function ch(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta";}}function wu1(e,t){const n=Ve8(e)?e:{type:e},i=n.type;if(!oh.has(i))return null;const r=Su1(t,"x",n)||Su1(t,"theta",n);if(!r)return null;const s=t[r],o=S23(s)?w22(s,{}):void 0,a=ch(r),c=[],u=new Set;if(t[a]){const m=t[a],h=S23(m)?w22(m,{}):void 0;h&&h!==o&&(c.push(a),u.add(h));}const l=a==="x"?"xOffset":"yOffset",f=t[l],d=S23(f)?w22(f,{}):void 0;d&&d!==o&&(c.push(l),u.add(d));const p1=$d.reduce((m,h)=>{if(h!=="tooltip"&&Qt8(t,h)){const y=t[h];for(const $ of p(y)){const k=Ke8($);if(k.aggregate)continue;const _=w22(k,{});(!_||!u.has(_))&&m.push({channel:h,fieldDef:k});}}return m;},[]);let g;return s.stack!==void 0?In(s.stack)?g=s.stack?"zero":null:g=s.stack:ah.has(i)&&(g="zero"),!g||!sh(g)||Ns1(t)&&p1.length===0?null:s?.scale?.type&&s?.scale?.type!==he9.LINEAR?(s?.stack&&x18(Ip(s.scale.type)),null):F27(t[He8(r)])?(s.stack!==void 0&&x18(Rp(r)),null):(S23(s)&&s.aggregate&&!zd.has(s.aggregate)&&x18(Lp(s.aggregate)),{groupbyChannels:c,groupbyFields:u,fieldChannel:r,impute:s.impute===null?!1:Ft7(i),stackBy:p1,offset:g});}function $u1(e,t,n){const i=me10(e),r=z20("orient",i,n);if(i.orient=dh(i.type,t,r),r!==void 0&&r!==i.orient&&x18(xp(i.orient,r)),i.type==="bar"&&i.orient){const a=z20("cornerRadiusEnd",i,n);if(a!==void 0){const c=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:Mg[i.orient];for(const u of c)i[u]=a;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd;}}const s=z20("opacity",i,n);s===void 0&&(i.opacity=lh(i.type,t));const o=z20("cursor",i,n);return o===void 0&&(i.cursor=uh(i,t,n)),i;}function uh(e,t,n){return t.href||e.href||z20("href",e,n)?"pointer":e.cursor;}function lh(e,t){return P24([Ii3,hs1,ys1,bs1],e)&&!Ns1(t)?.7:void 0;}function fh(e,t,{graticule:n}){if(n)return!1;const i=dt10("filled",e,t),r=e.type;return X27(i,r!==Ii3&&r!==Ri3&&r!==Li3);}function dh(e,t,n){switch(e){case Ii3:case ys1:case bs1:case mc:case Fg:case Cg:return;}const{x:i,y:r,x2:s,y2:o}=t;switch(e){case zi3:if(S23(i)&&(ie13(i.bin)||S23(r)&&r.aggregate&&!i.aggregate))return"vertical";if(S23(r)&&(ie13(r.bin)||S23(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(S23(i)&&i.type===Gt7&&!j25(i.bin)||Wi3(i))&&S23(r)&&ie13(r.bin)?"horizontal":"vertical";if(!o)return(S23(r)&&r.type===Gt7&&!j25(r.bin)||Wi3(r))&&S23(i)&&ie13(i.bin)?"vertical":"horizontal";}case Li3:if(s&&!(S23(i)&&ie13(i.bin))&&o&&!(S23(r)&&ie13(r.bin)))return;case Pi3:if(o)return S23(r)&&ie13(r.bin)?"horizontal":"vertical";if(s)return S23(i)&&ie13(i.bin)?"vertical":"horizontal";if(e===Li3){if(i&&!r)return"vertical";if(r&&!i)return"horizontal";}case Ri3:case hs1:{const a=Pc(i),c=Pc(r);if(n)return n;if(a&&!c)return e!=="tick"?"horizontal":"vertical";if(!a&&c)return e!=="tick"?"vertical":"horizontal";if(a&&c)return"vertical";{const u=ce8(i)&&i.type===bn5,l=ce8(r)&&r.type===bn5;if(u&&!l)return"vertical";if(!u&&l)return"horizontal";}return;}}return"vertical";}function ph(e){const{point:t,line:n,...i}=e;return b22(i).length>1?i:i.type;}function gh(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:fe11(e[t],["point","line"])});return e;}function Hs1(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?M1(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?M1(t.point)?t.point:{}:void 0;}function vu1(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0;}class mh{constructor(){this.name="path-overlay";}hasMatchingType(t,n){if(pt11(t)){const{mark:i,encoding:r}=t,s=Ve8(i)?i:{type:i};switch(s.type){case"line":case"rule":case"trail":return!!Hs1(s,n[s.type],r);case"area":return!!Hs1(s,n[s.type],r)||!!vu1(s,n[s.type]);}}return!1;}run(t,n,i){const{config:r}=n,{params:s,projection:o,mark:a,name:c,encoding:u,...l}=t,f=Ki2(u,r),d=Ve8(a)?a:{type:a},p=Hs1(d,r[d.type],f),g=d.type==="area"&&vu1(d,r[d.type]),m=[{name:c,...s?{params:s}:{},mark:ph({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:fe11(f,["shape"])}],h=wu1($u1(d,f,r),f);let y=f;if(h){const{fieldChannel:$,offset:k}=h;y={...f,[$]:{...f[$],...k?{stack:k}:{}}};}return y=fe11(y,["y2","x2"]),g&&m.push({...o?{projection:o}:{},mark:{type:"line",...dn11(d,["clip","interpolate","tension","tooltip"]),...g},encoding:y}),p&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...dn11(d,["clip","tooltip"]),...p},encoding:y}),i({...l,layer:m},{...n,config:gh(r)});}}function hh(e,t){return t?Zn5(e)?Cu1(e,t):Eu1(e,t):e;}function qs1(e,t){return t?Cu1(e,t):e;}function Gs1(e,t,n){const i=t[e];if(Jg(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};x18(Zd(i.repeat));return;}return t;}function Eu1(e,t){if(e=Gs1("field",e,t),e===void 0)return;if(e===null)return null;if(_s1(e)&&Xe8(e.sort)){const n=Gs1("field",e.sort,t);e={...e,...n?{sort:n}:{}};}return e;}function _u1(e,t){if(S23(e))return Eu1(e,t);{const n=Gs1("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n;}}function ku1(e,t){if(F27(e)){const n=_u1(e,t);if(n)return n;if(Ui3(e))return{condition:e.condition};}else{if(ei5(e)){const n=_u1(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r;}}return e;}return;}function Cu1(e,t){const n={};for(const i in e)if(g(e,i)){const r=e[i];if(w1(r))n[i]=r.map(s=>ku1(s,t)).filter(s=>s);else{const s=ku1(r,t);s!==void 0&&(n[i]=s);}}return n;}class yh{constructor(){this.name="RuleForRangedLine";}hasMatchingType(t){if(pt11(t)){const{encoding:n,mark:i}=t;if(i==="line"||Ve8(i)&&i.type==="line")for(const r of xd){const s=Ut8(r),o=n[s];if(n[r]&&(S23(o)&&!ie13(o.bin)||Ye8(o)))return!0;}}return!1;}run(t,n,i){const{encoding:r,mark:s}=t;return x18(bp(!!r.x2,!!r.y2)),i({...t,mark:M1(s)?{...s,type:"rule"}:"rule"},n);}}class bh extends Ws1{constructor(){super(...arguments);this.nonFacetUnitNormalizers=[Sm,vm,Tm,new mh,new yh];}map(t,n){if(pt11(t)){const i=Qt8(t.encoding,it14),r=Qt8(t.encoding,rt13),s=Qt8(t.encoding,wi3);if(i||r||s)return this.mapFacetedUnit(t,n);}return super.map(t,n);}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,s=qs1(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(c=>c).join("_")}:{},...s?{encoding:s}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const c of this.nonFacetUnitNormalizers)if(c.hasMatchingType(o,n.config))return c.run(o,n,a);return o;}mapRepeat(t,n){return ih(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n);}mapLayerRepeat(t,n){const{repeat:i,spec:r,...s}=t,{row:o,column:a,layer:c}=i,{repeater:u={},repeaterPrefix:l=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:c},spec:r}},n):{...s,layer:c.map(f=>{const d={...u,layer:f},p=`${(r.name?`${r.name}_`:"")+l}child__layer_${H21(f)}`,g=this.mapLayerOrUnit(r,{...n,repeater:d,repeaterPrefix:p});return g.name=p,g;})};}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:s,...o}=t;!w1(i)&&t.columns&&(t=fe11(t,["columns"]),x18(Ma1("repeat")));const a=[],{repeater:c={},repeaterPrefix:u=""}=n,l=!w1(i)&&i.row||[c?c.row:null],f=!w1(i)&&i.column||[c?c.column:null],d=w1(i)&&i||[c?c.repeat:null];for(const g of d)for(const m of l)for(const h of f){const y={repeat:g,row:m,column:h,layer:c.layer},$=(r.name?`${r.name}_`:"")+u+"child__"+(w1(i)?`${H21(g)}`:(i.row?`row_${H21(m)}`:"")+(i.column?`column_${H21(h)}`:"")),k=this.map(r,{...n,repeater:y,repeaterPrefix:$});k.name=$,a.push(fe11(k,["data"]));}const p=w1(i)?t.columns:i.column?i.column.length:1;return{data:r.data??s,align:"all",...o,columns:p,concat:a};}mapFacet(t,n){const{facet:i}=t;return Zn5(i)&&t.columns&&(t=fe11(t,["columns"]),x18(Ma1("facet"))),super.mapFacet(t,n);}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:s,parentProjection:o,config:a}=n,c=Nu1({parentProjection:o,projection:r}),u=Fu1({parentEncoding:s,encoding:qs1(i,n.repeater)});return this.mapUnit({...t,...c?{projection:c}:{},...u?{encoding:u}:{}},{config:a});}mapFacetedUnit(t,n){const{row:i,column:r,facet:s,...o}=t.encoding,{mark:a,width:c,projection:u,height:l,view:f,params:d,encoding:p,...g}=t,{facetMapping:m,layout:h}=this.getFacetMappingAndLayout({row:i,column:r,facet:s},n),y=qs1(o,n.repeater);return this.mapFacet({...g,...h,facet:m,spec:{...c?{width:c}:{},...l?{height:l}:{},...f?{view:f}:{},...u?{projection:u}:{},mark:a,encoding:y,...d?{params:d}:{}}},n);}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:s}=t;if(i||r){s&&x18(hp([...i?[it14]:[],...r?[rt13]:[]]));const o={},a={};for(const c of[it14,rt13]){const u=t[c];if(u){const{align:l,center:f,spacing:d,columns:p,...g}=u;o[c]=g;for(const m of["align","center","spacing"])u[m]!==void 0&&(a[m]??(a[m]={}),a[m][c]=u[m]);}}return{facetMapping:o,layout:a};}else{const{align:o,center:a,spacing:c,columns:u,...l}=s;return{facetMapping:hh(l,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...c?{spacing:c}:{},...u?{columns:u}:{}}};}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:s,projection:o,...a}=t,c={...r,parentEncoding:Fu1({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Nu1({parentProjection:i,projection:o})};return super.mapLayer({...a,...t.name?{name:[c.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},c);}}function Fu1({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...b22(e),...b22(t)]);for(const s of r){const o=t[s],a=e[s];if(F27(o)){const c={...a,...o};i[s]=c;}else ei5(o)?i[s]={...o,condition:{...a,...o.condition}}:o||o===null?i[s]=o:(n||Re9(a)||v20(a)||F27(a)||w1(a))&&(i[s]=a);}}else i=t;return!i||I23(i)?void 0:i;}function Nu1(e){const{parentProjection:t,projection:n}=e;return t&&n&&x18(sp({parentProjection:t,projection:n})),n??t;}function Vs1(e){return"filter"in e;}function xh(e){return e?.stop!==void 0;}function Tu1(e){return"lookup"in e;}function Sh(e){return"data"in e;}function wh(e){return"param"in e;}function $h(e){return"pivot"in e;}function vh(e){return"density"in e;}function Eh(e){return"quantile"in e;}function _h(e){return"regression"in e;}function kh(e){return"loess"in e;}function Ch(e){return"sample"in e;}function Fh(e){return"window"in e;}function Nh(e){return"joinaggregate"in e;}function Th(e){return"flatten"in e;}function Ah(e){return"calculate"in e;}function Au1(e){return"bin"in e;}function Oh(e){return"impute"in e;}function Ph(e){return"timeUnit"in e;}function zh(e){return"aggregate"in e;}function Rh(e){return"stack"in e;}function Ih(e){return"fold"in e;}function Lh(e){return"extent"in e&&!("density"in e);}function Mh(e){return e.map(t=>Vs1(t)?{filter:fn10(t.filter,fg)}:t);}class Dh extends Ws1{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Ou(t,n),super.map(t,n);}mapLayerOrUnit(t,n){if(t=Ou(t,n),t.encoding){const i={};for(const[r,s]of bt11(t.encoding))i[r]=Pu1(s,n);t={...t,encoding:i};}return super.mapLayerOrUnit(t,n);}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:bt11(i).map(([s,o])=>{const{init:a,bind:c,empty:u,...l}=o;l.type==="single"?(l.type="point",l.toggle=!1):l.type==="multi"&&(l.type="point"),n.emptySelections[s]=u!=="none";for(const f of ne16(n.selectionPredicates[s]??{}))f.empty=u!=="none";return{name:s,value:a,select:l,bind:c};})}:t;}}function Ou(e,t){const{transform:n,...i}=e;if(n){const r=n.map(s=>{if(Vs1(s))return{filter:Xs1(s,t)};if(Au1(s)&&Bt8(s.bin))return{...s,bin:zu1(s.bin)};if(Tu1(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s;}return s;});return{...i,transform:r};}return e;}function Pu1(e,t){const n=C26(e);if(S23(n)&&Bt8(n.bin)&&(n.bin=zu1(n.bin)),Kt9(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}};}if(Ui3(n))if(w1(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:s,test:o,...a}=i;return s?i:{...a,test:Xs1(i,t)};});else{const{selection:i,param:r,test:s,...o}=Pu1(n.condition,t);n.condition=r?n.condition:{...o,test:Xs1(n.condition,t)};}return n;}function zu1(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}};}return e;}function Xs1(e,t){const n=i=>fn10(i,r=>{var s;const o=t.emptySelections[r]??!0,a={param:r,empty:o};return(s=t.selectionPredicates)[r]??(s[r]=[]),t.selectionPredicates[r].push(a),a;});return e.selection?n(e.selection):fn10(e.test||e.filter,i=>i.selection?n(i.selection):i);}class Ys1 extends Ws1{map(t,n){const i=n.selections??[];if(t.params&&!pt11(t)){const r=[];for(const s of t.params)Ds1(s)?i.push(s):r.push(s);t.params=r;}return n.selections=i,super.map(t,n);}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),s=[];for(const o of i)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(X1(a)&&(a===t.name||r.includes(a))||w1(a)&&a.map(c=>r.indexOf(c)).every((c,u,l)=>c!==-1&&(u===0||c>l[u-1])))&&s.push(o);return s.length&&(t.params=s),t;}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=Ys1.prototype[e];Ys1.prototype[e]=function(n,i){return t.call(this,n,jh(n,i));};}function jh(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t;}function Ru1(e,t){t===void 0&&(t=xu1(e.config));const n=Hh(e,t),{width:i,height:r}=e,s=qh(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}};}const Uh=new bh,Bh=new Dh,Wh=new Ys1;function Hh(e,t={}){const n={config:t};return Wh.map(Uh.map(Bh.map(e,n),n),n);}function Iu(e){return X1(e)?{type:e}:e??{};}function qh(e,t,n){let{width:i,height:r}=t;const s=pt11(e)||nr2(e),o={};s?i=="container"&&r=="container"?(o.type="fit",o.contains="padding"):i=="container"?(o.type="fit-x",o.contains="padding"):r=="container"&&(o.type="fit-y",o.contains="padding"):(i=="container"&&(x18(Pa1("width")),i=void 0),r=="container"&&(x18(Pa1("height")),r=void 0));const a={type:"pad",...o,...n?Iu(n.autosize):{},...Iu(e.autosize)};return a.type==="fit"&&!s&&(x18(Wd),a.type="pad"),i=="container"&&!(a.type=="fit"||a.type=="fit-x")&&x18(za1("width")),r=="container"&&!(a.type=="fit"||a.type=="fit-y")&&x18(za1("height")),be7(a,{type:"pad"})?void 0:a;}function Gh(e){return e==="fit"||e==="fit-x"||e==="fit-y";}function Vh(e){return e?`fit-${ki3(e)}`:"fit";}const Xh=["background","padding"];function Lu1(e,t){const n={};for(const i of Xh)e&&e[i]!==void 0&&(n[i]=xe7(e[i]));return t&&(n.params=e.params),n;}class mt10{constructor(t={},n={}){this.explicit=t,this.implicit=n;}clone(){return new mt10(C26(this.explicit),C26(this.implicit));}combine(){return{...this.explicit,...this.implicit};}get(t){return X27(this.explicit[t],this.implicit[t]);}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0};}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i);}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this;}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1);}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0);}copyAll(t){for(const n of b22(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i);}}}function Je7(e){return{explicit:!0,value:e};}function we10(e){return{explicit:!1,value:e};}function Mu1(e){return(t,n,i,r)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:ir2(t,n,i,r);};}function ir2(e,t,n,i){return e.explicit&&t.explicit&&x18(Fp(n,i,e.value,t.value)),e;}function At11(e,t,n,i,r=ir2){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:be7(e.value,t.value)?e:r(e,t,n,i);}class Yh extends mt10{constructor(t={},n={},i=!1){super(t,n);this.explicit=t,this.implicit=n,this.parseNothing=i;}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t;}}function Cn8(e){return"url"in e;}function ii5(e){return"values"in e;}function Du1(e){return"name"in e&&!Cn8(e)&&!ii5(e)&&!Ot8(e);}function Ot8(e){return e&&(ju1(e)||Uu1(e)||Ks1(e));}function ju1(e){return"sequence"in e;}function Uu1(e){return"sphere"in e;}function Ks1(e){return"graticule"in e;}var U24;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup";})(U24||(U24={}));function Bu1(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=$e9(r.field),r;}function Jt8(e,t=!0,n=A1){if(w1(e)){const i=e.map(r=>Jt8(r,t,n));return t?`[${i.join(", ")}]`:i;}else if(Wt8(e))return n(t?Ht7(e):Zp(e));return t?n(L29(e)):e;}function Kh(e,t){for(const n of ne16(e.component.selection??{})){const i=n.name;let r=`${i}${zt9}, ${n.resolve==="global"?"true":`{unit: ${en9(e)}}`}`;for(const s of lr3){if(!s.defined(n))continue;s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(r=s.modifyExpr(e,n,r));}t.push({name:i+Fy,on:[{events:{signal:n.name+zt9},update:`modify(${Z1(n.name+Zt10)}, ${r})`}]});}return Qs1(t);}function Qh(e,t){if(e.component.selection&&b22(e.component.selection).length){const n=Z1(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:v18("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]});}return Qs1(t);}function Jh(e,t){let n=!1;for(const i of ne16(e.component.selection??{})){const r=i.name,s=Z1(r+Zt10),o=t.filter(a=>a.name===r);if(o.length===0){const a=i.resolve==="global"?"union":i.resolve,c=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${hl}(${s}, ${Z1(a)}${c}`});}n=!0;for(const a of lr3)a.defined(i)&&a.topLevelSignals&&(t=a.topLevelSignals(e,i,t));}if(n){const i=t.filter(r=>r.name==="unit");i.length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]});}return Qs1(t);}function Zh(e,t){const n=[...t],i=en9(e,{escape:!1});for(const r of ne16(e.component.selection??{})){const s={name:r.name+Zt10};if(r.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Ie7}}]),r.init){const a=r.project.items.map(Bu1);s.values=r.project.hasSelectionId?r.init.map(c=>({unit:i,[Ie7]:Jt8(c,!1)[0]})):r.init.map(c=>({unit:i,fields:a,values:Jt8(c,!1)}));}const o=n.filter(a=>a.name===r.name+Zt10);o.length||n.push(s);}return n;}function Wu1(e,t){for(const n of ne16(e.component.selection??{}))for(const i of lr3)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t;}function ey(e,t){for(const n of e.children)V22(n)&&(t=Wu1(n,t));return t;}function ty(e,t,n,i){const r=wl(e,t.param,t);return{signal:Se7(n.get("type"))&&w1(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r};}function Qs1(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t));}class R22{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t);}clone(){throw new Error("Cannot clone node");}get parent(){return this._parent;}set parent(t){this._parent=t,t&&t.addChild(this);}get children(){return this._children;}numChildren(){return this._children.length;}addChild(t,n){if(this._children.includes(t)){x18(np);return;}n!==void 0?this._children.splice(n,0,t):this._children.push(t);}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n;}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++);}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this;}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this;}}class ue13 extends R22{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t;}constructor(t,n,i,r){super(t,n);this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0);}dependentFields(){return new Set;}producedFields(){return new Set;}hash(){return this._hash===void 0&&(this._hash=`Output ${ra2()}`),this._hash;}getSource(){return this.refCounts[this._name]++,this._source;}isRequired(){return!!this.refCounts[this._name];}setSource(t){this._source=t;}}function Js1(e){return e.as!==void 0;}function Hu1(e){return`${e}_end`;}class Ze6 extends R22{clone(){return new Ze6(null,C26(this.timeUnits));}constructor(t,n){super(t);this.timeUnits=n;}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,s,o)=>{const{field:a,timeUnit:c}=s;if(c){let u;if(qt9(c)){if(V22(n)){const{mark:l,markDef:f,config:d}=n,p=Nt9({fieldDef:s,markDef:f,config:d});(Kn5(l)||!!p)&&(u={timeUnit:J27(c),field:a});}}else u={as:w22(s,{forAs:!0}),field:a,timeUnit:c};if(V22(n)){const{mark:l,markDef:f,config:d}=n,p=Nt9({fieldDef:s,markDef:f,config:d});Kn5(l)&&Y28(o)&&p!==.5&&(u.rectBandPosition=p);}u&&(r[O24(u)]=u);}return r;},{});return I23(i)?null:new Ze6(t,i);}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},s=J27(i),o={...r,timeUnit:s};return new Ze6(t,{[O24(o)]:o});}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove();}removeFormulas(t){const n={};for(const[i,r]of bt11(this.timeUnits)){const s=Js1(r)?r.as:`${r.field}_end`;t.has(s)||(n[i]=r);}this.timeUnits=n;}producedFields(){return new Set(ne16(this.timeUnits).map(t=>Js1(t)?t.as:Hu1(t.field)));}dependentFields(){return new Set(ne16(this.timeUnits).map(t=>t.field));}hash(){return`TimeUnit ${O24(this.timeUnits)}`;}assemble(){const t=[];for(const n of ne16(this.timeUnits)){const{rectBandPosition:i}=n,r=J27(n.timeUnit);if(Js1(n)){const{field:s,as:o}=n,{unit:a,utc:c,...u}=r,l=[o,`${o}_end`];t.push({field:$e9(s),type:"timeunit",...a?{units:Oi3(a)}:{},...c?{timezone:"utc"}:{},...u,as:l}),t.push(...Gu1(l,i,r));}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=qu1({timeUnit:r,field:o}),c=Hu1(o);t.push({type:"formula",expr:a,as:c}),t.push(...Gu1([o,c],i,r));}}return t;}}const rr3="offsetted_rect_start",sr2="offsetted_rect_end";function qu1({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,s=Za1(i),{part:o,step:a}=ic(s,e.step),c=r?"utcOffset":"timeOffset",u=`${c}('${o}', datum['${t}'], ${n?-a:a})`;return u;}function Gu1([e,t],n,i){if(n!==void 0&&n!==.5){const r=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:Vu1([qu1({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${rr3}`},{type:"formula",expr:Vu1([r,s],n+.5),as:`${e}_${sr2}`}];}return[];}function Vu1([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`;}const ri5="_tuple_fields";class ny{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1;}}const iy={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??(t.project=new ny),s={},o={},a=new Set,c=(g,m)=>{const h=m==="visual"?g.channel:g.field;let y=H21(`${i}_${h}`);for(let $=1;a.has(y);$++)y=H21(`${i}_${h}_${$}`);return a.add(y),{[m]:y};},u=t.type,l=e.config.selection[u],f=n.value!==void 0?p(n.value):null;let{fields:d,encodings:p1}=M1(n.select)?n.select:{};if(!d&&!p1&&f)for(const g of f){if(!M1(g))continue;for(const m of b22(g))bd(m)?(p1||(p1=[])).push(m):u==="interval"?(x18(Jd),p1=l.encodings):(d??(d=[])).push(m);}!d&&!p1&&(p1=l.encodings,"fields"in l&&(d=l.fields));for(const g of p1??[]){const m=e.fieldDef(g);if(m){let h=m.field;if(m.aggregate){x18(Hd(g,m.aggregate));continue;}else if(!h){x18(Ia1(g));continue;}if(m.timeUnit&&!qt9(m.timeUnit)){h=e.vgField(g);const y={timeUnit:m.timeUnit,as:h,field:m.field};o[O24(y)]=y;}if(!s[h]){const y=u==="interval"&&ut11(g)&&Se7(e.getScaleComponent(g).get("type"))?"R":m.bin?"R-RE":"E",$={field:h,channel:g,type:y,index:r.items.length};$.signals={...c($,"data"),...c($,"visual")},r.items.push(s[h]=$),r.hasField[h]=s[h],r.hasSelectionId=r.hasSelectionId||h===Ie7,fa1(g)?($.geoChannel=g,$.channel=la1(g),r.hasChannel[$.channel]=s[h]):r.hasChannel[g]=s[h];}}else x18(Ia1(g));}for(const g of d??[]){if(r.hasField[g])continue;const m={type:"E",field:g,index:r.items.length};m.signals={...c(m,"data")},r.items.push(m),r.hasField[g]=m,r.hasSelectionId=r.hasSelectionId||g===Ie7;}f&&(t.init=f.map(g=>r.items.map(m=>M1(g)?g[m.geoChannel||m.channel]!==void 0?g[m.geoChannel||m.channel]:g[m.field]:g))),I23(o)||(r.timeUnit=new Ze6(null,o));},signals:(e,t,n)=>{const i=t.name+ri5,r=n.filter(s=>s.name===i);return r.length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(Bu1)});}},ht10={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!ut11(r))continue;const s=e.getScaleComponent(r),o=s?s.get("type"):void 0;if(!s||!Se7(o)){x18(Vd);continue;}s.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i);}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||eo1(e)||i.length===0)return n;const r=n.filter(o=>o.name===t.name)[0];let s=r.update;if(s.indexOf(hl)>=0)r.update=`{${i.map(o=>`${Z1($e9(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of i){const a=`${Z1($e9(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`);}r.update=s;}return n.concat(i.map(o=>({name:o.signals.data})));},signals:(e,t,n)=>{if(e.parent&&!eo1(e))for(const i of t.scales){const r=n.filter(s=>s.name===i.signals.data)[0];r.push="outer",delete r.value,delete r.update;}return n;}};function Zs1(e,t){const n=Z1(e.scaleName(t));return`domain(${n})`;}function eo1(e){return e.parent&&Ln6(e.parent)&&(!e.parent.parent??eo1(e.parent.parent));}const Fn8="_brush",Xu1="_scale_trigger",si5="geo_interval_init_tick",Yu1="_init",ry="_center",sy={defined:e=>e.type==="interval",parse:(e,t,n)=>{var i;if(e.hasProjection){const r={...M1(n.select)?n.select:{}};r.fields=[Ie7],r.encodings||(r.encodings=n.value?b22(n.value):[Te8,Ne9]),n.select={type:"interval",...r};}if(t.translate&&!ht10.defined(t)){const r=`!event.item || event.item.mark.name !== ${Z1(t.name+Fn8)}`;for(const s of t.events){if(!s.between){x18(`${s} is not an ordered event stream for interval selections.`);continue;}const o=p((i=s.between[0]).filter??(i.filter=[]));o.indexOf(r)<0&&o.push(r);}}},signals:(e,t,n)=>{const i=t.name,r=i+zt9,s=ne16(t.project.hasChannel).filter(a=>a.channel===q28||a.channel===Q23),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,c)=>a.concat(oy(e,t,c,o&&o[c.index])),[])),e.hasProjection){const a=Z1(e.projectionName()),c=e.projectionName()+ry,{x:u,y:l}=t.project.hasChannel,f=u&&u.signals.visual,d=l&&l.signals.visual,p=u?o&&o[u.index]:`${c}[0]`,g=l?o&&o[l.index]:`${c}[1]`,m=T=>e.getSizeSignalRef(T).signal,h=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;if(o&&(n.unshift({name:i+Yu1,init:`[scale(${a}, [${u?p[0]:p}, ${l?g[0]:g}]), scale(${a}, [${u?p[1]:p}, ${l?g[1]:g}])]`}),!u||!l)){const T=n.find(D=>D.name===c);T||n.unshift({name:c,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`});}const y=`intersect(${h}, {markname: ${Z1(e.getName("marks"))}}, unit.mark)`,$=`{unit: ${en9(e)}}`,k=`vlSelectionTuples(${y}, ${$})`,_=s.map(T=>T.signals.visual);return n.concat({name:r,on:[{events:[..._.length?[{signal:_.join(" || ")}]:[],...o?[{signal:si5}]:[]],update:k}]});}else{if(!ht10.defined(t)){const u=i+Xu1,l=s.map(f=>{const d=f.channel,{data:p,visual:g}=f.signals,m=Z1(e.scaleName(d)),h=e.getScaleComponent(d).get("type"),y=Se7(h)?"+":"";return`(!isArray(${p}) || (${y}invert(${m}, ${g})[0] === ${y}${p}[0] && ${y}invert(${m}, ${g})[1] === ${y}${p}[1]))`;});l.length&&n.push({name:u,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:l.join(" && ")+` ? ${u} : {}`}]});}const a=s.map(u=>u.signals.data),c=`unit: ${en9(e)}, fields: ${i+ri5}, values`;return n.concat({name:r,...o?{init:`{${c}: ${Jt8(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${c}: [${a}]} : null`}]}:{}});}},topLevelSignals:(e,t,n)=>{if(V22(e)&&e.hasProjection&&t.init){const i=n.filter(r=>r.name===si5);i.length||n.unshift({name:si5,value:null,on:[{events:"timer{1}",update:`${si5} === null ? {} : ${si5}`}]});}return n;},marks:(e,t,n)=>{const i=t.name,{x:r,y:s}=t.project.hasChannel,o=r?.signals.visual,a=s?.signals.visual,c=`data(${Z1(t.name+Zt10)})`;if(ht10.defined(t)||!r&&!s)return n;const u={x:r!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:r!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const m of b22(u))u[m]=[{test:`${c}.length && ${c}[0].unit === ${en9(e)}`,...u[m]},{value:0}];const{fill:l,fillOpacity:f,cursor:d,...p}=t.mark,g=b22(p).reduce((m,h)=>(m[h]=[{test:[r!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(y=>y).join(" && "),value:p[h]},{value:null}],m),{});return[{name:`${i+Fn8}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:l},fillOpacity:{value:f}},update:u}},...n,{name:i+Fn8,type:"rect",clip:!0,encode:{enter:{...d?{cursor:{value:d}}:{},fill:{value:"transparent"}},update:{...u,...g}}}];}};function oy(e,t,n,i){const r=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Z1(r?e.scaleName(s):e.projectionName()),c=d=>`scale(${a}, ${d})`,u=e.getSizeSignalRef(s===q28?"width":"height").signal,l=`${s}(unit)`,f=t.events.reduce((d,p)=>[...d,{events:p.between[0],update:`[${l}, ${l}]`},{events:p,update:`[${o}[0], clamp(${l}, 0, ${u})]`}],[]);if(r){const d=n.signals.data,p=ht10.defined(t),g=e.getScaleComponent(s),m=g?g.get("type"):void 0,h=i?{init:Jt8(i,!0,c)}:{value:[]};return f.push({events:{signal:t.name+Xu1},update:Se7(m)?`[${c(`${d}[0]`)}, ${c(`${d}[1]`)}]`:"[0, 0]"}),p?[{name:d,on:[]}]:[{name:o,...h,on:f},{name:d,...i?{init:Jt8(i)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}];}else{const d=s===q28?0:1,p=t.name+Yu1,g=i?{init:`[${p}[0][${d}], ${p}[1][${d}]]`}:{value:[]};return[{name:o,...g,on:f}];}}const ay={defined:e=>e.type==="point",signals:(e,t,n)=>{const i=t.name,r=i+ri5,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=ne16(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Fn8):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),c=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${en9(e)}, `;if(t.project.hasSelectionId)u+=`${Ie7}: ${o}[${Z1(Ie7)}]`;else{const f=s.items.map(d=>{const p=e.fieldDef(d.channel);return p?.bin?`[${o}[${Z1(e.vgField(d.channel,{}))}], ${o}[${Z1(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Z1(d.field)}]`;}).join(", ");u+=`fields: ${r}, values: [${f}]`;}const l=t.events;return n.concat([{name:i+zt9,on:l?[{events:l,update:`${c} ? {${u}} : null`,force:!0}]:[]}]);}};function Nn10(e,t,n,i){const r=Ui3(t)&&t.condition,s=i(t);if(r){const o=p(r),a=o.map(c=>{const u=i(c);if(Qg(c)){const{param:l,empty:f}=c,d=Sl(e,{param:l,empty:f});return{test:d,...u};}else{const l=fr3(e,c.test);return{test:l,...u};}});return{[n]:[...a,...s!==void 0?[s]:[]]};}else return s!==void 0?{[n]:s}:{};}function to2(e,t="text"){const n=e.encoding[t];return Nn10(e,n,t,i=>or3(i,e.config));}function or3(e,t,n="datum"){if(e){if(Re9(e))return W22(e.value);if(F27(e)){const{format:i,formatType:r}=qi3(e);return $s1({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t});}}return;}function Ku1(e,t={}){const{encoding:n,markDef:i,config:r,stack:s}=e,o=n.tooltip;if(w1(o))return{tooltip:Ju1({tooltip:o},s,r,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return Nn10(e,o,"tooltip",c=>{const u=or3(c,r,a);if(u)return u;if(c===null)return;let l=z20("tooltip",i,r);return l===!0&&(l={content:"encoding"}),X1(l)?{value:l}:M1(l)?v20(l)?l:l.content==="encoding"?Ju1(n,s,r,t):{signal:a}:void 0;});}}function Qu1(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},s={},o=i?"datum.datum":"datum",a=[];function c(l,f){const d=Ut8(f),p1=ce8(l)?l:{...l,type:e[d].type},g=p1.title||Cs1(p1,r),m=p(g).join(", ").replaceAll(/"/g,'\\"');let h;if(Y28(f)){const y=f==="x"?"x2":"y2",$=Ke8(e[y]);if(ie13(p1.bin)&&$){const k=w22(p1,{expr:o}),_=w22($,{expr:o}),{format:T,formatType:D}=qi3(p1);h=Jn7(k,_,T,D,r),s[y]=!0;}}if((Y28(f)||f===ve7||f===Fe9)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:$}=qi3(p1);h=$s1({fieldOrDatumDef:p1,format:y,formatType:$,expr:o,config:r,normalizeStack:!0}).signal;}h??(h=or3(p1,r,o).signal),a.push({channel:f,key:m,value:h});}Ts1(e,(l,f)=>{S23(l)?c(l,f):Bi3(l)&&c(l.condition,f);});const u={};for(const{channel:l,key:f,value:d}of a)!s[l]&&!u[f]&&(u[f]=d);return u;}function Ju1(e,t,n,{reactiveGeom:i}={}){const r=Qu1(e,t,n,{reactiveGeom:i}),s=bt11(r).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0;}function cy(e){const{markDef:t,config:n}=e,i=z20("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...uy(e),...ly(e)};}function uy(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=z20("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:t in jd?{}:{ariaRoleDescription:{value:t}};}function ly(e){const{encoding:t,markDef:n,config:i,stack:r}=e,s=t.description;if(s)return Nn10(e,s,"description",c=>or3(c,e.config));const o=z20("description",n,i);if(o!=null)return{description:W22(o)};if(i.aria===!1)return{};const a=Qu1(t,r,i);return I23(a)?void 0:{description:{signal:bt11(a).map(([c,u],l)=>`"${l>0?"; ":""}${c}: " + (${u})`).join(" + ")}};}function ee17(e,t,n={}){const{markDef:i,encoding:r,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:c}=n;a===void 0&&(c??(c=z20(e,i,s,{vgChannel:o,ignoreVgConfig:!0})),c!==void 0&&(a=W22(c)));const u=r[e];return Nn10(t,u,o??e,l=>ws1({channel:e,channelDef:l,markDef:i,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}));}function Zu1(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:s}=n,o=t.filled??z20("filled",n,r),a=P24(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,c=z20(o===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[o===!0&&"color"]??a,u=z20(o===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[o===!1&&"color"],l=o?"fill":"stroke",f={...c?{fill:W22(c)}:{},...u?{stroke:W22(u)}:{}};return n.color&&(o?n.fill:n.stroke)&&x18(Ba1("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...ee17("color",e,{vgChannel:l,defaultValue:o?c:u}),...ee17("fill",e,{defaultValue:i.fill?c:void 0}),...ee17("stroke",e,{defaultValue:i.stroke?u:void 0})};}function fy(e){const{encoding:t,mark:n}=e,i=t.order;return!Ft7(n)&&Re9(i)?Nn10(e,i,"zindex",r=>W22(r.value)):{};}function Tn6({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a){const u=ws1({channel:s,channelDef:a,markDef:t,config:i?.config,scaleName:i.scaleName(s),scale:i.getScaleComponent(s),stack:null,defaultRef:W22(o),bandPosition:r});return{offsetType:"encoding",offset:u};}const c=t[s];return c?{offsetType:"visual",offset:c}:{};}function se14(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:s,config:o,stack:a}=t,c=r[e],u=r[He8(e)],l=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:p}=Tn6({channel:e,markDef:s,encoding:r,model:t,bandPosition:.5}),g=no2({model:t,defaultPos:n,channel:e,scaleName:l,scale:f}),m=!c&&Y28(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:dy({channel:e,channelDef:c,channel2Def:u,markDef:s,config:o,scaleName:l,scale:f,stack:a,offset:d,defaultRef:g,bandPosition:p==="encoding"?0:void 0});return m?{[i||e]:m}:void 0;}function dy(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:s,markDef:o}=e;if(F27(n)&&r&&t===r.fieldChannel){if(S23(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return Mi3({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s});}return Xt9(n,i,{suffix:"end"},{offset:s});}return xs1(e);}function no2({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:s,config:o}=e;return()=>{const a=Ut8(n),c=Et8(n),u=z20(n,s,o,{vgChannel:c});if(u!==void 0)return Qn6(n,u);switch(t){case"zeroOrMin":case"zeroOrMax":if(i){const l=r.get("type");if(!P24([he9.LOG,he9.TIME,he9.UTC],l)){if(r.domainDefinitelyIncludesZero())return{scale:i,value:0};}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0};}break;case"mid":{const l=e[ge6(n)];return{...l,mult:.5};}}return;};}const py={left:"x",center:"xc",right:"x2"},gy={top:"y",middle:"yc",bottom:"y2"};function el1(e,t,n,i="middle"){if(e==="radius"||e==="theta")return Et8(e);const r=e==="x"?"align":"baseline",s=z20(r,t,n);let o;return v20(s)?(x18(yp(r)),o=void 0):o=s,e==="x"?py[o||(i==="top"?"left":"center")]:gy[o||i];}function ar2(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?tl1(e,t,{defaultPos:n,defaultPos2:i}):se14(e,t,{defaultPos:n});}function tl1(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:s}=t,o=He8(e),a=ge6(e),c=my(t,i,o),u=c[a]?el1(e,r,s):Et8(e);return{...se14(e,t,{defaultPos:n,vgChannel:u}),...c};}function my(e,t,n){const{encoding:i,mark:r,markDef:s,stack:o,config:a}=e,c=Ut8(n),u=ge6(n),l=Et8(n),f=i[c],d=e.scaleName(c),p=e.getScaleComponent(c),{offset:g}=n in i||n in s?Tn6({channel:n,markDef:s,encoding:i,model:e}):Tn6({channel:c,markDef:s,encoding:i,model:e});if(!f&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const h=ge6(n),y=e.markDef[h];return y!=null?{[h]:{value:y}}:{[l]:{field:e.getName(n)}};}const m=hy({channel:n,channelDef:f,channel2Def:i[n],markDef:s,config:a,scaleName:d,scale:p,stack:o,offset:g,defaultRef:void 0});return m!==void 0?{[l]:m}:cr2(n,s)||cr2(n,{[n]:Ni3(n,s,a.style),[u]:Ni3(u,s,a.style)})||cr2(n,a[r])||cr2(n,a.mark)||{[l]:no2({model:e,defaultPos:t,channel:n,scaleName:d,scale:p})()};}function hy({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:s,scale:o,stack:a,offset:c,defaultRef:u}){return F27(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Xt9(t,s,{suffix:"start"},{offset:c}):xs1({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:i,config:r,offset:c,defaultRef:u});}function cr2(e,t){const n=ge6(e),i=Et8(e);if(t[i]!==void 0)return{[i]:Qn6(e,t[i])};if(t[e]!==void 0)return{[i]:Qn6(e,t[e])};if(t[n]){const r=t[n];if(Vt8(r))x18(fp(n));else return{[n]:Qn6(e,r)};}return;}function Pt9(e,t){const{config:n,encoding:i,markDef:r}=e,s=r.type,o=He8(t),a=ge6(t),c=i[t],u=i[o],l=e.getScaleComponent(t),f=l?l.get("type"):void 0,d=r.orient,p=i[a]??i.size??z20("size",r,n,{vgChannel:a}),g=ma1(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return S23(c)&&(j25(c.bin)||ie13(c.bin)||c.timeUnit&&!u)&&!(p&&!Vt8(p))&&!i[g]&&!Z26(f)?xy({fieldDef:c,fieldDef2:u,channel:t,model:e}):(F27(c)&&Z26(f)||m)&&!u?by(c,t,e):tl1(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"});}function yy(e,t,n,i,r,s,o){if(Vt8(r))if(n){const c=n.get("type");if(c==="band"){let u=`bandwidth('${t}')`;r.band!==1&&(u=`${r.band} * ${u}`);const l=dt10("minBandSize",{type:o},i);return{signal:l?`max(${Oe4(l)}, ${u})`:u};}else r.band!==1&&(x18(wp(c)),r=void 0);}else return{mult:r.band,field:{group:e}};else{if(v20(r))return r;if(r)return{value:r};}if(n){const c=n.get("range");if(Ct8(c)&&V(c.step))return{value:c.step-2};}if(!s){const{bandPaddingInner:c,barBandPaddingInner:u,rectBandPaddingInner:l}=i.scale,f=X27(c,o==="bar"?u:l);if(v20(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(V(f))return{signal:`${1-f} * ${e}`};}const a=er2(i.view,e);return{value:a-2};}function by(e,t,n){const{markDef:i,encoding:r,config:s,stack:o}=n,a=i.orient,c=n.scaleName(t),u=n.getScaleComponent(t),l=ge6(t),f=He8(t),d=ma1(t),p=n.scaleName(d),g=n.getScaleComponent(Hr3(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let h;(r.size||i.size)&&(m?h=ee17("size",n,{vgChannel:l,defaultRef:W22(i.size)}):x18(_p(i.type)));const y=!!h,$=Tc({channel:t,fieldDef:e,markDef:i,config:s,scaleType:(u||g)?.get("type"),useVlSizeChannel:m});h=h||{[l]:yy(l,p||c,g||u,s,$,!!e,i.type)};const k=(u||g)?.get("type")==="band"&&Vt8($)&&!y?"top":"middle",_=el1(t,i,s,k),T=_==="xc"||_==="yc",{offset:D,offsetType:ye}=Tn6({channel:t,markDef:i,encoding:r,model:n,bandPosition:T?.5:0}),re=xs1({channel:t,channelDef:e,markDef:i,config:s,scaleName:c,scale:u,stack:o,offset:D,defaultRef:no2({model:n,defaultPos:"mid",channel:t,scaleName:c,scale:u}),bandPosition:T?ye==="encoding"?0:.5:v20($)?{signal:`(1-${$})/2`}:Vt8($)?(1-$.band)/2:0});if(l)return{[_]:re,...h};{const tt=Et8(f),le=h[l],nt=D?{...le,offset:D}:le;return{[_]:re,[tt]:w1(re)?[re[0],{...re[1],offset:nt}]:{...re,offset:nt}};}}function nl1(e,t,n,i,r,s,o){if(ua1(e))return 0;const a=e==="x"||e==="y2",c=a?-t/2:t/2;if(v20(n)||v20(r)||v20(i)||s){const u=Oe4(n),l=Oe4(r),f=Oe4(i),d=Oe4(s),p=a?"":"-",g=s?`(${o} < ${d} ? ${p}0.5 * (${d} - (${o})) : ${c})`:c,m=f?`${f} + `:"",h=u?`(${u} ? -1 : 1) * `:"",y=l?`(${l} + ${g})`:g;return{signal:m+h+y};}else return r=r||0,i+(n?-r-c:+r+c);}function xy({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:s,encoding:o}=i,a=i.getScaleComponent(n),c=i.scaleName(n),u=a?a.get("type"):void 0,l=a.get("reverse"),f=Tc({channel:n,fieldDef:e,markDef:s,config:r,scaleType:u}),d=i.component.axes[n]?.[0],p=d?.get("translate")??.5,g=Y28(n)?z20("binSpacing",s,r)??0:0,m=He8(n),h=Et8(n),y=Et8(m),$=dt10("minBandSize",s,r),{offset:k}=Tn6({channel:n,markDef:s,encoding:o,model:i,bandPosition:0}),{offset:_}=Tn6({channel:m,markDef:s,encoding:o,model:i,bandPosition:0}),T=Gg({fieldDef:e,scaleName:c}),D=nl1(n,g,l,p,k,$,T),ye=nl1(m,g,l,p,_??k,$,T),re=v20(f)?{signal:`(1-${f.signal})/2`}:Vt8(f)?(1-f.band)/2:.5,tt=Nt9({fieldDef:e,fieldDef2:t,markDef:s,config:r});if(j25(e.bin)||e.timeUnit){const le=e.timeUnit&&tt!==.5;return{[y]:il1({fieldDef:e,scaleName:c,bandPosition:re,offset:ye,useRectOffsetField:le}),[h]:il1({fieldDef:e,scaleName:c,bandPosition:v20(re)?{signal:`1-${re.signal}`}:1-re,offset:D,useRectOffsetField:le})};}else if(ie13(e.bin)){const le=Xt9(e,c,{},{offset:ye});if(S23(t))return{[y]:le,[h]:Xt9(t,c,{},{offset:D})};if(Bt8(e.bin)&&e.bin.step)return{[y]:le,[h]:{signal:`scale("${c}", ${w22(e,{expr:"datum"})} + ${e.bin.step})`,offset:D}};}x18(Va1(m));return;}function il1({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return Mi3({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:rr3,endSuffix:sr2}:{}});}const Sy=new Set(["aria","width","height"]);function ke7(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?Zu1(e):{};return{...wy(e.markDef,t),...rl1(e,"fill",n),...rl1(e,"stroke",i),...ee17("opacity",e),...ee17("fillOpacity",e),...ee17("strokeOpacity",e),...ee17("strokeWidth",e),...ee17("strokeDash",e),...fy(e),...Ku1(e),...to2(e,"href"),...cy(e)};}function rl1(e,t,n){const{config:i,mark:r,markDef:s}=e,o=z20("invalid",s,i);if(o==="hide"&&n&&!Ft7(r)){const a=$y(e,{invalid:!0,channels:Ci3});if(a)return{[t]:[{test:a,value:null},...p(n)]};}return n?{[t]:n}:{};}function wy(e,t){return Dd.reduce((n,i)=>(!Sy.has(i)&&e[i]!==void 0&&t[i]!=="ignore"&&(n[i]=W22(e[i])),n),{});}function $y(e,{invalid:t=!1,channels:n}){const i=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const c=a.get("type"),u=e.vgField(o,{expr:"datum"});u&&Se7(c)&&(s[u]=!0);}return s;},{}),r=b22(i);if(r.length>0){const s=t?"||":"&&";return r.map(o=>Ss1(o,t)).join(` ${s} `);}return;}function io1(e){const{config:t,markDef:n}=e,i=z20("invalid",n,t);if(i){const r=vy(e,{channels:qe8});if(r)return{defined:{signal:r}};}return{};}function vy(e,{invalid:t=!1,channels:n}){const i=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const c=a.get("type"),u=e.vgField(o,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});u&&Se7(c)&&(s[u]=!0);}return s;},{}),r=b22(i);if(r.length>0){const s=t?"||":"&&";return r.map(o=>Ss1(o,t)).join(` ${s} `);}return;}function sl1(e,t){return t!==void 0?{[e]:W22(t)}:void 0;}const ro1="voronoi",ol1={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(ro1);},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,s=e.mark;if(Ft7(s))return x18(qd(s)),n;const o={name:e.getName(ro1),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Ku1(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,c=!1;return n.forEach((u,l)=>{const f=u.name??"";f===e.component.mark[0].name?a=l:f.indexOf(ro1)>=0&&(c=!0);}),c||n.splice(a+1,0,o),n;}},al1={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Ls1(e.bind),parse:(e,t,n)=>yl(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,s=t.bind,o=t.init&&t.init[0],a=ol1.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((c,u)=>{const l=H21(`${i}_${c.field}`),f=n.filter(d=>d.name===l);f.length||n.unshift({name:l,...o?{init:Jt8(o[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Z1(c.field)}] : null`}]:[],bind:s[c.field]??s[c.channel]??s});}),n;},signals:(e,t,n)=>{const i=t.name,r=t.project,s=n.filter(u=>u.name===i+zt9)[0],o=i+ri5,a=r.items.map(u=>H21(`${i}_${u.field}`)),c=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(s.update=`${c} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n;}},ur2="_toggle",cl={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+ur2,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+zt9,i=t.name+ur2;return`${i} ? null : ${n}, `+(t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${en9(e)}}, `)+`${i} ? ${n} : null`;}},Ey={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=X1(t.clear)?v18(t.clear,"view"):t.clear);},topLevelSignals:(e,t,n)=>{if(al1.defined(t))for(const i of t.project.items){const r=n.findIndex(s=>s.name===H21(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"});}return n;},signals:(e,t,n)=>{function i(r,s){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:s});}if(t.type==="interval")for(const r of t.project.items){const s=n.findIndex(o=>o.name===r.signals.visual);if(i(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===r.signals.data);i(o,"null");}}else{let r=n.findIndex(s=>s.name===t.name+zt9);i(r,"null"),cl.defined(t)&&(r=n.findIndex(s=>s.name===t.name+ur2),i(r,"false"));}return n;}},ul={defined:e=>{const t=e.resolve==="global"&&e.bind&&Ls1(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Ie7;return t&&!n&&x18(Xd),t&&n;},parse:(e,t,n)=>{const i=C26(n);if(i.select=X1(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},yl(t,i),M1(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=p(a.filter??[]),a.filter.includes(o)||a.filter.push(o);}const r=Ms1(t.bind)?t.bind.legend:"click",s=X1(r)?v18(r,"view"):p(r);t.bind={legend:{merge:s}};},topLevelSignals:(e,t,n)=>{const i=t.name,r=Ms1(t.bind)&&t.bind.legend,s=o=>a=>{const c=C26(a);return c.markname=o,c;};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${H21(o.field)}_legend`,c=`${i}_${a}`,u=n.filter(l=>l.name===c);if(u.length===0){const l=r.merge.map(s(`${a}_symbols`)).concat(r.merge.map(s(`${a}_labels`))).concat(r.merge.map(s(`${a}_entries`)));n.unshift({name:c,...t.init?{}:{value:null},on:[{events:l,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${c}`,force:!0}]});}}return n;},signals:(e,t,n)=>{const i=t.name,r=t.project,s=n.find(d=>d.name===i+zt9),o=i+ri5,a=r.items.filter(d=>d.hasLegend).map(d=>H21(`${i}_${H21(d.field)}_legend`)),c=a.map(d=>`${d} !== null`).join(" && "),u=`${c} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:u}):a.length>0&&(s.update=u,delete s.value,delete s.on);const l=n.find(d=>d.name===i+ur2),f=Ms1(t.bind)&&t.bind.legend;return l&&(t.events?l.on.push({...l.on[0],events:f}):l.on[0].events=f),n;}};function _y(e,t,n){const i=e.fieldDef(t)?.field;for(const r of ne16(e.component.selection??{})){const s=r.project.hasField[i]??r.project.hasChannel[t];if(s&&ul.defined(r)){const o=n.get("selections")??[];o.push(r.name),n.set("selections",o,!1),s.hasLegend=!0;}}}const ll1="_translate_anchor",fl="_translate_delta",ky={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=ht10.defined(t),s=i+ll1,{x:o,y:a}=t.project.hasChannel;let c=v18(t.translate,"scope");return r||(c=c.map(u=>(u.between[0].markname=i+Fn8,u))),n.push({name:s,value:{},on:[{events:c.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${r?Zs1(e,q28):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${r?Zs1(e,Q23):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:i+fl,value:{},on:[{events:c,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&dl(e,t,o,"width",n),a!==void 0&&dl(e,t,a,"height",n),n;}};function dl(e,t,n,i,r){const s=t.name,o=s+ll1,a=s+fl,c=n.channel,u=ht10.defined(t),l=r.filter(T=>T.name===n.signals[u?"data":"visual"])[0],f=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(c),p=d&&d.get("type"),g=d&&d.get("reverse"),m=u?c===q28?g?"":"-":g?"-":"":"",h=`${o}.extent_${c}`,y=`${m}${a}.${c} / ${u?`${f}`:`span(${h})`}`,$=!u||!d?"panLinear":p==="log"?"panLog":p==="symlog"?"panSymlog":p==="pow"?"panPow":"panLinear",k=u?p==="pow"?`, ${d.get("exponent")??1}`:p==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${$}(${h}, ${y}${k})`;l.on.push({events:{signal:a},update:u?_:`clampRange(${_}, 0, ${f})`});}const pl="_zoom_anchor",gl="_zoom_delta",Cy={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=ht10.defined(t),s=i+gl,{x:o,y:a}=t.project.hasChannel,c=Z1(e.scaleName(q28)),u=Z1(e.scaleName(Q23));let l=v18(t.zoom,"scope");return r||(l=l.map(f=>(f.markname=i+Fn8,f))),n.push({name:i+pl,on:[{events:l,update:r?"{"+[c?`x: invert(${c}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:l,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&ml(e,t,o,"width",n),a!==void 0&&ml(e,t,a,"height",n),n;}};function ml(e,t,n,i,r){const s=t.name,o=n.channel,a=ht10.defined(t),c=r.filter($=>$.name===n.signals[a?"data":"visual"])[0],u=e.getSizeSignalRef(i).signal,l=e.getScaleComponent(o),f=l&&l.get("type"),d=a?Zs1(e,o):c.name,p=s+gl,g=`${s}${pl}.${o}`,m=!a||!l?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",h=a?f==="pow"?`, ${l.get("exponent")??1}`:f==="symlog"?`, ${l.get("constant")??1}`:"":"",y=`${m}(${d}, ${g}, ${p}${h})`;c.on.push({events:{signal:p},update:a?y:`clampRange(${y}, 0, ${u})`});}const Zt10="_store",zt9="_tuple",Fy="_modify",hl="vlSelectionResolve",lr3=[ay,sy,iy,cl,al1,ht10,ul,Ey,ky,Cy,ol1];function Ny(e){let t=e.parent;for(;t&&!De6(t);)t=t.parent;return t;}function en9(e,{escape:t}={escape:!0}){let n=t?Z1(e.name):e.name;const i=Ny(e);if(i){const{facet:r}=i;for(const s of _e6)r[s]&&(n+=` + '__facet_${s}_' + (facet[${Z1(i.vgField(s))}])`);}return n;}function so1(e){return ne16(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1);}function yl(e,t){(X1(t.select)||!t.select.on)&&delete e.events,(X1(t.select)||!t.select.clear)&&delete e.clear,(X1(t.select)||!t.select.toggle)&&delete e.toggle;}function oo1(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...oo1(e.object)),t.push(...oo1(e.property))),t);}function bl(e){return e.object.type==="MemberExpression"?bl(e.object):e.object.name==="datum";}function xl(e){const t=L0(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&bl(i)&&n.add(oo1(i).slice(1).join("."));}),n;}class An11 extends R22{clone(){return new An11(null,this.model,C26(this.filter));}constructor(t,n,i){super(t);this.model=n,this.filter=i,this.expr=fr3(this.model,this.filter,this),this._dependentFields=xl(this.expr);}dependentFields(){return this._dependentFields;}producedFields(){return new Set;}assemble(){return{type:"filter",expr:this.expr};}hash(){return`Filter ${this.expr}`;}}function Ty(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;for(const r of t){const s=H21(r.name),o=r.select,a=X1(o)?o:o.type,c=M1(o)?C26(o):{type:a},u=i[a];for(const d in u){if(d==="fields"||d==="encodings")continue;d==="mark"&&(c[d]={...u[d],...c[d]}),(c[d]===void 0||c[d]===!0)&&(c[d]=C26(u[d]??c[d]));}const l=n[s]={...c,name:s,type:a,init:r.value,bind:r.bind,events:X1(c.on)?v18(c.on,"scope"):p(C26(c.on))},f=C26(r);for(const d of lr3)d.defined(l)&&d.parse&&d.parse(e,l,f);}return n;}function Sl(e,t,n,i="datum"){const r=X1(t)?t:t.param,s=H21(r),o=Z1(s+Zt10);let a;try{a=e.getSelectionComponent(s,r);}catch(d){return`!!${s}`;}if(a.project.timeUnit){const d=n??e.component.data.raw,p=a.project.timeUnit.clone();d.parent?p.insertAsParentOf(d):d.parent=p;}const c=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${Z1(a.resolve)})`,l=`${c}${o}, ${i}${u}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${l}`:`!${f} || ${l}`;}function wl(e,t,n){const i=H21(t),r=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(i,t);}catch(a){return i;}if(!r&&!s)s=o.project.items[0].field,o.project.items.length>1&&x18(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Z1(s)}.`);else if(r&&!s){const a=o.project.items.filter(c=>c.channel===r);!a.length||a.length>1?(s=o.project.items[0].field,x18((a.length?"Multiple ":"No ")+`matching ${Z1(r)} encoding found for selection ${Z1(n.param)}. Using "field": ${Z1(s)}.`)):s=a[0].field;}return`${o.name}[${Z1($e9(s))}]`;}function Ay(e,t){for(const[n,i]of bt11(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new ue13(new An11(t,e,{param:n}),r,U24.Lookup,e.component.data.outputNodeRefCounts);}}function fr3(e,t,n){return Bn7(t,i=>X1(i)?i:cg(i)?Sl(e,i,n):sc1(i));}function Oy(e,t){return e?w1(e)&&!kt10(e)?e.map(n=>Cs1(n,t)).join(", "):e:void 0;}function ao1(e,t,n,i){var r,s;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=i;}function oi5(e,t,n,i={header:!1}){const{disable:r,orient:s,scale:o,labelExpr:a,title:c,zindex:u,...l}=e.combine();if(r)return;for(const f in l){const d=fm[f],p1=l[f];if(d&&d!==t&&d!=="both")delete l[f];else if(ni5(p1)){const{condition:g,...m}=p1,h=p(g),y=Uc[f];if(y){const{vgProp:$,part:k}=y,_=[...h.map(T=>{const{test:D,...ye}=T;return{test:fr3(null,D),...ye};}),m];ao1(l,k,$,_),delete l[f];}else if(y===null){const $={signal:h.map(k=>{const{test:_,...T}=k;return`${fr3(null,_)} ? ${ka1(T)} : `;}).join("")+ka1(m)};l[f]=$;}}else if(v20(p1)){const g=Uc[f];if(g){const{vgProp:m,part:h}=g;ao1(l,h,m,p1),delete l[f];}}P24(["labelAlign","labelBaseline"],f)&&l[f]===null&&delete l[f];}if(t==="grid"){if(!l.grid)return;if(l.encode){const{grid:f}=l.encode;l.encode={...f?{grid:f}:{}},I23(l.encode)&&delete l.encode;}return{scale:o,orient:s,...l,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:X27(u,0)};}else{if(!i.header&&e.mainExtracted)return;if(a!==void 0){let d=a;l.encode?.labels?.update&&v20(l.encode.labels.update.text)&&(d=Mt10(a,"datum.label",l.encode.labels.update.text.signal)),ao1(l,"labels","text",{signal:d});}if(l.labelAlign===null&&delete l.labelAlign,l.encode){for(const d of Bc1)e.hasAxisPart(d)||delete l.encode[d];I23(l.encode)&&delete l.encode;}const f=Oy(c,n);return{scale:o,orient:s,grid:!1,...f?{title:f}:{},...l,...n.aria===!1?{aria:!1}:{},zindex:X27(u,0)};}}function $l(e){const{axes:t}=e.component,n=[];for(const i of qe8)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const s=i==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o});}}return n;}function Py(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>oi5(r,"grid",t)),...i.map(r=>oi5(r,"grid",t)),...n.map(r=>oi5(r,"main",t)),...i.map(r=>oi5(r,"main",t))].filter(r=>r);}function vl(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},c=new Set([...b22(o),...b22(a)]),u={};for(const l of c.values())u[l]={signal:`${i.signal} === "${s}" ? ${Oe4(o[l])} : ${Oe4(a[l])}`};return u;}return t[r];})]);}function zy(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:lc(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=v20(n)?"axisOrient":`axis${Wn7(n)}`,a=[...r,...r.map(u=>s+u.substr(4))],c=["axis",o,s];return{vlOnlyAxisConfig:vl(a,i,e,n),vgAxisConfig:vl(c,i,e,n),axisConfigStyle:Ry([...c,...a],i)};}function Ry(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=p(r);for(const s of r)n.push(t.style[s]);}}return Object.assign.apply(null,n);}function co1(e,t,n,i={}){const r=Fa1(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(i[s]?.[e]!==void 0)return{configFrom:s,configValue:i[s][e]};return{};}const El={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Iy(n,e),gridScale:({model:e,channel:t})=>Ly(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||kl(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||_l(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Dy(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??jy(t.type,n,S23(t)&&!!t.timeUnit,S23(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??By({fieldOrDatumDef:i,scaleType:r,size:o,values:n.values});},tickMinStep:Wy,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=Cl(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return Ta1(r?[Nc(r)]:[],S23(o)?[Nc(o)]:[]);},values:({axis:e,fieldOrDatumDef:t})=>Hy(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??qy(n,t)};function Iy(e,t){return!Z26(e)&&S23(t)&&!j25(t?.bin)&&!ie13(t?.bin);}function Ly(e,t){const n=t==="x"?"y":"x";return e.getScaleComponent(n)?e.scaleName(n):void 0;}function My(e,t,n,i,r){const s=t?.labelAngle;if(s!==void 0)return v20(s)?s:Hn7(s);{const{configValue:o}=co1("labelAngle",i,t?.style,r);return o!==void 0?Hn7(o):n===q28&&P24([ps1,ds1],e.type)&&!(S23(e)&&e.timeUnit)?270:void 0;}}function uo1(e){return`(((${e.signal} % 360) + 360) % 360)`;}function _l(e,t,n,i){if(e!==void 0)if(n==="x"){if(v20(e)){const r=uo1(e),s=v20(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${s} ? "bottom" : "top"`};}if(45<e&&e<135||225<e&&e<315)return"middle";if(v20(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`};}return(e<=45||315<=e)===(t==="top")?"bottom":"top";}else{if(v20(e)){const r=uo1(e),s=v20(t)?`(${t.signal} === "left")`:t==="left",o=i?'"middle"':"null";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${o} : (45 <= ${r} && ${r} <= 135) === ${s} ? "top" : "bottom"`};}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(v20(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`};}return(45<=e&&e<=135)===(t==="left")?"top":"bottom";}return;}function kl(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,s=i?"bottom":"left";if(v20(e)){const o=uo1(e),a=v20(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${r?`(${o} + 90)`:o} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${o} && ${o} < ${180+r}) === ${a} ? "left" : "right"`};}if((e+r)%180===0)return i?null:"center";if(v20(t)){const o=r<e&&e<180+r?"===":"!==",a=`${t.signal} ${o} "${s}"`;return{signal:`${a} ? "left" : "right"`};}return(r<e&&e<180+r)===(t===s)?"left":"right";}function Dy(e,t){return t==="x"&&P24(["quantitative","temporal"],e)?!0:void 0;}function jy(e,t,n,i){return n&&!M1(i)||e!=="nominal"&&e!=="ordinal"?t==="log"||t==="symlog"?"greedy":!0:void 0;}function Uy(e){return e==="x"?"bottom":"left";}function By({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!Z26(t)&&t!=="log"){if(S23(e)){if(j25(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&P24(["month","hours","day","quarter"],J27(e.timeUnit)?.unit))return;}return{signal:`ceil(${n.signal}/40)`};}return;}function Wy({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(S23(t)){const{timeUnit:n}=t;if(n){const i=nc(n);if(i)return{signal:i};}}return;}function Cl(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),s=i?i.title:void 0,o=r?r.title:void 0;return s&&o?Aa1(s,o):s||o||(s!==void 0?s:o!==void 0?o:void 0);}function Hy(e,t){const n=e.values;return w1(n)?jc(t,n):v20(n)?n:void 0;}function qy(e,t){return e==="rect"&&Hi3(t)?1:0;}class On6 extends R22{clone(){return new On6(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n,this._dependentFields=xl(this.transform.calculate);}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(!Kt9(i))return;if(Fc1(i.sort)){const{field:s,timeUnit:o}=i,a=i.sort,c=a.map((u,l)=>`${sc1({field:s,timeUnit:o,equal:u})} ? ${l} : `).join("")+a.length;t=new On6(t,{calculate:c,as:Pn9(i,r,{forAs:!0})});}}),t;}producedFields(){return new Set([this.transform.as]);}dependentFields(){return this._dependentFields;}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as};}hash(){return`Calculate ${O24(this.transform)}`;}}function Pn9(e,t,n){return w22(e,{prefix:t,suffix:"sort_index",...n??{}});}function dr2(e,t){return P24(["top","bottom"],t)?"column":P24(["left","right"],t)||e==="row"?"row":"column";}function zn7(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return X27((t||{})[e],r[e],n.header[e]);}function pr2(e,t,n,i){const r={};for(const s of e){const o=zn7(s,t||{},n,i);o!==void 0&&(r[s]=o);}return r;}const lo1=["row","column"],fo1=["header","footer"];function Gy(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=pr2(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),c=dr2(t,a),u=Hn7(o);return{name:`${t}-title`,type:"group",role:`${c}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...Nl(u,c),...Fl(c,u,s),...Tl(i,r,t,Pm,au1)}};}function Fl(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"};}const i=kl(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{};}function Nl(e,t){const n=_l(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{};}function Vy(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of fo1)if(n[r])for(const s of n[r]){const o=Yy(e,t,r,n,s);o!=null&&i.push(o);}return i;}function Xy(e,t){const{sort:n}=e;return Xe8(n)?{field:w22(n,{expr:"datum"}),order:n.order??"ascending"}:w1(n)?{field:Pn9(e,t,{expr:"datum"}),order:"ascending"}:{field:w22(e,{expr:"datum"}),order:n??"ascending"};}function po1(e,t,n){const{format:i,formatType:r,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:c}=pr2(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=$s1({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,l=dr2(t,a);return{text:{signal:c?Mt10(Mt10(c,"datum.label",u),"datum.value",w22(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...Nl(s,l),...Fl(l,s,o),...Tl(n,e,t,zm,cu1)};}function Yy(e,t,n,i,r){if(r){let s=null;const{facetFieldDef:o}=i,a=e.config?e.config:void 0;if(o&&r.labels){const{labelOrient:f}=pr2(["labelOrient"],o.header,a,t);(t==="row"&&!P24(["top","bottom"],f)||t==="column"&&!P24(["left","right"],f))&&(s=po1(o,t,a));}const c=De6(e)&&!Zn5(e.facet),u=r.axes,l=u?.length>0;if(s||l){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Xy(o,t)}:{},...l&&c?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...r.sizeSignal?{encode:{update:{[f]:r.sizeSignal}}}:{},...l?{axes:u}:{}};}}return null;}const Ky={column:{start:0,end:1},row:{start:1,end:0}};function Qy(e,t){return Ky[t][e];}function Jy(e,t){const n={};for(const i of _e6){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:s,titleOrient:o}=pr2(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),a=dr2(i,o),c=Qy(s,a);c!==void 0&&(n[a]=c);}}return I23(n)?void 0:n;}function Tl(e,t,n,i,r){const s={};for(const o of i){if(!r[o])continue;const a=zn7(o,t?.header,e,n);a!==void 0&&(s[r[o]]=a);}return s;}function go1(e){return[...gr2(e,"width"),...gr2(e,"height"),...gr2(e,"childWidth"),...gr2(e,"childHeight")];}function gr2(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Z26(o)&&Ct8(a)){const c=e.scaleName(n);if(De6(e.parent)){const u=e.parent.component.resolve;if(u.scale[n]==="independent")return[Al(c,a)];}return[Al(c,a),{name:r,update:Ol(c,s,`domain('${c}').length`)}];}}throw new Error("layout size is step although width/height is not step.");}else if(i=="container"){const s=r.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=Bs1(e.config.view,s?"width":"height"),c=`isFinite(${o}) ? ${o} : ${a}`;return[{name:r,init:c,on:[{update:c,events:"window:resize"}]}];}else return[{name:r,value:i}];}function Al(e,t){const n=`${e}_step`;return v20(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step};}function Ol(e,t,n){const i=t.get("type"),r=t.get("padding"),s=X27(t.get("paddingOuter"),r);let o=t.get("paddingInner");return o=i==="band"?o!==void 0?o:r:1,`bandspace(${n}, ${Oe4(o)}, ${Oe4(s)}) * ${e}_step`;}function Pl(e){return e==="childWidth"?"width":e==="childHeight"?"height":e;}function zl(e,t){return b22(e).reduce((n,i)=>{const r=e[i];return{...n,...Nn10(t,r,i,s=>W22(s.value))};},{});}function Rl(e,t){if(De6(t))return e==="theta"?"independent":"shared";if(Ln6(t))return"shared";if(No1(t))return Y28(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve");}function mo1(e,t){const n=e.scale[t],i=Y28(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&x18(Tp(t)),"independent"):e[i][t]||"shared";}const Zy={...Lm,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Il=b22(Zy);class eb extends mt10{}const Ll={symbols:tb,gradient:nb,labels:ib,entries:rb};function tb(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:c,mark:u}=n,l=o.filled&&u!=="trail";let f={...Bd({},n,Pg),...Zu1(n,{filled:l})};const d=r.get("symbolOpacity")??c.legend.symbolOpacity,p=r.get("symbolFillColor")??c.legend.symbolFillColor,g=r.get("symbolStrokeColor")??c.legend.symbolStrokeColor,m=d===void 0?Ml(a.opacity)??o.opacity:void 0;if(f.fill){if(i==="fill"||l&&i===de8)delete f.fill;else if(f.fill.field)p?delete f.fill:(f.fill=W22(c.legend.symbolBaseFillColor??"black"),f.fillOpacity=W22(m??1));else if(w1(f.fill)){const h=ho1(a.fill??a.color)??o.fill??(l&&o.color);h&&(f.fill=W22(h));}}if(f.stroke){if(i==="stroke"||!l&&i===de8)delete f.stroke;else if(f.stroke.field||g)delete f.stroke;else if(w1(f.stroke)){const h=X27(ho1(a.stroke||a.color),o.stroke,l?o.color:void 0);h&&(f.stroke={value:h});}}if(i!==ct14){const h=S23(t)&&jl(n,r,t);h?f.opacity=[{test:h,...W22(m??1)},W22(c.legend.unselectedOpacity)]:m&&(f.opacity=W22(m));}return f={...f,...e},I23(f)?void 0:f;}function nb(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:s,encoding:o}=t;let a={};const c=i.get("gradientOpacity")??r.legend.gradientOpacity,u=c===void 0?Ml(o.opacity)||s.opacity:void 0;return u&&(a.opacity=W22(u)),a={...a,...e},I23(a)?void 0:a;}function ib(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const s=n.legend(i)||{},o=n.config,a=S23(t)?jl(n,r,t):void 0,c=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:u,formatType:l}=s;let f;Yt9(l)?f=ze7({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:l,config:o}):u===void 0&&l===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=ze7({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&S23(t)&&t.timeUnit===void 0&&(f=ze7({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...c?{opacity:c}:{},...f?{text:f}:{},...e};return I23(d)?void 0:d;}function rb(e,{legendCmpt:t}){const n=t.get("selections");return n?.length?{...e,fill:{value:"transparent"}}:e;}function Ml(e){return Dl(e,(t,n)=>Math.max(t,n.value));}function ho1(e){return Dl(e,(t,n)=>X27(t,n.value));}function Dl(e,t){return Zg(e)?p(e.condition).reduce(t,e.value):Re9(e)?e.value:void 0;}function jl(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=Z1(n.field);return i.map(s=>{const o=Z1(H21(s)+Zt10);return`(!length(data(${o})) || (${s}[${r}] && indexof(${s}[${r}], datum.value) >= 0))`;}).join(" || ");}const Ul={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return $c(e,e.type,i,r,n,!1);},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return vc(i,t,n);},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??fb(e);},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??db(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??ob(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>vn7(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(hn10(n)&&Pe7(t)){if(e==="gradient")return;}else if(e==="symbol")return;return e;},values:({fieldOrDatumDef:e,legend:t})=>sb(t,e)};function sb(e,t){const n=e.values;return w1(n)?jc(t,n):v20(n)?n:void 0;}function ob(e,t,n,i){if(t!=="shape"){const r=ho1(n)??i;if(r)return r;}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle";}}function ab(e){const{legend:t}=e;return X27(t.type,cb(e));}function cb({channel:e,timeUnit:t,scaleType:n}){if(hn10(e)){if(P24(["quarter","month","day"],t))return"symbol";if(Pe7(n))return"gradient";}return"symbol";}function ub({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??lb(n,t);}function lb(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0;}}function fb({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:c}=e;return Pe7(r)?n==="horizontal"?i==="top"||i==="bottom"?Bl(t,"width",o,s):o:Bl(t,"height",c,a):void 0;}function Bl(e,t,n,i){const r=e.getSizeSignalRef(t).signal;return{signal:`clamp(${r}, ${n}, ${i})`};}function db(e){return P24(["quantile","threshold","log","symlog"],e)?"greedy":void 0;}function Wl(e){const t=V22(e)?pb(e):yb(e);return e.component.legends=t,t;}function pb(e){const{encoding:t}=e,n={};for(const i of[de8,...lu1]){const r=K27(t[i]);if(!r||!e.getScaleComponent(i))continue;if(i===pe7&&S23(r)&&r.type===xn7)continue;n[i]=hb(e,i);}return n;}function gb(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n};}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n};}function mb(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===i?.title)return!0;}return e===(n||{})[t];}function hb(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:s}=e,o=s.legend,a=new eb({},gb(e,t));_y(e,t,a);const c=n!==void 0?!n:o.disable;if(a.set("disable",c,n!==void 0),c)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),l=K27(r[t]),f=S23(l)?J27(l.timeUnit)?.unit:void 0,d=n.orient||s.legend.orient||"right",p=ab({legend:n,channel:t,timeUnit:f,scaleType:u}),g=ub({legend:n,legendType:p,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:l,legendConfig:o,config:s,scaleType:u,orient:d,legendType:p,direction:g};for(const _ of Il){if(p==="gradient"&&_.startsWith("symbol")||p==="symbol"&&_.startsWith("gradient"))continue;const T=_ in Ul?Ul[_](m):n[_];if(T!==void 0){const D=mb(T,_,n,e.fieldDef(t));(D||s.legend[_]===void 0)&&a.set(_,T,D);}}const h=n?.encoding??{},y=a.get("selections"),$={},k={fieldOrDatumDef:l,model:e,channel:t,legendCmpt:a,legendType:p};for(const _ of["labels","legend","title","symbols","gradient","entries"]){const T=zl(h[_]??{},e),D=_ in Ll?Ll[_](T,k):T;D!==void 0&&!I23(D)&&($[_]={...y?.length&&S23(l)?{name:`${H21(l.field)}_legend_${_}`}:{},...y?.length?{interactive:!!y}:{},update:D});}return I23($)||a.set("encode",$,!!n?.encoding),a;}function yb(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){Wl(i);for(const r of b22(i.component.legends))n.legend[r]=mo1(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=Hl(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]));}for(const i of b22(t))for(const r of e.children){if(!r.component.legends[i])continue;n.legend[i]==="shared"&&delete r.component.legends[i];}return t;}function Hl(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const s of Il){const o=At11(e.getWithExplicit(s),t.getWithExplicit(s),s,"legend",(a,c)=>{switch(s){case"symbolType":return bb(a,c);case"title":return Oa1(a,c);case"type":return r=!0,we10("symbol");}return ir2(a,c,s,"legend");});e.setWithExplicit(s,o);}return r&&(e.implicit?.encode?.gradient&&xi4(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&xi4(e.explicit,["encode","gradient"])),e;}function bb(e,t){return t.value==="circle"?t:e;}function xb(e,t,n,i){var r,s;e.encode??(e.encode={}),(r=e.encode)[t]??(r[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=i;}function ql(e){const t=e.component.legends,n={};for(const r of b22(t)){const s=e.getScaleComponent(r),o=L29(s.get("domains"));if(n[o])for(const a of n[o]){const c=Hl(a,t[r]);c||n[o].push(t[r]);}else n[o]=[t[r].clone()];}const i=ne16(n).flat().map(r=>Sb(r,e.config)).filter(r=>r!==void 0);return i;}function Sb(e,t){const{disable:n,labelExpr:i,selections:r,...s}=e.combine();if(n)return;if(t.aria===!1&&s.aria==null&&(s.aria=!1),s.encode?.symbols){const o=s.encode.symbols.update;o.fill&&o.fill.value!=="transparent"&&!o.stroke&&!s.stroke&&(o.stroke={value:"transparent"});for(const a of lu1)s[a]&&delete o[a];}if(s.title||delete s.title,i!==void 0){let o=i;s.encode?.labels?.update&&v20(s.encode.labels.update.text)&&(o=Mt10(i,"datum.label",s.encode.labels.update.text.signal)),xb(s,"labels","text",{signal:o});}return s;}function wb(e){return Ln6(e)||No1(e)?$b(e):Gl(e);}function $b(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),Gl(e));}function Gl(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const c=v20(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return P24(o,c)||o.push(c),o;},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}];}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}];}const vb=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Vl extends mt10{constructor(t,n,i,r){super({...n},{name:t});this.specifiedProjection=n,this.size=i,this.data=r,this.merged=!1;}get isFit(){return!!this.data;}}function Xl(e){e.component.projection=V22(e)?Eb(e):Cb(e);}function Eb(e){if(e.hasProjection){const t=me10(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?_b(e):void 0,s=new Vl(e.projectionName(!0),{...me10(e.config.projection)??{},...t??{}},i,r);return s.get("type")||s.set("type","equalEarth",!1),s;}return;}function _b(e){const t=[],{encoding:n}=e;for(const i of[[Te8,Ne9],[Ee6,Ae8]])(K27(n[i[0]])||K27(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(pe7)&&e.typedFieldDef(pe7).type===xn7&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(U24.Main)),t;}function kb(e,t){const n=Rr2(vb,r=>!g(e.explicit,r)&&!g(t.explicit,r)?!0:!!(g(e.explicit,r)&&g(t.explicit,r)&&be7(e.get(r),t.get(r)))),i=be7(e.size,t.size);if(i){if(n)return e;if(be7(e.explicit,{}))return t;if(be7(t.explicit,{}))return e;}return null;}function Cb(e){if(e.children.length===0)return;let t;for(const i of e.children)Xl(i);const n=Rr2(e.children,i=>{const r=i.component.projection;if(r)if(t){const s=kb(t,r);return s&&(t=s),!!s;}else return t=r,!0;else return!0;});if(t&&n){const i=e.projectionName(!0),r=new Vl(i,t.specifiedProjection,t.size,C26(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&r.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),i),o.merged=!0);}return r;}return;}function Fb(e,t,n,i){if(ti5(t,n)){const r=V22(e)?e.axis(n)??e.legend(n)??{}:{},s=w22(t,{expr:"datum"}),o=w22(t,{expr:"datum",binSuffix:"end"});return{formulaAs:w22(t,{binSuffix:"range",forAs:!0}),formula:Jn7(s,o,r.format,r.formatType,i)};}return{};}function Yl(e,t){return`${wa1(e)}_${t}`;}function Nb(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)};}function yo1(e,t,n){const i=Vi3(n,void 0)??{},r=Yl(i,t);return e.getName(`${r}_bins`);}function Tb(e){return"as"in e;}function Kl(e,t,n){let i,r;Tb(e)?i=X1(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[w22(e,{forAs:!0}),w22(e,{binSuffix:"end",forAs:!0})];const s={...Vi3(t,void 0)},o=Yl(s,e.field),{signal:a,extentSignal:c}=Nb(n,o);if(Fi2(s.extent)){const l=s.extent;r=wl(n,l.param,l),delete s.extent;}const u={bin:s,field:e.field,as:[i],...a?{signal:a}:{},...c?{extentSignal:c}:{},...r?{span:r}:{}};return{key:o,binComponent:u};}class et13 extends R22{clone(){return new et13(null,C26(this.bins));}constructor(t,n){super(t);this.bins=n;}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,s,o)=>{if(ce8(s)&&j25(s.bin)){const{key:a,binComponent:c}=Kl(s,s.bin,n);r[a]={...c,...r[a],...Fb(n,s,o,n.config)};}return r;},{});return I23(i)?null:new et13(t,i);}static makeFromTransform(t,n,i){const{key:r,binComponent:s}=Kl(n,n.bin,i);return new et13(t,{[r]:s});}merge(t,n){for(const i of b22(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=je9([...this.bins[i].as,...t.bins[i].as],O24)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove();}producedFields(){return new Set(ne16(this.bins).map(t=>t.as).flat(2));}dependentFields(){return new Set(ne16(this.bins).map(t=>t.field));}hash(){return`Bin ${O24(this.bins)}`;}assemble(){return ne16(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:$e9(t.field),as:i,signal:t.signal,...Fi2(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:$e9(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const c of r)for(let u=0;u<2;u++)n.push({type:"formula",expr:w22({field:i[u]},{expr:"datum"}),as:c[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n;});}}function Ab(e,t,n,i){const r=V22(i)?i.encoding[He8(t)]:void 0;if(ce8(n)&&V22(i)&&Ac(n,r,i.markDef,i.config)){e.add(w22(n,{})),e.add(w22(n,{suffix:"end"}));const{mark:s,markDef:o,config:a}=i,c=Nt9({fieldDef:n,markDef:o,config:a});Kn5(s)&&c!==.5&&Y28(t)&&(e.add(w22(n,{suffix:rr3})),e.add(w22(n,{suffix:sr2}))),n.bin&&ti5(n,t)&&e.add(w22(n,{binSuffix:"range"}));}else if(fa1(t)){const s=la1(t);e.add(i.getName(s));}else e.add(w22(n));return Kt9(n)&&wg(n.scale?.range)&&e.add(n.scale.range.field),e;}function Ob(e,t){for(const n of b22(t)){const i=t[n];for(const r of b22(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]};}}class Le7 extends R22{clone(){return new Le7(null,new Set(this.dimensions),C26(this.measures));}constructor(t,n,i){super(t);this.dimensions=n,this.measures=i;}get groupBy(){return this.dimensions;}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(o=>{o.aggregate&&(i=!0);});const r={},s=new Set;return i?(n.forEachFieldDef((o,a)=>{const{aggregate:c,field:u}=o;if(c)if(c==="count")r["*"]??(r["*"]={}),r["*"].count=new Set([w22(o,{forAs:!0})]);else{if(lt11(c)||_t7(c)){const l=lt11(c)?"argmin":"argmax",f=c[l];r[f]??(r[f]={}),r[f][l]=new Set([w22({op:l,field:f},{forAs:!0})]);}else r[u]??(r[u]={}),r[u][c]=new Set([w22(o,{forAs:!0})]);ut11(a)&&n.scaleDomain(a)==="unaggregated"&&(r[u]??(r[u]={}),r[u].min=new Set([w22({field:u,aggregate:"min"},{forAs:!0})]),r[u].max=new Set([w22({field:u,aggregate:"max"},{forAs:!0})]));}else Ab(s,a,o,n);}),s.size+b22(r).length===0?null:new Le7(t,s,r)):null;}static makeFromTransform(t,n){const i=new Set,r={};for(const s of n.aggregate){const{op:o,field:a,as:c}=s;o&&(o==="count"?(r["*"]??(r["*"]={}),r["*"].count=new Set([c||w22(s,{forAs:!0})])):(r[a]??(r[a]={}),r[a][o]=new Set([c||w22(s,{forAs:!0})])));}for(const s of n.groupby??[])i.add(s);return i.size+b22(r).length===0?null:new Le7(t,i,r);}merge(t){return ta2(this.dimensions,t.dimensions)?(Ob(this.measures,t.measures),!0):(Gp("different dimensions, cannot merge"),!1);}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions);}dependentFields(){return new Set([...this.dimensions,...b22(this.measures)]);}producedFields(){const t=new Set;for(const n of b22(this.measures))for(const i of b22(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t);}return t;}hash(){return`Aggregate ${O24({dimensions:this.dimensions,measures:this.measures})}`;}assemble(){const t=[],n=[],i=[];for(const s of b22(this.measures))for(const o of b22(this.measures[s]))for(const a of this.measures[s][o])i.push(a),t.push(o),n.push(s==="*"?null:$e9(s));const r={type:"aggregate",groupby:[...this.dimensions].map($e9),ops:t,fields:n,as:i};return r;}}class Rn9 extends R22{constructor(t,n,i,r){super(t);this.model=n,this.name=i,this.data=r;for(const s of _e6){const o=n.facet[s];if(o){const{bin:a,sort:c}=o;this[s]={name:n.getName(`${s}_domain`),fields:[w22(o),...j25(a)?[w22(o,{binSuffix:"end"})]:[]],...Xe8(c)?{sortField:c}:w1(c)?{sortIndexField:Pn9(o,s)}:{}};}}this.childModel=n.child;}hash(){let t="Facet";for(const n of _e6)this[n]&&(t+=` ${n.charAt(0)}:${O24(this[n])}`);return t;}get fields(){const t=[];for(const n of _e6)this[n]?.fields&&t.push(...this[n].fields);return t;}dependentFields(){const t=new Set(this.fields);for(const n of _e6)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t;}producedFields(){return new Set;}getSource(){return this.name;}getChildIndependentFieldsWithStep(){const t={};for(const n of qe8){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),s=i.get("range");if(Z26(r)&&Ct8(s)){const o=hr2(this.childModel,n),a=Co1(o);a?t[n]=a:x18(Jr4(n));}}}return t;}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];r&&i&&i[r]&&(n?(s.push(`distinct_${i[r]}`),o.push("max")):(s.push(i[r]),o.push("distinct")),a.push(`distinct_${i[r]}`));const{sortField:c,sortIndexField:u}=this[t];if(c){const{op:l=Di3,field:f}=c;s.push(f),o.push(l),a.push(w22(c,{forAs:!0}));}else u&&(s.push(u),o.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]};}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],s={};for(const c of lo1){for(const u of fo1){const l=(i[c]&&i[c][u])??[];for(const f of l)if(f.axes?.length>0){s[c]=!0;break;}}if(s[c]){const u=`length(data("${this.facet.name}"))`,l=c==="row"?n?{signal:`ceil(${u} / ${n})`}:1:n?{signal:`min(${u}, ${n})`}:{signal:u};r.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:l}]});}}const{row:o,column:a}=s;return(o||a)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r;}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:s,facet:o}=this;if(r&&s&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(i.x??[],i.y??[]),c=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:c}]});}for(const a of[rt13,it14])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,i));if(o){const a=this.assembleFacetHeaderData(i);a&&t.push(...a);}return t;}}function Ql(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e;}function Pb(e,t){const n=Dr3(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=Ql(t.slice(5,t.length));return`timeParse(${n},'${i}')`;}else if(t.startsWith("utc:")){const i=Ql(t.slice(4,t.length));return`utcParse(${n},'${i}')`;}else return x18(tp(t)),null;}function zb(e){const t={};return bi4(e.filter,n=>{if(rc(n)){let i=null;rs1(n)?i=xe7(n.equal):os1(n)?i=xe7(n.lte):ss1(n)?i=xe7(n.lt):as1(n)?i=xe7(n.gt):cs1(n)?i=xe7(n.gte):us1(n)?i=n.range[0]:ls1(n)&&(i=(n.oneOf??n.in)[0]),i&&(Wt8(i)?t[n.field]="date":V(i)?t[n.field]="number":X1(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date");}}),t;}function Rb(e){const t={};function n(i){_n7(i)?t[i.field]="date":i.type==="quantitative"&&Pd(i.aggregate)?t[i.field]="number":pn9(i.field)>1?i.field in t||(t[i.field]="flatten"):Kt9(i)&&Xe8(i.sort)&&pn9(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"));}if((V22(e)||De6(e))&&e.forEachFieldDef((i,r)=>{if(ce8(i))n(i);else{const s=Ut8(r),o=e.fieldDef(s);n({...i,type:o.type});}}),V22(e)){const{mark:i,markDef:r,encoding:s}=e;if(Ft7(i)&&!e.encoding.order){const o=r.orient==="horizontal"?"y":"x",a=s[o];S23(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number");}}return t;}function Ib(e){const t={};if(V22(e)&&e.component.selection)for(const n of b22(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&pn9(r.field)>1&&(t[r.field]="flatten");}return t;}class oe14 extends R22{clone(){return new oe14(null,C26(this._parse));}constructor(t,n){super(t);this._parse=n;}hash(){return`Parse ${O24(this._parse)}`;}static makeExplicit(t,n,i){let r={};const s=n.data;return!Ot8(s)&&s?.format?.parse&&(r=s.format.parse),this.makeWithAncestors(t,r,{},i);}static makeWithAncestors(t,n,i,r){for(const a of b22(i)){const c=r.getWithExplicit(a);c.value!==void 0&&(c.explicit||c.value===i[a]||c.value==="derived"||i[a]==="flatten"?delete i[a]:x18(Da1(a,i[a],c.value)));}for(const a of b22(n)){const c=r.get(a);c!==void 0&&(c===n[a]?delete n[a]:x18(Da1(a,n[a],c)));}const s=new mt10(n,i);r.copyAll(s);const o={};for(const a of b22(s.combine())){const c=s.get(a);c!==null&&(o[a]=c);}return b22(o).length===0||r.parseNothing?null:new oe14(t,o);}get parse(){return this._parse;}merge(t){this._parse={...this._parse,...t.parse},t.remove();}assembleFormatParse(){const t={};for(const n of b22(this._parse)){const i=this._parse[n];pn9(n)===1&&(t[n]=i);}return t;}producedFields(){return new Set(b22(this._parse));}dependentFields(){return new Set(b22(this._parse));}assembleTransforms(t=!1){return b22(this._parse).filter(n=>t?pn9(n)>1:!0).map(n=>{const i=Pb(n,this._parse[n]);if(!i)return null;const r={type:"formula",expr:i,as:jr3(n)};return r;}).filter(n=>n!==null);}}class Rt10 extends R22{clone(){return new Rt10(null);}constructor(t){super(t);}dependentFields(){return new Set;}producedFields(){return new Set([Ie7]);}hash(){return"Identifier";}assemble(){return{type:"identifier",as:Ie7};}}class ai5 extends R22{clone(){return new ai5(null,this.params);}constructor(t,n){super(t);this.params=n;}dependentFields(){return new Set;}producedFields(){return;}hash(){return`Graticule ${O24(this.params)}`;}assemble(){return{type:"graticule",...this.params===!0?{}:this.params};}}class ci3 extends R22{clone(){return new ci3(null,this.params);}constructor(t,n){super(t);this.params=n;}dependentFields(){return new Set;}producedFields(){return new Set([this.params.as??"data"]);}hash(){return`Hash ${O24(this.params)}`;}assemble(){return{type:"sequence",...this.params};}}class tn10 extends R22{constructor(t){super(null);t??(t={name:"source"});let n;if(Ot8(t)||(n=t.format?{...fe11(t.format,["parse"])}:{}),ii5(t))this._data={values:t.values};else if(Cn8(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];P24(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i;}}else Uu1(t)?this._data={values:[{type:"Sphere"}]}:(Du1(t)||Ot8(t))&&(this._data={});this._generator=Ot8(t),t.name&&(this._name=t.name),n&&!I23(n)&&(this._data.format=n);}dependentFields(){return new Set;}producedFields(){return;}get data(){return this._data;}hasName(){return!!this._name;}get isGenerator(){return this._generator;}get dataName(){return this._name;}set dataName(t){this._name=t;}set parent(t){throw new Error("Source nodes have to be roots.");}remove(){throw new Error("Source nodes are roots and cannot be removed.");}hash(){throw new Error("Cannot hash sources");}assemble(){return{name:this._name,...this._data,transform:[]};}}var Jl=function(e,t,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(e,n):r?r.value=n:t.set(e,n),n;},Lb=function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e);},ui5;function bo1(e){return e instanceof tn10||e instanceof ai5||e instanceof ci3;}class xo1{constructor(){ui5.set(this,void 0),Jl(this,ui5,!1,"f");}setModified(){Jl(this,ui5,!0,"f");}get modifiedFlag(){return Lb(this,ui5,"f");}}ui5=new WeakMap;class nn11 extends xo1{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i;}optimize(t){const n=this.getNodeDepths(t,0,new Map),i=[...n.entries()].sort((r,s)=>s[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag;}}class So1 extends xo1{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag;}}class Mb extends So1{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove();}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of b22(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]));}}class Db extends So1{constructor(t){super();this.requiresSelectionId=t&&so1(t);}run(t){t instanceof Rt10&&(this.requiresSelectionId&&(bo1(t.parent)||t.parent instanceof Le7||t.parent instanceof oe14)||(this.setModified(),t.remove()));}}class jb extends xo1{optimize(t){return this.run(t,new Set),this.modifiedFlag;}run(t,n){let i=new Set;t instanceof Ze6&&(i=t.producedFields(),Ir3(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]));}}class Ub extends So1{constructor(){super();}run(t){t instanceof ue13&&!t.isRequired()&&(this.setModified(),t.remove());}}class Bb extends nn11{run(t){if(bo1(t))return;if(t.numChildren()>1)return;for(const n of t.children)if(n instanceof oe14)if(t instanceof oe14)this.setModified(),t.merge(n);else{if(Mr3(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent();}return;}}class Wb extends nn11{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof oe14);if(t.numChildren()>1&&i.length>=1){const r={},s=new Set;for(const o of i){const a=o.parse;for(const c of b22(a))c in r?r[c]!==a[c]&&s.add(c):r[c]=a[c];}for(const o of s)delete r[o];if(!I23(r)){this.setModified();const o=new oe14(t,r);for(const a of n){if(a instanceof oe14)for(const c of b22(r))delete a.parse[c];t.removeChild(a),a.parent=o,a instanceof oe14&&b22(a.parse).length===0&&a.remove();}}}}}class Hb extends nn11{run(t){t instanceof ue13||t.numChildren()>0||t instanceof Rn9||t instanceof tn10||(this.setModified(),t.remove());}}class qb extends nn11{run(t){const n=t.children.filter(r=>r instanceof Ze6),i=n.pop();for(const r of n)this.setModified(),i.merge(r);}}class Gb extends nn11{run(t){const n=t.children.filter(r=>r instanceof Le7),i={};for(const r of n){const s=O24(r.groupBy);s in i||(i[s]=[]),i[s].push(r);}for(const r of b22(i)){const s=i[r];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified());}}}}class Vb extends nn11{constructor(t){super();this.model=t;}run(t){const n=!(bo1(t)||t instanceof An11||t instanceof oe14||t instanceof Rt10),i=[],r=[];for(const s of t.children)s instanceof et13&&(n&&!Mr3(t.producedFields(),s.dependentFields())?i.push(s):r.push(s));if(i.length>0){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof et13?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent();}if(r.length>1){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified();}}}class Xb extends nn11{run(t){const n=[...t.children],i=Lt9(n,o=>o instanceof ue13);if(!i||t.numChildren()<=1)return;const r=[];let s;for(const o of n)if(o instanceof ue13){let a=o;for(;a.numChildren()===1;){const[c]=a.children;if(c instanceof ue13)a=c;else break;}r.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a;}else r.push(o);if(r.length){this.setModified();for(const o of r)o.parent.removeChild(o),o.parent=s;}}}class rn11 extends R22{clone(){return new rn11(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n;}addDimensions(t){this.transform.groupby=je9(this.transform.groupby.concat(t),n=>n);}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t;}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName));}getDefaultName(t){return t.as??w22(t);}hash(){return`JoinAggregateTransform ${O24(this.transform)}`;}assemble(){const t=[],n=[],i=[];for(const s of this.transform.joinaggregate)n.push(s.op),i.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}};}}function Yb(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=w22(i);return r&&t.push(r),t;},[]);}function Kb(e){return w1(e)&&e.every(t=>X1(t))&&e.length>1;}class yt9 extends R22{clone(){return new yt9(null,C26(this._stack));}constructor(t,n){super(t);this._stack=n;}static makeFromTransform(t,n){const{stack:i,groupby:r,as:s,offset:o="zero"}=n,a=[],c=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),c.push(X27(f.order,"ascending"));const u={field:a,order:c};let l;return Kb(s)?l=s:X1(s)?l=[s,`${s}_end`]:l=[`${n.stack}_start`,`${n.stack}_end`],new yt9(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:o,sort:u,facetby:[],as:l});}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:c}=i,u=s.map(p=>{const g=r[p];return Ke8(g);}).filter(p=>!!p),l=Yb(n),f=n.encoding.order;let d;if(w1(f)||S23(f))d=Na1(f);else{const p=Oc(f)?f.sort:o==="y"?"descending":"ascending";d=l.reduce((g,m)=>(g.field.push(m),g.order.push(p),g),{field:[],order:[]});}return new yt9(t,{dimensionFieldDefs:u,stackField:n.vgField(o),facetby:[],stackby:l,sort:d,offset:a,impute:c,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]});}get stack(){return this._stack;}addDimensions(t){this._stack.facetby.push(...t);}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t;}producedFields(){return new Set(this._stack.as);}hash(){return`Stack ${O24(this._stack)}`;}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[w22(r,{binSuffix:"mid"})]:[w22(r,{}),w22(r,{binSuffix:"end"})]:[w22(r)]).flat():i??[];}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:s,sort:o,offset:a,impute:c,as:u}=this._stack;if(c)for(const l of i){const{bandPosition:f=.5,bin:d}=l;if(d){const p=w22(l,{expr:"datum"}),g=w22(l,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${p}+${1-f}*${g}`,as:w22(l,{binSuffix:"mid",forAs:!0})});}t.push({type:"impute",field:r,groupby:[...s,...n],key:w22(l,{binSuffix:"mid"}),method:"value",value:0});}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:o,as:u,offset:a}),t;}}class In6 extends R22{clone(){return new In6(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n;}addDimensions(t){this.transform.groupby=je9(this.transform.groupby.concat(t),n=>n);}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t;}producedFields(){return new Set(this.transform.window.map(this.getDefaultName));}getDefaultName(t){return t.as??w22(t);}hash(){return`WindowTransform ${O24(this.transform)}`;}assemble(){const t=[],n=[],i=[],r=[];for(const f of this.transform.window)n.push(f.op),i.push(this.getDefaultName(f)),r.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Yr4(f)))return{type:"joinaggregate",as:i,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],c=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),c.push(f.order??"ascending");const u={field:a,order:c},l=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:u,...l!==void 0?{ignorePeers:l}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}};}}function Qb(e){function t(n){if(!(n instanceof Rn9)){const i=n.clone();if(i instanceof ue13){const r=$o1+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i;}else(i instanceof Le7||i instanceof yt9||i instanceof In6||i instanceof rn11)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i];}return n.children.flatMap(t);}return t;}function wo1(e){if(e instanceof Rn9)if(e.numChildren()===1&&!(e.children[0]instanceof ue13)){const t=e.children[0];(t instanceof Le7||t instanceof yt9||t instanceof In6||t instanceof rn11)&&t.addDimensions(e.fields),t.swapWithParent(),wo1(e);}else{const t=e.model.component.data.main;Zl(t);const n=Qb(e),i=e.children.map(n).flat();for(const r of i)r.parent=t;}else e.children.map(wo1);}function Zl(e){if(e instanceof ue13&&e.type===U24.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Rn9||(t.swapWithParent(),Zl(e));}}const $o1="scale_";function vo1(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!vo1(t.children))return!1;}return!0;}function Me10(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n;}function ef(e,t,n){let i=e.sources,r=!1;return r=Me10(new Ub,i)||r,r=Me10(new Db(t),i)||r,i=i.filter(s=>s.numChildren()>0),r=Me10(new Hb,i)||r,i=i.filter(s=>s.numChildren()>0),n||(r=Me10(new Bb,i)||r,r=Me10(new Vb(t),i)||r,r=Me10(new jb,i)||r,r=Me10(new Wb,i)||r,r=Me10(new Gb,i)||r,r=Me10(new qb,i)||r,r=Me10(new Mb,i)||r,r=Me10(new Xb,i)||r),e.sources=i,r;}function Jb(e,t){vo1(e.sources);let n=0,i=0;for(let r=0;r<5&&ef(e,t,!0);r++)n++;e.sources.map(wo1);for(let r=0;r<5&&ef(e,t,!1);r++)i++;vo1(e.sources),Math.max(n,i)===5&&x18(`Maximum optimization runs(${5}) reached.`);}class te17{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t});}static fromName(t,n){return new te17(()=>t(n));}}function tf(e){V22(e)?Zb(e):ex(e);}function Zb(e){const t=e.component.scales;for(const n of b22(t)){const i=nx(e,n),r=t[n];if(r.setWithExplicit("domains",i),rx(e,n),e.component.data.isFaceted){let s=e;for(;!De6(s)&&s.parent;)s=s.parent;const o=s.component.resolve.scale[n];if(o==="shared")for(const a of i.value)ft13(a)&&(a.data=$o1+a.data.replace($o1,""));}}}function ex(e){for(const n of e.children)tf(n);const t=e.component.scales;for(const n of b22(t)){let i,r=null;for(const s of e.children){const o=s.component.scales[n];if(o){i===void 0?i=o.getWithExplicit("domains"):i=At11(i,o.getWithExplicit("domains"),"domains","scale",ko1);const a=o.get("selectionExtent");r&&a&&r.param!==a.param&&x18(Qd),r=a;}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0);}}function tx(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:s}=nf(t,n);if(!r){x18(s);return;}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=nf(t,n);if(r)return"unaggregated";}return e;}function nx(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=tx(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&K27(i.x2)?K27(i.x)?At11(It7(n,r,e,"x"),It7(n,r,e,"x2"),"domain","scale",ko1):It7(n,r,e,"x2"):t==="y"&&K27(i.y2)?K27(i.y)?At11(It7(n,r,e,"y"),It7(n,r,e,"y2"),"domain","scale",ko1):It7(n,r,e,"y2"):It7(n,r,e,t);}function ix(e,t,n){return e.map(i=>{const r=Xi3(i,{timeUnit:n,type:t});return{signal:`{data: ${r}}`};});}function Eo1(e,t,n){const i=J27(n)?.unit;return t==="temporal"||i?ix(e,t,i):[e];}function It7(e,t,n,i){const{encoding:r,markDef:s,mark:o,config:a,stack:c}=n,u=K27(r[i]),{type:l}=u,f=u.timeUnit;if(Sg(t)){const g=It7(e,void 0,n,i),m=Eo1(t.unionWith,l,f);return Je7([...m,...g.value]);}else{if(v20(t))return Je7([t]);if(t&&t!=="unaggregated"&&!dc(t))return Je7(Eo1(t,l,f));}if(c&&i===c.fieldChannel){if(c.offset==="normalize")return we10([[0,1]]);const g=n.requestDataName(U24.Main);return we10([{data:g,field:n.vgField(i,{suffix:"start"})},{data:g,field:n.vgField(i,{suffix:"end"})}]);}const d=ut11(i)&&S23(u)?sx(n,i,e):void 0;if(Ye8(u)){const g=Eo1([u.datum],l,f);return we10(g);}const p=u;if(t==="unaggregated"){const g=n.requestDataName(U24.Main),{field:m}=u;return we10([{data:g,field:w22({field:m,aggregate:"min"})},{data:g,field:w22({field:m,aggregate:"max"})}]);}else if(j25(p.bin)){if(Z26(e))return e==="bin-ordinal"?we10([]):we10([{data:Un7(d)?n.requestDataName(U24.Main):n.requestDataName(U24.Raw),field:n.vgField(i,ti5(p,i)?{binSuffix:"range"}:{}),sort:d===!0||!M1(d)?{field:n.vgField(i,{}),op:"min"}:d}]);{const{bin:g}=p;if(j25(g)){const m=yo1(n,p.field,g);return we10([new te17(()=>{const h=n.getSignalName(m);return`[${h}.start, ${h}.stop]`;})]);}else return we10([{data:n.requestDataName(U24.Main),field:n.vgField(i,{})}]);}}else if(p.timeUnit&&P24(["time","utc"],e)){const g=r[He8(i)];if(Ac(p,g,s,a)){const m=n.requestDataName(U24.Main),h=Nt9({fieldDef:p,fieldDef2:g,markDef:s,config:a}),y=Kn5(o)&&h!==.5&&Y28(i);return we10([{data:m,field:n.vgField(i,y?{suffix:rr3}:{})},{data:m,field:n.vgField(i,{suffix:y?sr2:"end"})}]);}}return we10(d?[{data:Un7(d)?n.requestDataName(U24.Main):n.requestDataName(U24.Raw),field:n.vgField(i),sort:d}]:[{data:n.requestDataName(U24.Main),field:n.vgField(i)}]);}function _o1(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":Di3),...i?{field:$e9(i)}:{},...r?{order:r}:{}};}function rx(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,s=dc(i)&&i,o=Bt8(r)&&Fi2(r.extent)&&r.extent;(s||o)&&n.set("selectionExtent",s??o,!0);}function sx(e,t,n){if(!Z26(n))return;const i=e.fieldDef(t),r=i.sort;if(Fc1(r))return{op:"min",field:Pn9(i,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Xe8(r)){const a=s&&!o.has(r.field);return _o1(r,a);}else if(Cc(r)){const{encoding:a,order:c}=r,u=e.fieldDef(a),{aggregate:l,field:f}=u,d=s&&!o.has(f);if(lt11(l)||_t7(l))return _o1({field:w22(u),order:c},d);if(Yr4(l)||!l)return _o1({op:l,field:f,order:c},d);}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(P24(["ascending",void 0],r))return!0;}return;}function nf(e,t){const{aggregate:n,type:i}=e;return n?X1(n)&&!Rd.has(n)?{valid:!1,reason:vp(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:Ep(e)}:{valid:!0}:{valid:!1,reason:$p(e)};}function ko1(e,t,n,i){return e.explicit&&t.explicit&&x18(Np(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]};}function ox(e){const t=je9(e.map(o=>{if(ft13(o)){const{sort:a,...c}=o;return c;}return o;}),O24),n=je9(e.map(o=>{if(ft13(o)){const a=o.sort;return a!==void 0&&!Un7(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a;}return;}).filter(o=>o!==void 0),O24);if(t.length===0)return;if(t.length===1){const o=e[0];if(ft13(o)&&n.length>0){let a=n[0];if(n.length>1){x18(qa1);const c=n.filter(u=>M1(u)&&"op"in u&&u.op!=="min");n.every(u=>M1(u)&&"op"in u)&&c.length===1?a=c[0]:a=!0;}else if(M1(a)&&"field"in a){const c=a.field;o.field===c&&(a=a.order?{order:a.order}:!0);}return{...o,sort:a};}return o;}const i=je9(n.map(o=>Un7(o)||!("op"in o)||X1(o.op)&&o.op in Ad?o:(x18(Ap(o)),!0)),O24);let r;i.length===1?r=i[0]:i.length>1&&(x18(qa1),r=!0);const s=je9(e.map(o=>ft13(o)?o.data:null),o=>o);if(s.length===1&&s[0]!==null){const o={data:s[0],fields:t.map(a=>a.field),...r?{sort:r}:{}};return o;}return{fields:t,...r?{sort:r}:{}};}function Co1(e){if(ft13(e)&&X1(e.field))return e.field;if(Id(e)){let t;for(const n of e.fields)if(ft13(n)&&X1(n.field)){if(!t)t=n.field;else if(t!==n.field)return x18(Op),t;}return x18(Pp),t;}else if(Ld(e)){x18(zp);const t=e.fields[0];return X1(t)?t:void 0;}return;}function hr2(e,t){const n=e.component.scales[t],i=n.get("domains").map(r=>(ft13(r)&&(r.data=e.lookupDataSource(r.data)),r));return ox(i);}function rf1(e){return Ln6(e)||No1(e)?e.children.reduce((t,n)=>t.concat(rf1(n)),sf1(e)):sf1(e);}function sf1(e){return b22(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:s,type:o,selectionExtent:a,domains:c,range:u,reverse:l,...f}=r,d=ax(r.range,s,n,e),p=hr2(e,n),g=a?ty(e,a,i,p):null;return t.push({name:s,type:o,...p?{domain:p}:{},...g?{domainRaw:g}:{},range:d,...l!==void 0?{reverse:l}:{},...f}),t;},[]);}function ax(e,t,n,i){if(Y28(n)){if(Ct8(e))return{step:{signal:`${t}_step`}};}else if(M1(e)&&ft13(e))return{...e,data:i.lookupDataSource(e.data)};return e;}class of1 extends mt10{constructor(t,n){super({},{name:t});this.merged=!1,this.setWithExplicit("type",n);}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:Lt9(this.get("domains"),t=>w1(t)&&t.length===2&&V(t[0])&&t[0]<=0&&V(t[1])&&t[1]>=0);}}const cx=["range","scheme"];function ux(e){const t=e.component.scales;for(const n of Ci3){const i=t[n];if(!i)continue;const r=lx(n,e);i.setWithExplicit("range",r);}}function af(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,s=ge6(t),o=e.getName(s);if(M1(i)&&i.binned&&i.step!==void 0)return new te17(()=>{const a=e.scaleName(t),c=`(domain("${a}")[1] - domain("${a}")[0]) / ${i.step}`;return`${e.getSignalName(o)} / (${c})`;});if(j25(i)){const a=yo1(e,r,i);return new te17(()=>{const c=e.getSignalName(a),u=`(${c}.stop - ${c}.start) / ${c}.step`;return`${e.getSignalName(o)} / (${u})`;});}}return;}function lx(e,t){const n=t.specifiedScales[e],{size:i}=t,r=t.getScaleComponent(e),s=r.get("type");for(const f of cx)if(n[f]!==void 0){const d=ms1(s,f),p=pc(e,f);if(!d)x18(Wa1(s,f,e));else if(p)x18(p);else switch(f){case"range":{const g=n.range;if(w1(g)){if(Y28(e))return Je7(g.map(m=>{if(m==="width"||m==="height"){const h=t.getName(m),y=t.getSignalName.bind(t);return te17.fromName(y,h);}return m;}));}else if(M1(g))return Je7({data:t.requestDataName(U24.Main),field:g.field,sort:{op:"min",field:t.vgField(e)}});return Je7(g);}case"scheme":return Je7(fx(n[f]));}}const o=e===q28||e==="xOffset"?"width":"height",a=i[o];if(Qe8(a)){if(Y28(e))if(Z26(s)){const f=uf1(a,t,e);if(f)return Je7({step:f});}else x18(Ha1(o));else if(Vn6(e)){const f=e===xt9?"x":"y",d=t.getScaleComponent(f),p=d.get("type");if(p==="band"){const g=lf1(a,s);if(g)return Je7(g);}}}const{rangeMin:c,rangeMax:u}=n,l=dx(e,t);return(c!==void 0||u!==void 0)&&ms1(s,"rangeMin")&&w1(l)&&l.length===2?Je7([c??l[0],u??l[1]]):we10(l);}function fx(e){return xg(e)?{scheme:e.name,...fe11(e,["name"])}:{scheme:e};}function cf(e,t,n,{center:i}={}){const r=ge6(e),s=t.getName(r),o=t.getSignalName.bind(t);return e===Q23&&Se7(n)?i?[te17.fromName(a=>`${o(a)}/2`,s),te17.fromName(a=>`-${o(a)}/2`,s)]:[te17.fromName(o,s),0]:i?[te17.fromName(a=>`-${o(a)}/2`,s),te17.fromName(a=>`${o(a)}/2`,s)]:[0,te17.fromName(o,s)];}function dx(e,t){const{size:n,config:i,mark:r,encoding:s}=t,{type:o}=K27(s[e]),a=t.getScaleComponent(e),c=a.get("type"),{domain:u,domainMid:l}=t.specifiedScales[e];switch(e){case q28:case Q23:{if(P24(["point","band"],c)){const f=ff(e,n,i.view);if(Qe8(f)){const d=uf1(f,t,e);return{step:d};}}return cf(e,t,c);}case xt9:case gn9:return px(e,t,c);case at15:{const f=t.component.scales[e].get("zero"),d=df(r,f,i),p=hx(r,n,t,i);return Sn9(c)?mx(d,p,gx(c,i,u,e)):[d,p];}case ve7:return[0,Math.PI*2];case Dt8:return[0,360];case Fe9:return[0,new te17(()=>{const f=t.getSignalName("width"),d=t.getSignalName("height");return`min(${f},${d})/2`;})];case $t8:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case vt8:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case pe7:return"symbol";case de8:case Be7:case We7:return c==="ordinal"?o==="nominal"?"category":"ordinal":l!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case ct14:case St9:case wt8:return[i.scale.minOpacity,i.scale.maxOpacity];}}function uf1(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),s=Hr3(n),o=i[s],a=du1({step:e,offsetIsDiscrete:F27(o)&&oc1(o.type)});if(a==="offset"&&Gc(i,s)){const c=t.getScaleComponent(s),u=t.scaleName(s);let l=`domain('${u}').length`;if(c.get("type")==="band"){const d=c.get("paddingInner")??c.get("padding")??0,p=c.get("paddingOuter")??c.get("padding")??0;l=`bandspace(${l}, ${d}, ${p})`;}const f=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${l} / (1-${Ud(f)})`};}else return e.step;}function lf1(e,t){const n=du1({step:e,offsetIsDiscrete:Z26(t)});return n==="offset"?{step:e.step}:void 0;}function px(e,t,n){const i=e===xt9?"x":"y",r=t.getScaleComponent(i);if(!r)return cf(i,t,n,{center:!0});const s=r.get("type"),o=t.scaleName(i),{markDef:a,config:c}=t;if(s==="band"){const u=ff(i,t.size,t.config.view);if(Qe8(u)){const l=lf1(u,n);if(l)return l;}return[0,{signal:`bandwidth('${o}')`}];}else{const u=t.encoding[i];if(S23(u)&&u.timeUnit){const l=nc(u.timeUnit,g=>`scale('${o}', ${g})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=Nt9({fieldDef:u,markDef:a,config:c})-.5,p=d!==0?` + ${d}`:"";if(f){const g=v20(f)?`${f.signal}/2`+p:`${f/2+d}`,m=v20(f)?`(1 - ${f.signal}/2)`+p:`${1-f/2+d}`;return[{signal:`${g} * (${l})`},{signal:`${m} * (${l})`}];}return[0,{signal:l}];}return Zo1(`Cannot use ${e} scale if ${i} scale is not discrete.`);}}function ff(e,t,n){const i=e===q28?"width":"height",r=t[i];return r||tr3(n,i);}function gx(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&w1(n)?n.length+1:(x18(Wp(i)),3);}}function mx(e,t,n){const i=()=>{const r=Oe4(t),s=Oe4(e),o=`(${r} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${r} + ${o}, ${o})`;};return v20(t)?new te17(i):{signal:i()};}function df(e,t,n){if(t)return v20(t)?{signal:`${t.signal} ? 0 : ${df(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize;}throw new Error(Ti3("size",e));}function hx(e,t,n,i){const r={x:af(n,"x"),y:af(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const s=gf1(t,r,i.view);return V(s)?s-1:new te17(()=>`${s.signal} - 1`);}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const s=gf1(t,r,i.view);return V(s)?Math.pow(.95*s,2):new te17(()=>`pow(${.95} * ${s.signal}, 2)`);}}throw new Error(Ti3("size",e));}function gf1(e,t,n){const i=Qe8(e.width)?e.width.step:er2(n,"width"),r=Qe8(e.height)?e.height.step:er2(n,"height");return t.x||t.y?new te17(()=>{const s=[t.x?t.x.signal:i,t.y?t.y.signal:r];return`min(${s.join(", ")})`;}):Math.min(i,r);}function mf1(e,t){V22(e)?yx(e,t):bf1(e,t);}function yx(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:s,specifiedScales:o}=e;for(const a of b22(n)){const c=o[a],u=n[a],l=e.getScaleComponent(a),f=K27(r[a]),d=c[t],p=l.get("type"),g=l.get("padding"),m=l.get("paddingInner"),h=ms1(p,t),y=pc(a,t);if(d!==void 0&&(h?y&&x18(y):x18(Wa1(p,t,a))),h&&y===void 0)if(d!==void 0){const $=f.timeUnit,k=f.type;switch(t){case"domainMax":case"domainMin":Wt8(c[t])||k==="temporal"||$?u.set(t,{signal:Xi3(c[t],{type:k,timeUnit:$})},!0):u.set(t,c[t],!0);break;default:u.copyKeyFromObject(t,c);}}else{const $=t in hf1?hf1[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:p,scalePadding:g,scalePaddingInner:m,domain:c.domain,domainMin:c.domainMin,domainMax:c.domainMax,markDef:s,config:i,hasNestedOffsetScale:Vc(r,a),hasSecondaryRangeChannel:!!r[He8(a)]}):i.scale[t];$!==void 0&&u.set(t,$,!1);}}}const hf1={bins:({model:e,fieldOrDatumDef:t})=>S23(t)?bx(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>xx(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:s})=>Sx(e,t,n,i,r,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>wx(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:s})=>$x(e,t,n.type,i,r.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:s})=>vx(e,t,n,i,r.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=S23(e)?e.sort:void 0;return Ex(t,r,n,i.scale);},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:s,hasSecondaryRangeChannel:o})=>_x(e,t,n,i,r,s.scale,o)};function yf1(e){V22(e)?ux(e):bf1(e,"range");}function bf1(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?yf1(i):mf1(i,t);for(const i of b22(n)){let r;for(const s of e.children){const o=s.component.scales[i];if(o){const a=o.getWithExplicit(t);r=At11(r,a,t,"scale",Mu1((c,u)=>{switch(t){case"range":return c.step&&u.step?c.step-u.step:0;}return 0;}));}}n[i].setWithExplicit(t,r);}}function bx(e,t){const n=t.bin;if(j25(n)){const i=yo1(e,t.field,n);return new te17(()=>e.getSignalName(i));}else if(ie13(n)&&Bt8(n)&&n.step!==void 0)return{step:n.step};return;}function xx(e,t){return P24([de8,Be7,We7],e)&&t!=="nominal"?"hcl":void 0;}function Sx(e,t,n,i,r,s){return Ke8(s)?.bin||w1(n)||r!=null||i!=null||P24([he9.TIME,he9.UTC],e)?void 0:Y28(t)?!0:void 0;}function wx(e,t,n,i,r,s){if(Y28(e)){if(Pe7(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=r;if(o==="bar"&&!(S23(i)&&(i.bin||i.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize;}if(t===he9.POINT)return n.pointPadding;}return;}function $x(e,t,n,i,r,s=!1){if(e!==void 0)return;if(Y28(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:c,bandWithNestedOffsetPaddingInner:u}=r;return s?u:X27(o,n==="bar"?a:c);}else if(Vn6(t)&&i===he9.BAND)return r.offsetBandPaddingInner;return;}function vx(e,t,n,i,r,s=!1){if(e!==void 0)return;if(Y28(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=r;if(s)return a;if(n===he9.BAND)return X27(o,v20(i)?{signal:`${i.signal}/2`}:i/2);}else if(Vn6(t)){if(n===he9.POINT)return .5;if(n===he9.BAND)return r.offsetBandPaddingOuter;}return;}function Ex(e,t,n,i){return n==="x"&&i.xReverse!==void 0?Se7(e)&&t==="descending"?v20(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse:Se7(e)&&t==="descending"?!0:void 0;}function _x(e,t,n,i,r,s,o){const a=!!n&&n!=="unaggregated";if(a&&Se7(r)){if(w1(n)){const c=n[0],u=n[n.length-1];if(V(c)&&c<=0&&V(u)&&u>=0)return!0;}return!1;}if(e==="size"&&t.type==="quantitative"&&!Sn9(r))return!0;if(!(S23(t)&&t.bin)&&P24([...qe8,...vd],e)){const{orient:c,type:u}=i;return P24(["bar","area","line","trail"],u)&&(c==="horizontal"&&e==="y"||c==="vertical"&&e==="x")?!1:P24(["bar","area"],u)&&!o?!0:s?.zero;}return!1;}function kx(e,t,n,i,r=!1){const s=Cx(t,n,i,r),{type:o}=e;return ut11(t)?o!==void 0?kg(t,o)?S23(n)&&!_g(o,n.type)?(x18(Cp(o,s)),s):o:(x18(kp(t,o,s)),s):s:null;}function Cx(e,t,n,i){switch(t.type){case"nominal":case"ordinal":{if(hn10(e)||Xr4(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&x18(es1(e,"ordinal")),"ordinal";if(Y28(e)||Vn6(e)){if(P24(["rect","bar","image","rule"],n.type))return"band";if(i)return"band";}else if(n.type==="arc"&&e in Vr4)return"band";const r=n[ge6(e)];return Vt8(r)||$n8(t)&&t.axis?.tickBand?"band":"point";}case"temporal":return hn10(e)?"time":Xr4(e)==="discrete"?(x18(es1(e,"temporal")),"ordinal"):S23(t)&&t.timeUnit&&J27(t.timeUnit).utc?"utc":"time";case"quantitative":return hn10(e)?S23(t)&&j25(t.bin)?"bin-ordinal":"linear":Xr4(e)==="discrete"?(x18(es1(e,"quantitative")),"ordinal"):"linear";case"geojson":return;}throw new Error(Ua1(t.type));}function Fx(e,{ignoreRange:t}={}){xf1(e),tf(e);for(const n of Eg)mf1(e,n);t||yf1(e);}function xf1(e){V22(e)?e.component.scales=Nx(e):e.component.scales=Ax(e);}function Nx(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const s of Ci3){const o=K27(t[s]);if(o&&n===hc&&s===pe7&&o.type===xn7)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const c=Vc(t,s),u=kx(a,s,o,i,c);r[s]=new of1(e.scaleName(`${s}`,!0),{value:u,explicit:a.type===u});}}return r;}const Tx=Mu1((e,t)=>ac(e)-ac(t));function Ax(e){var t;const n=e.component.scales={},i={},r=e.component.resolve;for(const s of e.children){xf1(s);for(const o of b22(s.component.scales))if((t=r.scale)[o]??(t[o]=Rl(o,e)),r.scale[o]==="shared"){const a=i[o],c=s.component.scales[o].getWithExplicit("type");a?gg(a.value,c.value)?i[o]=At11(a,c,"type","scale",Tx):(r.scale[o]="independent",delete i[o]):i[o]=c;}}for(const s of b22(i)){const o=e.scaleName(s,!0),a=i[s];n[s]=new of1(o,a);for(const c of e.children){const u=c.component.scales[s];u&&(c.renameScale(u.get("name"),o),u.merged=!0);}}return n;}class Fo1{constructor(){this.nameMap={};}rename(t,n){this.nameMap[t]=n;}has(t){return this.nameMap[t]!==void 0;}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t;}}function V22(e){return e?.type==="unit";}function De6(e){return e?.type==="facet";}function No1(e){return e?.type==="concat";}function Ln6(e){return e?.type==="layer";}class To1{constructor(t,n,i,r,s,o,a){this.type=n,this.parent=i,this.config=s,this.correctDataNames=c=>(c.from?.data&&(c.from.data=this.lookupDataSource(c.from.data)),c.from?.facet?.data&&(c.from.facet.data=this.lookupDataSource(c.from.facet.data)),c),this.parent=i,this.config=s,this.view=me10(a),this.name=t.name??r,this.title=kt10(t.title)?{text:t.title}:t.title?me10(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new Fo1,this.projectionNameMap=i?i.projectionNameMap:new Fo1,this.signalNameMap=i?i.signalNameMap:new Fo1,this.data=t.data,this.description=t.description,this.transforms=Mh(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Bm(t,n,s),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:ji3(t)||i?.component.data.isFaceted&&t.data===void 0},layoutSize:new mt10,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?C26(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}};}get width(){return this.getSizeSignalRef("width");}get height(){return this.getSizeSignalRef("height");}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup();}parseScale(){Fx(this);}parseProjection(){Xl(this);}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height");}parseLegends(){Wl(this);}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const s of b22(i)){const o=i[s];o!==void 0&&(r[s]=W22(o));}return r;}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=W22(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n??{}}:I23(n)?void 0:n;}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,s=Jy(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}};}assembleDefaultLayout(){return{};}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of _e6)t[i].title&&n.push(Gy(this,i));for(const i of lo1)n=n.concat(Vy(this,i));return n;}assembleAxes(){return Py(this.component.axes,this.config);}assembleLegends(){return ql(this);}assembleProjections(){return wb(this);}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...va1(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};return i.text?(P24(["unit","layer"],this.type)?P24(["middle",void 0],i.anchor)&&(i.frame??(i.frame="group")):i.anchor??(i.anchor="start"),I23(i)?void 0:i):void 0;}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||De6(this.parent)?rf1(this):[];r.length>0&&(n.scales=r);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n;}getName(t){return H21((this.name?`${this.name}_`:"")+t);}getDataName(t){return this.getName(U24[t].toLowerCase());}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n;}getSizeSignalRef(t){if(De6(this.parent)){const n=Pl(t),i=ki3(n),r=this.component.scales[i];if(r&&!r.merged){const s=r.get("type"),o=r.get("range");if(Z26(s)&&Ct8(o)){const a=r.get("name"),c=hr2(this,i),u=Co1(c);if(u){const l=w22({aggregate:"distinct",field:u},{expr:"datum"});return{signal:Ol(a,r,l)};}else return x18(Jr4(i)),null;}}}return{signal:this.signalNameMap.get(this.getName(t))};}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t;}getSignalName(t){return this.signalNameMap.get(t);}renameSignal(t,n){this.signalNameMap.rename(t,n);}renameScale(t,n){this.scaleNameMap.rename(t,n);}renameProjection(t,n){this.projectionNameMap.rename(t,n);}scaleName(t,n){return n?this.getName(t):pa1(t)&&ut11(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0;}projectionName(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0;}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0;}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(Gd(n));return i;}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef());}}class Sf1 extends To1{vgField(t,n={}){const i=this.fieldDef(t);return i?w22(i,n):void 0;}reduceFieldDef(t,n){return ym(this.getMapping(),(i,r,s)=>{const o=Ke8(r);return o?t(i,o,s):i;},n);}forEachFieldDef(t,n){Ts1(this.getMapping(),(i,r)=>{const s=Ke8(i);s&&t(s,r);},n);}}class yr3 extends R22{clone(){return new yr3(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n,this.transform=C26(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]]);}producedFields(){return new Set(this.transform.as);}hash(){return`DensityTransform ${O24(this.transform)}`;}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return this.transform.groupby&&(i.resolve="shared"),i;}}class br3 extends R22{clone(){return new br3(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n,this.transform=C26(n);}dependentFields(){return new Set([this.transform.extent]);}producedFields(){return new Set([]);}hash(){return`ExtentTransform ${O24(this.transform)}`;}assemble(){const{extent:t,param:n}=this.transform,i={type:"extent",field:t,signal:n};return i;}}class li5 extends R22{clone(){return new li5(null,{...this.filter});}constructor(t,n){super(t);this.filter=n;}static make(t,n){const{config:i,mark:r,markDef:s}=n,o=z20("invalid",s,i);if(o!=="filter")return null;const a=n.reduceFieldDef((c,u,l)=>{const f=ut11(l)&&n.getScaleComponent(l);if(f){const d=f.get("type");Se7(d)&&u.aggregate!=="count"&&!Ft7(r)&&(c[u.field]=u);}return c;},{});return b22(a).length?new li5(t,a):null;}dependentFields(){return new Set(b22(this.filter));}producedFields(){return new Set;}hash(){return`FilterInvalid ${O24(this.filter)}`;}assemble(){const t=b22(this.filter).reduce((n,i)=>{const r=this.filter[i],s=w22(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):r.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n;},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null;}}class xr2 extends R22{clone(){return new xr2(this.parent,C26(this.transform));}constructor(t,n){super(t);this.transform=n,this.transform=C26(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((s,o)=>r[o]??s);}dependentFields(){return new Set(this.transform.flatten);}producedFields(){return new Set(this.transform.as);}hash(){return`FlattenTransform ${O24(this.transform)}`;}assemble(){const{flatten:t,as:n}=this.transform,i={type:"flatten",fields:t,as:n};return i;}}class Sr4 extends R22{clone(){return new Sr4(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n,this.transform=C26(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"];}dependentFields(){return new Set(this.transform.fold);}producedFields(){return new Set(this.transform.as);}hash(){return`FoldTransform ${O24(this.transform)}`;}assemble(){const{fold:t,as:n}=this.transform,i={type:"fold",fields:t,as:n};return i;}}class Mn10 extends R22{clone(){return new Mn10(null,C26(this.fields),this.geojson,this.signal);}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[Te8,Ne9],[Ee6,Ae8]]){const s=r.map(o=>{const a=K27(n.encoding[o]);return S23(a)?a.field:Ye8(a)?{expr:`${a.datum}`}:Re9(a)?{expr:`${a.value}`}:void 0;});(s[0]||s[1])&&(t=new Mn10(t,s,null,n.getName(`geojson_${i++}`)));}if(n.channelHasField(pe7)){const r=n.typedFieldDef(pe7);r.type===xn7&&(t=new Mn10(t,null,r.field,n.getName(`geojson_${i++}`)));}return t;}constructor(t,n,i,r){super(t);this.fields=n,this.geojson=i,this.signal=r;}dependentFields(){const t=(this.fields??[]).filter(X1);return new Set([...this.geojson?[this.geojson]:[],...t]);}producedFields(){return new Set;}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${O24(this.fields)}`;}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}];}}class fi5 extends R22{clone(){return new fi5(null,this.projection,C26(this.fields),C26(this.as));}constructor(t,n,i,r){super(t);this.projection=n,this.fields=i,this.as=r;}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[Te8,Ne9],[Ee6,Ae8]]){const r=i.map(o=>{const a=K27(n.encoding[o]);return S23(a)?a.field:Ye8(a)?{expr:`${a.datum}`}:Re9(a)?{expr:`${a.value}`}:void 0;}),s=i[0]===Ee6?"2":"";(r[0]||r[1])&&(t=new fi5(t,n.projectionName(),r,[n.getName(`x${s}`),n.getName(`y${s}`)]));}return t;}dependentFields(){return new Set(this.fields.filter(X1));}producedFields(){return new Set(this.as);}hash(){return`Geopoint ${this.projection} ${O24(this.fields)} ${O24(this.as)}`;}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as};}}class sn9 extends R22{clone(){return new sn9(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n;}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]]);}producedFields(){return new Set([this.transform.impute]);}processSequence(t){const{start:n=0,stop:i,step:r}=t,s=[n,i,...r?[r]:[]].join(",");return{signal:`sequence(${s})`};}static makeFromTransform(t,n){return new sn9(t,n);}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,s=i.y;if(S23(r)&&S23(s)){const o=r.impute?r:s.impute?s:void 0;if(o===void 0)return;const a=r.impute?s:s.impute?r:void 0,{method:c,value:u,frame:l,keyvals:f}=o.impute,d=Yc(n.mark,i);return new sn9(t,{impute:o.field,key:a.field,...c?{method:c}:{},...u!==void 0?{value:u}:{},...l?{frame:l}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}});}return null;}hash(){return`Impute ${O24(this.transform)}`;}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:s,value:o,frame:a=[null,null]}=this.transform,c={type:"impute",field:t,key:n,...i?{keyvals:xh(i)?this.processSequence(i):i}:{},method:"value",...s?{groupby:s}:{},value:!r||r==="value"?o:null};if(r&&r!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},l={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[c,u,l];}else return[c];}}class wr2 extends R22{clone(){return new wr2(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n,this.transform=C26(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess];}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]]);}producedFields(){return new Set(this.transform.as);}hash(){return`LoessTransform ${O24(this.transform)}`;}assemble(){const{loess:t,on:n,...i}=this.transform,r={type:"loess",x:n,y:t,...i};return r;}}class di4 extends R22{clone(){return new di4(null,C26(this.transform),this.secondary);}constructor(t,n,i){super(t);this.transform=n,this.secondary=i;}static make(t,n,i,r){const s=n.component.data.sources,{from:o}=i;let a=null;if(Sh(o)){let c=Ef(o.data,s);c||(c=new tn10(o.data),s.push(c));const u=n.getName(`lookup_${r}`);a=new ue13(c,u,U24.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a;}else if(wh(o)){const c=o.param;i={as:c,...i};let u;try{u=n.getSelectionComponent(H21(c),c);}catch(l){throw new Error(Yd(c));}if(a=u.materialized,!a)throw new Error(Kd(c));}return new di4(t,i,a.getSource());}dependentFields(){return new Set([this.transform.lookup]);}producedFields(){return new Set(this.transform.as?p(this.transform.as):this.transform.from.fields);}hash(){return`Lookup ${O24({transform:this.transform,secondary:this.secondary})}`;}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:p(this.transform.as)}:{}};else{let n=this.transform.as;X1(n)||(x18(rp),n="_lookup"),t={as:[n]};}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}};}}class $r4 extends R22{clone(){return new $r4(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n,this.transform=C26(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"];}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]]);}producedFields(){return new Set(this.transform.as);}hash(){return`QuantileTransform ${O24(this.transform)}`;}assemble(){const{quantile:t,...n}=this.transform,i={type:"quantile",field:t,...n};return i;}}class vr2 extends R22{clone(){return new vr2(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n,this.transform=C26(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression];}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]]);}producedFields(){return new Set(this.transform.as);}hash(){return`RegressionTransform ${O24(this.transform)}`;}assemble(){const{regression:t,on:n,...i}=this.transform,r={type:"regression",x:n,y:t,...i};return r;}}class Er3 extends R22{clone(){return new Er3(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n;}addDimensions(t){this.transform.groupby=je9((this.transform.groupby??[]).concat(t),n=>n);}producedFields(){return;}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]]);}hash(){return`PivotTransform ${O24(this.transform)}`;}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:s}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...s!==void 0?{op:s}:{},...i!==void 0?{groupby:i}:{}};}}class _r1 extends R22{clone(){return new _r1(null,C26(this.transform));}constructor(t,n){super(t);this.transform=n;}dependentFields(){return new Set;}producedFields(){return new Set;}hash(){return`SampleTransform ${O24(this.transform)}`;}assemble(){return{type:"sample",size:this.transform.sample};}}function wf1(e){let t=0;function n(i,r){if(i instanceof tn10&&!i.isGenerator&&!Cn8(i.data)){e.push(r);const s={name:null,source:r.name,transform:[]};r=s;}if(i instanceof oe14&&(i.parent instanceof tn10&&!r.source?(r.format={...r.format??{},parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Rn9){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return;}if((i instanceof ai5||i instanceof ci3||i instanceof li5||i instanceof An11||i instanceof On6||i instanceof fi5||i instanceof Le7||i instanceof di4||i instanceof In6||i instanceof rn11||i instanceof Sr4||i instanceof xr2||i instanceof yr3||i instanceof wr2||i instanceof $r4||i instanceof vr2||i instanceof Rt10||i instanceof _r1||i instanceof Er3||i instanceof br3)&&r.transform.push(i.assemble()),(i instanceof et13||i instanceof Ze6||i instanceof sn9||i instanceof yt9||i instanceof Mn10)&&r.transform.push(...i.assemble()),i instanceof ue13){if(r.source&&r.transform.length===0)i.setSource(r.source);else if(i.parent instanceof ue13)i.setSource(r.name);else if(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1){e.push(r);const s={name:null,source:r.name,transform:[]};r=s;}}switch(i.numChildren()){case 0:i instanceof ue13&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let s=r.name;!r.source||r.transform.length>0?e.push(r):s=r.source;for(const o of i.children){const a={name:null,source:s,transform:[]};n(o,a);}break;}}}return n;}function Ox(e){const t=[],n=wf1(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t;}function Px(e,t){const n=[],i=wf1(n);let r=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${r++}`);const a=o.assemble();i(o,a);}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n;}function zx(e){return e==="top"||e==="left"||v20(e)?"header":"footer";}function Rx(e){for(const t of _e6)Ix(e,t);vf1(e,"x"),vf1(e,"y");}function Ix(e,t){const{facet:n,config:i,child:r,component:s}=e;if(e.channelHasField(t)){const o=n[t],a=zn7("title",null,i,t);let c=vn7(o,i,{allowDisabling:!0,includeDefault:a===void 0||!!a});r.component.layoutHeaders[t].title&&(c=w1(c)?c.join(", "):c,c+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const u=zn7("labelOrient",o.header,i,t),l=o.header!==null?X27(o.header?.labels,i.header.labels,!0):!1,f=P24(["bottom","right"],u)?"footer":"header";s.layoutHeaders[t]={title:o.header!==null?c:null,facetFieldDef:o,[f]:t==="facet"?[]:[$f(e,t,l)]};}}function $f(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]};}function vf1(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=mo1(r,t),r.axis[t]==="shared"){const s=t==="x"?"column":"row",o=i[s];for(const a of n.component.axes[t]){const c=zx(a.get("orient"));o[c]??(o[c]=[$f(e,s,!1)]);const u=oi5(a,"main",e.config,{header:!0});u&&o[c][0].axes.push(u),a.mainExtracted=!0;}}}}function Lx(e){Ao1(e),kr2(e,"width"),kr2(e,"height");}function Mx(e){Ao1(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";kr2(e,t),kr2(e,n);}function Ao1(e){for(const t of e.children)t.parseLayoutSize();}function kr2(e,t){const n=Pl(t),i=ki3(n),r=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const c=a.component.layoutSize.getWithExplicit(n),u=r.scale[i]??Rl(i,e);if(u==="independent"&&c.value==="step"){o=void 0;break;}if(o){if(u==="independent"&&o.value!==c.value){o=void 0;break;}o=At11(o,c,n,"");}else o=c;}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o);}else s.setWithExplicit(t,{explicit:!1,value:void 0});}function Dx(e){const{size:t,component:n}=e;for(const i of qe8){const r=ge6(i);if(t[r]){const s=t[r];n.layoutSize.set(r,Qe8(s)?"step":s,!0);}else{const s=jx(e,r);n.layoutSize.set(r,s,!1);}}}function jx(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const s=r.get("type"),o=r.get("range");if(Z26(s)){const a=tr3(i.view,t);return Ct8(o)||Qe8(a)?"step":a;}else return Bs1(i.view,t);}else{if(e.hasProjection||e.mark==="arc")return Bs1(i.view,t);{const s=tr3(i.view,t);return Qe8(s)?s.step:s;}}}function Oo1(e,t,n){return w22(t,{suffix:`by_${w22(e)}`,...n??{}});}class pi5 extends Sf1{constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve);this.child=Lo2(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet);}initFacet(t){if(!Zn5(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=b22(t),i={};for(const r of n){if(![it14,rt13].includes(r)){x18(Ti3(r,"facet"));break;}const s=t[r];if(s.field===void 0){x18(Zr4(s,r));break;}i[r]=this.initFacetFieldDef(s,r);}return i;}initFacetFieldDef(t,n){const i=Fs1(t,n);return i.header?i.header=me10(i.header):i.header===null&&(i.header=null),i;}channelHasField(t){return!!this.facet[t];}fieldDef(t){return this.facet[t];}parseData(){this.component.data=Cr3(this),this.child.parseData();}parseLayoutSize(){Ao1(this);}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection;}parseMarkGroup(){this.child.parseMarkGroup();}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Rx(this);}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t);}assembleSignals(){return this.child.assembleSignals(),[];}assembleSelectionData(t){return this.child.assembleSelectionData(t);}getHeaderLayoutMixins(){const t={};for(const n of _e6)for(const i of fo1){const r=this.component.layoutHeaders[n],s=r[i],{facetFieldDef:o}=r;if(o){const a=zn7("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const c=dr2(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[c]="end";}}if(s?.[0]){const a=n==="row"?"height":"width",c=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[c]??(t[c]={}),t[c][n]=.5),r.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10);}}return t;}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r};}assembleLayoutSignals(){return this.child.assembleLayoutSignals();}columnDistinctSignal(){if(this.parent&&this.parent instanceof pi5)return;{const t=this.getName("column_domain");return{signal:`length(data('${t}'))`};}}assembleGroupStyle(){return;}assembleGroup(t){return this.parent&&this.parent instanceof pi5?{...this.channelHasField("column")?{encode:{update:{columns:{field:w22(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t);}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof pi5){if(this.child.channelHasField("column")){const r=w22(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`);}}else for(const r of qe8){const s=this.child.component.scales[r];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Z26(o)&&Ct8(a)){const c=hr2(this.child,r),u=Co1(c);u?(t.push(u),n.push("distinct"),i.push(`distinct_${u}`)):x18(Jr4(r));}}}return{fields:t,ops:n,as:i};}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),c=[];for(const l of _e6){const f=this.facet[l];if(f){c.push(w22(f));const{bin:d,sort:p}=f;if(j25(d)&&c.push(w22(f,{binSuffix:"end"})),Xe8(p)){const{field:g,op:m=Di3}=p,h=Oo1(f,p);i&&r?(s.push(h),o.push("max"),a.push(h)):(s.push(g),o.push(m),a.push(h));}else if(w1(p)){const g=Pn9(f,l);s.push(g),o.push("max"),a.push(g);}}}const u=!!i&&!!r;return{name:t,data:n,groupby:c,...u||s.length>0?{aggregate:{...u?{cross:u}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}};}facetSortFields(t){const{facet:n}=this,i=n[t];return i?Xe8(i.sort)?[Oo1(i,i.sort,{expr:"datum"})]:w1(i.sort)?[Pn9(i,t,{expr:"datum"})]:[w22(i,{expr:"datum"})]:[];}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i,s=(Xe8(r)?r.order:!w1(r)&&r)||"ascending";return[s];}return[];}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return po1(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of lo1)if(t[r]){const s=zn7("labelOrient",t[r]?.header,n,r);if(i[r].includes(s))return po1(t[r],r,n);}return;}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=Ox(n),r=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle(),a={name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:_e6.map(c=>this.facetSortFields(c)).flat(),order:_e6.map(c=>this.facetSortOrder(c)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(Qh(this,[]))};return[a];}getMapping(){return this.facet;}}function Ux(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const s of[n,i])if(Xe8(s.sort)){const{field:o,op:a=Di3}=s.sort;e=r=new rn11(e,{joinaggregate:[{op:a,field:o,as:Oo1(s,s.sort,{forAs:!0})}],groupby:[w22(s)]});}return r;}return null;}function Ef(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,s=i.format?.feature;if(r&&s)continue;const o=e.format?.feature;if((o||s)&&o!==s)continue;const a=i.format?.mesh;if((r||a)&&r!==a)continue;if(ii5(e)&&ii5(i)){if(be7(e.values,i.values))return n;}else if(Cn8(e)&&Cn8(i)){if(e.url===i.url)return n;}else if(Du1(e)&&e.name===n.dataName)return n;}return null;}function Bx(e,t){if(e.data||!e.parent){if(e.data===null){const i=new tn10({values:[]});return t.push(i),i;}const n=Ef(e.data,t);if(n)return Ot8(e.data)||(n.data.format=ea2({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new tn10(e.data);return t.push(i),i;}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main;}function Wx(e,t,n){let i=0;for(const r of t.transforms){let s,o;if(Ah(r))o=e=new On6(e,r),s="derived";else if(Vs1(r)){const a=zb(r);o=e=oe14.makeWithAncestors(e,{},a,n)??e,e=new An11(e,t,r.filter);}else if(Au1(r))o=e=et13.makeFromTransform(e,r,t),s="number";else if(Ph(r)){s="date";const a=n.getWithExplicit(r.field);a.value===void 0&&(e=new oe14(e,{[r.field]:s}),n.set(r.field,s,!1)),o=e=Ze6.makeFromTransform(e,r);}else if(zh(r))o=e=Le7.makeFromTransform(e,r),s="number",so1(t)&&(e=new Rt10(e));else if(Tu1(r))o=e=di4.make(e,t,r,i++),s="derived";else if(Fh(r))o=e=new In6(e,r),s="number";else if(Nh(r))o=e=new rn11(e,r),s="number";else if(Rh(r))o=e=yt9.makeFromTransform(e,r),s="derived";else if(Ih(r))o=e=new Sr4(e,r),s="derived";else if(Lh(r))o=e=new br3(e,r),s="derived";else if(Th(r))o=e=new xr2(e,r),s="derived";else if($h(r))o=e=new Er3(e,r),s="derived";else if(Ch(r))e=new _r1(e,r);else if(Oh(r))o=e=sn9.makeFromTransform(e,r),s="derived";else if(vh(r))o=e=new yr3(e,r),s="derived";else if(Eh(r))o=e=new $r4(e,r),s="derived";else if(_h(r))o=e=new vr2(e,r),s="derived";else if(kh(r))o=e=new wr2(e,r),s="derived";else{x18(ip(r));continue;}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1);}return e;}function Cr3(e){let t=Bx(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=r&&(Ot8(r)||Cn8(r)||ii5(r)),o=!s&&e.parent?e.parent.component.data.ancestorParse.clone():new Yh;Ot8(r)?(ju1(r)?t=new ci3(t,r.sequence):Ks1(r)&&(t=new ai5(t,r.graticule)),o.parseNothing=!0):r?.format?.parse===null&&(o.parseNothing=!0),t=oe14.makeExplicit(t,e,o)??t,t=new Rt10(t);const a=e.parent&&Ln6(e.parent);(V22(e)||De6(e))&&a&&(t=et13.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Wx(t,e,o));const c=Ib(e),u=Rb(e);t=oe14.makeWithAncestors(t,{},{...c,...u},o)??t,V22(e)&&(t=Mn10.parseAll(t,e),t=fi5.parseAll(t,e)),(V22(e)||De6(e))&&(a||(t=et13.makeFromEncoding(t,e)??t),t=Ze6.makeFromEncoding(t,e)??t,t=On6.parseAllForSortIndex(t,e));const l=e.getDataName(U24.Raw),f=new ue13(t,l,U24.Raw,i);if(n[l]=f,t=f,V22(e)){const m=Le7.makeFromEncoding(t,e);m&&(t=m,so1(e)&&(t=new Rt10(t))),t=sn9.makeFromEncoding(t,e)??t,t=yt9.makeFromEncoding(t,e)??t;}V22(e)&&(t=li5.make(t,e)??t);const d=e.getDataName(U24.Main),p=new ue13(t,d,U24.Main,i);n[d]=p,t=p,V22(e)&&Ay(e,p);let g=null;if(De6(e)){const m=e.getName("facet");t=Ux(t,e.facet)??t,g=new Rn9(t,e,m,p.getSource()),n[m]=g;}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:f,main:p,facetRoot:g,ancestorParse:o};}class Hx extends To1{constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve);(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&x18(ep),this.children=this.getChildren(t).map((s,o)=>Lo2(s,this,this.getName(`concat_${o}`),void 0,r));}parseData(){this.component.data=Cr3(this);for(const t of this.children)t.parseData();}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of b22(t.component.selection))this.component.selection[n]=t.component.selection[n];}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup();}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders();}getChildren(t){return Zi2(t)?t.vconcat:Us1(t)?t.hconcat:t.concat;}parseLayoutSize(){Mx(this);}parseAxisGroup(){return null;}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t);}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[];}assembleLayoutSignals(){const t=go1(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t;}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t);}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()};});}assembleGroupStyle(){return;}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"};}}function qx(e){return e===!1||e===null;}const Gx={disable:1,gridScale:1,scale:1,...Wc,labelExpr:1,encode:1},_f=b22(Gx);class Po1 extends mt10{constructor(t={},n={},i=!1){super();this.explicit=t,this.implicit=n,this.mainExtracted=i;}clone(){return new Po1(C26(this.explicit),C26(this.implicit),this.mainExtracted);}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!qx(this.get(t));}hasOrientSignalRef(){return v20(this.explicit.orient);}}function Vx(e,t,n){const{encoding:i,config:r}=e,s=K27(i[t])??K27(i[He8(t)]),o=e.axis(t)||{},{format:a,formatType:c}=o;if(Yt9(c))return{text:ze7({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:c,config:r}),...n};if(a===void 0&&c===void 0&&r.customFormatTypes){if(wn11(s)==="quantitative"){if($n8(s)&&s.stack==="normalize"&&r.normalizedNumberFormatType)return{text:ze7({fieldOrDatumDef:s,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:ze7({fieldOrDatumDef:s,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n};}if(wn11(s)==="temporal"&&r.timeFormatType&&S23(s)&&!s.timeUnit)return{text:ze7({fieldOrDatumDef:s,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n};}return n;}function Xx(e){return qe8.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[tS(n,e)]),t),{});}const Yx={bottom:"top",top:"bottom",left:"right",right:"left"};function Kx(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const s of b22(r.component.axes))n.axis[s]=mo1(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=Qx(t[s],r.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]));}for(const r of qe8){for(const s of e.children){if(!s.component.axes[r])continue;if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(s.component.axes[r]);for(const o of s.component.axes[r]){const{value:a,explicit:c}=o.getWithExplicit("orient");if(v20(a))continue;if(i[a]>0&&!c){const u=Yx[a];i[a]>i[u]&&o.set("orient",u,!1);}i[a]++;}}delete s.component.axes[r];}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[s,o]of(t[r]||[]).entries())s>0&&!!o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1);}}function Qx(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],s=t[i];if(!!r!==!!s)return;if(r&&s){const o=r.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[i]=Jx(r,s);}}}else return t.map(n=>n.clone());return e;}function Jx(e,t){for(const n of _f){const i=At11(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,s)=>{switch(n){case"title":return Oa1(r,s);case"gridScale":return{explicit:r.explicit,value:X27(r.value,s.value)};}return ir2(r,s,n,"axis");});e.setWithExplicit(n,i);}return e;}function Zx(e,t,n,i,r){if(t==="disable")return n!==void 0;n=n||{};switch(t){case"titleAngle":case"labelAngle":return e===(v20(n.labelAngle)?n.labelAngle:Hn7(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Cl(i,r))return!0;}return e===n[t];}const eS=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function tS(e,t){let n=t.axis(e);const i=new Po1,r=K27(t.encoding[e]),{mark:s,config:o}=t,a=n?.orient||o[e==="x"?"axisX":"axisY"]?.orient||o.axis?.orient||Uy(e),c=t.getScaleComponent(e).get("type"),u=zy(e,c,a,t.config),l=n!==void 0?!n:co1("disable",o.style,n?.style,u).configValue;if(i.set("disable",l,n!==void 0),l)return i;n=n||{};const f=My(r,n,e,o.style,u),d=vc(n.formatType,r,c),p=$c(r,r.type,n.format,n.formatType,o,!0),g={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:c,orient:a,labelAngle:f,format:p,formatType:d,mark:s,config:o};for(const y of _f){const $=y in El?El[y](g):Hc(y)?n[y]:void 0,k=$!==void 0,_=Zx($,y,n,t,e);if(k&&_)i.set(y,$,_);else{const{configValue:T=void 0,configFrom:D=void 0}=Hc(y)&&y!=="values"?co1(y,o.style,n.style,u):{},ye=T!==void 0;k&&!ye?i.set(y,$,_):(!(D==="vgAxisConfig")||eS.has(y)&&ye||ni5(T)||v20(T))&&i.set(y,T,!1);}}const m=n.encoding??{},h=Bc1.reduce((y,$)=>{if(!i.hasAxisPart($))return y;const k=zl(m[$]??{},t),_=$==="labels"?Vx(t,e,k):k;return _!==void 0&&!I23(_)&&(y[$]={update:_}),y;},{});return I23(h)||i.set("encode",h,!!n.encoding||n.labelAngle!==void 0),i;}function nS({encoding:e,size:t}){for(const n of qe8){const i=ge6(n);Qe8(t[i])&&Tt11(e[n])&&(delete t[i],x18(Ha1(i)));}return t;}const iS={vgMark:"arc",encodeEntry:e=>({...ke7(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...se14("x",e,{defaultPos:"mid"}),...se14("y",e,{defaultPos:"mid"}),...Pt9(e,"radius"),...Pt9(e,"theta")})},rS={vgMark:"area",encodeEntry:e=>({...ke7(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...ar2("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...ar2("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...io1(e)})},sS={vgMark:"rect",encodeEntry:e=>({...ke7(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Pt9(e,"x"),...Pt9(e,"y")})},oS={vgMark:"shape",encodeEntry:e=>({...ke7(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape,i={type:"geoshape",projection:e.projectionName(),...n&&S23(n)&&n.type===xn7?{field:w22(n,{expr:"datum"})}:{}};return[i];}},aS={vgMark:"image",encodeEntry:e=>({...ke7(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Pt9(e,"x"),...Pt9(e,"y"),...to2(e,"url")})},cS={vgMark:"line",encodeEntry:e=>({...ke7(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...se14("x",e,{defaultPos:"mid"}),...se14("y",e,{defaultPos:"mid"}),...ee17("size",e,{vgChannel:"strokeWidth"}),...io1(e)})},uS={vgMark:"trail",encodeEntry:e=>({...ke7(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...se14("x",e,{defaultPos:"mid"}),...se14("y",e,{defaultPos:"mid"}),...ee17("size",e),...io1(e)})};function zo1(e,t){const{config:n}=e;return{...ke7(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...se14("x",e,{defaultPos:"mid"}),...se14("y",e,{defaultPos:"mid"}),...ee17("size",e),...ee17("angle",e),...lS(e,n,t)};}function lS(e,t,n){return n?{shape:{value:n}}:ee17("shape",e);}const fS={vgMark:"symbol",encodeEntry:e=>zo1(e)},dS={vgMark:"symbol",encodeEntry:e=>zo1(e,"circle")},pS={vgMark:"symbol",encodeEntry:e=>zo1(e,"square")},gS={vgMark:"rect",encodeEntry:e=>({...ke7(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Pt9(e,"x"),...Pt9(e,"y")})},mS={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...ke7(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ar2("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...ar2("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...ee17("size",e,{vgChannel:"strokeWidth"})};}},hS={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...ke7(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...se14("x",e,{defaultPos:"mid"}),...se14("y",e,{defaultPos:"mid"}),...to2(e),...ee17("size",e,{vgChannel:"fontSize"}),...ee17("angle",e),...sl1("align",yS(e.markDef,n,t)),...sl1("baseline",bS(e.markDef,n,t)),...se14("radius",e,{defaultPos:null}),...se14("theta",e,{defaultPos:null})};}};function yS(e,t,n){const i=z20("align",e,n);return i===void 0?"center":void 0;}function bS(e,t,n){const i=z20("baseline",e,n);return i===void 0?"middle":void 0;}const xS={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"width":"height",s=i==="horizontal"?"height":"width";return{...ke7(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...se14("x",e,{defaultPos:"mid",vgChannel:"xc"}),...se14("y",e,{defaultPos:"mid",vgChannel:"yc"}),...ee17("size",e,{defaultValue:SS(e),vgChannel:r}),[s]:W22(z20("thickness",n,t))};}};function SS(e){const{config:t,markDef:n}=e,{orient:i}=n,r=i==="horizontal"?"width":"height",s=e.getScaleComponent(i==="horizontal"?"x":"y"),o=z20("size",n,t,{vgChannel:r})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;if(a&&Ct8(a)&&V(a.step))return a.step*3/4;const c=er2(t.view,r);return c*3/4;}}const Fr3={arc:iS,area:rS,bar:sS,circle:dS,geoshape:oS,image:aS,line:cS,point:fS,rect:gS,rule:mS,square:pS,text:hS,tick:xS,trail:uS};function wS(e){if(P24([Ri3,Pi3,Ng],e.mark)){const t=Yc(e.mark,e.encoding);if(t.length>0)return $S(e,t);}else if(e.mark===zi3){const t=Kr4.some(n=>z20(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return vS(e);}return Ro1(e);}const kf1="faceted_path_";function $S(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:kf1+e.requestDataName(U24.Main),data:e.requestDataName(U24.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Ro1(e,{fromPrefix:kf1})}];}const Cf1="stack_group_";function vS(e){const[t]=Ro1(e,{fromPrefix:Cf1}),n=e.scaleName(e.stack.fieldChannel),i=(u={})=>e.vgField(e.stack.fieldChannel,u),r=(u,l)=>{const f=[i({prefix:"min",suffix:"start",expr:l}),i({prefix:"max",suffix:"start",expr:l}),i({prefix:"min",suffix:"end",expr:l}),i({prefix:"max",suffix:"end",expr:l})];return`${u}(${f.map(d=>`scale('${n}',${d})`).join(",")})`;};let s,o;e.stack.fieldChannel==="x"?(s={...dn11(t.encode.update,["y","yc","y2","height",...Kr4]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...fe11(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...dn11(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...fe11(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const u of Kr4){const l=dt10(u,e.markDef,e.config);t.encode.update[u]?(s[u]=t.encode.update[u],delete t.encode.update[u]):l&&(s[u]=W22(l)),l&&(t.encode.update[u]={value:0});}const a=[];if(e.stack.groupbyChannels?.length>0)for(const u of e.stack.groupbyChannels){const l=e.fieldDef(u),f=w22(l);f&&a.push(f),(l?.bin||l?.timeUnit)&&a.push(w22(l,{binSuffix:"end"}));}const c=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"];return s=c.reduce((u,l)=>{if(t.encode.update[l])return{...u,[l]:t.encode.update[l]};{const f=dt10(l,e.markDef,e.config);return f!==void 0?{...u,[l]:W22(f)}:u;}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(U24.Main),name:Cf1+e.requestDataName(U24.Main),groupby:a,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}];}function ES(e){const{encoding:t,stack:n,mark:i,markDef:r,config:s}=e,o=t.order;if(!w1(o)&&Re9(o)&&zr3(o.value)||!o&&zr3(z20("order",r,s)))return;if((w1(o)||S23(o))&&!n)return Na1(o,{expr:"datum"});if(Ft7(i)){const a=r.orient==="horizontal"?"y":"x",c=t[a];if(S23(c)){const u=c.sort;if(w1(u))return{field:w22(c,{prefix:a,suffix:"sort_index",expr:"datum"})};if(Xe8(u))return{field:w22({aggregate:Ns1(e.encoding)?u.op:void 0,field:u.field},{expr:"datum"})};if(Cc(u)){const l=e.fieldDef(u.encoding);return{field:w22(l,{expr:"datum"}),order:u.order};}else return u===null?void 0:{field:w22(c,{binSuffix:e.stack?.impute?"mid":void 0,expr:"datum"})};}return;}return;}function Ro1(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:s}=e,o=X27(i.clip,_S(e),kS(e)),a=Ca1(i),c=r.key,u=ES(e),l=CS(e),f=z20("aria",i,s),d=Fr3[n].postEncodingTransform?Fr3[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:Fr3[n].vgMark,...o?{clip:!0}:{},...a?{style:a}:{},...c?{key:c.field}:{},...u?{sort:u}:{},...l||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(U24.Main)},encode:{update:Fr3[n].encodeEntry(e)},...d?{transform:d}:{}}];}function _S(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0;}function kS(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0;}function CS(e){if(!e.component.selection)return null;const t=b22(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=b22(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip}:null;}class Ff1 extends Sf1{constructor(t,n,i,r={},s){super(t,"unit",n,i,s,void 0,pu1(t)?t.view:void 0);this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Ve8(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=fh(o,s,{graticule:t.data&&Ks1(t.data)}));const c=this.encoding=mm(t.encoding||{},a,o.filled,s);this.markDef=$u1(o,c,s),this.size=nS({encoding:c,size:pu1(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=wu1(this.markDef,c),this.specifiedScales=this.initScales(a,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegends(c),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>Ds1(u));}get hasProjection(){const{encoding:t}=this,n=this.mark===hc,i=t&&gd.some(r=>F27(t[r]));return n||i;}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0;}axis(t){return this.specifiedAxes[t];}legend(t){return this.specifiedLegends[t];}initScales(t,n){return Ci3.reduce((i,r)=>{const s=K27(n[r]);return s&&(i[r]=this.initScale(s.scale??{})),i;},{});}initScale(t){const{domain:n,range:i}=t,r=me10(t);return w1(n)&&(r.domain=n.map(xe7)),w1(i)&&(r.range=i.map(xe7)),r;}initAxes(t){return qe8.reduce((n,i)=>{const r=t[i];if(F27(r)||i===q28&&F27(t.x2)||i===Q23&&F27(t.y2)){const s=F27(r)?r.axis:void 0;n[i]=s&&this.initAxis({...s});}return n;},{});}initAxis(t){const n=b22(t),i={};for(const r of n){const s=t[r];i[r]=ni5(s)?Ea1(s):xe7(s);}return i;}initLegends(t){return Ed.reduce((n,i)=>{const r=K27(t[i]);if(r&&kd(i)){const s=r.legend;n[i]=s&&me10(s);}return n;},{});}parseData(){this.component.data=Cr3(this);}parseLayoutSize(){Dx(this);}parseSelections(){this.component.selection=Ty(this,this.selection);}parseMarkGroup(){this.component.mark=wS(this);}parseAxesAndHeaders(){this.component.axes=Xx(this);}assembleSelectionTopLevelSignals(t){return Jh(this,t);}assembleSignals(){return[...$l(this),...Kh(this,[])];}assembleSelectionData(t){return Zh(this,t);}assembleLayout(){return null;}assembleLayoutSignals(){return go1(this);}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Ln6(this.parent))&&(t=Wu1(this,t)),t.map(this.correctDataNames);}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view";}getMapping(){return this.encoding;}get mark(){return this.markDef.type;}channelHasField(t){return Qt8(this.encoding,t);}fieldDef(t){const n=this.encoding[t];return Ke8(n);}typedFieldDef(t){const n=this.fieldDef(t);return ce8(n)?n:null;}}class Io1 extends To1{constructor(t,n,i,r,s){super(t,"layer",n,i,s,t.resolve,t.view);const o={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,c)=>{if(nr2(a))return new Io1(a,this,this.getName(`layer_${c}`),o,s);if(pt11(a))return new Ff1(a,this,this.getName(`layer_${c}`),o,s);throw new Error(Qr4(a));});}parseData(){this.component.data=Cr3(this);for(const t of this.children)t.parseData();}parseLayoutSize(){Lx(this);}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of b22(t.component.selection))this.component.selection[n]=t.component.selection[n];}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup();}parseAxesAndHeaders(){Kx(this);}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t);}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),$l(this));}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),go1(this));}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t);}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of p(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0;}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t;return;}assembleLayout(){return null;}assembleMarks(){return ey(this,this.children.flatMap(t=>t.assembleMarks()));}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),ql(this));}}function Lo2(e,t,n,i,r){if(ji3(e))return new pi5(e,t,n,r);if(nr2(e))return new Io1(e,t,n,i,r);if(pt11(e))return new Ff1(e,t,n,i,r);if(Dm(e))return new Hx(e,t,n,r);throw new Error(Qr4(e));}function FS(e,t={}){t.logger&&Hp(t.logger),t.fieldTitle&&Mc(t.fieldTitle);try{const n=xu1(rn(t.config,e.config)),i=Ru1(e,n),r=Lo2(i,null,"",void 0,n);r.parse(),Jb(r.component.data,r);const s=TS(r,NS(e,i.autosize,n,r),e.datasets,e.usermeta);return{spec:s,normalized:i};}finally{t.logger&&qp(),t.fieldTitle&&om();}}function NS(e,t,n,i){const r=i.component.layoutSize.get("width"),s=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):X1(t)&&(t={type:t}),r&&s&&Gh(t.type)){if(r==="step"&&s==="step")x18(Ra1()),t.type="pad";else if(r==="step"||s==="step"){const o=r==="step"?"width":"height";x18(Ra1(ki3(o)));const a=o==="width"?"height":"width";t.type=Vh(a);}}return{...b22(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Lu1(n,!1),...Lu1(e,!0)};}function TS(e,t,n={},i){const r=e.config?Zm(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Px(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),c=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let l=e.assembleLayoutSignals();l=l.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...c?{style:c}:{},...u?{encode:{update:u}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...l,...e.assembleSelectionTopLevelSignals([]),...fu1(f)]),...r?{config:r}:{},...i?{usermeta:i}:{}};}const AS=cd.version;const __default1=null;const mod13=function(){return{default:null,accessPathDepth:pn9,accessPathWithDatum:Dr3,compile:FS,contains:P24,deepEqual:be7,deleteNestedProperty:xi4,duplicate:C26,entries:bt11,every:Rr2,fieldIntersection:Mr3,flatAccessWithDatum:na2,getFirstDefined:X27,hasIntersection:Ir3,hash:O24,internalField:sa1,isBoolean:Un7,isEmpty:I23,isEqual:ld,isInternalField:oa2,isNullOrFalse:zr3,isNumeric:Si3,keys:b22,logicalExpr:Bn7,mergeDeep:ea2,never:Zo1,normalize:Ru1,normalizeAngle:Hn7,omit:fe11,pick:dn11,prefixGenerator:Lr3,removePathFromField:jr3,replaceAll:Mt10,replacePathInField:$e9,resetIdCounter:dd,setEqual:ta2,some:Lt9,stringify:L29,titleCase:Wn7,unique:je9,uniqueId:ra2,vals:ne16,varName:H21,version:AS};}();function c7(e){const[n,r]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:n,version:r};}var H22="vega-themes",Q24="2.14.0",R23="Themes for stylized Vega and Vega-Lite visualizations.",K28=["vega","vega-lite","themes","style"],N21="BSD-3-Clause",Z27={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},ee18=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],te18="build/vega-themes.js",oe15="build/vega-themes.module.js",le13="build/vega-themes.min.js",ae14="build/vega-themes.min.js",ie14="build/vega-themes.module.d.ts",re17={type:"git",url:"https://github.com/vega/vega-themes.git"},ne17=["src","build"],se15={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},de9={"@babel/core":"^7.22.9","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.9","@babel/preset-env":"^7.22.9","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@typescript-eslint/eslint-plugin":"^6.0.0","@typescript-eslint/parser":"^6.0.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.45.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","gh-pages":"^5.0.0",prettier:"^3.0.0","release-it":"^16.1.0",rollup:"^3.26.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.2.0",typescript:"^5.1.6",vega:"^5.25.0","vega-lite":"^5.9.3"},ce9={vega:"*","vega-lite":"*"},fe12={},ge7={name:H22,version:Q24,description:R23,keywords:K28,license:N21,author:Z27,contributors:ee18,main:te18,module:oe15,unpkg:le13,jsdelivr:ae14,types:ie14,repository:re17,files:ne17,scripts:se15,devDependencies:de9,peerDependencies:ce9,dependencies:fe12};const f14="#fff",B24="#888",be8={background:"#333",view:{stroke:B24},title:{color:f14,subtitleColor:f14},style:{"guide-label":{fill:f14},"guide-title":{fill:f14}},axis:{domainColor:f14,gridColor:B24,tickColor:f14}},l9="#4572a7",pe8={background:"#fff",arc:{fill:l9},area:{fill:l9},line:{stroke:l9,strokeWidth:2},path:{stroke:l9},rect:{fill:l9},shape:{stroke:l9},symbol:{fill:l9,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},a6="#30a2da",v21="#cbcbcb",ue14="#999",he10="#333",E25="#f0f0f0",W23="#333",me11={arc:{fill:a6},area:{fill:a6},axis:{domainColor:v21,grid:!0,gridColor:v21,gridWidth:1,labelColor:ue14,labelFontSize:10,titleColor:he10,tickColor:v21,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:E25,group:{fill:E25},legend:{labelColor:W23,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:W23,titleFontSize:14,titlePadding:10},line:{stroke:a6,strokeWidth:2},path:{stroke:a6,strokeWidth:.5},rect:{fill:a6},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:a6},bar:{binSpacing:2,fill:a6,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},i3="#000",Ce9={group:{fill:"#e5e5e5"},arc:{fill:i3},area:{fill:i3},line:{stroke:i3},path:{stroke:i3},rect:{fill:i3},shape:{stroke:i3},symbol:{fill:i3,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},ke8=22,Fe10="normal",A20="Benton Gothic, sans-serif",w23=11.5,ye8="normal",r2="#82c6df",z21="Benton Gothic Bold, sans-serif",T20="normal",P25=13,b23={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},ve8={background:"#ffffff",title:{anchor:"start",color:"#000000",font:z21,fontSize:ke8,fontWeight:Fe10},arc:{fill:r2},area:{fill:r2},line:{stroke:r2,strokeWidth:2},path:{stroke:r2},rect:{fill:r2},shape:{stroke:r2},symbol:{fill:r2,size:30},axis:{labelFont:A20,labelFontSize:w23,labelFontWeight:ye8,titleFont:z21,titleFontSize:P25,titleFontWeight:T20},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:A20,labelFontSize:w23,symbolType:"square",titleFont:z21,titleFontSize:P25,titleFontWeight:T20},range:{category:b23["category-6"],diverging:b23["fireandice-6"],heatmap:b23["fire-7"],ordinal:b23["fire-7"],ramp:b23["fire-7"]}},n2="#ab5787",m11="#979797",ze8={background:"#f9f9f9",arc:{fill:n2},area:{fill:n2},line:{stroke:n2},path:{stroke:n2},rect:{fill:n2},shape:{stroke:n2},symbol:{fill:n2,size:30},axis:{domainColor:m11,domainWidth:.5,gridWidth:.2,labelColor:m11,tickColor:m11,tickWidth:.2,titleColor:m11},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},s9="#3e5c69",Se8={background:"#fff",arc:{fill:s9},area:{fill:s9},line:{stroke:s9},path:{stroke:s9},rect:{fill:s9},shape:{stroke:s9},symbol:{fill:s9},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},e="#1696d2",$17="#000000",xe8="#FFFFFF",C27="Lato",S24="Lato",De7="Lato",Be8="#DEDDDD",Ee7=18,p12={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},We8={background:xe8,title:{anchor:"start",fontSize:Ee7,font:C27},axisX:{domain:!0,domainColor:$17,domainWidth:1,grid:!1,labelFontSize:12,labelFont:S24,labelAngle:0,tickColor:$17,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:C27},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Be8,gridWidth:1,labelFontSize:12,labelFont:S24,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:C27,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:S24,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:C27,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:p12["six-groups-cat-1"],diverging:p12["diverging-colors"],heatmap:p12["diverging-colors"],ordinal:p12["six-groups-seq"],ramp:p12["shades-blue"]},area:{fill:e},rect:{fill:e},line:{color:e,stroke:e,strokeWidth:5},trail:{color:e,stroke:e,strokeWidth:0,size:1},path:{stroke:e,strokeWidth:.5},point:{filled:!0},text:{font:De7,color:e,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:e,stroke:null}},arc:{fill:e},shape:{stroke:e},symbol:{fill:e,size:30}},d10="#3366CC",q29="#ccc",k22="Arial, sans-serif",Ae9={arc:{fill:d10},area:{fill:d10},path:{stroke:d10},rect:{fill:d10},shape:{stroke:d10},symbol:{stroke:d10},circle:{fill:d10},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:k22,fontSize:12},"guide-title":{font:k22,fontSize:12},"group-title":{font:k22,fontSize:12}},title:{font:k22,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:q29,tickColor:q29,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},x19=c=>c*(1/3+1),j26=x19(9),L30=x19(10),X28=x19(12),u9="Segoe UI",Y29="wf_standard-font, helvetica, arial, sans-serif",M21="#252423",h13="#605E5C",I24="transparent",we11="#C8C6C4",t1="#118DFF",Te9="#12239E",Pe8="#E66C37",$e10="#6B007B",qe9="#E044A7",je10="#744EC2",Le8="#D9B300",Xe9="#D64550",G25=t1,J28="#DEEFFF",O25=[J28,G25],Ye9=[J28,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",G25],Me11={view:{stroke:I24},background:I24,font:u9,header:{titleFont:Y29,titleFontSize:X28,titleColor:M21,labelFont:u9,labelFontSize:L30,labelColor:h13},axis:{ticks:!1,grid:!1,domain:!1,labelColor:h13,labelFontSize:j26,titleFont:Y29,titleColor:M21,titleFontSize:X28,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:we11,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:t1},line:{stroke:t1,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:u9,fontSize:j26,fill:h13},arc:{fill:t1},area:{fill:t1,line:!0,opacity:.6},path:{stroke:t1},rect:{fill:t1},point:{fill:t1,filled:!0,size:75},shape:{stroke:t1},symbol:{fill:t1,strokeWidth:1.5,size:50},legend:{titleFont:u9,titleFontWeight:"bold",titleColor:h13,labelFont:u9,labelFontSize:L30,labelColor:h13,symbolType:"circle",symbolSize:75},range:{category:[t1,Te9,Pe8,$e10,qe9,je10,Le8,Xe9],diverging:O25,heatmap:O25,ordinal:Ye9}},D19='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Ie8=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Ge9=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function F28({type:c,background:V}){const y=c==="dark"?"#161616":"#ffffff",g=c==="dark"?"#f4f4f4":"#161616",_=c==="dark"?Ie8:Ge9,o=c==="dark"?"#d4bbff":"#6929c4";return{background:V,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:y,stroke:y},group:{fill:y},title:{color:g,anchor:"start",dy:-15,fontSize:16,font:D19,fontWeight:600},axis:{labelColor:g,labelFontSize:12,grid:!0,gridColor:"#525252",titleColor:g,labelAngle:0},style:{"guide-label":{font:D19,fill:g,fontWeight:400},"guide-title":{font:D19,fill:g,fontWeight:400}},range:{category:_,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}};}const Je8=F28({type:"light",background:"#ffffff"}),Oe5=F28({type:"light",background:"#f4f4f4"}),Ue9=F28({type:"dark",background:"#262626"}),Ve9=F28({type:"dark",background:"#161616"}),_e7=ge7.version;const mod14=function(){return{default:null,carbong10:Oe5,carbong100:Ve9,carbong90:Ue9,carbonwhite:Je8,dark:be8,excel:pe8,fivethirtyeight:me11,ggplot2:Ce9,googlecharts:Ae9,latimes:ve8,powerbi:Me11,quartz:ze8,urbaninstitute:We8,version:_e7,vox:Se8};}();var j27="vega-tooltip",L31="0.34.0",D20="A tooltip plugin for Vega-Lite and Vega visualizations.",S25=["vega-lite","vega","tooltip"],I25={type:"git",url:"https://github.com/vega/vega-tooltip.git"},$18={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},z22=["Dominik Moritz","Sira Horradarn","Zening Qu","Kanit Wongsuphasawat","Yuri Astrakhan","Jeffrey Heer"],O26="BSD-3-Clause",E26={url:"https://github.com/vega/vega-tooltip/issues"},A21="https://github.com/vega/vega-tooltip#readme",U25="build/vega-tooltip.js",C28="build/vega-tooltip.module.js",M22="build/vega-tooltip.min.js",H23="build/vega-tooltip.min.js",R24="build/vega-tooltip.module.d.ts",T21=["src","build","types"],N22={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"rimraf build && rimraf src/style.ts","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && yarn copy:build && gh-pages -d examples && yarn clean",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prepare:"yarn copy:data",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},W24={"@babel/core":"^7.22.10","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.22.10","@babel/preset-env":"^7.22.10","@babel/preset-typescript":"^7.22.5","@release-it/conventional-changelog":"^7.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.1.0","@rollup/plugin-terser":"^0.4.3","@types/jest":"^29.5.3","@typescript-eslint/eslint-plugin":"^6.3.0","@typescript-eslint/parser":"^6.3.0","browser-sync":"^2.29.3",concurrently:"^8.2.0",eslint:"^8.46.0","eslint-config-prettier":"^9.0.0","eslint-plugin-jest":"^27.2.3","eslint-plugin-prettier":"^5.0.0","gh-pages":"^6.1.0",jest:"^29.6.2","jest-environment-jsdom":"^29.6.2",path:"^0.12.7",prettier:"^3.0.1","release-it":"^16.1.3",rollup:"^4.6.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.3",sass:"^1.64.2",typescript:"~5.3.2","vega-datasets":"^2.7.0","vega-typings":"^0.24.2"},Y30={"vega-util":"^1.17.2"},_24={name:j27,version:L31,description:D20,keywords:S25,repository:I25,author:$18,collaborators:z22,license:O26,bugs:E26,homepage:A21,main:U25,module:C28,unpkg:M22,jsdelivr:H23,types:R24,files:T21,scripts:N22,devDependencies:W24,dependencies:Y30};function g15(i,t,n,s){if(w1(i))return`[${i.map(e=>t(X1(e)?e:p13(e,n))).join(", ")}]`;if(M1(i)){let e="";const{title:l,image:o,...a}=i;l&&(e+=`<h2>${t(l)}</h2>`),o&&(e+=`<img src="${new URL(t(o),s||location.href).href}">`);const d=Object.keys(a);if(d.length>0){e+="<table>";for(const c of d){let r=a[c];if(r===void 0)continue;M1(r)&&(r=p13(r,n)),e+=`<tr><td class="key">${t(c)}</td><td class="value">${t(r)}</td></tr>`;}e+="</table>";}return e||"{}";}return t(i);}function h14(i){const t=[];return function(n,s){if(typeof s!="object"||s===null)return s;const e=t.indexOf(this)+1;return t.length=e,t.length>i?"[Object]":t.indexOf(s)>=0?"[Circular]":(t.push(s),s);};}function p13(i,t){return JSON.stringify(i,h14(t));}var B25=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const b24="vg-tooltip-element",m12={offsetX:10,offsetY:10,id:b24,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:f15,maxDepth:2,formatTooltip:g15,baseURL:""};function f15(i){return String(i).replace(/&/g,"&amp;").replace(/</g,"&lt;");}function y20(i){if(!/^[A-Za-z]+[-:.\w]*$/.test(i))throw new Error("Invalid HTML ID");return B25.toString().replace(b24,i);}function v22(i,t,n,s){let e=i.clientX+n;e+t.width>window.innerWidth&&(e=+i.clientX-n-t.width);let l=i.clientY+s;return l+t.height>window.innerHeight&&(l=+i.clientY-s-t.height),{x:e,y:l};}class x20{constructor(t){this.options={...m12,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const s=document.createElement("style");s.setAttribute("id",this.options.styleId),s.innerHTML=y20(n);const e=document.head;e.childNodes.length>0?e.insertBefore(s,e.childNodes[0]):e.appendChild(s);}}tooltipHandler(t,n,s,e){if(this.el=document.getElementById(this.options.id),!this.el){this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip");const a=document.fullscreenElement??document.body;a.appendChild(this.el);}if(e==null||e===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return;}this.el.innerHTML=this.options.formatTooltip(e,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:l,y:o}=v22(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${l}px`;}}_24.version;function Pe9(){throw new Error("setTimeout has not been defined");}function je11(){throw new Error("clearTimeout has not been defined");}var q30=Pe9,W25=je11,Q25;typeof window!="undefined"?Q25=window:typeof self!="undefined"?Q25=self:Q25={},typeof Q25.setTimeout=="function"&&(q30=setTimeout),typeof Q25.clearTimeout=="function"&&(W25=clearTimeout);function Ge10(t){if(q30===setTimeout)return setTimeout(t,0);if((q30===Pe9||!q30)&&setTimeout)return q30=setTimeout,setTimeout(t,0);try{return q30(t,0);}catch(e){try{return q30.call(null,t,0);}catch(r){return q30.call(this,t,0);}}}function gt11(t){if(W25===clearTimeout)return clearTimeout(t);if((W25===je11||!W25)&&clearTimeout)return W25=clearTimeout,clearTimeout(t);try{return W25(t);}catch(e){try{return W25.call(null,t);}catch(r){return W25.call(this,t);}}}var z23=[],Z28=!1,Y31,he11=-1;function $t9(){if(!Z28||!Y31)return;Z28=!1,Y31.length?z23=Y31.concat(z23):he11=-1,z23.length&&Fe11();}function Fe11(){if(Z28)return;var t=Ge10($t9);Z28=!0;for(var e=z23.length;e;){for(Y31=z23,z23=[];++he11<e;)Y31&&Y31[he11].run();he11=-1,e=z23.length;}Y31=null,Z28=!1,gt11(t);}function yt10(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];z23.push(new Ue10(t,e)),z23.length===1&&!Z28&&Ge10(Fe11);}function Ue10(t,e){this.fun=t,this.array=e;}Ue10.prototype.run=function(){this.fun.apply(null,this.array);};var It8="browser",Rt11="browser",bt12=!0,Lt10=[],Nt10="",Tt12={},Ot9={},At12={};function B26(){}var St10=B26,wt9=B26,xt10=B26,Ct9=B26,Dt9=B26,_t8=B26,Pt10=B26;function jt10(t){throw new Error("process.binding is not supported");}function Gt8(){return"/";}function Ft8(t){throw new Error("process.chdir is not supported");}function Ut9(){return 0;}var ee19=Q25.performance||{},Xt10=ee19.now||ee19.mozNow||ee19.msNow||ee19.oNow||ee19.webkitNow||function(){return new Date().getTime();};function Vt9(t){var e=Xt10.call(ee19)*.001,r=Math.floor(e),i=Math.floor(e%1*1e9);return t&&(r=r-t[0],i=i-t[1],i<0&&(r--,i+=1e9)),[r,i];}var zt10=new Date;function Ht8(){var t=new Date,e=t-zt10;return e/1e3;}var fe13={nextTick:yt10,title:It8,browser:bt12,env:{NODE_ENV:"production"},argv:Lt10,version:Nt10,versions:Tt12,on:St10,addListener:wt9,once:xt10,off:Ct9,removeListener:Dt9,removeAllListeners:_t8,emit:Pt10,binding:jt10,cwd:Gt8,chdir:Ft8,umask:Ut9,hrtime:Vt9,platform:Rt11,release:Ot9,config:At12,uptime:Ht8};function Mt11(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;}var be9,Xe10;function qt10(){return Xe10||(Xe10=1,be9=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value;};}),be9;}var Wt9=y21;y21.Node=k23,y21.create=y21;function y21(t){var e=this;if(e instanceof y21||(e=new y21),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(n){e.push(n);});else if(arguments.length>0)for(var r=0,i=arguments.length;r<i;r++)e.push(arguments[r]);return e;}y21.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e;},y21.prototype.unshiftNode=function(t){if(t===this.head)return;t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++;},y21.prototype.pushNode=function(t){if(t===this.tail)return;t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++;},y21.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Bt9(this,arguments[t]);return this.length;},y21.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)kt11(this,arguments[t]);return this.length;},y21.prototype.pop=function(){if(!this.tail)return;var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t;},y21.prototype.shift=function(){if(!this.head)return;var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t;},y21.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,i=0;r!==null;i++)t.call(e,r.value,i,this),r=r.next;},y21.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,i=this.length-1;r!==null;i--)t.call(e,r.value,i,this),r=r.prev;},y21.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value;},y21.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value;},y21.prototype.map=function(t,e){e=e||this;for(var r=new y21,i=this.head;i!==null;)r.push(t.call(e,i.value,this)),i=i.next;return r;},y21.prototype.mapReverse=function(t,e){e=e||this;for(var r=new y21,i=this.tail;i!==null;)r.push(t.call(e,i.value,this)),i=i.prev;return r;},y21.prototype.reduce=function(t,e){var r,i=this.head;if(arguments.length>1)r=e;else if(this.head)i=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;i!==null;n++)r=t(r,i.value,n),i=i.next;return r;},y21.prototype.reduceReverse=function(t,e){var r,i=this.tail;if(arguments.length>1)r=e;else if(this.tail)i=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;i!==null;n--)r=t(r,i.value,n),i=i.prev;return r;},y21.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t;},y21.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t;},y21.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new y21;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=0,n=this.head;n!==null&&i<t;i++)n=n.next;for(;n!==null&&i<e;i++,n=n.next)r.push(n.value);return r;},y21.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new y21;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var i=this.length,n=this.tail;n!==null&&i>e;i--)n=n.prev;for(;n!==null&&i>t;i--,n=n.prev)r.push(n.value);return r;},y21.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var i=0,n=this.head;n!==null&&i<t;i++)n=n.next;for(var a=[],i=0;n&&i<e;i++)a.push(n.value),n=this.removeNode(n);n===null&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var i=0;i<r.length;i++)n=Yt10(this,n,r[i]);return a;},y21.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var i=r.prev;r.prev=r.next,r.next=i;}return this.head=e,this.tail=t,this;};function Yt10(t,e,r){var i=e===t.head?new k23(r,null,e,t):new k23(r,e,e.next,t);return i.next===null&&(t.tail=i),i.prev===null&&(t.head=i),t.length++,i;}function Bt9(t,e){t.tail=new k23(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++;}function kt11(t,e){t.head=new k23(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++;}function k23(t,e,r,i){if(!(this instanceof k23))return new k23(t,e,r,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null;}try{qt10()(y21);}catch(t){}const Kt10=Wt9,K29=Symbol("max"),H24=Symbol("length"),te19=Symbol("lengthCalculator"),oe16=Symbol("allowStale"),J29=Symbol("maxAge"),M23=Symbol("dispose"),Ve10=Symbol("noDisposeOnSet"),C29=Symbol("lruList"),U26=Symbol("cache"),ze9=Symbol("updateAgeOnGet"),Le9=()=>1;class Jt9{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[K29]=e.max||Infinity;const r=e.length||Le9;if(this[te19]=typeof r!="function"?Le9:r,this[oe16]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[J29]=e.maxAge||0,this[M23]=e.dispose,this[Ve10]=e.noDisposeOnSet||!1,this[ze9]=e.updateAgeOnGet||!1,this.reset();}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[K29]=e||Infinity,le14(this);}get max(){return this[K29];}set allowStale(e){this[oe16]=!!e;}get allowStale(){return this[oe16];}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[J29]=e,le14(this);}get maxAge(){return this[J29];}set lengthCalculator(e){typeof e!="function"&&(e=Le9),e!==this[te19]&&(this[te19]=e,this[H24]=0,this[C29].forEach(r=>{r.length=this[te19](r.value,r.key),this[H24]+=r.length;})),le14(this);}get lengthCalculator(){return this[te19];}get length(){return this[H24];}get itemCount(){return this[C29].length;}rforEach(e,r){r=r||this;for(let i=this[C29].tail;i!==null;){const n=i.prev;He9(this,e,i,r),i=n;}}forEach(e,r){r=r||this;for(let i=this[C29].head;i!==null;){const n=i.next;He9(this,e,i,r),i=n;}}keys(){return this[C29].toArray().map(e=>e.key);}values(){return this[C29].toArray().map(e=>e.value);}reset(){this[M23]&&this[C29]&&this[C29].length&&this[C29].forEach(e=>this[M23](e.key,e.value)),this[U26]=new Map,this[C29]=new Kt10,this[H24]=0;}dump(){return this[C29].map(e=>pe9(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e);}dumpLru(){return this[C29];}set(e,r,i){if(i=i||this[J29],i&&typeof i!="number")throw new TypeError("maxAge must be a number");const n=i?Date.now():0,a=this[te19](r,e);if(this[U26].has(e)){if(a>this[K29])return re18(this,this[U26].get(e)),!1;const I=this[U26].get(e),s=I.value;return this[M23]&&(this[Ve10]||this[M23](e,s.value)),s.now=n,s.maxAge=i,s.value=r,this[H24]+=a-s.length,s.length=a,this.get(e),le14(this),!0;}const R=new Qt9(e,r,a,n,i);return R.length>this[K29]?(this[M23]&&this[M23](e,r),!1):(this[H24]+=R.length,this[C29].unshift(R),this[U26].set(e,this[C29].head),le14(this),!0);}has(e){if(!this[U26].has(e))return!1;const r=this[U26].get(e).value;return!pe9(this,r);}get(e){return Ne10(this,e,!0);}peek(e){return Ne10(this,e,!1);}pop(){const e=this[C29].tail;return e?(re18(this,e),e.value):null;}del(e){re18(this,this[U26].get(e));}load(e){this.reset();const r=Date.now();for(let i=e.length-1;i>=0;i--){const n=e[i],a=n.e||0;if(a===0)this.set(n.k,n.v);else{const R=a-r;R>0&&this.set(n.k,n.v,R);}}}prune(){this[U26].forEach((e,r)=>Ne10(this,r,!1));}}const Ne10=(t,e,r)=>{const i=t[U26].get(e);if(i){const n=i.value;if(pe9(t,n)){if(re18(t,i),!t[oe16])return;}else r&&(t[ze9]&&(i.value.now=Date.now()),t[C29].unshiftNode(i));return n.value;}},pe9=(t,e)=>{if(!e||!e.maxAge&&!t[J29])return!1;const r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[J29]&&r>t[J29];},le14=t=>{if(t[H24]>t[K29])for(let e=t[C29].tail;t[H24]>t[K29]&&e!==null;){const r=e.prev;re18(t,e),e=r;}},re18=(t,e)=>{if(e){const r=e.value;t[M23]&&t[M23](r.key,r.value),t[H24]-=r.length,t[U26].delete(r.key),t[C29].removeNode(e);}};class Qt9{constructor(e,r,i,n,a){this.key=e,this.value=r,this.length=i,this.now=n,this.maxAge=a||0;}}const He9=(t,e,r,i)=>{let n=r.value;pe9(t,n)&&(re18(t,r),t[oe16]||(n=void 0)),n&&e.call(i,n.value,n.key,t);};var Zt11=Jt9;const er3=Object.freeze({loose:!0}),tr4=Object.freeze({}),rr4=t=>t?typeof t!="object"?er3:t:tr4;var Te10=rr4,Oe6={exports:{}};const ir3="2.0.0",Me12=256,nr3=Number.MAX_SAFE_INTEGER||9007199254740991,ar3=Me12-6,or4=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Ae10={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:ar3,MAX_SAFE_INTEGER:nr3,RELEASE_TYPES:or4,SEMVER_SPEC_VERSION:ir3,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const lr4=typeof fe13=="object"&&fe13.env&&fe13.env.NODE_DEBUG&&/\bsemver\b/i.test(fe13.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var de10=lr4;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:n}=Ae10,a=de10;e=t.exports={};const R=e.re=[],I=e.safeRe=[],s=e.src=[],o=e.t={};let h=0;const $="[a-zA-Z0-9-]",w=[["\\s",1],["\\d",n],[$,i]],P=F=>{for(const[D,x]of w)F=F.split(`${D}*`).join(`${D}{0,${x}}`).split(`${D}+`).join(`${D}{1,${x}}`);return F;},f=(F,D,x)=>{const T=P(D),j=h++;a(F,j,D),o[F]=j,s[j]=D,R[j]=new RegExp(D,x?"g":void 0),I[j]=new RegExp(T,x?"g":void 0);};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${$}*`),f("MAINVERSION",`(${s[o.NUMERICIDENTIFIER]})\\.(${s[o.NUMERICIDENTIFIER]})\\.(${s[o.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${s[o.NUMERICIDENTIFIERLOOSE]})\\.(${s[o.NUMERICIDENTIFIERLOOSE]})\\.(${s[o.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${s[o.NUMERICIDENTIFIER]}|${s[o.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${s[o.NUMERICIDENTIFIERLOOSE]}|${s[o.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${s[o.PRERELEASEIDENTIFIER]}(?:\\.${s[o.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${s[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[o.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${$}+`),f("BUILD",`(?:\\+(${s[o.BUILDIDENTIFIER]}(?:\\.${s[o.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${s[o.MAINVERSION]}${s[o.PRERELEASE]}?${s[o.BUILD]}?`),f("FULL",`^${s[o.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${s[o.MAINVERSIONLOOSE]}${s[o.PRERELEASELOOSE]}?${s[o.BUILD]}?`),f("LOOSE",`^${s[o.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${s[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${s[o.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${s[o.XRANGEIDENTIFIER]})(?:\\.(${s[o.XRANGEIDENTIFIER]})(?:\\.(${s[o.XRANGEIDENTIFIER]})(?:${s[o.PRERELEASE]})?${s[o.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${s[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[o.XRANGEIDENTIFIERLOOSE]})(?:${s[o.PRERELEASELOOSE]})?${s[o.BUILD]}?)?)?`),f("XRANGE",`^${s[o.GTLT]}\\s*${s[o.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${s[o.GTLT]}\\s*${s[o.XRANGEPLAINLOOSE]}$`),f("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),f("COERCERTL",s[o.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${s[o.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",f("TILDE",`^${s[o.LONETILDE]}${s[o.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${s[o.LONETILDE]}${s[o.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${s[o.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",f("CARET",`^${s[o.LONECARET]}${s[o.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${s[o.LONECARET]}${s[o.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${s[o.GTLT]}\\s*(${s[o.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${s[o.GTLT]}\\s*(${s[o.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${s[o.GTLT]}\\s*(${s[o.LOOSEPLAIN]}|${s[o.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${s[o.XRANGEPLAIN]})\\s+-\\s+(${s[o.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${s[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[o.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$");})(Oe6,Oe6.exports);var Se9=Oe6.exports;const qe10=/^[0-9]+$/,We9=(t,e)=>{const r=qe10.test(t),i=qe10.test(e);return r&&i&&(t=+t,e=+e),t===e?0:r&&!i?-1:i&&!r?1:t<e?-1:1;},cr3=(t,e)=>We9(e,t);var ur3={compareIdentifiers:We9,rcompareIdentifiers:cr3};const me12=de10,{MAX_LENGTH:Ye10,MAX_SAFE_INTEGER:ve9}=Ae10,{safeRe:Be9,t:ke9}=Se9,hr3=Te10,{compareIdentifiers:ie15}=ur3;let fr4=class V{constructor(e,r){if(r=hr3(r),e instanceof V){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version;}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Ye10)throw new TypeError(`version is longer than ${Ye10} characters`);me12("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const i=e.trim().match(r.loose?Be9[ke9.LOOSE]:Be9[ke9.FULL]);if(!i)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>ve9||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ve9||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ve9||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(n=>{if(/^[0-9]+$/.test(n)){const a=+n;if(a>=0&&a<ve9)return a;}return n;}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format();}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version;}toString(){return this.version;}compare(e){if(me12("SemVer.compare",this.version,this.options,e),!(e instanceof V)){if(typeof e=="string"&&e===this.version)return 0;e=new V(e,this.options);}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e);}compareMain(e){return e instanceof V||(e=new V(e,this.options)),ie15(this.major,e.major)||ie15(this.minor,e.minor)||ie15(this.patch,e.patch);}comparePre(e){if(e instanceof V||(e=new V(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{const i=this.prerelease[r],n=e.prerelease[r];if(me12("prerelease compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i===n)continue;return ie15(i,n);}while(++r)}compareBuild(e){e instanceof V||(e=new V(e,this.options));let r=0;do{const i=this.build[r],n=e.build[r];if(me12("prerelease compare",r,i,n),i===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(i===n)continue;return ie15(i,n);}while(++r)}inc(e,r,i){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,i),this.inc("pre",r,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,i),this.inc("pre",r,i);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const n=Number(i)?1:0;if(!r&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[n];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(r===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(n);}}if(r){let a=[r,n];i===!1&&(a=[r]),ie15(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a;}break;}default:throw new Error(`invalid increment argument: ${e}`);}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this;}};var we12=fr4;const Ke9=we12,pr3=(t,e,r)=>new Ke9(t,r).compare(new Ke9(e,r));var ne18=pr3;const dr3=ne18,mr2=(t,e,r)=>dr3(t,e,r)===0;var vr3=mr2;const Er4=ne18,gr3=(t,e,r)=>Er4(t,e,r)!==0;var $r5=gr3;const yr4=ne18,Ir4=(t,e,r)=>yr4(t,e,r)>0;var Rr3=Ir4;const br4=ne18,Lr4=(t,e,r)=>br4(t,e,r)>=0;var Nr3=Lr4;const Tr2=ne18,Or5=(t,e,r)=>Tr2(t,e,r)<0;var Ar2=Or5;const Sr5=ne18,wr3=(t,e,r)=>Sr5(t,e,r)<=0;var xr3=wr3;const Cr4=vr3,Dr4=$r5,_r2=Rr3,Pr5=Nr3,jr4=Ar2,Gr4=xr3,Fr4=(t,e,r,i)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return Cr4(t,r,i);case"!=":return Dr4(t,r,i);case">":return _r2(t,r,i);case">=":return Pr5(t,r,i);case"<":return jr4(t,r,i);case"<=":return Gr4(t,r,i);default:throw new TypeError(`Invalid operator: ${e}`);}};var Ur3=Fr4,xe9,Je9;function Xr5(){if(Je9)return xe9;Je9=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t;}constructor(h,$){if($=r($),h instanceof e){if(h.loose===!!$.loose)return h;h=h.value;}h=h.trim().split(/\s+/).join(" "),R("comparator",h,$),this.options=$,this.loose=!!$.loose,this.parse(h),this.semver===t?this.value="":this.value=this.operator+this.semver.version,R("comp",this);}parse(h){const $=this.options.loose?i[n.COMPARATORLOOSE]:i[n.COMPARATOR],w=h.match($);if(!w)throw new TypeError(`Invalid comparator: ${h}`);this.operator=w[1]!==void 0?w[1]:"",this.operator==="="&&(this.operator=""),w[2]?this.semver=new I(w[2],this.options.loose):this.semver=t;}toString(){return this.value;}test(h){if(R("Comparator.test",h,this.options.loose),this.semver===t||h===t)return!0;if(typeof h=="string")try{h=new I(h,this.options);}catch($){return!1;}return a(h,this.operator,this.semver,this.options);}intersects(h,$){if(!(h instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new s(h.value,$).test(this.value):h.operator===""?h.value===""?!0:new s(this.value,$).test(h.semver):($=r($),$.includePrerelease&&(this.value==="<0.0.0-0"||h.value==="<0.0.0-0")||!$.includePrerelease&&(this.value.startsWith("<0.0.0")||h.value.startsWith("<0.0.0"))?!1:this.operator.startsWith(">")&&h.operator.startsWith(">")||this.operator.startsWith("<")&&h.operator.startsWith("<")||this.semver.version===h.semver.version&&this.operator.includes("=")&&h.operator.includes("=")||a(this.semver,"<",h.semver,$)&&this.operator.startsWith(">")&&h.operator.startsWith("<")?!0:!!(a(this.semver,">",h.semver,$)&&this.operator.startsWith("<")&&h.operator.startsWith(">")));}}xe9=e;const r=Te10,{safeRe:i,t:n}=Se9,a=Ur3,R=de10,I=we12,s=Ze7();return xe9;}var Ce10,Qe9;function Ze7(){if(Qe9)return Ce10;Qe9=1;class t{constructor(l,m){if(m=i(m),l instanceof t)return l.loose===!!m.loose&&l.includePrerelease===!!m.includePrerelease?l:new t(l.raw,m);if(l instanceof n)return this.raw=l.value,this.set=[[l]],this.format(),this;if(this.options=m,this.loose=!!m.loose,this.includePrerelease=!!m.includePrerelease,this.raw=l.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(p=>this.parseRange(p.trim())).filter(p=>p.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const p=this.set[0];if(this.set=this.set.filter(d=>!f(d[0])),this.set.length===0)this.set=[p];else if(this.set.length>1){for(const d of this.set)if(d.length===1&&F(d[0])){this.set=[d];break;}}}this.format();}format(){return this.range=this.set.map(l=>l.join(" ").trim()).join("||").trim(),this.range;}toString(){return this.range;}parseRange(l){const m=(this.options.includePrerelease&&w)|(this.options.loose&&P),p=m+":"+l,d=r.get(p);if(d)return d;const u=this.options.loose,v=u?I[s.HYPHENRANGELOOSE]:I[s.HYPHENRANGE];l=l.replace(v,ye(this.options.includePrerelease)),a("hyphen replace",l),l=l.replace(I[s.COMPARATORTRIM],o),a("comparator trim",l),l=l.replace(I[s.TILDETRIM],h),a("tilde trim",l),l=l.replace(I[s.CARETTRIM],$),a("caret trim",l);let b=l.split(" ").map(S=>x(S,this.options)).join(" ").split(/\s+/).map(S=>$e(S,this.options));u&&(b=b.filter(S=>(a("loose invalid filter",S,this.options),!!S.match(I[s.COMPARATORLOOSE])))),a("range list",b);const E=new Map,O=b.map(S=>new n(S,this.options));for(const S of O){if(f(S))return[S];E.set(S.value,S);}E.size>1&&E.has("")&&E.delete("");const _=[...E.values()];return r.set(p,_),_;}intersects(l,m){if(!(l instanceof t))throw new TypeError("a Range is required");return this.set.some(p=>D(p,m)&&l.set.some(d=>D(d,m)&&p.every(u=>d.every(v=>u.intersects(v,m)))));}test(l){if(!l)return!1;if(typeof l=="string")try{l=new R(l,this.options);}catch(m){return!1;}for(let m=0;m<this.set.length;m++)if(Ie(this.set[m],l,this.options))return!0;return!1;}}Ce10=t;const e=Zt11,r=new e({max:1e3}),i=Te10,n=Xr5(),a=de10,R=we12,{safeRe:I,t:s,comparatorTrimReplace:o,tildeTrimReplace:h,caretTrimReplace:$}=Se9,{FLAG_INCLUDE_PRERELEASE:w,FLAG_LOOSE:P}=Ae10,f=c=>c.value==="<0.0.0-0",F=c=>c.value==="",D=(c,l)=>{let m=!0;const p=c.slice();let d=p.pop();for(;m&&p.length;)m=p.every(u=>d.intersects(u,l)),d=p.pop();return m;},x=(c,l)=>(a("comp",c,l),c=L(c,l),a("caret",c),c=j(c,l),a("tildes",c),c=g(c,l),a("xrange",c),c=G(c,l),a("stars",c),c),T=c=>!c||c.toLowerCase()==="x"||c==="*",j=(c,l)=>c.trim().split(/\s+/).map(m=>ge(m,l)).join(" "),ge=(c,l)=>{const m=l.loose?I[s.TILDELOOSE]:I[s.TILDE];return c.replace(m,(p,d,u,v,b)=>{a("tilde",c,p,d,u,v,b);let E;return T(d)?E="":T(u)?E=`>=${d}.0.0 <${+d+1}.0.0-0`:T(v)?E=`>=${d}.${u}.0 <${d}.${+u+1}.0-0`:b?(a("replaceTilde pr",b),E=`>=${d}.${u}.${v}-${b} <${d}.${+u+1}.0-0`):E=`>=${d}.${u}.${v} <${d}.${+u+1}.0-0`,a("tilde return",E),E;});},L=(c,l)=>c.trim().split(/\s+/).map(m=>N(m,l)).join(" "),N=(c,l)=>{a("caret",c,l);const m=l.loose?I[s.CARETLOOSE]:I[s.CARET],p=l.includePrerelease?"-0":"";return c.replace(m,(d,u,v,b,E)=>{a("caret",c,d,u,v,b,E);let O;return T(u)?O="":T(v)?O=`>=${u}.0.0${p} <${+u+1}.0.0-0`:T(b)?u==="0"?O=`>=${u}.${v}.0${p} <${u}.${+v+1}.0-0`:O=`>=${u}.${v}.0${p} <${+u+1}.0.0-0`:E?(a("replaceCaret pr",E),u==="0"?v==="0"?O=`>=${u}.${v}.${b}-${E} <${u}.${v}.${+b+1}-0`:O=`>=${u}.${v}.${b}-${E} <${u}.${+v+1}.0-0`:O=`>=${u}.${v}.${b}-${E} <${+u+1}.0.0-0`):(a("no pr"),u==="0"?v==="0"?O=`>=${u}.${v}.${b}${p} <${u}.${v}.${+b+1}-0`:O=`>=${u}.${v}.${b}${p} <${u}.${+v+1}.0-0`:O=`>=${u}.${v}.${b} <${+u+1}.0.0-0`),a("caret return",O),O;});},g=(c,l)=>(a("replaceXRanges",c,l),c.split(/\s+/).map(m=>A(m,l)).join(" ")),A=(c,l)=>{c=c.trim();const m=l.loose?I[s.XRANGELOOSE]:I[s.XRANGE];return c.replace(m,(p,d,u,v,b,E)=>{a("xRange",c,p,d,u,v,b,E);const O=T(u),_=O||T(v),S=_||T(b),ae=S;return d==="="&&ae&&(d=""),E=l.includePrerelease?"-0":"",O?d===">"||d==="<"?p="<0.0.0-0":p="*":d&&ae?(_&&(v=0),b=0,d===">"?(d=">=",_?(u=+u+1,v=0,b=0):(v=+v+1,b=0)):d==="<="&&(d="<",_?u=+u+1:v=+v+1),d==="<"&&(E="-0"),p=`${d+u}.${v}.${b}${E}`):_?p=`>=${u}.0.0${E} <${+u+1}.0.0-0`:S&&(p=`>=${u}.${v}.0${E} <${u}.${+v+1}.0-0`),a("xRange return",p),p;});},G=(c,l)=>(a("replaceStars",c,l),c.trim().replace(I[s.STAR],"")),$e=(c,l)=>(a("replaceGTE0",c,l),c.trim().replace(I[l.includePrerelease?s.GTE0PRE:s.GTE0],"")),ye=c=>(l,m,p,d,u,v,b,E,O,_,S,ae,Ni)=>(T(p)?m="":T(d)?m=`>=${p}.0.0${c?"-0":""}`:T(u)?m=`>=${p}.${d}.0${c?"-0":""}`:v?m=`>=${m}`:m=`>=${m}${c?"-0":""}`,T(O)?E="":T(_)?E=`<${+O+1}.0.0-0`:T(S)?E=`<${O}.${+_+1}.0-0`:ae?E=`<=${O}.${_}.${S}-${ae}`:c?E=`<${O}.${_}.${+S+1}-0`:E=`<=${E}`,`${m} ${E}`.trim()),Ie=(c,l,m)=>{for(let p=0;p<c.length;p++)if(!c[p].test(l))return!1;if(l.prerelease.length&&!m.includePrerelease){for(let p=0;p<c.length;p++){if(a(c[p].semver),c[p].semver===n.ANY)continue;if(c[p].semver.prerelease.length>0){const d=c[p].semver;if(d.major===l.major&&d.minor===l.minor&&d.patch===l.patch)return!0;}}return!1;}return!0;};return Ce10;}const Vr5=Ze7(),zr4=(t,e,r)=>{try{e=new Vr5(e,r);}catch(i){return!1;}return e.test(t);};var Hr4=zr4,et14=Mt11(Hr4);function Mr4(t,e,r){const i=t.open(e),{origin:R}=new URL(e);let I=~~(1e4/250);function s(h){h.source===i&&(I=0,t.removeEventListener("message",s,!1));}t.addEventListener("message",s,!1);function o(){if(I<=0)return;i.postMessage(r,R),setTimeout(o,250),I-=1;}setTimeout(o,250);}var qr5=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function tt12(t,...e){for(const r of e)Wr5(t,r);return t;}function Wr5(t,e){for(const r of Object.keys(e))S1(t,r,e[r],!0);}var Yr5="vega-embed",Br4="6.24.0",kr3="Publish Vega visualizations as embedded web components.",Kr5=["vega","data","visualization","component","embed"],Jr5={type:"git",url:"http://github.com/vega/vega-embed.git"},Qr5={name:"UW Interactive Data Lab",url:"http://idl.cs.washington.edu"},Zr5=[{name:"Dominik Moritz",url:"https://www.domoritz.de"}],ei6={url:"https://github.com/vega/vega-embed/issues"},ti6="https://github.com/vega/vega-embed#readme",ri6="BSD-3-Clause",ii6="build/vega-embed.js",ni6="build/vega-embed.module.js",si6="build/vega-embed.min.js",ai6="build/vega-embed.min.js",oi6="build/vega-embed.module.d.ts",li6=["src","build","patches"],ci4={"@babel/core":"^7.23.6","@babel/plugin-proposal-async-generator-functions":"^7.20.7","@babel/plugin-proposal-json-strings":"^7.18.6","@babel/plugin-proposal-object-rest-spread":"^7.20.7","@babel/plugin-proposal-optional-catch-binding":"^7.18.6","@babel/plugin-transform-runtime":"^7.23.6","@babel/preset-env":"^7.23.6","@babel/preset-typescript":"^7.23.3","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-commonjs":"25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/jest":"^29.5.11","@types/semver":"^7.5.6","@typescript-eslint/eslint-plugin":"^6.14.0","@typescript-eslint/parser":"^6.14.0","browser-sync":"^2.29.3",concurrently:"^8.2.2","del-cli":"^5.1.0",eslint:"^8.56.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.6.0","eslint-plugin-prettier":"^5.0.1",jest:"^29.7.0","jest-canvas-mock":"^2.5.2","jest-environment-jsdom":"^29.7.0","patch-package":"^8.0.0","postinstall-postinstall":"^2.1.0",prettier:"^3.1.1","release-it":"^17.0.1",rollup:"4.9.1","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",sass:"^1.69.5",typescript:"^5.3.3",vega:"^5.22.1","vega-lite":"^5.2.0"},ui6={vega:"^5.21.0","vega-lite":"*"},hi5={"fast-json-patch":"^3.1.1","json-stringify-pretty-compact":"^3.0.0",semver:"^7.5.4",tslib:"^2.6.2","vega-interpreter":"^1.0.5","vega-schema-url-parser":"^2.2.0","vega-themes":"^2.14.0","vega-tooltip":"^0.34.0"},fi6=["yallist"],pi6={prebuild:"yarn clean && yarn build:style",build:"rollup -c","build:style":"./build-style.sh",clean:"del-cli build src/style.ts",prepublishOnly:"yarn clean && yarn build",preversion:"yarn lint && yarn test",serve:"browser-sync start --directory -s -f build *.html",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",pretest:"yarn build:style",test:"jest","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand",prettierbase:"prettier '*.{css,scss,html}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",release:"release-it"},di5={name:Yr5,version:Br4,description:kr3,keywords:Kr5,repository:Jr5,author:Qr5,contributors:Zr5,bugs:ei6,homepage:ti6,license:ri6,main:ii6,module:ni6,unpkg:si6,jsdelivr:ai6,types:oi6,files:li6,devDependencies:ci4,peerDependencies:ui6,dependencies:hi5,bundledDependencies:fi6,scripts:pi6};di5.version;let se16=mod13;const rt14=typeof window!="undefined"?window:void 0;se16===void 0&&rt14?.vl?.compile&&(se16=rt14.vl);const it15={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},vi5={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},ce10={vega:"Vega","vega-lite":"Vega-Lite"},Ee8={vega:mod12.version,"vega-lite":se16?se16.version:"not available"},Ei4={vega:t=>t,"vega-lite":(t,e)=>se16.compile(t,{config:e}).spec},gi4=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,$i4="chart-wrapper";function yi5(t){return typeof t=="function";}function nt11(t,e,r,i){const n=`<html><head>${e}</head><body><pre><code class="json">`,a=`</code></pre>${r}</body></html>`,R=window.open("");R.document.write(n+t+a),R.document.title=`${ce10[i]} JSON Source`;}function st11(t,e){if(t.$schema){const r=c7(t.$schema);e&&e!==r.library&&console.warn(`The given visualization spec is written in ${ce10[r.library]}, but mode argument sets ${ce10[e]??e}.`);const i=r.library;return et14(Ee8[i],`^${r.version.slice(1)}`)||console.warn(`The input spec uses ${ce10[i]} ${r.version}, but the current version of ${ce10[i]} is v${Ee8[i]}.`),i;}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":e??"vega";}function at16(t){return!!(t&&"load"in t);}function ot14(t){return at16(t)?t:mod12.loader(t);}function Ii4(t){const e=t.usermeta?.embedOptions??{};return X1(e.defaultStyle)&&(e.defaultStyle=!1),e;}async function Ri4(t,e,r={}){let i,n;X1(e)?(n=ot14(r.loader),i=JSON.parse(await n.load(e))):i=e;const a=Ii4(i),R=a.loader;(!n||R)&&(n=ot14(r.loader??R));const I=await lt12(a,n),s=await lt12(r,n),o={...tt12(s,I),config:rn(s.config??{},I.config??{})};return await Li4(t,i,o,n);}async function lt12(t,e){const r=X1(t.config)?JSON.parse(await e.load(t.config)):t.config??{},i=X1(t.patch)?JSON.parse(await e.load(t.patch)):t.patch;return{...t,...i?{patch:i}:{},...r?{config:r}:{}};}function bi5(t){const e=t.getRootNode?t.getRootNode():document;return e instanceof ShadowRoot?{root:e,rootContainer:e}:{root:document,rootContainer:document.head??document.body};}async function Li4(t,e,r={},i){const n=r.theme?rn(mod14[r.theme],r.config??{}):r.config,a=In(r.actions)?r.actions:tt12({},it15,r.actions??{}),R={...vi5,...r.i18n},I=r.renderer??"canvas",s=r.logLevel??mod12.Warn,o=r.downloadFileName??"visualization",h=typeof t=="string"?document.querySelector(t):t;if(!h)throw new Error(`${t} does not exist`);if(r.defaultStyle!==!1){const L="vega-embed-style",{root:N,rootContainer:g}=bi5(h);if(!N.getElementById(L)){const A=document.createElement("style");A.id=L,A.innerHTML=r.defaultStyle===void 0||r.defaultStyle===!0?qr5.toString():r.defaultStyle,g.appendChild(A);}}const $=st11(e,r.mode);let w=Ei4[$](e,n);if($==="vega-lite"&&w.$schema){const L=c7(w.$schema);et14(Ee8.vega,`^${L.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${L.version}, but current version is v${Ee8.vega}.`);}h.classList.add("vega-embed"),a&&h.classList.add("has-actions"),h.innerHTML="";let P=h;if(a){const L=document.createElement("div");L.classList.add($i4),h.appendChild(L),P=L;}const f=r.patch;if(f&&(w=f instanceof Function?f(w):T(w,f,!0,!1).newDocument),r.formatLocale&&mod12.formatLocale(r.formatLocale),r.timeFormatLocale&&mod12.timeFormatLocale(r.timeFormatLocale),r.expressionFunctions)for(const L in r.expressionFunctions){const N=r.expressionFunctions[L];"fn"in N?mod12.expressionFunction(L,N.fn,N.visitor):N instanceof Function&&mod12.expressionFunction(L,N);}const{ast:F}=r,D=mod12.parse(w,$==="vega-lite"?{}:n,{ast:F}),x=new(r.viewClass||mod12.View)(D,{loader:i,logLevel:s,renderer:I,...F?{expr:mod12.expressionInterpreter??r.expr??v19}:{}});if(x.addSignalListener("autosize",(L,N)=>{const{type:g}=N;g=="fit-x"?(P.classList.add("fit-x"),P.classList.remove("fit-y")):g=="fit-y"?(P.classList.remove("fit-x"),P.classList.add("fit-y")):g=="fit"?P.classList.add("fit-x","fit-y"):P.classList.remove("fit-x","fit-y");}),r.tooltip!==!1){const{loader:L,tooltip:N}=r,g=L&&!at16(L)?L?.baseURL:void 0,A=yi5(N)?N:new x20({baseURL:g,...N===!0?{}:N}).call;x.tooltip(A);}let{hover:T1}=r;if(T1===void 0&&(T1=$==="vega"),T1){const{hoverSet:L,updateSet:N}=typeof T1=="boolean"?{}:T1;x.hover(L,N);}r&&(r.width!=null&&x.width(r.width),r.height!=null&&x.height(r.height),r.padding!=null&&x.padding(r.padding)),await x.initialize(P,r.bind).runAsync();let j;if(a!==!1){let L=h;if(r.defaultStyle!==!1||r.forceActionsMenu){const g=document.createElement("details");g.title=R.CLICK_TO_VIEW_ACTIONS,h.append(g),L=g;const A=document.createElement("summary");A.innerHTML=gi4,g.append(A),j=G=>{g.contains(G.target)||g.removeAttribute("open");},document.addEventListener("click",j);}const N=document.createElement("div");if(L.append(N),N.classList.add("vega-actions"),a===!0||a.export!==!1){for(const g of["svg","png"])if(a===!0||a.export===!0||a.export[g]){const A=R[`${g.toUpperCase()}_ACTION`],G=document.createElement("a"),$e=M1(r.scaleFactor)?r.scaleFactor[g]:r.scaleFactor;G.text=A,G.href="#",G.target="_blank",G.download=`${o}.${g}`,G.addEventListener("mousedown",async function(ye){ye.preventDefault();const Ie=await x.toImageURL(g,$e);this.href=Ie;}),N.append(G);}}if(a===!0||a.source!==!1){const g=document.createElement("a");g.text=R.SOURCE_ACTION,g.href="#",g.addEventListener("click",function(A){nt11(L1(e),r.sourceHeader??"",r.sourceFooter??"",$),A.preventDefault();}),N.append(g);}if($==="vega-lite"&&(a===!0||a.compiled!==!1)){const g=document.createElement("a");g.text=R.COMPILED_ACTION,g.href="#",g.addEventListener("click",function(A){nt11(L1(w),r.sourceHeader??"",r.sourceFooter??"","vega"),A.preventDefault();}),N.append(g);}if(a===!0||a.editor!==!1){const g=r.editorUrl??"https://vega.github.io/editor/",A=document.createElement("a");A.text=R.EDITOR_ACTION,A.href="#",A.addEventListener("click",function(G){Mr4(window,g,{config:n,mode:$,renderer:I,spec:L1(e)}),G.preventDefault();}),N.append(A);}}function ge(){j&&document.removeEventListener("click",j),x.finalize();}return{view:x,spec:e,vgSpec:w,finalize:ge,embedOptions:r};}window.vegaEmbed=Ri4;window.vega=__default;window.vegaLite=__default1;
  </script>
</head>
<body>
<div class="vega-visualization" id="vis"></div>
<script type="text/javascript">
  const spec = {"config": {"view": {"continuousWidth": 300, "continuousHeight": 300, "stroke": null}, "axis": {"grid": false}, "title": {"fontSize": 20}}, "hconcat": [{"data": {"name": "data-f65497d945a9f992f19a3a35579ca751"}, "facet": {"field": "product", "header": {"labelFontSize": 15}, "title": null, "type": "nominal"}, "spec": {"mark": {"type": "square", "opacity": 1, "size": 200}, "encoding": {"color": {"field": "Telemetry Feature Category", "type": "nominal"}, "opacity": {"condition": {"param": "param_1", "value": 0.75}, "value": 0.05}, "tooltip": {"field": "Telemetry Feature Category", "type": "nominal"}, "x": {"field": "value", "title": null, "type": "nominal"}, "y": {"field": "Sub-Category", "type": "nominal"}}, "name": "view_1", "transform": [{"filter": {"and": [{"param": "param_1"}, {"param": "param_2"}]}}]}, "title": {"text": ["Compare products by sub-category"], "subtitle": ["Select in Legend by Status and                           Telemetry Feature Category", " "]}}, {"data": {"name": "data-a7dec023579d108c9ece722db0d792be"}, "mark": {"type": "text"}, "encoding": {"text": {"field": "value", "type": "nominal"}, "y": {"field": "keys", "title": null, "type": "nominal"}}, "name": "view_2", "transform": [{"filter": {"param": "param_1"}}]}], "params": [{"name": "param_1", "select": {"type": "point", "fields": ["Telemetry Feature Category"]}, "bind": "legend", "views": ["view_1"]}, {"name": "param_2", "select": {"type": "point", "fields": ["value"]}, "views": ["view_1", "view_2"]}], "$schema": "https://vega.github.io/schema/vega-lite/v5.16.3.json", "datasets": {"data-f65497d945a9f992f19a3a35579ca751": [{"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Creation", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Termination", "product": "Carbon Black", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Access", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Image/Library Loaded", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Remote Thread Creation", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Tampering Activity", "product": "Carbon Black", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Creation", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Opened", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Deletion", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Modification", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Renaming", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Creation", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Modification", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Deletion", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Login", "product": "Carbon Black", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Logoff", "product": "Carbon Black", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "TCP Connection", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "UDP Connection", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "URL", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "DNS Query", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "File Downloaded", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "MD5", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "SHA", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "IMPHASH", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Creation", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Modification", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Deletion", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Creation", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Modification", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Deletion", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Creation", "product": "Carbon Black", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Modification", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Deletion", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Loaded", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Modification", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Unloaded", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "Virtual Disk Mount", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Unmount", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Mount", "product": "Carbon Black", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Other Relevant Events", "Sub-Category": "Group Policy Modification", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Creation", "product": "Carbon Black", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Connection", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Start", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Stop", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Install", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Uninstall", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Keep-Alive", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Errors", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumerToFilter", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumer", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventFilter", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "BIT JOBS Activity", "Sub-Category": "BIT JOBS Activity", "product": "Carbon Black", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "PowerShell Activity", "Sub-Category": "Script-Block Activity", "product": "Carbon Black", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Creation", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Termination", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Access", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Image/Library Loaded", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Remote Thread Creation", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Tampering Activity", "product": "Cortex XDR", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Creation", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Opened", "product": "Cortex XDR", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Deletion", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Modification", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Renaming", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Creation", "product": "Cortex XDR", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Modification", "product": "Cortex XDR", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Deletion", "product": "Cortex XDR", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Login", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Logoff", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "TCP Connection", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "UDP Connection", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "URL", "product": "Cortex XDR", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "DNS Query", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "File Downloaded", "product": "Cortex XDR", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "MD5", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "SHA", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "IMPHASH", "product": "Cortex XDR", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Creation", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Modification", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Deletion", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Creation", "product": "Cortex XDR", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Modification", "product": "Cortex XDR", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Deletion", "product": "Cortex XDR", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Creation", "product": "Cortex XDR", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Modification", "product": "Cortex XDR", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Deletion", "product": "Cortex XDR", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Loaded", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Modification", "product": "Cortex XDR", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Unloaded", "product": "Cortex XDR", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "Virtual Disk Mount", "product": "Cortex XDR", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Unmount", "product": "Cortex XDR", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Mount", "product": "Cortex XDR", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Other Relevant Events", "Sub-Category": "Group Policy Modification", "product": "Cortex XDR", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Creation", "product": "Cortex XDR", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Connection", "product": "Cortex XDR", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Start", "product": "Cortex XDR", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Stop", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Install", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Uninstall", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Keep-Alive", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Errors", "product": "Cortex XDR", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumerToFilter", "product": "Cortex XDR", "value": "\ud83c\udf9a\ufe0f"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumer", "product": "Cortex XDR", "value": "\ud83c\udf9a\ufe0f"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventFilter", "product": "Cortex XDR", "value": "\ud83c\udf9a\ufe0f"}, {"Telemetry Feature Category": "BIT JOBS Activity", "Sub-Category": "BIT JOBS Activity", "product": "Cortex XDR", "value": "\ud83c\udf9a\ufe0f"}, {"Telemetry Feature Category": "PowerShell Activity", "Sub-Category": "Script-Block Activity", "product": "Cortex XDR", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Creation", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Termination", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Access", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Image/Library Loaded", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Remote Thread Creation", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Tampering Activity", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Creation", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Opened", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Deletion", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Modification", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Renaming", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Creation", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Modification", "product": "CrowdStrike", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Deletion", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Login", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Logoff", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "TCP Connection", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "UDP Connection", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "URL", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "DNS Query", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "File Downloaded", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "MD5", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "SHA", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "IMPHASH", "product": "CrowdStrike", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Creation", "product": "CrowdStrike", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Modification", "product": "CrowdStrike", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Deletion", "product": "CrowdStrike", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Creation", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Modification", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Deletion", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Creation", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Modification", "product": "CrowdStrike", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Deletion", "product": "CrowdStrike", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Loaded", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Modification", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Unloaded", "product": "CrowdStrike", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "Virtual Disk Mount", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Unmount", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Mount", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Other Relevant Events", "Sub-Category": "Group Policy Modification", "product": "CrowdStrike", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Creation", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Connection", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Start", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Stop", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Install", "product": "CrowdStrike", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Uninstall", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Keep-Alive", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Errors", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumerToFilter", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumer", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventFilter", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "BIT JOBS Activity", "Sub-Category": "BIT JOBS Activity", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "PowerShell Activity", "Sub-Category": "Script-Block Activity", "product": "CrowdStrike", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Creation", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Termination", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Access", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Image/Library Loaded", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Remote Thread Creation", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Tampering Activity", "product": "Cybereason", "value": "\u2753"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Creation", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Opened", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Deletion", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Modification", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Renaming", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Creation", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Modification", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Deletion", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Login", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Logoff", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "TCP Connection", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "UDP Connection", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "URL", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "DNS Query", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "File Downloaded", "product": "Cybereason", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "MD5", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "SHA", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "IMPHASH", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Creation", "product": "Cybereason", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Modification", "product": "Cybereason", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Deletion", "product": "Cybereason", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Creation", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Modification", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Deletion", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Creation", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Modification", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Deletion", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Loaded", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Modification", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Unloaded", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "Virtual Disk Mount", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Unmount", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Mount", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Other Relevant Events", "Sub-Category": "Group Policy Modification", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Creation", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Connection", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Start", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Stop", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Install", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Uninstall", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Keep-Alive", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Errors", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumerToFilter", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumer", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventFilter", "product": "Cybereason", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "BIT JOBS Activity", "Sub-Category": "BIT JOBS Activity", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "PowerShell Activity", "Sub-Category": "Script-Block Activity", "product": "Cybereason", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Creation", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Termination", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Access", "product": "ESET Inspect", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Image/Library Loaded", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Remote Thread Creation", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Tampering Activity", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Creation", "product": "ESET Inspect", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Opened", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Deletion", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Modification", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Renaming", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Creation", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Modification", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Deletion", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Login", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Logoff", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "TCP Connection", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "UDP Connection", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "URL", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "DNS Query", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "File Downloaded", "product": "ESET Inspect", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "MD5", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "SHA", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "IMPHASH", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Creation", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Modification", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Deletion", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Creation", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Modification", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Deletion", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Creation", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Modification", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Deletion", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Loaded", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Modification", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Unloaded", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "Virtual Disk Mount", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Unmount", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Mount", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Other Relevant Events", "Sub-Category": "Group Policy Modification", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Creation", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Connection", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Start", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Stop", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Install", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Uninstall", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Keep-Alive", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Errors", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumerToFilter", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumer", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventFilter", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "BIT JOBS Activity", "Sub-Category": "BIT JOBS Activity", "product": "ESET Inspect", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "PowerShell Activity", "Sub-Category": "Script-Block Activity", "product": "ESET Inspect", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Creation", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Termination", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Access", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Image/Library Loaded", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Remote Thread Creation", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Tampering Activity", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Creation", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Opened", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Deletion", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Modification", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Renaming", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Creation", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Modification", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Deletion", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Login", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Logoff", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "TCP Connection", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "UDP Connection", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "URL", "product": "Elastic", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "DNS Query", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "File Downloaded", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "MD5", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "SHA", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "IMPHASH", "product": "Elastic", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Creation", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Modification", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Deletion", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Creation", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Modification", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Deletion", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Creation", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Modification", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Deletion", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Loaded", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Modification", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Unloaded", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "Virtual Disk Mount", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Unmount", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Mount", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Other Relevant Events", "Sub-Category": "Group Policy Modification", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Creation", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Connection", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Start", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Stop", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Install", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Uninstall", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Keep-Alive", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Errors", "product": "Elastic", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumerToFilter", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumer", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventFilter", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "BIT JOBS Activity", "Sub-Category": "BIT JOBS Activity", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "PowerShell Activity", "Sub-Category": "Script-Block Activity", "product": "Elastic", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Creation", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Termination", "product": "Harfanglab", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Access", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Image/Library Loaded", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Remote Thread Creation", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Tampering Activity", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Creation", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Opened", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Deletion", "product": "Harfanglab", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Modification", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Renaming", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Creation", "product": "Harfanglab", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Modification", "product": "Harfanglab", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Deletion", "product": "Harfanglab", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Login", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Logoff", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "TCP Connection", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "UDP Connection", "product": "Harfanglab", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "URL", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "DNS Query", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "File Downloaded", "product": "Harfanglab", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "MD5", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "SHA", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "IMPHASH", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Creation", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Modification", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Deletion", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Creation", "product": "Harfanglab", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Modification", "product": "Harfanglab", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Deletion", "product": "Harfanglab", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Creation", "product": "Harfanglab", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Modification", "product": "Harfanglab", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Deletion", "product": "Harfanglab", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Loaded", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Modification", "product": "Harfanglab", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Unloaded", "product": "Harfanglab", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "Virtual Disk Mount", "product": "Harfanglab", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Unmount", "product": "Harfanglab", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Mount", "product": "Harfanglab", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Other Relevant Events", "Sub-Category": "Group Policy Modification", "product": "Harfanglab", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Creation", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Connection", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Start", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Stop", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Install", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Uninstall", "product": "Harfanglab", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Keep-Alive", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Errors", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumerToFilter", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumer", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventFilter", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "BIT JOBS Activity", "Sub-Category": "BIT JOBS Activity", "product": "Harfanglab", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "PowerShell Activity", "Sub-Category": "Script-Block Activity", "product": "Harfanglab", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Creation", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Termination", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Access", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Image/Library Loaded", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Remote Thread Creation", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Tampering Activity", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Creation", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Opened", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Deletion", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Modification", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Renaming", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Creation", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Modification", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Deletion", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Login", "product": "LimaCharlie", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Logoff", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "TCP Connection", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "UDP Connection", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "URL", "product": "LimaCharlie", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "DNS Query", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "File Downloaded", "product": "LimaCharlie", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "MD5", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "SHA", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "IMPHASH", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Creation", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Modification", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Deletion", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Creation", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Modification", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Deletion", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Creation", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Modification", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Deletion", "product": "LimaCharlie", "value": "\u2753"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Loaded", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Modification", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Unloaded", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "Virtual Disk Mount", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Unmount", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Mount", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Other Relevant Events", "Sub-Category": "Group Policy Modification", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Creation", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Connection", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Start", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Stop", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Install", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Uninstall", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Keep-Alive", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Errors", "product": "LimaCharlie", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumerToFilter", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumer", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventFilter", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "BIT JOBS Activity", "Sub-Category": "BIT JOBS Activity", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "PowerShell Activity", "Sub-Category": "Script-Block Activity", "product": "LimaCharlie", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Creation", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Termination", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Access", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Image/Library Loaded", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Remote Thread Creation", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Tampering Activity", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Creation", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Opened", "product": "MDE", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Deletion", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Modification", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Renaming", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Creation", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Modification", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Deletion", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Login", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Logoff", "product": "MDE", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "TCP Connection", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "UDP Connection", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "URL", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "DNS Query", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "File Downloaded", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "MD5", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "SHA", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "IMPHASH", "product": "MDE", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Creation", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Modification", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Deletion", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Creation", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Modification", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Deletion", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Creation", "product": "MDE", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Modification", "product": "MDE", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Deletion", "product": "MDE", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Loaded", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Modification", "product": "MDE", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Unloaded", "product": "MDE", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "Virtual Disk Mount", "product": "MDE", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Unmount", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Mount", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Other Relevant Events", "Sub-Category": "Group Policy Modification", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Creation", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Connection", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Start", "product": "MDE", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Stop", "product": "MDE", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Install", "product": "MDE", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Uninstall", "product": "MDE", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Keep-Alive", "product": "MDE", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Errors", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumerToFilter", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumer", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventFilter", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "BIT JOBS Activity", "Sub-Category": "BIT JOBS Activity", "product": "MDE", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "PowerShell Activity", "Sub-Category": "Script-Block Activity", "product": "MDE", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Creation", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Termination", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Access", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Image/Library Loaded", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Remote Thread Creation", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Tampering Activity", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Creation", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Opened", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Deletion", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Modification", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Renaming", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Creation", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Modification", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Deletion", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Login", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Logoff", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "TCP Connection", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "UDP Connection", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "URL", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "DNS Query", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "File Downloaded", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "MD5", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "SHA", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "IMPHASH", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Creation", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Modification", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Deletion", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Creation", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Modification", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Deletion", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Creation", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Modification", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Deletion", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Loaded", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Modification", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Unloaded", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "Virtual Disk Mount", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Unmount", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Mount", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Other Relevant Events", "Sub-Category": "Group Policy Modification", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Creation", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Connection", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Start", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Stop", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Install", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Uninstall", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Keep-Alive", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Errors", "product": "Qualys", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumerToFilter", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumer", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventFilter", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "BIT JOBS Activity", "Sub-Category": "BIT JOBS Activity", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "PowerShell Activity", "Sub-Category": "Script-Block Activity", "product": "Qualys", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Creation", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Termination", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Access", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Image/Library Loaded", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Remote Thread Creation", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Tampering Activity", "product": "Sentinel One", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Creation", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Opened", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Deletion", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Modification", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Renaming", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Creation", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Modification", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Deletion", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Login", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Logoff", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "TCP Connection", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "UDP Connection", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "URL", "product": "Sentinel One", "value": "\ud83c\udf9a\ufe0f"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "DNS Query", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "File Downloaded", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "MD5", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "SHA", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "IMPHASH", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Creation", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Modification", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Deletion", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Creation", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Modification", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Deletion", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Creation", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Modification", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Deletion", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Loaded", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Modification", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Unloaded", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "Virtual Disk Mount", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Unmount", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Mount", "product": "Sentinel One", "value": "\ud83c\udf9a\ufe0f"}, {"Telemetry Feature Category": "Other Relevant Events", "Sub-Category": "Group Policy Modification", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Creation", "product": "Sentinel One", "value": "\ud83c\udf9a\ufe0f"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Connection", "product": "Sentinel One", "value": "\ud83c\udf9a\ufe0f"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Start", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Stop", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Install", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Uninstall", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Keep-Alive", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Errors", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumerToFilter", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumer", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventFilter", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "BIT JOBS Activity", "Sub-Category": "BIT JOBS Activity", "product": "Sentinel One", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "PowerShell Activity", "Sub-Category": "Script-Block Activity", "product": "Sentinel One", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Creation", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Termination", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Access", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Image/Library Loaded", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Remote Thread Creation", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Tampering Activity", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Creation", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Opened", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Deletion", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Modification", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Renaming", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Creation", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Modification", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Deletion", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Login", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Logoff", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "TCP Connection", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "UDP Connection", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "URL", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "DNS Query", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "File Downloaded", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "MD5", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "SHA", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "IMPHASH", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Creation", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Modification", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Deletion", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Creation", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Modification", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Deletion", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Creation", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Modification", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Deletion", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Loaded", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Modification", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Unloaded", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "Virtual Disk Mount", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Unmount", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Mount", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Other Relevant Events", "Sub-Category": "Group Policy Modification", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Creation", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Connection", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Start", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Stop", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Install", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Uninstall", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Keep-Alive", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Errors", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumerToFilter", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumer", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventFilter", "product": "Sysmon", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "BIT JOBS Activity", "Sub-Category": "BIT JOBS Activity", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "PowerShell Activity", "Sub-Category": "Script-Block Activity", "product": "Sysmon", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Creation", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Termination", "product": "Trellix", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Access", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Image/Library Loaded", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Remote Thread Creation", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Tampering Activity", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Creation", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Opened", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Deletion", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Modification", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Renaming", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Creation", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Modification", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Deletion", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Login", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Logoff", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "TCP Connection", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "UDP Connection", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "URL", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "DNS Query", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "File Downloaded", "product": "Trellix", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "MD5", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "SHA", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "IMPHASH", "product": "Trellix", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Creation", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Modification", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Deletion", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Creation", "product": "Trellix", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Modification", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Deletion", "product": "Trellix", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Creation", "product": "Trellix", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Modification", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Deletion", "product": "Trellix", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Loaded", "product": "Trellix", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Modification", "product": "Trellix", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Unloaded", "product": "Trellix", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "Virtual Disk Mount", "product": "Trellix", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Unmount", "product": "Trellix", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Mount", "product": "Trellix", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Other Relevant Events", "Sub-Category": "Group Policy Modification", "product": "Trellix", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Creation", "product": "Trellix", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Connection", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Start", "product": "Trellix", "value": "\u2753"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Stop", "product": "Trellix", "value": "\u2753"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Install", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Uninstall", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Keep-Alive", "product": "Trellix", "value": "\u2753"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Errors", "product": "Trellix", "value": "\u2753"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumerToFilter", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumer", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventFilter", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "BIT JOBS Activity", "Sub-Category": "BIT JOBS Activity", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "PowerShell Activity", "Sub-Category": "Script-Block Activity", "product": "Trellix", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Creation", "product": "Trend Micro", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Termination", "product": "Trend Micro", "value": "\ud83c\udf9a\ufe0f"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Access", "product": "Trend Micro", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Image/Library Loaded", "product": "Trend Micro", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Remote Thread Creation", "product": "Trend Micro", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Tampering Activity", "product": "Trend Micro", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Creation", "product": "Trend Micro", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Opened", "product": "Trend Micro", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Deletion", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Modification", "product": "Trend Micro", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Renaming", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Creation", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Modification", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Deletion", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Login", "product": "Trend Micro", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Logoff", "product": "Trend Micro", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "TCP Connection", "product": "Trend Micro", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "UDP Connection", "product": "Trend Micro", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "URL", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "DNS Query", "product": "Trend Micro", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "File Downloaded", "product": "Trend Micro", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "MD5", "product": "Trend Micro", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "SHA", "product": "Trend Micro", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "IMPHASH", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Creation", "product": "Trend Micro", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Modification", "product": "Trend Micro", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Deletion", "product": "Trend Micro", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Creation", "product": "Trend Micro", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Modification", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Deletion", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Creation", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Modification", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Deletion", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Loaded", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Modification", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Unloaded", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "Virtual Disk Mount", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Unmount", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Mount", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Other Relevant Events", "Sub-Category": "Group Policy Modification", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Creation", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Connection", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Start", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Stop", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Install", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Uninstall", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Keep-Alive", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Errors", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumerToFilter", "product": "Trend Micro", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumer", "product": "Trend Micro", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventFilter", "product": "Trend Micro", "value": "\ud83e\udeb5"}, {"Telemetry Feature Category": "BIT JOBS Activity", "Sub-Category": "BIT JOBS Activity", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "PowerShell Activity", "Sub-Category": "Script-Block Activity", "product": "Trend Micro", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Creation", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Termination", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Access", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Image/Library Loaded", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Remote Thread Creation", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Process Activity", "Sub-Category": "Process Tampering Activity", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Creation", "product": "WatchGuard", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Opened", "product": "WatchGuard", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Deletion", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Modification", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "File Manipulation", "Sub-Category": "File Renaming", "product": "WatchGuard", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Creation", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Modification", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Local Account Deletion", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Login", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "User Account Activity", "Sub-Category": "Account Logoff", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "TCP Connection", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "UDP Connection", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "URL", "product": "WatchGuard", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "DNS Query", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Network Activity", "Sub-Category": "File Downloaded", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "MD5", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "SHA", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Hash Algorithms", "Sub-Category": "IMPHASH", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Creation", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Modification", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Registry Activity", "Sub-Category": "Key/Value Deletion", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Creation", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Modification", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Schedule Task Activity", "Sub-Category": "Scheduled Task Deletion", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Creation", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Modification", "product": "WatchGuard", "value": "\ud83d\udfe7"}, {"Telemetry Feature Category": "Service Activity", "Sub-Category": "Service Deletion", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Loaded", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Modification", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Driver/Module Activity", "Sub-Category": "Driver Unloaded", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "Virtual Disk Mount", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Unmount", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Device Operations", "Sub-Category": "USB Device Mount", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "Other Relevant Events", "Sub-Category": "Group Policy Modification", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Creation", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "Named Pipe Activity", "Sub-Category": "Pipe Connection", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Start", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Stop", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Install", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Uninstall", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Keep-Alive", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "EDR SysOps", "Sub-Category": "Agent Errors", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumerToFilter", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventConsumer", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "WMI Activity", "Sub-Category": "WmiEventFilter", "product": "WatchGuard", "value": "\ud83d\udfe9"}, {"Telemetry Feature Category": "BIT JOBS Activity", "Sub-Category": "BIT JOBS Activity", "product": "WatchGuard", "value": "\ud83d\udfe5"}, {"Telemetry Feature Category": "PowerShell Activity", "Sub-Category": "Script-Block Activity", "product": "WatchGuard", "value": "\ud83d\udfe5"}], "data-a7dec023579d108c9ece722db0d792be": [{"value": "\ud83d\udfe9", "keys": "Implemented"}, {"value": "\ud83d\udfe5", "keys": "Not Implemented"}, {"value": "\ud83d\udfe7", "keys": "Partially Implemented"}, {"value": "\u2753", "keys": "Pending Response"}, {"value": "\ud83e\udeb5", "keys": "Via Windows EventLogs (EDR is inspecting windows event logs to collect the telemetry)"}, {"value": "\ud83c\udf9a\ufe0f", "keys": "Via EnablingTelemetry (Additional telemetry that can be enabled easily as part of the EDR product but is not ON by default.)"}]}};
  const embedOpt = {"mode": "vega-lite"};
  vegaEmbed('#vis', spec, embedOpt).catch(console.error);
</script>
</body>
</html>